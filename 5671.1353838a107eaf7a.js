"use strict";var Ue=Object.defineProperty,Se=Object.defineProperties,be=Object.getOwnPropertyDescriptors,Jt=Object.getOwnPropertySymbols,je=Object.prototype.hasOwnProperty,xe=Object.prototype.propertyIsEnumerable,Xt=(tt,B,e)=>B in tt?Ue(tt,B,{enumerable:!0,configurable:!0,writable:!0,value:e}):tt[B]=e,Ct=(tt,B)=>{for(var e in B||(B={}))je.call(B,e)&&Xt(tt,e,B[e]);if(Jt)for(var e of Jt(B))xe.call(B,e)&&Xt(tt,e,B[e]);return tt},_t=(tt,B)=>Se(tt,be(B));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5671],{25706:(tt,B,e)=>{e.d(B,{Z:()=>X});var O=e(17626),G=(e(29132),e(79608)),R=e(23719),J=e(86810),_=e(62208),j=e(77712),W=(e(85931),e(8314),e(66656)),i=e(76898),H=e(90912),rt=e(40405),Z=e(49672);let F=class extends((0,G.J)(J.wq)){constructor(Q){super(Q),this.type="plane",this.position=null,this.heading=0,this.tilt=0,this.width=10,this.height=10}equals(Q){return this.heading===Q.heading&&this.tilt===Q.tilt&&(0,_._W)(this.position,Q.position)&&this.width===Q.width&&this.height===Q.height}};(0,O._)([(0,j.Cb)({readOnly:!0,json:{read:!1,write:!0}})],F.prototype,"type",void 0),(0,O._)([(0,j.Cb)({type:Z.Z}),(0,rt.B)()],F.prototype,"position",void 0),(0,O._)([(0,j.Cb)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,rt.B)(),(0,W.p)(Q=>R.BV.normalize((0,H.q9)(Q),0,!0))],F.prototype,"heading",void 0),(0,O._)([(0,j.Cb)({type:Number,nonNullable:!0,range:{min:0,max:360}}),(0,rt.B)(),(0,W.p)(Q=>R.BV.normalize((0,H.q9)(Q),0,!0))],F.prototype,"tilt",void 0),(0,O._)([(0,j.Cb)({type:Number,nonNullable:!0}),(0,rt.B)()],F.prototype,"width",void 0),(0,O._)([(0,j.Cb)({type:Number,nonNullable:!0}),(0,rt.B)()],F.prototype,"height",void 0),F=(0,O._)([(0,i.j)("esri.analysis.SlicePlane")],F);const X=F},34013:(tt,B,e)=>{e.d(B,{I:()=>it,b:()=>Q});var O=e(62208),T=e(99770),G=e(6945),R=e(78925),J=e(24255),_=e(10109),j=e(67022),S=e(33726),$=e(2166),W=e(95285),i=e(65787),H=e(17625),rt=e(22355),Z=e(35387),F=e(42743),X=e(16396);function Q(f){const m=new rt.kG;(0,$.S)(m,f),m.include(J.w),m.attributes.add(X.T.POSITION,"vec3"),m.attributes.add(X.T.UV0,"vec2"),m.varyings.add("vpos","vec3"),f.hasMultipassTerrain&&m.varyings.add("depth","float");const{vertex:lt,fragment:gt}=m;return lt.uniforms.add(new W.A("textureCoordinateScaleFactor",k=>(0,O.pC)(k.texture)&&(0,O.pC)(k.texture.descriptor.textureCoordinateScaleFactor)?k.texture.descriptor.textureCoordinateScaleFactor:T.O)),lt.code.add(H.H`
    void main(void) {
      vpos = position;
      ${f.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0 * textureCoordinateScaleFactor;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `),m.include(R.f5,f),m.include(_.l,f),gt.uniforms.add([new Z.A("tex",k=>k.texture),new i.p("opacity",k=>k.opacity)]),m.varyings.add("vTexCoord","vec2"),f.output===G.H.Alpha?gt.code.add(H.H`
    void main() {
      discardBySlice(vpos);
      ${f.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture2D(tex, vTexCoord).a * opacity;
      if (alpha  < ${H.H.float(j.F)}) {
        discard;
      }

      gl_FragColor = vec4(alpha);
    }
    `):(gt.include(S.Y),gt.code.add(H.H`
    void main() {
      discardBySlice(vpos);
      ${f.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      gl_FragColor = texture2D(tex, vTexCoord) * opacity;

      if (gl_FragColor.a < ${H.H.float(j.F)}) {
        discard;
      }

      gl_FragColor = highlightSlice(gl_FragColor, vpos);
      ${f.transparencyPassType===F.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
    `)),m}const it=Object.freeze(Object.defineProperty({__proto__:null,build:Q},Symbol.toStringTag,{value:"Module"}))},30750:(tt,B,e)=>{e.d(B,{S:()=>S,b:()=>j});var O=e(2166),T=e(69960),G=e(65787),R=e(17625),J=e(22355),_=e(16396);function j($){const W=new J.kG;return W.extensions.add("GL_OES_standard_derivatives"),(0,O.S)(W,$),W.attributes.add(_.T.POSITION,"vec3"),W.attributes.add(_.T.UV0,"vec2"),W.varyings.add("vUV","vec2"),W.vertex.code.add(R.H`void main(void) {
vUV = uv0;
gl_Position = proj * view * vec4(position, 1.0);
}`),W.fragment.uniforms.add([new T.N("backgroundColor",i=>i.backgroundColor),new T.N("gridColor",i=>i.gridColor),new G.p("gridWidth",i=>i.gridWidth)]),W.fragment.code.add(R.H`void main() {
const float LINE_WIDTH = 1.0;
vec2 uvScaled = vUV * gridWidth;
vec2 gridUV = (fract(uvScaled + 0.5) - 0.5) / (LINE_WIDTH * fwidth(uvScaled));
vec2 grid = (1.0 - step(0.5, gridUV)) * step(-0.5, gridUV);
grid.x *= step(0.5, uvScaled.x) * step(uvScaled.x, gridWidth - 0.5);
grid.y *= step(0.5, uvScaled.y) * step(uvScaled.y, gridWidth - 0.5);
float gridFade = max(grid.x, grid.y);
float gridAlpha = gridColor.a * gridFade;
gl_FragColor =
vec4(backgroundColor.rgb * backgroundColor.a, backgroundColor.a) * (1.0 - gridAlpha) +
vec4(gridColor.rgb, 1.0) * gridAlpha;
}`),W}const S=Object.freeze(Object.defineProperty({__proto__:null,build:j},Symbol.toStringTag,{value:"Module"}))},40405:(tt,B,e)=>{e.d(B,{B:()=>Q});var O=e(15861),T=e(62208),G=e(22558),R=e(21726),J=e(35948),_=e(34117),j=e(31283),S=e(77712);function $(h){return H[function W(h){return h instanceof Blob?h.type:function i(h){const p=(0,R.Ml)(h);return F[p]||rt}(h.url)}(h)]||Z}const H={},rt="text/plain",Z=H[rt],F={png:"image/png",jpeg:"image/jpeg",jpg:"image/jpg",bmp:"image/bmp",gif:"image/gif",json:"application/json",txt:"text/plain",xml:"application/xml",svg:"image/svg+xml",zip:"application/zip",pbf:"application/vnd.mapbox-vector-tile",gz:"application/gzip"};for(const h in F)H[F[h]]=h;var X=e(29840);function Q(h){const p=(0,T.pC)(h)&&h.origins?h.origins:[void 0];return(C,L)=>{const g=function it(h,p,C){if((0,T.pC)(h)&&"resource"===h.type)return function f(h,p,C){const L=(0,_.VZ)(p,C);return{type:String,read:(g,v,D)=>{const A=(0,X.r)(g,v,D);return L.type===String?A:"function"==typeof L.type?new L.type({url:A}):void 0},write:{writer(g,v,D,A){if(!A||!A.resources)return"string"==typeof g?void(v[D]=(0,X.t)(g,A)):void(v[D]=g.write({},A));const U=function mt(h){return(0,T.Wi)(h)?null:"string"==typeof h?h:h.url}(g),P=U?(0,X.t)(U,_t(Ct({},A),{verifyItemRelativeUrls:A&&A.verifyItemRelativeUrls?{writtenUrls:A.verifyItemRelativeUrls.writtenUrls,rootPath:null}:null}),X.M.NO):null,Y=L.type!==String&&(!(0,G.l)(this)||A&&A.origin&&this.originIdOf(C)>(0,j.M9)(A.origin));A&&A.portalItem&&(0,T.pC)(P)&&!(0,R.YP)(P)?Y?function lt(h,p,C,L,g,v,D,A){const U=D.portalItem.resourceFromPath(L),P=At(C,L,D);$(P)===(0,R.Ml)(U.path)?(k(h,p,U,P,D.resources.toUpdate),g[v]=L):m(h,p,C,L,g,v,D,A)}(this,C,g,P,v,D,A,h):function gt(h,p,C,L){L.resources.toKeep.push({resource:L.portalItem.resourceFromPath(h)}),p[C]=h}(P,v,D,A):A&&A.portalItem&&((0,T.Wi)(P)||(0,T.pC)((0,X.i)(P))||(0,R.jc)(P)||Y)?m(this,C,g,P,v,D,A,h):v[D]=P}}}}(h,p,C);switch((0,T.pC)(h)&&h.type?h.type:"other"){case"other":return{read:!0,write:!0};case"url":{const{read:L,write:g}=X.p;return{read:L,write:g}}}}(h,C,L);for(const v of p){const D=(0,S.CJ)(C,v,L);for(const A in g)D[A]=g[A]}}}function m(h,p,C,L,g,v,D,A){const U=(0,J.D)(),P=At(C,L,D),Y=(0,R.v_)((0,T.U2)(A,"prefix"),U),w=`${Y}.${$(P)}`,ct=D.portalItem.resourceFromPath(w);(0,R.jc)(L)&&D.resources.pendingOperations.push(function et(h){return ht.apply(this,arguments)}(L).then(at=>{ct.path=`${Y}.${$(at)}`,g[v]=ct.itemRelativeUrl}).catch(()=>{})),k(h,p,ct,P,D.resources.toAdd),g[v]=ct.itemRelativeUrl}function k(h,p,C,L,g){g.push({resource:C,content:L,finish:v=>{!function ot(h,p,C){"string"==typeof h[p]?h[p]=C.url:h[p].url=C.url}(h,p,v)}})}function At(h,p,C){return"string"==typeof h?{url:p}:new Blob([JSON.stringify(h.toJSON(C))],{type:"application/json"})}function ht(){return(ht=(0,O.Z)(function*(h){const p=(yield Promise.resolve().then(e.bind(e,84792))).default,{data:C}=yield p(h,{responseType:"blob"});return C})).apply(this,arguments)}},22558:(tt,B,e)=>{function O(T){return T&&"getAtOrigin"in T&&"originOf"in T}e.d(B,{l:()=>O})},25601:(tt,B,e)=>{e.d(B,{O:()=>J,s:()=>_});const O="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAnFBMVEUAAAD/gAD/gAD/cAD/gAD/eAD/gAD/eQD/gAD/egD/gAD/ewD/gAD/fAD/gAD/fAD/gAD/fAD/fQD/fQD/fQD/fQD/fQD/fgD/jR7/mjn/mjf/p1H/plH/smf/sWb/vHr/u3n/xYz/xIv/zZz/zJv/zJr/1Kv/1Kr/06r/06n/27n/27f/4cX/4cT/59D/7dr/8uX/9u7/+/f////u2EN0AAAAM3RSTlMACBAQICAoKDAwODhAQEhIUFBYYGhweICIkJCXmJ+gp6ivsLe4uL+/wMDHx8/P19/n7/cWvjXwAAACeUlEQVR42tWX3XqiMBCGY2pbtbrUnzhhdak/lHWliJD7v7fdJ+KG5AMhh30P8zCTmS+TycDaeBoHi5Wgf4jVYvbKmRfPgSAHMX9mPRnM1tSIGHM/c2QddLp4c8wxCvYIvqROBPfbHlm/sRYC6smMNTKn3sxZAyvyYNW1v38MM/IkcPQnZHPMLtciz9P9hhqwzoLD+cnfpTIUaYinyZlBkE2YKZcMXCyN/YhsPkuFlMfWJLiwo89VMxfpJDForMCwuG+Zx7ttGO2S/w4LJ42ZURDty5M0a4dqsZAQAihQfXqWdlhnpcmdEPAI0tv2EbnsbsKmdgi6/1GN7T1XJLx5sF0P9SWABMC+co5JBE4Ge/1NTM3EGIJgjFONXCdAbeQYwhN7pRrRV20LJNIhWOczdu+xPFzIBiQ62iIsyIOTvlZUY+HXySLQaMUEeSC1CPYxENIlwk+q8e0clFAIfiKG+qpaIvod4wfU8sqvkDLda+xCCqgDaAk7uyeNqD+feFlfGCcg3Hzsk+xS7Nz1Aq4CcauhhMc0uxaqIgcFsF0J+1WQyoCN7Y9ezeCVH5LhSxmyRvsihKbK1m7LafpSpkpj6yJgtsiVBh6AX5UyCVmMbrNpcwj5/h6DPN79JjAiQAhXVeN6SZI0q5bQnn4wBiHEqpUybp1ZJzWxStVCHhKhAhVLp/Emh6trHpGLaB6yZHk7wu3Z+ChOxhwUNEmYYjpUvqJDksSHraQmJm2DdqQK6sGUObybYtpSN+8Phm3pN2xjDH33R6b0CKxAZNLvl8foD3BBnSw5e8RI+G2P8GD9wHw6YN3wkfA0R4Zz8CGCIfOCv8zM738walXuLw6nXBvPr8wvAAAAAElFTkSuQmCC",T="data:image/png;base64,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";var G=e(81695);const R={mipmap:!0,preMultiplyAlpha:!0,width:64,height:64};function J(j){return j.fromData(O,()=>new G.x(O,R))}function _(j){return j.fromData(T,()=>new G.x(T,R))}},2589:(tt,B,e)=>{e.d(B,{A:()=>k,C4:()=>dt,Ck:()=>rt,DG:()=>It,FI:()=>Et,Fj:()=>X,GI:()=>_,Lj:()=>P,MO:()=>U,MP:()=>wt,N3:()=>i,Ox:()=>C,SE:()=>At,SV:()=>Z,Vj:()=>F,Wg:()=>A,X3:()=>ot,ZE:()=>ht,a$:()=>v,am:()=>j,cU:()=>mt,fe:()=>S,go:()=>H,gw:()=>W,hB:()=>at,hf:()=>lt,kM:()=>L,kq:()=>m,lY:()=>et,nw:()=>h,on:()=>D,q7:()=>f,q_:()=>p,t:()=>w,tW:()=>J,uT:()=>ct,vh:()=>g,wk:()=>gt,xJ:()=>$,zI:()=>Y});var O=e(8314),T=e(21286),G=e(28093),R=e(4794);const J=(0,O.Z)("mac")?"Meta":"Control",_="Shift",j=2,S=1.15,$=1.15,W=1.1,i=2500,H=.02,rt=Math.cos((0,T.Vl)(45)),Z=Math.cos((0,T.Vl)(5)),F=.95,X=.3,it=(0,G.f)(1,.5,0),f=2,m=1,lt=(0,R.b)([...it,.7]),gt=[0,0,0,.04],k=(0,R.b)([...it,.5]),At=(0,R.b)([...it,1]),et=(0,R.f)(1,1,1,1),ht=(0,R.f)(1,.8,.6,1),mt=(0,R.f)(1,.93,.86,1),ot=(0,R.b)([...it,1]),h=(0,R.b)([...it,1]),p=3,C=11,L=22.5,g=40,v=48,D=2.25,A=(0,R.b)([...it,1]),U=4,P=1,Y=.3,w=6,ct=4,at=12,dt=40,Et=27,It=1600,wt=.4},96298:(tt,B,e)=>{e.d(B,{do:()=>Dt,Df:()=>Wt,lX:()=>Lt,aZ:()=>Rt,ww:()=>Ot,zY:()=>ue,Lw:()=>jt,fT:()=>ce,R_:()=>Me,i3:()=>Ee,j6:()=>ie,vw:()=>Oe,Ju:()=>Ae,Rd:()=>ge,Pt:()=>De,TA:()=>de,J0:()=>xt,lR:()=>Le,Hq:()=>ye,m3:()=>Qt,oP:()=>Zt,Sc:()=>Nt,vc:()=>Yt,Q3:()=>le,EC:()=>fe,A5:()=>ve,wj:()=>me,tF:()=>he}),e(29132);var T=e(25706),R=(e(8314),e(63290)),J=e(21286),_=e(62208),j=e(23841),S=e(28347),$=e(43703),W=e(48977),i=e(84161),H=e(28093),rt=e(55915),Z=e(78172),F=e(41743),X=e(90014),Q=e(70562),it=e(34054),f=e(26242),m=e(2589),lt=e(54865),gt=e(45403),k=e(19142),At=e(87469),et=e(993),ht=e(4794),mt=e(53928),ot=e(57521),h=e(40723),p=e(6945),C=e(87601),L=e(60881),g=e(5894),v=e(60909),D=e(57623),A=e(17625),U=e(651),P=e(91056),Y=e(39114),w=e(12407),ct=e(30750),at=e(67969),dt=e(2078);class Et extends A.K{constructor(){super(...arguments),this.backgroundColor=(0,ht.f)(1,0,0,.5),this.gridColor=(0,ht.f)(0,1,0,.5),this.gridWidth=4}}class It extends P.A{initializeProgram(s){const a=It.shader.get().build(this.configuration);return new w.$(s.rctx,a,Y.i)}initializePipeline(){return(0,dt.sm)({blending:(0,dt.wK)(at.zi.ONE,at.zi.ONE,at.zi.ONE_MINUS_SRC_ALPHA,at.zi.ONE_MINUS_SRC_ALPHA),depthTest:{func:at.wb.LESS},colorWrite:dt.BK})}}It.shader=new U.J(ct.S,()=>e.e(5175).then(e.bind(e,15175)));class wt extends h.F5{constructor(s){super(s,new kt),this._config=new C.m}intersect(s,a,l,c,u,d,E){return(0,D.Bw)(s,a,c,u,d,void 0,E)}createBufferWriter(){return new v.G_(v.W1)}requiresSlot(s){return s===g.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL}createGLMaterial(s){return s.output===p.H.Color?new $t(s):null}getConfiguration(){return this._config}}class $t extends L.Z{constructor(s){super(s),this.ensureTechnique(It,null)}beginSlot(){return(0,_.Wg)(this.technique)}}class kt extends Et{constructor(){super(...arguments),this.renderOccluded=h.yD.Occlude}}class qt extends mt._{constructor(s){super(s),this._material=null,this._renderOccluded=h.yD.OccludeAndTransparent,this._gridWidth=1,this._gridColor=(0,ht.f)(1,0,0,1),this._backgroundColor=(0,ht.f)(1,0,0,1),this.applyProps(s)}get renderOccluded(){return this._renderOccluded}set renderOccluded(s){s!==this._renderOccluded&&(this._renderOccluded=s,this._updateMaterial())}get gridWidth(){return this._gridWidth}set gridWidth(s){this._gridWidth!==s&&(this._gridWidth=s,this._updateMaterial())}get gridColor(){return this._gridColor}set gridColor(s){(0,et.c)(this._gridColor,s),this._updateMaterial()}get backgroundColor(){return this._backgroundColor}set backgroundColor(s){(0,et.c)(this._backgroundColor,s),this._updateMaterial()}createExternalResources(){this._material=new wt(this.materialParameters)}destroyExternalResources(){this._material=null}forEachExternalMaterial(s){(0,_.pC)(this._material)&&s(this._material)}createGeometries(s){if((0,_.pC)(this._material)){const a=ot.Z.createSquareGeometry();s.addGeometry(a,this._material)}}get materialParameters(){return{backgroundColor:this._backgroundColor,gridWidth:this._gridWidth,gridColor:this._gridColor,renderOccluded:this._renderOccluded}}_updateMaterial(){(0,_.pC)(this._material)&&this._material.setParameters(this.materialParameters)}}var Ft=e(60011),te=e(26046),Ut=e(42743),ee=e(52107),St=e(16396),bt=e(92972),ne=e(79967),Kt=e(49580),re=e(92222),ut=e(33786);e(2004);const se=R.Z.getLogger("esri.views.3d.interactive.analysisTools.slice.sliceToolUtils");function ie(t,s,a,l,c,u,d,E){return function oe(t,s,a,l,c,u){const d=(0,i.e)(t,s),E=f.WM.get(),b=f.WM.get();switch(l===Ot.HORIZONTAL_OR_VERTICAL?Math.abs(d)>m.Ck?Ot.HORIZONTAL:Ot.VERTICAL:l){case Ot.VERTICAL:{const N=Math.abs(d)<=m.SV?t:a.viewUp;(0,i.f)(E,N,s),(0,i.c)(b,s);break}case Ot.HORIZONTAL:(0,i.f)(E,a.viewUp,s),(0,i.f)(b,s,E);break;case Ot.TILTED:{const N=Math.abs(d)<=m.SV?s:a.viewUp;(0,i.f)(E,N,t),(0,i.f)(b,t,E);break}}const K=(0,i.f)(f.WM.get(),E,b);(0,i.e)(K,a.viewForward)>0&&(0,i.g)(b,b,-1),(0,i.n)(c,E),(0,i.n)(u,b)}(s,d.worldUpAtPosition(t,f.WM.get()),c,u,E.basis1,E.basis2),(0,i.g)(E.basis1,E.basis1,a),(0,i.g)(E.basis2,E.basis2,l),(0,i.c)(E.origin,t),(0,X.my)(E.basis2,E.basis1,E.origin,E.plane),E}function le(t,s,a,l,c,u){const d=(0,i.c)(f.WM.get(),c.origin);(0,i.a)(d,d,(0,i.g)(f.WM.get(),c.basis1,t.direction[0]<0?1:-1)),(0,i.a)(d,d,(0,i.g)(f.WM.get(),c.basis2,t.direction[1]<0?1:-1));const E=(0,i.l)(c.basis1),b=(0,i.l)(c.basis2),K=(0,i.b)(f.WM.get(),a,d),N=(0,i.b)(f.WM.get(),s,d);let y=0,nt=0;if(xt(t)){const vt=jt(c),Pt=jt(u);y=E-.5*t.direction[0]*(0,i.e)(c.basis1,N)/E,nt=b-.5*t.direction[1]*(0,i.e)(c.basis2,N)/b;const yt=Pt/vt;y*=yt,nt*=yt}const pt=y+.5*t.direction[0]*(0,i.e)(c.basis1,K)/E,q=nt+.5*t.direction[1]*(0,i.e)(c.basis2,K)/b,x=(0,i.g)(f.WM.get(),c.basis1,pt/E),st=(0,i.g)(f.WM.get(),c.basis2,q/b);(pt<=0||Gt(u.origin,x,l)<=m.DG)&&(0,i.c)(x,u.basis1),(q<=0||Gt(u.origin,st,l)<=m.DG)&&(0,i.c)(st,u.basis2);const ft=(0,i.c)(f.WM.get(),d);return(0,i.a)(ft,ft,(0,i.g)(f.WM.get(),x,t.direction[0]<0?-1:1)),(0,i.a)(ft,ft,(0,i.g)(f.WM.get(),st,t.direction[1]<0?-1:1)),(0,F.f)(ft,x,st,u)}function ce(t,s){return m.MP*Math.min(s.width,s.height)*s.computeRenderPixelSizeAt(t)}function de(t,s,a,l){const c=(0,i.f)(f.WM.get(),s,a);return(0,i.f)(c,c,s),(0,X.Yq)(t,c,l)}function ue(t,s){return(0,k.Aq)(t.basis1,t.basis2,t.origin,s)}function ge(t,s,a,l){const c=s.worldUpAtPosition(t.origin,f.WM.get()),u=f.WM.get();switch(a){case Rt.HEADING:(0,i.c)(u,c);break;case Rt.TILT:(0,i.c)(u,t.basis1)}return(0,X.Yq)(t.origin,u,l)}function he(t,s,a,l){const c=Ht(a,Mt.NEGATIVE_X),u=f.MP.get();(0,S.g)(u,s,c.edge*Math.PI/2);const d=(0,i.n)(f.WM.get(),c.basis);let E=(0,i.g)(f.WM.get(),d,c.direction*l.computeScreenPixelSizeAt(c.position)*m.vh);(0,i.a)(E,E,c.position);const b=l.projectToRenderScreen(E,(0,j.Wv)(f.WM.get())),K=function pe(t,s){const[a,l,c,u]=t.viewport,d=Math.min(c,u)/16;let E=!0;return s[0]<a+d?(s[0]=a+d,E=!1):s[0]>a+c-d&&(s[0]=a+c-d,E=!1),s[1]<l+d?(s[1]=l+d,E=!1):s[1]>l+u-d&&(s[1]=l+u-d,E=!1),E}(l,b);(0,te.Bh)(l,b,Bt),(0,i.n)(Bt.direction,Bt.direction);const N=f.WM.get();!K&&(0,F.i)(a,Bt,N)&&(E=N),u[12]=0,u[13]=0,u[14]=0,t.modelTransform=u,t.renderLocation=(0,H.a)(E),K?t.state|=Wt:t.state&=~Wt}function fe(t,s,a,l){const c=(0,i.l)(l.basis1),u=(0,i.l)(l.basis2),d=zt(l),E=jt(l),b=(0,i.s)(f.WM.get(),0,0,0);(0,i.a)(b,(0,i.g)(f.WM.get(),l.basis1,s.direction[0]),(0,i.g)(f.WM.get(),l.basis2,s.direction[1])),(0,i.a)(b,l.origin,b);let K=0,N=1;if(xt(s))1===s.direction[0]&&-1===s.direction[1]?K=Tt:1===s.direction[0]&&1===s.direction[1]?K=Math.PI:-1===s.direction[0]&&1===s.direction[1]&&(K=3*Math.PI/2),N=E;else{const nt=0!==s.direction[0]?1:2;K=1===nt?Tt:0,N=(1===nt?u:c)-d}const y=(0,S.b)(f.MP.get(),K);(0,S.h)(y,y,(0,i.s)(f.WM.get(),N,N,N)),(0,S.m)(y,a,y),y[12]=0,y[13]=0,y[14]=0,t.modelTransform=y,t.renderLocation=b}function ve(t,s,a,l){const c=l.worldUpAtPosition(a.origin,f.WM.get()),u=Ht(a,Mt.POSITIVE_X),d=(0,S.b)(f.MP.get(),u.edge*Math.PI/2);(0,S.r)(d,d,-Vt(a,c)),(0,S.m)(d,s,d),d[12]=0,d[13]=0,d[14]=0,t.modelTransform=d,t.renderLocation=u.position}function me(t,s,a){const l=Ht(a,Mt.POSITIVE_Y),c=(0,S.b)(f.MP.get(),l.edge*Math.PI/2);(0,S.r)(c,c,Tt),(0,S.m)(c,s,c),c[12]=0,c[13]=0,c[14]=0,t.modelTransform=c,t.renderLocation=l.position}var Mt,t;function Ht(t,s){switch(s){case Mt.POSITIVE_X:return{basis:t.basis1,direction:1,position:(0,i.a)(f.WM.get(),t.origin,t.basis1),edge:s};case Mt.POSITIVE_Y:return{basis:t.basis2,direction:1,position:(0,i.a)(f.WM.get(),t.origin,t.basis2),edge:s};case Mt.NEGATIVE_X:return{basis:t.basis1,direction:-1,position:(0,i.b)(f.WM.get(),t.origin,t.basis1),edge:s};case Mt.NEGATIVE_Y:return{basis:t.basis2,direction:-1,position:(0,i.b)(f.WM.get(),t.origin,t.basis2),edge:s}}}function Gt(t,s,a){const l=a.projectToRenderScreen((0,i.a)(f.WM.get(),t,s),(0,j.Wv)(f.WM.get())),c=a.projectToRenderScreen((0,i.b)(f.WM.get(),t,s),(0,j.Wv)(f.WM.get()));return(0,i.p)((0,i.b)(l,l,c))}function zt(t){const s=(0,i.l)(t.basis1),a=(0,i.l)(t.basis2);return m.zI*Math.min(s,a)}function jt(t){return zt(t)}function xt(t){return 0!==t.direction[0]&&0!==t.direction[1]}function De(t,s=Lt.CENTER_ON_ARROW){const a=s===Lt.CENTER_ON_CALLOUT?m.vh:0,l=[(0,H.f)(a,0,-m.a$/2),(0,H.f)(a,0,m.a$/2)],c=function Te(t,s){const a=(0,i.b)((0,H.c)(),t[t.length-1],t[t.length-2]);if((0,i.n)(a,a),(0,i.g)(a,a,m.hB),(0,i.a)(a,a,t[t.length-1]),s){const l=(0,i.b)((0,H.c)(),t[0],t[1]);return(0,i.n)(l,l),(0,i.g)(l,l,m.hB),(0,i.a)(l,l,t[0]),[l,...t,a]}return[...t,a]}(l,!0),u=(x,st)=>function Pe(t,s,a){const l=c=>{const u=(c?s:t).slice(0),d=(0,i.b)(f.WM.get(),u[0],u[1]);(0,i.n)(d,d);const E=(0,i.b)(f.WM.get(),u[u.length-1],u[u.length-2]);if((0,i.n)(E,E),a.padding>0){const vt=(0,i.g)((0,H.c)(),E,-a.padding);if(u[u.length-1]=(0,i.a)(vt,vt,u[u.length-1]),a.bothEnds){const Pt=(0,i.g)((0,H.c)(),d,-a.padding);u[0]=(0,i.a)(Pt,Pt,u[0])}}const b=c?a.tipFocusMultiplier:1,K=a.tipLength*(a.focusTipLength?b:1),N=a.tipRadius*b,y=(0,S.i)(f.MP.get());if(a.padding>0){const vt=K/4,Pt=(0,i.s)(f.WM.get(),0,vt,0),yt=1+a.padding/vt;(0,S.j)(y,y,Pt),(0,S.h)(y,y,(0,i.s)(f.WM.get(),yt,yt,yt)),(0,S.j)(y,y,(0,i.g)(Pt,Pt,-1/yt))}const nt=(0,S.i)((0,$.c)()),pt=(0,H.f)(0,1,0),q=(0,S.k)((0,$.c)(),(0,W.r)(f.vD.get(),pt,E));q[12]=u[u.length-1][0],q[13]=u[u.length-1][1],q[14]=u[u.length-1][2],(0,S.m)(q,q,y);const x=[{part:"tube",geometry:Ce(a.tubeRadius*(c?a.tubeFocusMultiplier:1)+a.padding,a.flat,u),transform:nt}];let st,ft;if((0,_.pC)(a.flat)?st=ot.Z.createExtrudedTriangle(K,N,N,a.flat.thickness):(st=ot.Z.createConeGeometry(K,N,24,!1,!1,!0),ft=ot.Z.createConeGeometry(K,N,24,!1,!0,!1)),x.push({part:"tip",geometry:st,transform:q}),ft&&x.push({part:"cap",geometry:ft,transform:q}),a.bothEnds){const vt=(0,S.k)((0,$.c)(),(0,W.r)(f.vD.get(),pt,d));vt[12]=u[0][0],vt[13]=u[0][1],vt[14]=u[0][2],(0,S.m)(vt,vt,y),x.push({part:"tip",geometry:st,transform:vt}),ft&&x.push({part:"cap",geometry:ft,transform:vt})}return x};return{normal:l(!1),focused:l(!0)}}(l,l,{tubeRadius:m.q_,tipRadius:m.Ox,tipLength:m.kM,tubeFocusMultiplier:m.fe,tipFocusMultiplier:m.xJ,padding:x,bothEnds:!0,flat:null,focusTipLength:!0,addCap:st}),d=u(0,!1),E=u(m.on,!0),b=new bt.E({color:m.lY,cullFace:Ut.Vr.Back,renderOccluded:h.yD.Opaque}),K=new bt.E({color:m.ZE,cullFace:Ut.Vr.Back,renderOccluded:h.yD.Opaque}),N=new bt.E({color:m.cU,cullFace:Ut.Vr.Back,renderOccluded:h.yD.Opaque}),y=new bt.E({color:m.nw,transparent:!0,writeDepth:!1,cullFace:Ut.Vr.Front,renderOccluded:h.yD.Transparent}),nt=ot.Z.createPolylineGeometry([[a,0,0],[a-m.vh,0,0]]),pt=ot.Z.createPolylineGeometry([[a,0,0],[a-m.vh,0,0]]),q=new Kt.Y({color:m.X3,renderOccluded:h.yD.OccludeAndTransparent});return new gt.Z({view:t,renderObjects:[...d.normal.map(({part:x,geometry:st,transform:ft})=>({geometry:st,material:"tip"===x?b:"cap"===x?K:N,transform:ft,stateMask:ut.Q9.Unfocused|Dt})),...E.normal.map(({geometry:x,transform:st})=>({geometry:x,material:y,transform:st,stateMask:ut.Q9.Unfocused|Dt})),{geometry:nt,material:q,stateMask:ut.Q9.Unfocused|Dt|Wt},...d.focused.map(({part:x,geometry:st,transform:ft})=>({geometry:st,material:"tip"===x?b:"cap"===x?K:N,transform:ft,stateMask:ut.Q9.Focused|Dt})),...E.focused.map(({geometry:x,transform:st})=>({geometry:x,material:y,transform:st,stateMask:ut.Q9.Focused|Dt})),{geometry:pt,material:q,stateMask:ut.Q9.Focused|Dt|Wt}],autoScaleRenderObjects:!1,collisionType:{type:"line",paths:[c]},collisionPriority:1,radius:m.Ox,state:Dt})}function Ae(t,s){const a=new ne.j({transparent:!0,writeDepth:!1,textureId:s.id,renderOccluded:h.yD.Opaque}),l=m.C4,c=m.FI,u=c*m.gw,d=y=>{const nt=new Uint32Array([0,1,2,2,3,0]);return new ee.Z([[St.T.POSITION,{size:3,data:[l-y,-y,0,l+y,-y,0,l+y,y,0,l-y,y,0],exclusive:!0}],[St.T.UV0,{size:2,data:[0,0,1,0,1,1,0,1]}]],[[St.T.POSITION,nt],[St.T.UV0,nt]])},E=ot.Z.createPolylineGeometry([[0,0,0],[l-c,0,0]]),b=ot.Z.createPolylineGeometry([[0,0,0],[l-u,0,0]]),K=new Kt.Y({color:m.SE,renderOccluded:h.yD.OccludeAndTransparent}),N=[{geometry:d(c),material:a,stateMask:ut.Q9.Unfocused|Dt},{geometry:E,material:K,stateMask:ut.Q9.Unfocused|Dt},{geometry:d(u),material:a,stateMask:ut.Q9.Focused|Dt},{geometry:b,material:K,stateMask:ut.Q9.Focused|Dt}];return new gt.Z({view:t,renderObjects:N,autoScaleRenderObjects:!1,collisionType:{type:"disc",direction:[0,0,1],offset:[l,0,0]},collisionPriority:1,radius:c/2,state:Dt})}function Ee(t){return new At.r({view:t,attached:!0,color:m.hf,width:m.kq,writeDepthEnabled:!1,renderOccluded:h.yD.OccludeAndTransparent,geometry:[[[-1,-1,0],[1,-1,0],[1,1,0],[-1,1,0],[-1,-1,0]]]})}function Me(t){return new qt({view:t,attached:!0,backgroundColor:[...m.wk],gridColor:m.A,gridWidth:4,renderOccluded:h.yD.OccludeAndTransparent})}function Oe(t,s){const a=xt(s),l=a?[(0,H.f)(1,0,0),(0,H.f)(0,0,0),(0,H.f)(0,1,0)]:[(0,H.f)(1,0,0),(0,H.f)(-1,0,0)],c=ot.Z.createPolylineGeometry(l),u=m.Wg,b=a?m.MO:m.Lj,K=b*m.am,N=m.Lj,y=q=>q>1?(q=>new re.U({color:u,width:q,renderOccluded:h.yD.OccludeAndTransparent}))(q):new Kt.Y({color:u,renderOccluded:h.yD.OccludeAndTransparent}),nt=[{geometry:c,material:y(b),stateMask:ut.Q9.Unfocused|Nt},{geometry:c,material:y(K),stateMask:ut.Q9.Focused|Nt},{geometry:c,material:y(N),stateMask:Yt}],pt=new gt.Z({view:t,renderObjects:nt,collisionType:{type:"line",paths:[l]},autoScaleRenderObjects:!1,worldSized:!0,radius:a?m.t:m.uT});return pt.state=Nt,pt}function Ce(t,s,a){const l=[];if((0,_.pC)(s))l.push([t,s.thickness/2],[-t,s.thickness/2],[-t,-s.thickness/2],[t,-s.thickness/2]);else for(let u=0;u<12;u++){const d=u/12*2*Math.PI;l.push([Math.cos(d)*t,Math.sin(d)*t])}return ot.Z.createPathExtrusionGeometry(l,a,[],[],!1)}function ye(t,s,a,l=new T.Z){if((0,_.Wi)(t))return null;const{renderCoordsHelper:c}=s,u=c.fromRenderCoords(t.origin,s.spatialReference);if((0,_.Wi)(u))return null;const d=(0,rt.fM)(u,a);if((0,_.Wi)(d))return null;l.position=d;const E=c.worldUpAtPosition(t.origin,f.WM.get()),b=c.worldBasisAtPosition(t.origin,Z.R.Y,f.WM.get()),K=2*(0,i.l)(t.basis1),N=2*(0,i.l)(t.basis2),y=Ft.Z.renderUnitScaleFactor(s.spatialReference,a);return l.width=K*y,l.height=N*y,l.tilt=(0,J.BV)(Vt(t,E)),l.heading=(0,J.BV)(function _e(t,s,a){return(0,it.cp)(t.basis1,a,s)-Tt}(t,E,b)),l}function Vt(t,s){return(0,it.cp)(s,t.basis2,t.basis1)+Tt}function Qt(t,s){if((0,_.Wi)(t)||(0,_.Wi)(t.position))return null;const a=(0,lt.G)(t.position,s.spatialReference,s.elevationProvider);if((0,_.Wi)(a))return null;const l=Ft.Z.renderUnitScaleFactor(t.position.spatialReference,s.spatialReference);return{position:a,heading:t.heading,tilt:t.tilt,renderWidth:t.width*l,renderHeight:t.height*l}}function Zt(t,s,a,l=(0,F.c)()){if((0,_.Wi)(t))return null;const c=function Re(t,s,a,l,c,u,d=(0,F.c)()){return u.toRenderCoords(t,d.origin)?(u.worldBasisAtPosition(d.origin,Z.R.X,d.basis1),u.worldBasisAtPosition(d.origin,Z.R.Y,d.basis2),(0,X.my)(d.basis2,d.basis1,d.origin,d.plane),(0,F.r)(d,-(0,J.Vl)(s),(0,F.n)(d),d),(0,F.r)(d,(0,J.Vl)(a),d.basis1,d),(0,i.g)(d.basis1,d.basis1,l/2),(0,i.g)(d.basis2,d.basis2,c/2),(0,F.u)(d),d):(se.error(`Failed to project slice plane position, projection from ${t.spatialReference.wkid} is not supported`),null)}(t.position,t.heading,t.tilt,t.renderWidth,t.renderHeight,s.renderCoordsHelper,l);return!a.tiltEnabled&&(0,_.pC)(c)&&function ae(t,s,a){const l=s.worldUpAtPosition(t.origin,f.WM.get()),c=t.basis1,u=Vt(t,l),d=Math.round(u/Tt)*Tt;(0,F.r)(t,d-u,c,a)}(c,s.renderCoordsHelper,c),c}(t=Mt||(Mt={}))[t.POSITIVE_X=0]="POSITIVE_X",t[t.POSITIVE_Y=1]="POSITIVE_Y",t[t.NEGATIVE_X=2]="NEGATIVE_X",t[t.NEGATIVE_Y=3]="NEGATIVE_Y";const Dt=ut.jg.Custom1;var Rt,Ot;(function(t){t[t.HEADING=1]="HEADING",t[t.TILT=2]="TILT"})(Rt||(Rt={})),function(t){t[t.HORIZONTAL_OR_VERTICAL=0]="HORIZONTAL_OR_VERTICAL",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.TILTED=3]="TILTED"}(Ot||(Ot={}));const Wt=ut.jg.Custom2,Bt=(0,Q.Ue)(),Tt=Math.PI/2,Nt=ut.jg.Custom1,Yt=ut.jg.Custom2;var Lt;function Le(t){return(0,_.pC)("building-scene-3d"===t.type?t:null)}!function(t){t[t.CENTER_ON_CALLOUT=0]="CENTER_ON_CALLOUT",t[t.CENTER_ON_ARROW=1]="CENTER_ON_ARROW"}(Lt||(Lt={}))},54865:(tt,B,e)=>{e.d(B,{G:()=>R,e:()=>J});var O=e(62208),T=e(55915),G=e(53929);function R(_,j,S,$=!1){const W=(0,T.fM)(_,j);return(0,O.Wi)(W)?null:(W.hasZ&&!$||!(0,O.pC)(S)||(W.z=(0,O.Pt)((0,G.KO)(S,W),0)),W)}function J(_,j,S){S.warnOnce(`Failed to project analysis geometry (id: '${_.id}'), projection from spatial reference (wkid: '${j.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}},8859:(tt,B,e)=>{e.d(B,{G:()=>m,J4:()=>ot,Sp:()=>At,VG:()=>lt,_N:()=>X,_y:()=>gt,bB:()=>Q,gv:()=>h,zP:()=>ht});var mt,g,O=e(62208),T=e(23841),G=e(84161),R=e(28093),J=e(55915),_=e(90014),j=e(70562),S=e(34054),$=e(26242),W=e(60507),i=e(26046),H=e(62483),rt=e(67857),Z=e(40841),F=e(75079);function X(g,v){return it(g,()=>v)}function Q(g){return it(g,v=>v.plane)}function it(g,v){const D=(0,R.c)(),A=(0,R.c)();let U=!1;return P=>{const Y=v(P);if("start"===P.action){const at=(0,T.md)(P.screenStart,(0,T.c$)($.qW.get())),dt=(0,i.u4)(g.state.camera,at,L);(0,O.pC)(dt)&&(U=(0,_.BR)(Y,dt,D))}if(!U)return null;const w=(0,T.md)(P.screenEnd,(0,T.c$)($.qW.get())),ct=(0,i.u4)(g.state.camera,w,L);return(0,O.Wi)(ct)?null:(0,_.BR)(Y,ct,A)?_t(Ct({},P),{renderStart:D,renderEnd:A,plane:Y,ray:ct}):null}}function m(g,v,D,A=null,U=null){return function f(g,v,D,A=null,U=null){let P=null;return Y=>{if("start"===Y.action&&(P=g.sceneIntersectionHelper.intersectElevationFromScreen((0,T.s1)(Y.screenStart.x,Y.screenStart.y),v,D,U),(0,O.pC)(P)&&(0,O.pC)(A)&&!(0,J.nF)(P,P,A))||(0,O.Wi)(P))return null;const w=g.sceneIntersectionHelper.intersectElevationFromScreen((0,T.s1)(Y.screenEnd.x,Y.screenEnd.y),v,D,U);return(0,O.pC)(w)?(0,O.pC)(A)&&!(0,J.nF)(w,w,A)?null:_t(Ct({},Y),{mapStart:P,mapEnd:w}):null}}(g,D,(0,W.Ou)(v,g,D),A,U)}function lt(g,v,D,A=null,U=null){return m(g,D,(0,W.RL)(v),A,U)}function gt(g,v,D,A){const U=v.toMap(g.screenStart,{include:[D]});return(0,O.pC)(U)?lt(v,D,U,A):null}function At(g,v,D){let A=null;const U=new F.hM;return U.next(X(g,function k(g,v){const D=p,A=C,U=(0,_.Ue)();g.renderCoordsHelper.worldUpAtPosition(v,D);const P=(0,G.f)(U,D,(0,G.b)(A,v,g.state.camera.eye));return(0,G.f)(P,P,D),(0,_.Yq)(v,P,U)}(g,v))).next(function et(g,v){const D=(0,R.c)(),A=(0,G.l)(v);g.renderCoordsHelper.worldUpAtPosition(v,D);const U=(0,R.c)(),P=(0,R.c)(),Y=w=>((0,G.b)(w,w,v),(0,S.nF)(D,w,w),"global"===g.viewingMode&&(0,G.l)(w)*Math.sign((0,G.e)(D,w))<.001-A&&(0,G.b)(w,(0,G.g)(w,D,.001),v),(0,G.a)(w,w,v),w);return w=>(w.renderStart=Y((0,G.c)(U,w.renderStart)),w.renderEnd=Y((0,G.c)(P,w.renderEnd)),w)}(g,v)).next(ht(g,D)).next(P=>{P.mapEnd.x=P.mapStart.x,P.mapEnd.y=P.mapStart.y,A=P}),P=>(A=null,U.execute(P),A)}function ht(g,v){const D=g.renderCoordsHelper;return A=>{const U=D.fromRenderCoords(A.renderStart,v),P=D.fromRenderCoords(A.renderEnd,v);return(0,O.pC)(U)&&(0,O.pC)(P)?_t(Ct({},A),{mapStart:U,mapEnd:P}):null}}function ot(g){let v=null;return D=>{switch(D.action){case"start":v=g.disableDisplay();break;case"end":case"cancel":(0,O.pC)(v)&&(v.remove(),v=null)}return D}}function h(g,v=null){const D=(0,H.Z8)(g.state.viewingMode);D.options.selectionMode=!0,D.options.store=rt.eC.MIN,D.options.hud=!1;const A=(0,T.s1)(),U={requiresGroundFeedback:!0,enableDraped:!0,exclude:new Set},P=(0,R.c)(),Y=(0,O.Pt)(v,g.spatialReference),w=at=>{g.map.ground&&g.map.ground.opacity<1?U.exclude.add(Z.cy):U.exclude.delete(Z.cy),g.sceneIntersectionHelper.intersectIntersectorScreen((0,T.md)(at,A),D,U);const dt=D.results.min;let Et;if(dt.getIntersectionPoint(P))Et=dt.intersector===rt.q7.TERRAIN?mt.GROUND:mt.OTHER;else{if(!D.results.ground.getIntersectionPoint(P))return null;Et=mt.GROUND}return{location:g.renderCoordsHelper.fromRenderCoords(P,Y),surfaceType:Et}};let ct;return at=>{if("start"===at.action){const Et=w(at.screenStart);ct=(0,O.pC)(Et)?Et.location:null}if((0,O.Wi)(ct))return null;const dt=w(at.screenEnd);return(0,O.pC)(dt)&&(0,O.pC)(dt.location)?_t(Ct({},at),{mapStart:ct,mapEnd:dt.location,surfaceType:dt.surfaceType}):null}}(g=mt||(mt={}))[g.GROUND=0]="GROUND",g[g.OTHER=1]="OTHER";const p=(0,R.c)(),C=(0,R.c)(),L=(0,j.Ue)()},79967:(tt,B,e)=>{e.d(B,{j:()=>ht});var O=e(6945),T=e(42743),G=e(32393),R=e(33470),J=e(40723),_=e(88569),j=e(5894),S=e(60909),$=e(57623),W=e(17626),H=(e(17625),e(651)),rt=e(91056),Z=e(87601),F=e(39114),X=e(12407),Q=e(64127),it=e(41528),f=e(34013),m=e(67969),lt=e(2078);class k extends rt.A{initializeProgram(p){const C=k.shader.get().build(this.configuration);return new X.$(p.rctx,C,F.i)}_setPipelineState(p,C){const L=this.configuration,g=p===T.Am.NONE,v=p===T.Am.FrontFace;return(0,lt.sm)({blending:L.output!==O.H.Color&&L.output!==O.H.Alpha||!L.transparent?null:g?At:(0,_.j7)(p),culling:(0,lt.zp)(L.cullFace),depthTest:{func:(0,_.Bh)(p)},depthWrite:g?L.writeDepth&&lt.LZ:(0,_.K5)(p),colorWrite:lt.BK,stencilWrite:L.hasOccludees?Q.s3:null,stencilTest:L.hasOccludees?C?Q.eD:Q.RY:null,polygonOffset:g||v?null:(0,_.je)(L.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(p,C){return C?this._occludeePipelineState:super.getPipelineState(p,C)}}k.shader=new H.J(f.I,()=>e.e(8586).then(e.bind(e,18586)));const At=(0,lt.if)(m.zi.ONE,m.zi.ONE_MINUS_SRC_ALPHA);class et extends it.W{constructor(){super(...arguments),this.output=O.H.Color,this.cullFace=T.Vr.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=T.Am.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,W._)([(0,Z.o)({count:O.H.COUNT})],et.prototype,"output",void 0),(0,W._)([(0,Z.o)({count:T.Vr.COUNT})],et.prototype,"cullFace",void 0),(0,W._)([(0,Z.o)()],et.prototype,"hasSlicePlane",void 0),(0,W._)([(0,Z.o)()],et.prototype,"transparent",void 0),(0,W._)([(0,Z.o)()],et.prototype,"enableOffset",void 0),(0,W._)([(0,Z.o)()],et.prototype,"writeDepth",void 0),(0,W._)([(0,Z.o)()],et.prototype,"hasOccludees",void 0),(0,W._)([(0,Z.o)({count:T.Am.COUNT})],et.prototype,"transparencyPassType",void 0),(0,W._)([(0,Z.o)()],et.prototype,"hasMultipassTerrain",void 0),(0,W._)([(0,Z.o)()],et.prototype,"cullAboveGround",void 0);class ht extends J.F5{constructor(p){super(p,new ot),this.supportsEdges=!0,this.techniqueConfig=new et}getConfiguration(p,C){return this.techniqueConfig.output=p,this.techniqueConfig.cullFace=this.parameters.cullFace,this.techniqueConfig.hasSlicePlane=this.parameters.hasSlicePlane,this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.hasOccludees=this.parameters.hasOccludees,this.techniqueConfig.transparencyPassType=C.transparencyPassType,this.techniqueConfig.enableOffset=C.camera.relativeElevation<_.ve,this.techniqueConfig.hasMultipassTerrain=C.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=C.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(p,C,L,g,v,D,A){(0,$.Bw)(p,C,g,v,D,void 0,A)}requiresSlot(p,C){return p===j.r.DRAPED_MATERIAL||((0,G.S)(C)===O.H.Highlight?p===j.r.OPAQUE_MATERIAL:p===(this.parameters.transparent?this.parameters.writeDepth?j.r.TRANSPARENT_MATERIAL:j.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:j.r.OPAQUE_MATERIAL))}createGLMaterial(p){return p.output===O.H.Color||p.output===O.H.Alpha||p.output===O.H.Highlight?new mt(p):void 0}createBufferWriter(){return new S.G_(S.W1)}}class mt extends R.F{constructor(p){super(Ct(Ct({},p),p.material.parameters))}_updateParameters(p){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(k,p)}_updateOccludeeState(p){p.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:p.hasOccludees}),this._updateParameters(p))}beginSlot(p){return this._output!==O.H.Color&&this._output!==O.H.Alpha||this._updateOccludeeState(p),this._updateParameters(p)}}class ot extends J.Mt{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=T.Vr.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0}}}}]);
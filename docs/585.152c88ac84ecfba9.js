"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[585],{22264:(j,C,o)=>{function _(t,e){return e?"xoffset"in e&&e.xoffset?Math.max(t,Math.abs(e.xoffset)):"yoffset"in e&&e.yoffset?Math.max(t,Math.abs(e.yoffset||0)):t:t}function b(t,e){return"number"==typeof t?t:t&&t.stops&&t.stops.length?function f(t){let e=0,a=0;for(let r=0;r<t.length;r++){const y=t[r].size;"number"==typeof y&&(e+=y,a++)}return e/a}(t.stops):e}function p(t){var y;const e=t&&t.renderer,a="touch"===(t&&t.event&&t.event.pointerType)?9:6;if(!e)return a;const r="visualVariables"in e?function l(t,e){if(!e)return t;const a=e.filter(n=>"size"===n.type).map(n=>{const{maxSize:d,minSize:E}=n;return(b(d,t)+b(E,t))/2});let r=0;const y=a.length;if(0===y)return t;for(let n=0;n<y;n++)r+=a[n];const i=Math.floor(r/y);return Math.max(i,t)}(a,e.visualVariables):a;if("simple"===e.type)return _(r,e.symbol);if("unique-value"===e.type){let i=r;return null==(y=e.uniqueValueInfos)||y.forEach(n=>{i=_(i,n.symbol)}),i}if("class-breaks"===e.type){let i=r;return e.classBreakInfos.forEach(n=>{i=_(i,n.symbol)}),i}return r}o.d(C,{k:()=>p})},90585:(j,C,o)=>{o.d(C,{L:()=>h});var _=o(17626),f=o(14517),b=o(61885),l=o(62208),p=o(32917),t=o(23841),e=o(77712),y=(o(90912),o(85931),o(76898)),i=o(67831),n=o(84161),d=o(28093),E=o(55915),S=o(60507),I=o(8080),U=o(82706),W=o(22964),R=o(94672);let h=class extends f.Z{set graphic(s){this._circleCollisionCache=null,this._originalSymbol=s.symbol,this._set("graphic",s),this.attachSymbolChanged()}get elevationInfo(){const{layer:s}=this.graphic,m=s&&"elevationInfo"in s?s.elevationInfo:null,u=(0,S.vu)(this.graphic);return new U.Z({mode:u,offset:m?m.offset:0})}set focusedSymbol(s){s!==this._get("focusedSymbol")&&(this._set("focusedSymbol",s),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(s){s!==this._get("grabbing")&&(this._set("grabbing",s),this._updateGraphicSymbol())}set hovering(s){s!==this._get("hovering")&&(this._set("hovering",s),this._updateGraphicSymbol())}set selected(s){s!==this._get("selected")&&(this._set("selected",s),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:s?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}constructor(s){super(s),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new b.Z.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(s){const m=this.graphic;if(!1===m.visible)return null;const u=m.geometry;if((0,l.Wi)(u))return null;const c=this._get("focusedSymbol"),O=(0,l.pC)(c)?c:m.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,s,u,O):this._intersectDistance3D(this.view,s,m)}attach(){this.attachSymbolChanged(),(0,l.pC)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,l.pC)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,p.YP)(()=>{var s;return null==(s=this.graphic)?void 0:s.symbol},s=>{(0,l.pC)(s)&&s!==this.focusedSymbol&&s!==this._originalSymbol&&(this._originalSymbol=s,this._focused&&(0,l.pC)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},p.Z_)}detachSymbolChanged(){(0,l.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}onElevationChange(){}onViewChange(){}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&(0,l.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(s,m,u,c){var x,A;if(c=c||(0,I.js)(u),(0,l.Wi)(c))return null;let v=this._circleCollisionCache;if("point"===u.type&&"cim"===c.type&&"CIMPointSymbol"===(null==(x=c.data.symbol)?void 0:x.type)&&c.data.symbol.symbolLayers){const{offsetX:M,offsetY:g,size:D}=(0,W.i)(c),T=(0,t.md)(m,K),L=D/2,B=s.toScreen(u);return(0,i.k)(T,[B.x+M,B.y+g])<L*L?1:null}if("point"!==u.type||"simple-marker"!==c.type)return(0,R.D)(m,u,s)?1:null;if((0,l.Wi)(v)||!v.originalPoint.equals(u)){const M=u,g=s.spatialReference;if((0,E.Up)(M.spatialReference,g)){const D=(0,E.iV)(M,g);v={originalPoint:M.clone(),mapPoint:D,radiusPx:(0,t.F2)(c.size)},this._circleCollisionCache=v}}if((0,l.pC)(v)){const M=(0,t.md)(m,K),g=null==(A=s.toScreen)?void 0:A.call(s,v.mapPoint);if(!g)return null;const D=v.radiusPx,T=g.x+(0,t.F2)(c.xoffset),L=g.y-(0,t.F2)(c.yoffset);return(0,i.k)(M,[T,L])<D*D?1:null}return null}_intersectDistance3D(s,m,u){const c=s.toMap(m,{include:[u]});return c&&(0,E.KC)(c,P,s.renderSpatialReference)?(0,n.i)(P,s.state.camera.eye):null}};(0,_._)([(0,e.Cb)({constructOnly:!0,nonNullable:!0})],h.prototype,"graphic",null),(0,_._)([(0,e.Cb)()],h.prototype,"elevationInfo",null),(0,_._)([(0,e.Cb)({constructOnly:!0,nonNullable:!0})],h.prototype,"view",void 0),(0,_._)([(0,e.Cb)({value:null})],h.prototype,"focusedSymbol",null),(0,_._)([(0,e.Cb)({constructOnly:!0})],h.prototype,"layer",void 0),(0,_._)([(0,e.Cb)()],h.prototype,"interactive",void 0),(0,_._)([(0,e.Cb)()],h.prototype,"selectable",void 0),(0,_._)([(0,e.Cb)()],h.prototype,"grabbable",void 0),(0,_._)([(0,e.Cb)({value:!1})],h.prototype,"grabbing",null),(0,_._)([(0,e.Cb)()],h.prototype,"dragging",void 0),(0,_._)([(0,e.Cb)()],h.prototype,"hovering",null),(0,_._)([(0,e.Cb)({value:!1})],h.prototype,"selected",null),(0,_._)([(0,e.Cb)()],h.prototype,"cursor",void 0),h=(0,_._)([(0,y.j)("esri.views.interactive.GraphicManipulator")],h);const P=(0,d.c)(),K=(0,t.s1)()},22964:(j,C,o)=>{o.d(C,{i:()=>b});var _=o(62208),f=o(23841);function b(l){let p=0,t=0,e=0;return l?("cim"===l.type&&l.data.symbol&&"symbolLayers"in l.data.symbol&&l.data.symbol.symbolLayers&&l.data.symbol.symbolLayers.map(a=>{"CIMVectorMarker"===a.type&&a.anchorPoint&&(Math.abs(a.anchorPoint.x)>p&&(p=a.anchorPoint.x),Math.abs(a.anchorPoint.y)>t&&(t=a.anchorPoint.y),(0,_.pC)(a.size)&&a.size>e&&(e=a.size))}),p=(0,f.F2)(p),t=(0,f.F2)(t),e=(0,f.F2)(e),{offsetX:p,offsetY:t,size:e}):{offsetX:p,offsetY:t,size:e}}},94672:(j,C,o)=>{o.d(C,{D:()=>e,K:()=>t}),o(29132);var f=o(62208),b=o(16730),l=o(22264),p=o(2004);function t(r,y,i,n=new p.Z){var R;let d=0;if("2d"===i.type)d=y*(null!=(R=i.resolution)?R:0);else if("3d"===i.type){const h=i.overlayPixelSizeInMapUnits(r),P=i.basemapSpatialReference;d=(0,f.pC)(P)&&!P.equals(i.spatialReference)?(0,b.c9)(P)/(0,b.c9)(i.spatialReference):y*h}const E=r.x-d,S=r.y-d,I=r.x+d,U=r.y+d,{spatialReference:W}=i;return n.xmin=Math.min(E,I),n.ymin=Math.min(S,U),n.xmax=Math.max(E,I),n.ymax=Math.max(S,U),n.spatialReference=W,n}function e(r,y,i){const n=i.toMap(r);return!(0,f.Wi)(n)&&t(n,(0,l.k)(),i,a).intersects(y)}const a=new p.Z}}]);
"use strict";var se=Object.defineProperty,oe=Object.defineProperties,ae=Object.getOwnPropertyDescriptors,U=Object.getOwnPropertySymbols,ie=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,j=(O,_,e)=>_ in O?se(O,_,{enumerable:!0,configurable:!0,writable:!0,value:e}):O[_]=e,p=(O,_)=>{for(var e in _||(_={}))ie.call(_,e)&&j(O,e,_[e]);if(U)for(var e of U(_))_e.call(_,e)&&j(O,e,_[e]);return O},D=(O,_)=>oe(O,ae(_));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[7948],{48887:(O,_,e)=>{e.r(_),e.d(_,{default:()=>te});var f=e(15861),o=e(17626),h=e(84792),d=e(97478),E=e(26584),M=e(80542),I=e(47877),A=e(62208),x=e(99959),T=e(10699),l=e(77712),S=(e(85931),e(8314),e(90912)),K=e(68653),B=e(76898),W=e(99433),g=e(31283),b=e(2004),N=e(83137),F=e(44917),J=e(50085),Z=e(19027),V=e(65088),$=e(552),G=e(50107),z=e(49286),H=e(6647),Q=e(30346),Y=e(99555),X=e(66120),w=e(97941),k=e(13812),q=e(14772),ee=e(39058),R=e(13410),re=e(5676);let a=class extends((0,$.h)((0,w.n)((0,Y.M)((0,X.x)((0,Z.O)((0,V.Y)((0,z.q)((0,H.I)((0,x.R)((0,Q.Q)((0,J.V)((0,G.N)((0,M.p)(F.Z)))))))))))))){constructor(...r){super(...r),this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(r,t){return"string"==typeof r?p({url:r},t):r}load(r){const t=(0,A.pC)(r)?r.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},r).catch(T.r9).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(r,t){const u=t.supportedImageFormatTypes;return u&&u.includes("PNG32")?"png32":"png24"}writeSublayers(r,t,u,s){if(!this.loaded||!r)return;const i=r.slice().reverse().flatten(({sublayers:n})=>n&&n.toArray().reverse()).toArray();let y=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&this.capabilities.exportMap.supportsDynamicLayers){const n=(0,g.M9)(s.origin);if(n===g.s3.PORTAL_ITEM){const P=this.createSublayersForOrigin("service").sublayers;y=(0,R.QV)(i,P,g.s3.SERVICE)}else if(n>g.s3.PORTAL_ITEM){const P=this.createSublayersForOrigin("portal-item");y=(0,R.QV)(i,P.sublayers,(0,g.M9)(P.origin))}}const m=[],v=p({writeSublayerStructure:y},s);let c=y;i.forEach(n=>{const P=n.write({},v);m.push(P),c=c||"user"===n.originOf("visible")}),m.some(n=>Object.keys(n).length>1)&&(t.layers=m),c&&(t.visibleLayers=i.filter(n=>n.visible).map(n=>n.id))}createExportImageParameters(r,t,u,s){const i=s&&s.pixelRatio||1;r&&this.version>=10&&(r=r.clone().shiftCentralMeridian());const y=new q.R({layer:this,floors:null==s?void 0:s.floors,scale:(0,N.yZ)({extent:r,width:t})*i}),m=y.toJSON();y.destroy();const v=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},c=r&&r.spatialReference,n=c.wkid||JSON.stringify(c.toJSON());m.dpi*=i;const P={};if(null!=s&&s.timeExtent){const{start:C,end:L}=s.timeExtent.toJSON();P.time=C&&L&&C===L?""+C:`${null==C?"null":C},${null==L?"null":L}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(P.time="null,null");return p(p(p({bbox:r&&r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:n,imageSR:n,size:t+","+u},m),v),P)}fetchImage(r,t,u,s){var i=this;return(0,f.Z)(function*(){var v;const y={responseType:"image",signal:null!=(v=null==s?void 0:s.signal)?v:null,query:D(p(p(D(p(p({},i.parsedUrl.query),i.createExportImageParameters(r,t,u,s)),{f:"image"}),i.refreshParameters),i.customParameters),{token:i.apiKey})},m=i.parsedUrl.path+"/export";if(null!=y.query.dynamicLayers&&!i.capabilities.exportMap.supportsDynamicLayers)throw new E.Z("mapimagelayer:dynamiclayer-not-supported",`service ${i.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:y.query});return(0,h.default)(m,y).then(c=>c.data).catch(c=>{throw(0,T.D_)(c)?c:new E.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${m}`,{error:c})})})()}fetchRecomputedExtents(r={}){var t=this;return(0,f.Z)(function*(){const u=D(p({},r),{query:D(p({returnUpdates:!0,f:"json"},t.customParameters),{token:t.apiKey})}),{data:s}=yield(0,h.default)(t.url,u),{extent:i,fullExtent:y,timeExtent:m}=s,v=i||y;return{fullExtent:v&&b.Z.fromJSON(v),timeExtent:m&&d.Z.fromJSON({start:m[0],end:m[1]})}})()}loadAll(){return(0,I.G)(this,r=>{r(this.allSublayers)})}serviceSupportsSpatialReference(r){return(0,re.D)(this,r)}_fetchService(r){var t=this;return(0,f.Z)(function*(){if(t.sourceJSON)return void t.read(t.sourceJSON,{origin:"service",url:t.parsedUrl});const{data:u,ssl:s}=yield(0,h.default)(t.parsedUrl.path,{query:D(p(p({f:"json"},t.parsedUrl.query),t.customParameters),{token:t.apiKey}),signal:r});s&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=u,t.read(u,{origin:"service",url:t.parsedUrl})})()}};(0,o._)([(0,l.Cb)({type:Boolean})],a.prototype,"datesInUnknownTimezone",void 0),(0,o._)([(0,l.Cb)()],a.prototype,"dpi",void 0),(0,o._)([(0,l.Cb)()],a.prototype,"gdbVersion",void 0),(0,o._)([(0,l.Cb)()],a.prototype,"imageFormat",void 0),(0,o._)([(0,K.r)("imageFormat",["supportedImageFormatTypes"])],a.prototype,"readImageFormat",null),(0,o._)([(0,l.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],a.prototype,"imageMaxHeight",void 0),(0,o._)([(0,l.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],a.prototype,"imageMaxWidth",void 0),(0,o._)([(0,l.Cb)()],a.prototype,"imageTransparency",void 0),(0,o._)([(0,l.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],a.prototype,"isReference",void 0),(0,o._)([(0,l.Cb)({json:{read:!1,write:!1}})],a.prototype,"labelsVisible",void 0),(0,o._)([(0,l.Cb)({type:["ArcGISMapServiceLayer"]})],a.prototype,"operationalLayerType",void 0),(0,o._)([(0,l.Cb)({json:{read:!1,write:!1}})],a.prototype,"popupEnabled",void 0),(0,o._)([(0,l.Cb)()],a.prototype,"sourceJSON",void 0),(0,o._)([(0,l.Cb)({json:{write:{ignoreOrigin:!0}}})],a.prototype,"sublayers",void 0),(0,o._)([(0,W.c)("sublayers",{layers:{type:[ee.Z]},visibleLayers:{type:[S.z8]}})],a.prototype,"writeSublayers",null),(0,o._)([(0,l.Cb)({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),(0,o._)([(0,l.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],a.prototype,"type",void 0),(0,o._)([(0,l.Cb)(k.HQ)],a.prototype,"url",void 0),a=(0,o._)([(0,B.j)("esri.layers.MapImageLayer")],a);const te=a},59990:(O,_,e)=>{function f(d){var M;const E=d.layer;return"floorInfo"in E&&(null==(M=E.floorInfo)?void 0:M.floorField)&&"floors"in d.view?h(d.view.floors,E.floorInfo.floorField):null}function o(d,E){var M;return"floorInfo"in E&&(null==(M=E.floorInfo)?void 0:M.floorField)?h(d,E.floorInfo.floorField):null}function h(d,E){if(null==d||!d.length)return null;const M=d.filter(I=>""!==I).map(I=>`'${I}'`);return M.push("''"),`${E} IN (${M.join(",")}) OR ${E} IS NULL`}e.d(_,{c:()=>f,f:()=>o})}}]);
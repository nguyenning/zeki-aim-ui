"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[2359],{62359:(M,h,e)=>{e.r(h),e.d(h,{default:()=>t});var _=e(15861),l=e(17626),u=e(62208),E=e(32917),n=e(77712),a=(e(85931),e(8314),e(90912),e(76898)),y=e(19702),P=e(32400),g=e(89765),O=e(42743),o=e(45611);let i=class extends((0,y.A)(o.Z)){constructor(){super(...arguments),this.type="graphics-3d",this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new P.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.setup()),this.handles.add(this.layer.on("graphic-update",s=>this.processor.graphicsCore.graphicUpdateHandler(s))),this.addResolvingPromise((0,g.E)(this).then(s=>this.fullExtentInLocalViewSpatialReference=s)),this.layer.internal?this.notifyChange("updating"):this.handles.add((0,E.gx)(()=>{var s,r;return null==(r=null==(s=this.view)?void 0:s.basemapTerrain)?void 0:r.ready},()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,u.SC)(this.processor))}get loadedGraphics(){return this.layer.graphics}get legendEnabled(){var s;return this.canResume()&&!(null!=(s=this.processor)&&s.frustumVisibilitySuspended)}getSuspendInfo(){var r,d,D,m;const s=super.getSuspendInfo();return s.outsideScaleRange=null!=(d=null==(r=this.processor)?void 0:r.scaleVisibilitySuspended)&&d,s.outsideOfView=null!=(m=null==(D=this.processor)?void 0:D.frustumVisibilitySuspended)&&m,s}fetchPopupFeatures(s,r){return(0,_.Z)(function*(){return(0,u.pC)(r)?r.clientGraphics:null})()}getHit(s){return this.processor.getHit(s)}whenGraphicBounds(s,r){return this.processor.whenGraphicBounds(s,r)}computeAttachmentOrigin(s,r){var d;return null==(d=this.processor)?void 0:d.computeAttachmentOrigin(s,r)}getSymbolLayerSize(s,r){return this.processor.getSymbolLayerSize(s,r)}queryGraphics(){return Promise.resolve(this.loadedGraphics)}maskOccludee(s){return this.processor.maskOccludee(s)}highlight(s){return this.processor.highlight(s)}get updatePolicy(){var s;return(null==(s=this.processor)?void 0:s.graphicsCore.effectiveUpdatePolicy)||O.jq.SYNC}canResume(){var s;return super.canResume()&&!(null!=(s=this.processor)&&s.scaleVisibilitySuspended)}isUpdating(){var s,r,d;return!((null==(s=this.processor)||!s.updating)&&(this.layer.internal||(null==(d=null==(r=this.view)?void 0:r.basemapTerrain)?void 0:d.ready)))}get performanceInfo(){var s,r,d;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!=(r=null==(s=this.processor)?void 0:s.elevationAlignment.updating)&&r,visibilityFrustum:!(null!=(d=this.processor)&&d.frustumVisibilitySuspended)}}};(0,l._)([(0,n.Cb)()],i.prototype,"loadedGraphics",null),(0,l._)([(0,n.Cb)({readOnly:!0})],i.prototype,"legendEnabled",null),(0,l._)([(0,n.Cb)()],i.prototype,"layer",void 0),(0,l._)([(0,n.Cb)({readOnly:!0})],i.prototype,"processor",void 0),(0,l._)([(0,n.Cb)({type:Boolean})],i.prototype,"slicePlaneEnabled",void 0),i=(0,l._)([(0,a.j)("esri.views.3d.layers.GraphicsLayerView3D")],i);const t=i},19702:(M,h,e)=>{e.d(h,{A:()=>g});var _=e(15861),l=e(17626),u=e(54024),E=e(10699),n=e(32917),c=e(77712),y=(e(85931),e(8314),e(90912),e(76898)),P=e(36947);const g=O=>{let o=class extends O{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(i){super.postscript(i),(0,P.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var i=this;return(0,_.Z)(function*(){const t=new AbortController,s=t.signal;i.handles.add((0,u.kB)(()=>t.abort())),yield(0,n.N1)(()=>{var d;return null==(d=i.view.defaultsFromMap)?void 0:d.heightModelInfoReady},s),(0,E.k_)(s);const r=(0,P.Wt)(i.layer,i.view.heightModelInfo,i.supportsHeightUnitConversion);if(r)throw r})()}canResume(){const i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!i||!i.minScale||!i.maxScale||i.minScale>=i.maxScale)}getSuspendInfo(){const i=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(i.outsideScaleRange=!0),i}};return(0,l._)([(0,c.Cb)()],o.prototype,"view",void 0),(0,l._)([(0,c.Cb)()],o.prototype,"slicePlaneEnabled",void 0),o=(0,l._)([(0,y.j)("esri.views.3d.layers.LayerView3D")],o),o}},89765:(M,h,e)=>{e.d(h,{E:()=>E});var _=e(62208),l=e(46367),u=e(35082);function E(n){const c=n.view.spatialReference,p=n.layer.fullExtent,v=(0,_.pC)(p)&&p.spatialReference;if((0,_.Wi)(p)||!v)return Promise.resolve(null);if(v.equals(c))return Promise.resolve(p.clone());const a=(0,l.iV)(p,c);return(0,_.pC)(a)?Promise.resolve(a):n.view.state.isLocal?(0,u.projectGeometry)(p,c,n.layer.portalItem).then(y=>!n.destroyed&&y?y:void 0).catch(()=>null):Promise.resolve(null)}},45611:(M,h,e)=>{e.d(h,{Z:()=>i});var _=e(17626),l=e(14517),u=e(61885),E=e(80542),n=e(61996),c=e(63290),p=e(62208),v=e(60330),a=e(77712),O=(e(85931),e(8314),e(90912),e(76898));let o=class extends((0,E.p)((0,n.IG)((0,v.v)(u.Z.EventedMixin(l.Z))))){constructor(t){super(t),this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const s=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";c.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${s}')`,t)}})}get fullOpacity(){return(0,p.Pt)(this.get("layer.opacity"),1)*(0,p.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var t;return!this.suspended&&!0===(null==(t=this.layer)?void 0:t.legendEnabled)}get updating(){var t;return!!(null!=(t=this.updatingHandles)&&t.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var t;return!0===(null==(t=this.layer)?void 0:t.visible)}set visible(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")}canResume(){var t,s,r;return this.visible&&(null==(t=this.layer)?void 0:t.loaded)&&!(null!=(s=this.parent)&&s.suspended)&&(null==(r=this.view)?void 0:r.ready)||!1}getSuspendInfo(){const t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,_._)([(0,a.Cb)()],o.prototype,"fullOpacity",null),(0,_._)([(0,a.Cb)()],o.prototype,"layer",void 0),(0,_._)([(0,a.Cb)()],o.prototype,"parent",void 0),(0,_._)([(0,a.Cb)({readOnly:!0})],o.prototype,"suspended",null),(0,_._)([(0,a.Cb)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,_._)([(0,a.Cb)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,_._)([(0,a.Cb)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,_._)([(0,a.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,_._)([(0,a.Cb)()],o.prototype,"visible",null),(0,_._)([(0,a.Cb)()],o.prototype,"view",void 0),o=(0,_._)([(0,O.j)("esri.views.layers.LayerView")],o);const i=o}}]);
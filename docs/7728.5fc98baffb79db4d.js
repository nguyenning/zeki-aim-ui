"use strict";var $=Object.defineProperty,V=Object.defineProperties,N=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,z=(P,M,l)=>M in P?$(P,M,{enumerable:!0,configurable:!0,writable:!0,value:l}):P[M]=l,G=(P,M)=>{for(var l in M||(M={}))q.call(M,l)&&z(P,l,M[l]);if(Q)for(var l of Q(M))k.call(M,l)&&z(P,l,M[l]);return P},H=(P,M)=>V(P,N(M));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[7728],{36592:(P,M,l)=>{l.d(M,{Q:()=>R});var C=l(85931),T=l(62208),b=l(77029),B=l(14259);class R{constructor(e=9,t){this.compareMinX=v,this.compareMinY=m,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),S.prune(),X.prune(),D.prune(),W.prune()}all(e){this._all(this.data,e)}search(e,t){let s=this.data;const r=this._toBBox;if(Y(e,s))for(S.clear();s;){for(let i=0,a=s.children.length;i<a;i++){const d=s.children[i],u=s.leaf?r(d):d;Y(e,u)&&(s.leaf?t(d):F(e,u)?this._all(d,t):S.push(d))}s=S.pop()}}collides(e){let t=this.data;const s=this._toBBox;if(!Y(e,t))return!1;for(S.clear();t;){for(let r=0,i=t.children.length;r<i;r++){const a=t.children[r],d=t.leaf?s(a):a;if(Y(e,d)){if(t.leaf||F(e,d))return!0;S.push(a)}}t=S.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,r=e.length;s<r;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this.data.children.length)if(this.data.height===t.height)this._splitRoot(this.data,t);else{if(this.data.height<t.height){const s=this.data;this.data=t,t=s}this._insert(t,this.data.height-t.height-1,!0)}else this.data=t;return this}insert(e){return e&&this._insert(e,this.data.height-1),this}clear(){return this.data=new _([]),this}remove(e){var u;if(!e)return this;let t,s=this.data,r=null,i=0,a=!1;const d=this._toBBox(e);for(D.clear(),W.clear();s||D.length>0;){if(s||(s=(0,T.j0)(D.pop()),r=D.data[D.length-1],i=null!=(u=W.pop())?u:0,a=!0),s.leaf&&(t=(0,C.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),D.push(s),this._condense(D),this;a||s.leaf||!F(s,d)?r?(i++,s=r.children[i],a=!1):s=null:(D.push(s),W.push(i),i=0,r=s,s=s.children[0])}return this}toJSON(){return this.data}fromJSON(e){return this.data=e,this}_all(e,t){var r;let s=e;for(X.clear();s;){if(!0===s.leaf)for(const i of s.children)t(i);else X.pushArray(s.children);s=null!=(r=X.pop())?r:null}}_build(e,t,s,r){const i=s-t+1;let a=this._maxEntries;if(i<=a){const c=new _(e.slice(t,s+1));return I(c,this._toBBox),c}r||(r=Math.ceil(Math.log(i)/Math.log(a)),a=Math.ceil(i/a**(r-1)));const d=new p([]);d.height=r;const u=Math.ceil(i/a),x=u*Math.ceil(Math.sqrt(a));K(e,t,s,x,this.compareMinX);for(let c=t;c<=s;c+=x){const y=Math.min(c+x-1,s);K(e,c,y,u,this.compareMinY);for(let A=c;A<=y;A+=u){const w=Math.min(A+u-1,y);d.children.push(this._build(e,A,w,r-1))}}return I(d,this._toBBox),d}_chooseSubtree(e,t,s,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==s;){let i,a=1/0,d=1/0;for(let u=0,x=t.children.length;u<x;u++){const c=t.children[u],y=E(c),A=f(e,c)-y;A<d?(d=A,a=y<a?y:a,i=c):A===d&&y<a&&(a=y,i=c)}t=i||t.children[0]}return t}_insert(e,t,s){const i=s?e:(0,this._toBBox)(e);D.clear();const a=this._chooseSubtree(i,this.data,t,D);for(a.children.push(e),L(a,i);t>=0&&D.data[t].children.length>this._maxEntries;)this._split(D,t),t--;this._adjustParentBBoxes(i,D,t)}_split(e,t){const s=e.data[t],r=s.children.length,i=this._minEntries;this._chooseSplitAxis(s,i,r);const a=this._chooseSplitIndex(s,i,r);if(!a)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const d=s.children.splice(a,s.children.length-a),u=s.leaf?new _(d):new p(d);u.height=s.height,I(s,this._toBBox),I(u,this._toBBox),t?e.data[t-1].children.push(u):this._splitRoot(s,u)}_splitRoot(e,t){this.data=new p([e,t]),this.data.height=e.height+1,I(this.data,this._toBBox)}_chooseSplitIndex(e,t,s){let r,i,a;r=i=1/0;for(let d=t;d<=s-t;d++){const u=O(e,0,d,this._toBBox),x=O(e,d,s,this._toBBox),c=j(u,x),y=E(u)+E(x);c<r?(r=c,a=d,i=y<i?y:i):c===r&&y<i&&(i=y,a=d)}return a}_chooseSplitAxis(e,t,s){const r=e.leaf?this.compareMinX:v,i=e.leaf?this.compareMinY:m;this._allDistMargin(e,t,s,r)<this._allDistMargin(e,t,s,i)&&e.children.sort(r)}_allDistMargin(e,t,s,r){e.children.sort(r);const i=this._toBBox,a=O(e,0,t,i),d=O(e,s-t,s,i);let u=o(a)+o(d);for(let x=t;x<s-t;x++){const c=e.children[x];L(a,e.leaf?i(c):c),u+=o(a)}for(let x=s-t-1;x>=t;x--){const c=e.children[x];L(d,e.leaf?i(c):c),u+=o(d)}return u}_adjustParentBBoxes(e,t,s){for(let r=s;r>=0;r--)L(t.data[r],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const r=e.data[t-1],i=r.children;i.splice((0,C.cq)(i,s,i.length,r.indexHint),1)}else this.clear();else I(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this.compareMinX=new Function("a","b",t.join(e[0])),this.compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function I(n,e){O(n,0,n.children.length,e,n)}function O(n,e,t,s,r){r||(r=new _([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let i,a=e;a<t;a++)i=n.children[a],L(r,n.leaf?s(i):i);return r}function L(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function v(n,e){return n.minX-e.minX}function m(n,e){return n.minY-e.minY}function E(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function o(n){return n.maxX-n.minX+(n.maxY-n.minY)}function f(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function j(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),i=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,i-s)}function F(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function Y(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function K(n,e,t,s,r){const i=[e,t];for(;i.length;){const a=(0,T.j0)(i.pop()),d=(0,T.j0)(i.pop());if(a-d<=s)continue;const u=d+Math.ceil((a-d)/s/2)*s;(0,B.q)(n,u,d,a,r),i.push(d,u,u,a)}}const S=new b.Z,X=new b.Z,D=new b.Z,W=new b.Z({deallocator:void 0});class h extends class U{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new C.SO}}class _ extends h{constructor(e){super(),this.children=e,this.leaf=!0}}class p extends h{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(P,M,l)=>{l.d(M,{H:()=>L});var C=l(8314),T=l(36592),b=l(65401);const R={minX:0,minY:0,maxX:0,maxY:0};class L{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new T.Q(9,(0,C.Z)("esri-csp-restrictions")?m=>({minX:m[0],minY:m[1],maxX:m[2],maxY:m[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const m=new Array(this._idByBounds.size);let E=0;this._idByBounds.forEach((o,f)=>{m[E++]=f}),this._indexInvalid=!1,this._index.clear(),this._index.load(m)}else this._boundsToLoad.length&&(this._index.load(this._boundsToLoad.filter(m=>this._idByBounds.has(m))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const m=(0,b.cS)();for(const E of this._boundsById.values())E&&(m[0]=Math.min(E[0],m[0]),m[1]=Math.min(E[1],m[1]),m[2]=Math.max(E[2],m[2]),m[3]=Math.max(E[3],m[3]));return m}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(m){const E=this._boundsById.get(m);this._boundsById.delete(m),E&&(this._idByBounds.delete(E),this._indexInvalid||this._index.remove(E))}forEachInBounds(m,E){this._loadIndex(),function O(v,m,E){(function I(v){R.minX=v[0],R.minY=v[1],R.maxX=v[2],R.maxY=v[3]})(m),v.search(R,E)}(this._index,m,o=>E(this._idByBounds.get(o)))}get(m){return this._boundsById.get(m)}has(m){return this._boundsById.has(m)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(m,E){if(!this._indexInvalid){const o=this._boundsById.get(m);o&&(this._index.remove(o),this._idByBounds.delete(o))}this._boundsById.set(m,E),E&&(this._idByBounds.set(E,m),this._indexInvalid||(this._boundsToLoad.push(E),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(P,M,l)=>{l.d(M,{Z:()=>m});var C=l(26584),T=l(61885),b=l(63290),B=l(62208),R=l(5548),I=l(65401),O=l(82054),L=l(61256),v=l(92794);class m{constructor(o){this.geometryInfo=o,this._boundsStore=new L.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new T.Z,this.featureAdapter=v.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let o=0;return this._featuresById.forEach(f=>{(0,B.pC)(f.geometry)&&f.geometry.coords&&(o+=f.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:o/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}add(o){this._add(o),this._emitChanged()}addMany(o){for(const f of o)this._add(f);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(o){const f=this._featuresById.get(o);return f?(this._remove(f),this._emitChanged(),f):null}removeManyById(o){this._boundsStore.invalidateIndex();for(const f of o){const j=this._featuresById.get(f);j&&this._remove(j)}this._emitChanged()}forEachBounds(o,f,j){for(const F of o){const Y=this._boundsStore.get(F.objectId);Y&&f((0,R.JR)(j,Y))}}getFeature(o){return this._featuresById.get(o)}has(o){return this._featuresById.has(o)}toArray(){return Array.from(this._featuresById.values())}forEach(o){this._featuresById.forEach(f=>o(f))}forEachInBounds(o,f){this._boundsStore.forEachInBounds(o,j=>{f(this._featuresById.get(j))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let o=!1;this._featuresById.forEach((f,j)=>{this._markedIds.has(j)||(o=!0,this._remove(f))}),this._markedIds.clear(),o&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(o){if(!o)return;const f=o.objectId;if(null==f)return void b.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new C.Z("featurestore:invalid-feature","feature id is missing",{feature:o}));const j=this._featuresById.get(f);let F;if(this._markedIds.add(f),j?(o.displayId=j.displayId,F=this._boundsStore.get(f),this._boundsStore.delete(f)):(0,B.pC)(this.onFeatureAdd)&&this.onFeatureAdd(o),(0,B.Wi)(o.geometry)||!o.geometry.coords||!o.geometry.coords.length)return this._boundsStore.set(f,null),void this._featuresById.set(f,o);F=(0,O.$)((0,B.pC)(F)?F:(0,I.Ue)(),o.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,B.pC)(F)&&this._boundsStore.set(f,F),this._featuresById.set(f,o)}_remove(o){return(0,B.pC)(this.onFeatureRemove)&&this.onFeatureRemove(o),this._markedIds.delete(o.objectId),this._boundsStore.delete(o.objectId),this._featuresById.delete(o.objectId),o}}},92794:(P,M,l)=>{l.d(M,{n:()=>R});var C=l(62208),T=l(77044),b=l(66385),B=l(88071);const R={getObjectId:I=>I.objectId,getAttributes:I=>I.attributes,getAttribute:(I,O)=>I.attributes[O],cloneWithGeometry:(I,O)=>new b.u_(O,I.attributes,null,I.objectId),getGeometry:I=>I.geometry,getCentroid:(I,O)=>((0,C.Wi)(I.centroid)&&(I.centroid=(0,T.Y)(new B.Z,I.geometry,O.hasZ,O.hasM)),I.centroid)}},7728:(P,M,l)=>{l.r(M),l.d(M,{default:()=>W});var C=l(15861),T=l(26584),b=l(62208),B=l(91179),R=l(37053),I=l(82054),O=l(1476),L=l(3579),v=l(82959),m=l(58175),E=l(56554),o=l(35775),f=l(60466),j=l(85),F=l(36630);const Y=R.Zn,K={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:R.Zn},S={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function D(U){return(0,B.wp)(U)?null!=U.m:!!U.hasM}class W{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(h){var _=this;return(0,C.Z)(function*(){const p=[],{features:n}=h,e=_._inferLayerProperties(n,h.fields),t=h.fields||[],s=null!=h.hasM?h.hasM:e.hasM,r=null!=h.hasZ?h.hasZ:e.hasZ,i=!h.spatialReference&&!e.spatialReference,a=i?Y:h.spatialReference||e.spatialReference,d=i?K:null,u=h.geometryType||e.geometryType;let c=h.objectIdField||e.objectIdField,y=h.timeInfo;if(u&&(i&&p.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!u))throw new T.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!c)throw new T.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(e.objectIdField&&c!==e.objectIdField&&(p.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${c}" doesn't match the field name "${e.objectIdField}", found in the provided fields`}),c=e.objectIdField),c&&!e.objectIdField){let g=null;t.some(Z=>Z.name===c&&(g=Z,!0))?(g.type="esriFieldTypeOID",g.editable=!1,g.nullable=!1):t.unshift({alias:c,name:c,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const g of t){if(null==g.name&&(g.name=g.alias),null==g.alias&&(g.alias=g.name),!g.name)throw new T.Z("feature-layer:invalid-field-name","field name is missing",{field:g});if(g.name===c&&(g.type="esriFieldTypeOID"),!j.v.jsonValues.includes(g.type))throw new T.Z("feature-layer:invalid-field-type",`invalid type for field "${g.name}"`,{field:g})}const A={};for(const g of t)if("esriFieldTypeOID"!==g.type&&"esriFieldTypeGlobalID"!==g.type){const Z=(0,F.os)(g);void 0!==Z&&(A[g.name]=Z)}if(_._fieldsIndex=new f.Z(t),_._createDefaultAttributes=(0,E.Dm)(A,c),y){if(y.startTimeField){const g=_._fieldsIndex.get(y.startTimeField);g?(y.startTimeField=g.name,g.type="esriFieldTypeDate"):y.startTimeField=null}if(y.endTimeField){const g=_._fieldsIndex.get(y.endTimeField);g?(y.endTimeField=g.name,g.type="esriFieldTypeDate"):y.endTimeField=null}if(y.trackIdField){const g=_._fieldsIndex.get(y.trackIdField);g?y.trackIdField=g.name:(y.trackIdField=null,p.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:y}}))}y.startTimeField||y.endTimeField||(p.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:y}}),y=null)}const w={warnings:p,featureErrors:[],layerDefinition:H(G({},S),{drawingInfo:(0,E.bU)(u),templates:(0,E.Hq)(A),extent:d,geometryType:u,objectIdField:c,fields:t,hasZ:!!r,hasM:!!s,timeInfo:y}),assignedObjectIds:{}};if(_._queryEngine=new m.q({fields:t,geometryType:u,hasM:s,hasZ:r,objectIdField:c,spatialReference:a,featureStore:new L.Z({geometryType:u,hasM:s,hasZ:r}),timeInfo:y,cacheSpatialQueries:!0}),!n||!n.length)return _._nextObjectId=O.X,w;const J=(0,O.S)(c,n);return _._nextObjectId=J+1,yield(0,v._W)(n,a),_._loadInitialFeatures(w,n)})()}applyEdits(h){var _=this;return(0,C.Z)(function*(){const{spatialReference:p,geometryType:n}=_._queryEngine;return yield Promise.all([(0,o.b)(p,n),(0,v._W)(h.adds,p),(0,v._W)(h.updates,p)]),_._applyEdits(h)})()}queryFeatures(h,_={}){return this._queryEngine.executeQuery(h,_.signal)}queryFeatureCount(h,_={}){return this._queryEngine.executeQueryForCount(h,_.signal)}queryObjectIds(h,_={}){return this._queryEngine.executeQueryForIds(h,_.signal)}queryExtent(h,_={}){return this._queryEngine.executeQueryForExtent(h,_.signal)}querySnapping(h,_={}){return this._queryEngine.executeQueryForSnapping(h,_.signal)}_inferLayerProperties(h,_){let p,n,e=null,t=null,s=null;for(const r of h){const i=r.geometry;if(!(0,b.Wi)(i)&&(e||(e=(0,B.Ji)(i)),t||(t=i.spatialReference),null==p&&(p=(0,B.wp)(U=i)?null!=U.z:!!U.hasZ),null==n&&(n=D(i)),e&&t&&null!=p&&null!=n))break}var U;if(_&&_.length){let r=null;_.some(i=>{const a="esriFieldTypeOID"===i.type,d=!i.type&&i.name&&"objectid"===i.name.toLowerCase();return r=i,a||d})&&(s=r.name)}return{geometryType:e,spatialReference:t,objectIdField:s,hasM:n,hasZ:p}}_loadInitialFeatures(h,_){const{geometryType:p,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:r}=this._queryEngine,i=[];for(const a of _){if(null!=a.uid&&(h.assignedObjectIds[a.uid]=-1),a.geometry&&p!==(0,B.Ji)(a.geometry)){h.featureErrors.push((0,o.av)("Incorrect geometry type."));continue}const d=this._createDefaultAttributes(),u=(0,o.O0)(this._fieldsIndex,d,a.attributes,!0,h.warnings);u?h.featureErrors.push(u):(this._assignObjectId(d,a.attributes,!0),a.attributes=d,null!=a.uid&&(h.assignedObjectIds[a.uid]=a.attributes[t]),(0,b.pC)(a.geometry)&&(a.geometry=(0,v.iV)(a.geometry,a.geometry.spatialReference,s)),i.push(a))}if(r.addMany((0,I.Yn)([],i,p,e,n,t)),h.layerDefinition.extent=this._queryEngine.fullExtent,h.layerDefinition.timeInfo){const{start:a,end:d}=this._queryEngine.timeExtent;h.layerDefinition.timeInfo.timeExtent=[a,d]}return h}_applyEdits(h){const{adds:_,updates:p,deletes:n}=h,e={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(_&&_.length&&this._applyAddEdits(e,_),p&&p.length&&this._applyUpdateEdits(e,p),n&&n.length){for(const t of n)e.deleteResults.push((0,o.d1)(t));this._queryEngine.featureStore.removeManyById(n)}return{fullExtent:this._queryEngine.fullExtent,featureEditResults:e}}_applyAddEdits(h,_){const{addResults:p}=h,{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:r,featureStore:i}=this._queryEngine,a=[];for(const d of _){if(d.geometry&&n!==(0,B.Ji)(d.geometry)){p.push((0,o.av)("Incorrect geometry type."));continue}const u=this._createDefaultAttributes(),x=(0,o.O0)(this._fieldsIndex,u,d.attributes);x?p.push(x):(this._assignObjectId(u,d.attributes),d.attributes=u,null!=d.uid&&(h.uidToObjectId[d.uid]=d.attributes[s]),(0,b.pC)(d.geometry)&&(d.geometry=(0,v.iV)((0,o.og)(d.geometry,r),d.geometry.spatialReference,r)),a.push(d),p.push((0,o.d1)(d.attributes[s])))}i.addMany((0,I.Yn)([],a,n,t,e,s))}_applyUpdateEdits({updateResults:h},_){const{geometryType:p,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:r}=this._queryEngine;for(const i of _){const{attributes:a,geometry:d}=i,u=a&&a[t];if(null==u){h.push((0,o.av)(`Identifier field ${t} missing`));continue}if(!r.has(u)){h.push((0,o.av)(`Feature with object id ${u} missing`));continue}const x=(0,I.EI)(r.getFeature(u),p,e,n);if((0,b.pC)(d)){if(p!==(0,B.Ji)(d)){h.push((0,o.av)("Incorrect geometry type."));continue}x.geometry=(0,v.iV)((0,o.og)(d,s),d.spatialReference,s)}if(a){const c=(0,o.O0)(this._fieldsIndex,x.attributes,a);if(c){h.push(c);continue}}r.add((0,I.XA)(x,p,e,n,t)),h.push((0,o.d1)(u))}}_assignObjectId(h,_,p=!1){const n=this._queryEngine.objectIdField;h[n]=p&&_&&isFinite(_[n])?_[n]:this._nextObjectId++}}}}]);
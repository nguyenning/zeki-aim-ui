"use strict";var xt=Object.defineProperty,Ot=Object.defineProperties,Ct=Object.getOwnPropertyDescriptors,at=Object.getOwnPropertySymbols,Gt=Object.prototype.hasOwnProperty,Dt=Object.prototype.propertyIsEnumerable,ht=(D,u,o)=>u in D?xt(D,u,{enumerable:!0,configurable:!0,writable:!0,value:o}):D[u]=o,$=(D,u)=>{for(var o in u||(u={}))Gt.call(u,o)&&ht(D,o,u[o]);if(at)for(var o of at(u))Dt.call(u,o)&&ht(D,o,u[o]);return D},q=(D,u)=>Ot(D,Ct(u));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[120],{30120:(D,u,o)=>{o.r(u),o.d(u,{default:()=>ft});var K=o(15861),d=o(17626),P=(o(29132),o(88879)),U=o(59213),S=o(46160),B=o(26584),A=o(61885),w=o(72392),X=o(63290),_=o(62208),Z=o(15572),V=o(32917),b=o(23841),m=o(77712),H=(o(90912),o(85931),o(76898)),v=o(25748),R=o(51470),G=o(57213),W=o(59617),L=o(7959),et=o(36073),Q=o(9119),F=o(49621),I=o(10228),O=o(85095),Y=o(18547),k=o(72791),it=o(26777),N=o(9997),z=o(9773),M=o(60358),nt=o(31712),ct=o(30174),st=o(22463),pt=o(55214),j=o(72642);class lt{constructor(e,i,s){this.graphic=e,this.mover=i,this.selected=s,this.type="reshape-start"}}class _t{constructor(e,i,s){this.graphic=e,this.mover=i,this.selected=s,this.type="reshape"}}class dt{constructor(e,i,s){this.graphic=e,this.mover=i,this.selected=s,this.type="reshape-stop"}}class vt{constructor(e,i,s){this.mover=e,this.dx=i,this.dy=s,this.type="move-start"}}class yt{constructor(e,i,s){this.mover=e,this.dx=i,this.dy=s,this.type="move"}}class mt{constructor(e,i,s){this.mover=e,this.dx=i,this.dy=s,this.type="move-stop"}}class gt{constructor(e){this.added=e,this.type="vertex-select"}}class ut{constructor(e){this.removed=e,this.type="vertex-deselect"}}class Et{constructor(e,i,s,r){this.added=e,this.graphic=i,this.oldGraphic=s,this.vertices=r,this.type="vertex-add"}}class Mt{constructor(e,i,s,r){this.removed=e,this.graphic=i,this.oldGraphic=s,this.vertices=r,this.type="vertex-remove"}}const f=O.X.reshapeGraphics,ot={vertices:{default:new G.Z({style:"circle",size:f.vertex.size,color:f.vertex.color,outline:{color:f.vertex.outlineColor,width:1}}),hover:new G.Z({style:"circle",size:f.vertex.hoverSize,color:f.vertex.hoverColor,outline:{color:f.vertex.hoverOutlineColor,width:1}}),selected:new G.Z({style:"circle",size:f.selected.size,color:f.selected.color,outline:{color:f.selected.outlineColor,width:1}})},midpoints:{default:new G.Z({style:"circle",size:f.midpoint.size,color:f.midpoint.color,outline:{color:f.midpoint.outlineColor,width:1}}),hover:new G.Z({style:"circle",size:f.midpoint.size,color:f.midpoint.color,outline:{color:f.midpoint.outlineColor,width:1}})}};let g=class extends A.Z.EventedAccessor{constructor(t){super(t),this._activeOperationInfo=null,this._editGeometryOperations=null,this._handles=new w.Z,this._graphicAttributes={esriSketchTool:"box"},this._mover=null,this._snappingContext=null,this._snappingTask=null,this._stagedVertex=null,this._tooltip=null,this._viewHandles=new w.Z,this.callbacks={onReshapeStart(){},onReshape(){},onReshapeStop(){},onMoveStart(){},onMove(){},onMoveStop(){},onGraphicClick(){}},this.enableMidpoints=!0,this.enableMovement=!0,this.enableVertices=!0,this.graphic=null,this.layer=null,this.midpointGraphics=new S.Z,this.midpointSymbol=new G.Z({style:"circle",size:6,color:[200,200,200],outline:{color:[100,100,100],width:1}}),this.selectedVertices=[],this.snappingManager=null,this.tooltipOptions=new N.Z,this.type="reshape",this.vertexGraphics=new S.Z,this.view=null}initialize(){const t=this.view;this._highlightHelper=new F.Z({view:t}),this._setup(),this._handles.add([(0,V.gx)(()=>null==t?void 0:t.ready,()=>{const{layer:e,view:i}=this;(0,I.p)(i,e),this._viewHandles.add(i.on("key-down",s=>this._keyDownHandler(s),Y.f.TOOL))},{once:!0,initial:!0}),(0,V.Wy)(()=>this.graphic,()=>this.refresh()),(0,V.Wy)(()=>this.layer,(e,i)=>{i&&(this._clearSelection(),this._resetGraphics(i)),this.refresh()}),(0,V.Wy)(()=>this.enableMidpoints,()=>this.refresh()),(0,V.YP)(()=>this.tooltipOptions.enabled,e=>{this._tooltip=e?new M.u({view:this.view}):(0,_.SC)(this._tooltip)},V.tX)])}destroy(){var t;this._reset(),null==(t=this._mover)||t.destroy(),this._mover=null,this._tooltip=(0,_.SC)(this._tooltip),this._handles=(0,_.SC)(this._handles),this._viewHandles=(0,_.SC)(this._viewHandles)}set highlightsEnabled(t){var e;null==(e=this._highlightHelper)||e.removeAll(),this._set("highlightsEnabled",t),this._setUpHighlights()}get state(){const t=!!this.get("view.ready"),e=!(!this.get("graphic")||!this.get("layer"));return t&&e?"active":t?"ready":"disabled"}set symbols(t){const{midpoints:e=ot.midpoints,vertices:i=ot.vertices}=t||{};this._set("symbols",{midpoints:e,vertices:i})}isUIGraphic(t){const e=[];return this.graphic&&e.push(this.graphic),e.concat(this.vertexGraphics.items,this.midpointGraphics.items),e.length>0&&e.includes(t)}refresh(){this._reset(),this._setup()}reset(){this.graphic=null}clearSelection(){this._clearSelection()}removeSelectedVertices(){this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_setup(){const{graphic:t,layer:e}=this;if(!e||!t||(0,_.Wi)(t.geometry))return;const i=t.geometry;"mesh"!==i.type&&"extent"!==i.type?("polygon"===i.type&&(0,v.pW)(i),this._setUpHighlights(),this._setupGraphics(),this._setupMover()):this._logGeometryTypeError()}_setUpHighlights(){this.highlightsEnabled&&this.graphic&&this._highlightHelper.add(this.graphic)}_setUpGeometryHelper(){const t=this.graphic.geometry;if((0,_.Wi)(t)||"mesh"===t.type||"extent"===t.type)return void this._logGeometryTypeError();const e="multipoint"===t.type?new pt.Z({paths:t.points,spatialReference:t.spatialReference}):t;this._editGeometryOperations=it.c.fromGeometry(e,W.JY.Local)}_saveSnappingContextForHandle(t,e){var i;this._snappingGraphicsLayer=new R.Z({listMode:"hide",internal:!0,title:"Reshape snapping layer"}),this.view.map.layers.add(this._snappingGraphicsLayer),this._snappingContext=new z.N({editGeometryOperations:this._editGeometryOperations,elevationInfo:{mode:"on-the-ground",offset:0},pointer:(null==(i=e.viewEvent)?void 0:i.pointerType)||"mouse",excludeFeature:this.graphic,visualizer:new L.r(this._snappingGraphicsLayer),vertexHandle:this._getVertexFromEditGeometry(t)})}_reset(){this._clearSelection(),this._highlightHelper.removeAll(),this._updateTooltip(),this._resetGraphics(),this._resetSnappingStateVars(),this._activeOperationInfo=null,this._mover&&this._mover.destroy(),this._mover=null,this.view.cursor="default"}_resetSnappingStateVars(){var t;(0,_.pC)(this.snappingManager)&&this.snappingManager.doneSnapping(),(0,_.pC)(this._snappingGraphicsLayer)&&(null!=(t=this.view)&&t.map&&this.view.map.layers.remove(this._snappingGraphicsLayer),this._snappingGraphicsLayer.destroy()),this._editGeometryOperations=(0,_.SC)(this._editGeometryOperations),this._snappingTask=(0,_.IM)(this._snappingTask),this._snappingTask=null,this._snappingContext=null,this._stagedVertex=null}_resetGraphics(t){this._removeMidpointGraphics(t),this._removeVertexGraphics(t),this._set("selectedVertices",[])}_removeMidpointGraphics(t){const e=t||this.layer;e&&e.removeMany(this.midpointGraphics.items),this.midpointGraphics.items.forEach(i=>i.destroy()),this.midpointGraphics.removeAll()}_removeVertexGraphics(t){const e=t||this.layer;e&&e.removeMany(this.vertexGraphics.items),this.vertexGraphics.items.forEach(i=>i.destroy()),this.vertexGraphics.removeAll()}_getCoordinatesForUI(t){const e=(0,v.nA)(t.clone());if("polygon"===t.type)for(const i of e){const s=i[i.length-1];i[0][0]===s[0]&&i[0][1]===s[1]&&i.length>2&&i.pop()}return e}_setupGraphics(){const t=this.graphic.geometry;if((0,_.pC)(t)&&("polyline"===t.type||"polygon"===t.type)){const e=this._getCoordinatesForUI(t);this.enableMidpoints&&this._setUpMidpointGraphics(e),this.enableVertices&&this._setUpVertexGraphics(e)}}_setUpMidpointGraphics(t){this._removeMidpointGraphics();const e=this._createMidpointGraphics(t);this.midpointGraphics.addMany(e),this.layer.addMany(e)}_setUpVertexGraphics(t){this._removeVertexGraphics();const e=this._createVertexGraphics(t);this.vertexGraphics.addMany(e),this._storeRelatedVertexIndices(),this.layer.addMany(e)}_createVertexGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:s}}=this,r=[];return null==t||t.forEach((a,n)=>{a.forEach((c,p)=>{var l;const[h,y]=c;r.push(new P.Z({geometry:new j.Z({x:h,y,spatialReference:s}),symbol:null==(l=null==i?void 0:i.vertices)?void 0:l.default,attributes:q($({},e),{pathIndex:n,pointIndex:p})}))})}),r}_createMidpointGraphics(t){const{_graphicAttributes:e,symbols:i,view:{spatialReference:s}}=this,r=[];return null==t||t.forEach((a,n)=>{a.forEach((c,p)=>{const[h,y]=c,l=a[p+1]?p+1:0;if("polygon"===(0,_.U2)(this.graphic.geometry,"type")||0!==l){const[x,T]=a[l],[J,rt]=(0,v.Gi)([h,y],[x,T]);r.push(new P.Z({geometry:new j.Z({x:J,y:rt,spatialReference:s}),symbol:i.midpoints.default,attributes:q($({},e),{pathIndex:n,pointIndexStart:p,pointIndexEnd:l})}))}})}),r}_storeRelatedVertexIndices(){const t=this.vertexGraphics.items;if(!t)return;const e=t.map(({geometry:i})=>({x:i.x,y:i.y}));for(let i=0;i<e.length;i++){const s=[];for(let r=0;r<e.length;r++){if(i===r)continue;const a=e[i],n=e[r];a.x===n.x&&a.y===n.y&&s.push(r)}t[i].attributes.relatedGraphicIndices=s}}_setupMover(){const{enableMovement:t,graphic:e,midpointGraphics:i,vertexGraphics:s,view:r}=this,a=s.concat(i).items;t&&a.push(e),this._mover=new Q.default({enableMoveAllGraphics:!1,highlightsEnabled:!1,indicatorsEnabled:!1,graphics:a,view:r,callbacks:{onGraphicClick:n=>this._onGraphicClickCallback(n),onGraphicMoveStart:n=>this._onGraphicMoveStartCallback(n),onGraphicMove:n=>this._onGraphicMoveCallback(n),onGraphicMoveStop:n=>this._onGraphicMoveStopCallback(n),onGraphicPointerOver:n=>this._onGraphicPointerOverCallback(n),onGraphicPointerOut:n=>this._onGraphicPointerOutCallback(n)}})}_onGraphicClickCallback(t){t.viewEvent.stopPropagation();const e=t.graphic;if(e===this.graphic)this.clearSelection(),this.emit("graphic-click",t),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(t);else if(this._isMidpoint(e)){if(2===t.viewEvent.button)return;const i=this.graphic.clone(),s=this._createVertexFromMidpoint(e);this.refresh(),this._emitVertexAddEvent([e],i,s)}else this._isVertex(e)&&(t.viewEvent.stopPropagation(),2===t.viewEvent.button?this._removeVertices(e):(t.viewEvent.native.shiftKey||this._clearSelection(),this.selectedVertices.includes(e)?this._removeFromSelection(e,!0):this._addToSelection(e)))}_setUpOperation(t){const{graphic:e,dx:i,dy:s}=t,r=e===this.graphic;this._resetSnappingStateVars(),this._setUpGeometryHelper(),this._saveSnappingContextForHandle(e,t),this._activeOperationInfo={target:this.graphic,mover:e,operationType:r?"move":"reshape",totalDx:i,totalDy:s}}_onGraphicMoveStartCallback(t){const{dx:e,dy:i,graphic:s}=t;if(s===this.graphic){const{geometry:r}=s;return this._setUpOperation(t),this._emitMoveStartEvent(e,i),void((0,_.pC)(r)&&"point"===r.type&&this._onHandleMove(s,e,i,t,()=>{this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(e,i)}))}if(!this.selectedVertices.includes(s)){if(this._clearSelection(),this._isMidpoint(s)){const r=this.graphic.clone(),a=this._createVertexFromMidpoint(s);this._emitVertexAddEvent([s],r,a)}this._addToSelection(s)}this._setUpOperation(t),this._emitReshapeStartEvent(s),this._onHandleMove(s,e,i,t,()=>{this._updateTooltip(s,t.viewEvent),this._emitReshapeEvent(s)})}_onGraphicMoveCallback(t){const e=this._activeOperationInfo;if(!e)return;const{dx:i,dy:s,graphic:r}=t;e.totalDx+=i,e.totalDy+=s;const{operationType:a}=e,{geometry:n}=r;if(!(0,_.Wi)(n))if("move"!==a)this._onHandleMove(r,i,s,t,()=>{this._updateTooltip(r,t.viewEvent),this._emitReshapeEvent(r)});else if("point"===n.type)this._onHandleMove(r,i,s,t,()=>{this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(i,s)});else if("polyline"===n.type||"polygon"===n.type){const c=this._getCoordinatesForUI(n);this._updateVertexGraphicLocations(c),this._updateTooltip(this.graphic,t.viewEvent),this._emitMoveEvent(i,s)}}_onGraphicMoveStopCallback(t){const e=this._activeOperationInfo;if(!e)return;const{dx:i,dy:s,graphic:r}=t,{operationType:a}=e;e.totalDx+=i,e.totalDy+=s,this._onHandleMove(r,i,s,t,()=>"move"===a?this._emitMoveStopEvent():this._emitReshapeStopEvent(r)),this._isMidpoint(r)?this.refresh():(this._updateTooltip(this._isVertex(r)?r:null),this._resetSnappingStateVars(),this._activeOperationInfo=null)}_updateVertexGraphicLocations(t){const e=this.view.spatialReference;for(const i of this.vertexGraphics){const{pathIndex:s,pointIndex:r}=i.attributes,[a,n]=t[s][r];i.geometry=new j.Z({x:a,y:n,spatialReference:e})}this._updateMidpointGraphicLocations(t)}_updateMidpointGraphicLocations(t){for(const e of this.midpointGraphics){const{pathIndex:i,pointIndexStart:s,pointIndexEnd:r}=e.attributes,[a,n]=t[i][s],[c,p]=t[i][r],[h,y]=(0,v.Gi)([a,n],[c,p]);e.geometry=new j.Z({x:h,y,spatialReference:this.view.spatialReference})}}_getIndicesForVertexGraphic({attributes:t}){return[(null==t?void 0:t.pathIndex)||0,(null==t?void 0:t.pointIndex)||0]}_getVertexFromEditGeometry(t){const[e,i]=this._getIndicesForVertexGraphic(t);return this._editGeometryOperations.data.components[e].vertices[i]}_onHandleMove(t,e,i,s,r){var a=this;(0,_.IM)(this._snappingTask);const n=this._snappingContext;if(!n)return;const c=t.geometry,p="graphic-move-stop"===s.type;if((0,_.pC)(this.snappingManager)&&this.selectedVertices.length<2&&!p){const h=this.snappingManager;this._stagedVertex=h.update({point:c,context:n}),this._syncGeometryAfterVertexMove(t,new j.Z(this._stagedVertex),e,i,p),r(),this._snappingTask=(0,U.vr)(function(){var y=(0,K.Z)(function*(l){const x=yield h.snap({point:c,context:n,signal:l});x.valid&&(a._stagedVertex=x.apply(),a._syncGeometryAfterVertexMove(t,new j.Z(a._stagedVertex),e,i,p),r())});return function(l){return y.apply(this,arguments)}}())}else{const h=(0,_.pC)(this._stagedVertex)?new j.Z(this._stagedVertex):c;this._syncGeometryAfterVertexMove(t,h,e,i,p),r()}}_syncGeometryAfterVertexMove(t,e,i,s,r=!1){var a=this;return(0,K.Z)(function*(){const n=a._editGeometryOperations.data.geometry;if("point"===n.type)t.geometry=e;else{const{x:c,y:p}=e,[h,y]=a._getIndicesForVertexGraphic(t);let l=(0,v.nA)(n);const x=l[h].length-1;l[h][y]=[c,p],"polygon"===n.type&&(0===y?l[h][x]=[c,p]:y===x&&(l[h][0]=[c,p])),a._isVertex(t)&&(l=a._moveRelatedCoordinates(l,t,c,p),l=a._moveSelectedHandleCoordinates(l,t,i,s,"polygon"===n.type),a._updateMidpointGraphicLocations(l)),a.graphic.geometry=n.clone();const T=a._getVertexFromEditGeometry(t);a._editGeometryOperations.moveVertices([T],c-T.pos[0],p-T.pos[1],0),r&&(a._mover?a._mover.updateGeometry(a._mover.graphics.indexOf(t),e):t.geometry=e)}})()}_moveRelatedCoordinates(t,e,i,s){const{relatedGraphicIndices:r}=e.attributes;for(const a of r){const n=this.vertexGraphics.getItemAt(a),{pathIndex:c,pointIndex:p}=n.attributes;t[c][p]=[i,s],n.geometry=e.geometry}return t}_moveSelectedHandleCoordinates(t,e,i,s,r){for(const a of this.selectedVertices)if(a!==e){const{pathIndex:n,pointIndex:c,relatedGraphicIndices:p}=a.attributes,h=(0,et.e7)(a.geometry,i,s,this.view),y=t[n].length-1;t[n][c]=[h.x,h.y],a.geometry=h,r&&(0===c?t[n][y]=[h.x,h.y]:c===y&&(t[n][0]=[h.x,h.y]));for(const l of p){const x=this.vertexGraphics.getItemAt(l),{pathIndex:T,pointIndex:J}=x.attributes;t[T][J]=[h.x,h.y],x.geometry=h}}return t}_onGraphicPointerOverCallback(t){const e=t.graphic,i=this._isVertex(e);i&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.hover),this._updateTooltip(i?e:null),this._updateHoverCursor(e)}_onGraphicPointerOutCallback(t){const e=t.graphic;this._isVertex(e)&&!this._isSelected(e)&&(e.symbol=this.symbols.vertices.default),this.view.cursor="default",this._updateTooltip()}_createVertexFromMidpoint(t){const{_graphicAttributes:e,graphic:i}=this,s=i.geometry;if((0,_.Wi)(s)||"polygon"!==s.type&&"polyline"!==s.type)return[];const r=s.clone(),a=[],{pathIndex:n,pointIndexStart:c,pointIndexEnd:p}=t.attributes,{x:h,y}=t.geometry,l=0===p?c+1:p,x=(0,v.nA)(r);return x[n].splice(l,0,[h,y]),t.attributes=q($({},e),{pathIndex:n,pointIndex:l,relatedGraphicIndices:[]}),a.push({coordinates:x[n][l],componentIndex:n,vertexIndex:l}),this.graphic.geometry=r,a}_addToSelection(t){t instanceof P.Z&&(t=[t]);for(const e of t)e.symbol=this.symbols.vertices.selected;this._set("selectedVertices",this.selectedVertices.concat(t)),this._emitSelectEvent(t)}_removeFromSelection(t,e){const{vertices:i}=this.symbols,s=e?i.hover:i.default;t instanceof P.Z&&(t=[t]);for(const r of t)this.selectedVertices.splice(this.selectedVertices.indexOf(r),1),this._set("selectedVertices",this.selectedVertices),r.set("symbol",s);this._emitDeselectEvent(t)}_clearSelection(){if(this.selectedVertices.length){const t=this.selectedVertices;for(const e of this.selectedVertices)e.set("symbol",this.symbols.vertices.default);this._set("selectedVertices",[]),this._emitDeselectEvent(t)}}_keyDownHandler(t){k.j.delete.includes(t.key)&&!t.repeat&&this.selectedVertices.length&&this._removeVertices(this.selectedVertices)}_removeVertices(t){const e=this.graphic.geometry;if((0,_.Wi)(e)||"polygon"!==e.type&&"polyline"!==e.type||"polygon"===e.type&&this.vertexGraphics.length<4||this.vertexGraphics.length<3)return;t instanceof P.Z&&(t=[t]);const i=this.graphic.clone(),s=e.clone();let r=(0,v.nA)(s);const a=[];t instanceof P.Z&&(t=[t]);for(const n of t){const{x:c,y:p}=n.geometry;for(let h=0;h<r.length;h++){const y=r[h];for(let l=0;l<y.length;l++){const[x,T]=y[l];c===x&&p===T&&(a.push({coordinates:r[h][l],componentIndex:h,vertexIndex:l}),r[h].splice(Number(l),1))}}}if("polygon"===s.type)r=r.filter(n=>{if(n.length<2)return!1;const[c,p]=n[0],[h,y]=n[n.length-1];return(2!==n.length||c!==h||p!==y)&&(c===h&&p===y||n.push(n[0]),!0)}),s.rings=r;else{for(const n of r)1===n.length&&r.splice(r.indexOf(n),1);s.paths=r}this.graphic.geometry=s,this.refresh(),this._emitVertexRemoveEvent(t,i,a)}_isVertex(t){return this.vertexGraphics.includes(t)}_isSelected(t){return this._isVertex(t)&&this.selectedVertices.includes(t)}_isMidpoint(t){return this.midpointGraphics.includes(t)}_updateHoverCursor(t){this.view.cursor=this._isMidpoint(t)?"copy":"move"}_updateTooltip(t,e){(0,_.Wi)(this._tooltip)||(t?t===this.graphic?this._updateMoveGraphicTooltip(e):this._updateMoveVertexTooltip(e):this._tooltip.clear())}_updateMoveGraphicTooltip(t){const{_tooltip:e,tooltipOptions:i,view:s}=this;if((0,_.Wi)(e))return;const r=new nt.$E({tooltipOptions:i});if(t){const{x:a,y:n}=t.origin,c=s.toMap(t),p=s.toMap((0,b.vW)(a,n)),h=(0,st.Qw)(p,c);r.distance=(0,_.pC)(h)?h:Z.yP}e.info=r}_updateMoveVertexTooltip(t){const{_tooltip:e,graphic:{geometry:i},tooltipOptions:s,view:r}=this;if((0,_.Wi)(e))return;const a=new nt.nk({tooltipOptions:s});if((0,_.pC)(i)&&("polygon"===i.type?a.area=(0,ct.f)(i):"polyline"===i.type&&(a.totalLength=(0,st.C_)(i))),t){const{x:n,y:c}=t.origin,p=r.toMap(t),h=r.toMap((0,b.vW)(n,c)),y=(0,st.Qw)(h,p);a.distance=(0,_.pC)(y)?y:Z.yP}e.info=a}_emitMoveStartEvent(t,e){const i=new vt(this.graphic,t,e);this.emit("move-start",i),this.callbacks.onMoveStart&&this.callbacks.onMoveStart(i)}_emitMoveEvent(t,e){const i=new yt(this.graphic,t,e);this.emit("move",i),this.callbacks.onMove&&this.callbacks.onMove(i)}_emitMoveStopEvent(){const t=this._activeOperationInfo;if(!t)return;const{totalDx:e,totalDy:i}=t,s=new mt(this.graphic,e,i);this.emit("move-stop",s),this.callbacks.onMoveStop&&this.callbacks.onMoveStop(s)}_emitReshapeStartEvent(t){const e=new lt(this.graphic,t,this.selectedVertices);this.emit("reshape-start",e),this.callbacks.onReshapeStart&&this.callbacks.onReshapeStart(e)}_emitReshapeEvent(t){const e=new _t(this.graphic,t,this.selectedVertices);this.emit("reshape",e),this.callbacks.onReshape&&this.callbacks.onReshape(e)}_emitReshapeStopEvent(t){const e=new dt(this.graphic,t,this.selectedVertices);this.emit("reshape-stop",e),this.callbacks.onReshapeStop&&this.callbacks.onReshapeStop(e)}_emitSelectEvent(t){const e=new gt(t);this.emit("select",e),this.callbacks.onVertexSelect&&this.callbacks.onVertexSelect(e)}_emitDeselectEvent(t){const e=new ut(t);this.emit("deselect",e),this.callbacks.onVertexDeselect&&this.callbacks.onVertexDeselect(e)}_emitVertexAddEvent(t,e,i){const s=new Et(t,this.graphic,e,i);this.emit("vertex-add",s),this.callbacks.onVertexAdd&&this.callbacks.onVertexAdd(s)}_emitVertexRemoveEvent(t,e,i){const s=new Mt(t,this.graphic,e,i);this.emit("vertex-remove",s),this.callbacks.onVertexRemove&&this.callbacks.onVertexRemove(s)}_logGeometryTypeError(){X.Z.getLogger(this.declaredClass).error(new B.Z("reshape:invalid-geometry","Reshape operation not supported for the provided graphic. The geometry type is not supported."))}};(0,d._)([(0,m.Cb)()],g.prototype,"_tooltip",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"callbacks",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"enableMidpoints",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"enableMovement",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"enableVertices",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"graphic",void 0),(0,d._)([(0,m.Cb)({value:!0})],g.prototype,"highlightsEnabled",null),(0,d._)([(0,m.Cb)()],g.prototype,"layer",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],g.prototype,"midpointGraphics",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"midpointSymbol",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],g.prototype,"selectedVertices",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"snappingManager",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],g.prototype,"state",null),(0,d._)([(0,m.Cb)({value:ot})],g.prototype,"symbols",null),(0,d._)([(0,m.Cb)({type:N.Z})],g.prototype,"tooltipOptions",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],g.prototype,"type",void 0),(0,d._)([(0,m.Cb)({readOnly:!0})],g.prototype,"vertexGraphics",void 0),(0,d._)([(0,m.Cb)()],g.prototype,"view",void 0),g=(0,d._)([(0,H.j)("esri.views.draw.support.Reshape")],g);const ft=g},30174:(D,u,o)=>{o.d(u,{f:()=>m,k:()=>b});var K=o(62208),d=o(40686),P=(o(29132),o(15572)),U=o(44766),S=o(55915),B=o(10049),A=o(91622),w=o(65234);function _(E){return(0,P.ne)(Math.abs((0,B.p8)([E],"square-meters")[0]),"square-meters")}function Z(E){try{return(0,P.ne)(Math.abs((0,U.geodesicArea)(E,"square-meters")),"square-meters")}catch(C){return null}}function V(E){const C=[];return(0,S.K2)(E,C)?(0,P.ne)(Math.abs((0,B.p8)([{type:"polygon",rings:C,spatialReference:w.Z.WGS84}],"square-meters")[0]),"square-meters"):null}function b(E,C,H=(0,d.ln)()){if("on-the-ground"===C){const v=function X(E){const{spatialReference:C}=E;return(0,A.T)(C,_,Z,V,E)}(E);return(0,K.pC)(v)?v:(0,d.X)(E,H)}return(0,d.oN)(E,H)}function m(E,C=(0,d.ln)()){return b(E,"on-the-ground",C)}},40686:(D,u,o)=>{o.d(u,{X:()=>Z,bT:()=>C,ln:()=>E,oN:()=>_});var K=o(62208),d=o(15572),tt=o(16730),P=o(11915),U=o(84161),S=o(28093),B=o(55915),A=o(90014),w=o(11544),X=o(66601);function _(v,R={positionsWorldCoords:[]}){return V(v,R)}function Z(v,R={positionsWorldCoords:[]}){return V(v,R,!1)}function V(v,R,G=v.hasZ){const W=(0,X.m)(v.spatialReference),L=(0,tt.oq)(W);if((0,K.Wi)(L))return null;const et=(F,I)=>!(I.length<2||((0,U.s)(F,I[0],I[1],G&&I[2]||0),0));let Q=0;for(const F of v.rings){const I=F.length;if(I<3)continue;const{positionsWorldCoords:O}=R;for(;O.length<I;)O.push((0,S.c)());const Y=b,k=(0,U.s)(m,0,0,0),it=1/I;for(let M=0;M<I;M++){if(!et(Y,F[M])||!(0,B.SH)(Y,v.spatialReference,O[M],W))return null;(0,U.z)(k,k,O[M],it)}const N=(0,A.zk)(O[0],O[1],k,(0,A.re)());if(0===(0,U.p)((0,A.mJ)(N)))continue;for(let M=0;M<I;M++)(0,A.tx)(N,k,O[M],O[M]);const z=C(O);for(let M=0;M<z.length;M+=3)Q+=(0,w.wu)(O[z[M]],O[z[M+1]],O[z[M+2]])}return(0,d.ne)(Q,L)}const b=(0,S.c)(),m=(0,S.c)();function E(){return{positionsWorldCoords:[]}}function C(v){return(0,P.e)(function H(v){const R=new Float64Array(2*v.length);for(let G=0;G<v.length;++G){const W=v[G],L=2*G;R[L+0]=W[0],R[L+1]=W[1]}return R}(v),[],2)}}}]);
"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8443],{36554:(Se,V,r)=>{r.r(V),r.d(V,{default:()=>X});var M=r(15861),a=r(17626),Z=(r(29132),r(73281)),A=(r(4832),r(49067),r(96794),r(69747),r(40425),r(69357),r(40342),r(73640),r(33474),r(32088)),_=r(99959),u=r(77712),w=(r(90912),r(85931),r(76898)),U=r(71774),ee=r(44917),N=r(26584),z=r(47996),O=r(62208),g=r(89628),B=r(17253),Q=r(65234);let b=class extends z.Z{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(o){return this.addResolvingPromise(this._loadOGCServices(this.layer,o)),this.when()}getSource(){const{featureDefinition:{collection:o,layerDefinition:s,spatialReference:i,supportedCrs:d},layer:{apiKey:h,customParameters:R,effectiveMaxRecordCount:m}}=this;return{type:"ogc-source",collection:o,layerDefinition:s,maxRecordCount:m,queryParameters:{apiKey:h,customParameters:R},spatialReference:i,supportedCrs:d}}queryExtent(o,s={}){return null}queryFeatureCount(o,s={}){return null}queryFeatures(o,s={}){return this.queryFeaturesJSON(o,s).then(i=>B.Z.fromJSON(i))}queryFeaturesJSON(o,s={}){const i=this.getSource();return this.load(s).then(()=>(0,g.yN)(i,o,s))}queryObjectIds(o,s={}){return null}serviceSupportsSpatialReference(o){return!(!o.isWGS84&&!o.isWebMercator&&!this.featureDefinition.supportedCrs[o.wkid])}_conformsToType(o,s){var d;const i=new RegExp(`^${s}$`,"i");return null!=(d=o.conformsTo.some(h=>i.test(h)))&&d}_getCapabilities(o,s){return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:o},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:s,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsFullTextSearch:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getMaxRecordCount(o){var i,d,h,R,m,v;const s=null==(i=null==o?void 0:o.components)?void 0:i.parameters;return null!=(v=null==(h=null==(d=null==s?void 0:s.limit)?void 0:d.schema)?void 0:h.maximum)?v:null==(m=null==(R=null==s?void 0:s.limitFeatures)?void 0:R.schema)?void 0:m.maximum}_getStorageSpatialReference(o){var d;const s=null!=(d=o.storageCrs)?d:g.$9,i=(0,g.d)(s);return(0,O.Wi)(i)?Q.Z.WGS84:new Q.Z({wkid:i})}_getSupportedSpatialReferences(o,s){var m,v;const i="#/crs",d=null!=(m=o.crs)?m:[g.$9],h=d.includes(i)?d.filter(j=>j!==i).concat(null!=(v=s.crs)?v:[]):d,R=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return h.filter(j=>!R.test(j))}_loadOGCServices(o,s){var i=this;return(0,M.Z)(function*(){const d=(0,O.pC)(s)?s.signal:null,{apiKey:h,collectionId:R,customParameters:m,fields:v,geometryType:j,hasZ:re,objectIdField:Re,timeInfo:ne,url:Pe}=o,Fe={fields:null==v?void 0:v.map(L=>L.toJSON()),geometryType:U.P.toJSON(j),hasZ:null!=re&&re,objectIdField:Re,timeInfo:null==ne?void 0:ne.toJSON()},W={apiKey:h,customParameters:m,signal:d},se=yield(0,g.gp)(Pe,W),[me,ve]=yield Promise.all([(0,g.G4)(se,W),(0,g.j)(se,W)]);if(!i._conformsToType(me,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new N.Z("ogc-feature-layer:no-geojson-support","Server does not support geojson");const K=ve.collections.find(L=>L.id===R);if(!K)throw new N.Z("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const Oe=i._conformsToType(me,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?yield(0,g.eS)(se,W):null,Ce=yield(0,g.w9)(K,Fe,W),Ie=i._getMaxRecordCount(Oe),Te=i._getCapabilities(Ce.hasZ,Ie),be=i._getStorageSpatialReference(K).toJSON(),xe=i._getSupportedSpatialReferences(K,ve),je=new RegExp(`^${g.Lu}`,"i"),ie={};for(const L of xe){const ae=(0,g.d)(L);(0,O.pC)(ae)&&(ie[ae]||(ie[ae]=L.replace(je,"")))}i.featureDefinition={capabilities:Te,collection:K,layerDefinition:Ce,spatialReference:be,supportedCrs:ie}})()}};(0,a._)([(0,u.Cb)()],b.prototype,"featureDefinition",void 0),(0,a._)([(0,u.Cb)({constructOnly:!0})],b.prototype,"layer",void 0),(0,a._)([(0,u.Cb)()],b.prototype,"type",void 0),b=(0,a._)([(0,w.j)("esri.layers.graphics.sources.OGCFeatureSource")],b);var te=r(50085),oe=r(552),e=r(50107),t=r(35126),n=r(81380),l=r(49286),c=r(32629),C=r(6647),D=r(30346),y=r(99555),P=r(97941),f=r(13812),H=r(41638),J=r(36255),$=r(55911),I=r(36630),E=r(170),S=r(62667),T=r(96854),x=r(49430),F=r(2004);const Y=(0,$.v)();let p=class extends((0,te.V)((0,e.N)((0,n.M)((0,t.b)((0,oe.h)((0,c.c)((0,P.n)((0,y.M)((0,l.q)((0,C.I)((0,D.Q)((0,_.R)(ee.Z))))))))))))){constructor(o){super(o),this.capabilities=null,this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.maxRecordCount=null,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new b({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var o;null==(o=this.source)||o.destroy()}load(o){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},o).then(()=>this._fetchService(o))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get effectiveMaxRecordCount(){var o,s,i;return null!=(i=null!=(s=this.maxRecordCount)?s:null==(o=this.capabilities)?void 0:o.query.maxRecordCount)?i:5e3}get isTable(){return this.loaded&&null==this.geometryType}set renderer(o){(0,I.YN)(o,this.fieldsIndex),this._set("renderer",o)}on(o,s){return super.on(o,s)}createPopupTemplate(o){return(0,x.eZ)(this,o)}createQuery(){return new T.Z}getField(o){return this.fieldsIndex.get(o)}getFieldDomain(o,s){var m;let i,d=!1;const h=null==(m=null==s?void 0:s.feature)?void 0:m.attributes,R=this.typeIdField&&(null==h?void 0:h[this.typeIdField]);return null!=R&&this.types&&(d=this.types.some(v=>{var j;return v.id==R&&(i=null==(j=v.domains)?void 0:j[o],"inherited"===(null==i?void 0:i.type)&&(i=this._getLayerDomain(o)),!0)})),d||i||(i=this._getLayerDomain(o)),i}queryFeatures(o,s){return this.load().then(()=>this.source.queryFeatures(T.Z.from(o)||this.createQuery(),s)).then(i=>{var d;return null==(d=null==i?void 0:i.features)||d.forEach(h=>{h.layer=h.sourceLayer=this}),i})}serviceSupportsSpatialReference(o){var s,i;return null!=(i=null==(s=this.source)?void 0:s.serviceSupportsSpatialReference(o))&&i}_fetchService(o){var s=this;return(0,M.Z)(function*(){yield s.source.load(o),s.read(s.source.featureDefinition,{origin:"service"}),(0,I.YN)(s.renderer,s.fieldsIndex),(0,I.UF)(s.timeInfo,s.fieldsIndex)})()}_getLayerDomain(o){if(!this.fields)return null;for(const s of this.fields)if(s.name===o&&s.domain)return s.domain;return null}};(0,a._)([(0,u.Cb)({readOnly:!0,json:{origins:{service:{read:!0}}}})],p.prototype,"capabilities",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:!0}})],p.prototype,"collectionId",void 0),(0,a._)([(0,u.Cb)({type:String})],p.prototype,"copyright",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],p.prototype,"defaultPopupTemplate",null),(0,a._)([(0,u.Cb)({type:String})],p.prototype,"definitionExpression",void 0),(0,a._)([(0,u.Cb)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],p.prototype,"description",void 0),(0,a._)([(0,u.Cb)({type:String})],p.prototype,"displayField",void 0),(0,a._)([(0,u.Cb)({type:Number})],p.prototype,"effectiveMaxRecordCount",null),(0,a._)([(0,u.Cb)(f.PV)],p.prototype,"elevationInfo",void 0),(0,a._)([(0,u.Cb)({type:[J.Z],json:{origins:{service:{name:"layerDefinition.fields"}}}})],p.prototype,"fields",void 0),(0,a._)([(0,u.Cb)(Y.fieldsIndex)],p.prototype,"fieldsIndex",void 0),(0,a._)([(0,u.Cb)({readOnly:!0,type:F.Z,json:{origins:{service:{name:"layerDefinition.extent"}}}})],p.prototype,"fullExtent",void 0),(0,a._)([(0,u.Cb)({type:U.M.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:U.M.read}}}}})],p.prototype,"geometryType",void 0),(0,a._)([(0,u.Cb)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],p.prototype,"hasZ",void 0),(0,a._)([(0,u.Cb)({type:Boolean,readOnly:!0})],p.prototype,"isTable",null),(0,a._)([(0,u.Cb)({type:[E.Z],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:S.r},write:!0}}}})],p.prototype,"labelingInfo",void 0),(0,a._)([(0,u.Cb)(f.iR)],p.prototype,"labelsVisible",void 0),(0,a._)([(0,u.Cb)(f.rn)],p.prototype,"legendEnabled",void 0),(0,a._)([(0,u.Cb)({type:Number})],p.prototype,"maxRecordCount",void 0),(0,a._)([(0,u.Cb)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],p.prototype,"objectIdField",void 0),(0,a._)([(0,u.Cb)({type:["OGCFeatureLayer"]})],p.prototype,"operationalLayerType",void 0),(0,a._)([(0,u.Cb)(f.C_)],p.prototype,"popupEnabled",void 0),(0,a._)([(0,u.Cb)({type:Z.Z,json:{name:"popupInfo",write:!0}})],p.prototype,"popupTemplate",void 0),(0,a._)([(0,u.Cb)({types:A.A,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:A.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],p.prototype,"renderer",null),(0,a._)([(0,u.Cb)(f.YI)],p.prototype,"screenSizePerspectiveEnabled",void 0),(0,a._)([(0,u.Cb)({readOnly:!0})],p.prototype,"source",void 0),(0,a._)([(0,u.Cb)({readOnly:!0,type:Q.Z,json:{origins:{service:{read:!0}}}})],p.prototype,"spatialReference",void 0),(0,a._)([(0,u.Cb)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],p.prototype,"title",void 0),(0,a._)([(0,u.Cb)({readOnly:!0,json:{read:!1}})],p.prototype,"type",void 0),(0,a._)([(0,u.Cb)({type:String,readOnly:!0})],p.prototype,"typeIdField",void 0),(0,a._)([(0,u.Cb)({type:[H.Z]})],p.prototype,"types",void 0),(0,a._)([(0,u.Cb)(f.HQ)],p.prototype,"url",void 0),p=(0,a._)([(0,w.j)("esri.layers.OGCFeatureLayer")],p);const X=p},58775:(Se,V,r)=>{r.d(V,{O3:()=>b,lG:()=>oe,my:()=>te,q9:()=>G});var M=r(26584),a=r(66385),le=r(88071),Z=r(36630);const pe={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function G(e){return pe[e]}function*k(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*ue(e){if(e)switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const n of t)yield*n}}function ce(e){for(const t of e)if(t.length>2)return!0;return!1}function q(e){let t=0;for(let n=0;n<e.length;n++){const l=e[n],c=e[(n+1)%e.length];t+=l[0]*c[1]-c[0]*l[1]}return t<=0}function A(e){const t=e[0],n=e[e.length-1];return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]||e.push(t),e}function _(e,t,n){switch(t.type){case"LineString":return function u(e,t,n){return O(e,t.coordinates,n),e}(e,t,n);case"MultiLineString":return function he(e,t,n){for(const l of t.coordinates)O(e,l,n);return e}(e,t,n);case"MultiPoint":return function ge(e,t,n){return O(e,t.coordinates,n),e}(e,t,n);case"MultiPolygon":return function w(e,t,n){for(const l of t.coordinates){N(e,l[0],n);for(let c=1;c<l.length;c++)z(e,l[c],n)}return e}(e,t,n);case"Point":return function U(e,t,n){return B(e,t.coordinates,n),e}(e,t,n);case"Polygon":return function ee(e,t,n){const l=t.coordinates;N(e,l[0],n);for(let c=1;c<l.length;c++)z(e,l[c],n);return e}(e,t,n)}}function N(e,t,n){const l=A(t);!function ye(e){return!q(e)}(l)?O(e,l,n):g(e,l,n)}function z(e,t,n){const l=A(t);!function fe(e){return q(e)}(l)?O(e,l,n):g(e,l,n)}function O(e,t,n){for(const l of t)B(e,l,n);e.lengths.push(t.length)}function g(e,t,n){for(let l=t.length-1;l>=0;l--)B(e,t[l],n);e.lengths.push(t.length)}function B(e,t,n){const[l,c,C]=t;e.coords.push(l,c),n.hasZ&&e.coords.push(C||0)}function Q(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function b(e){if(!e)throw new M.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new M.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const n="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,l=new RegExp(".*(CRS84H?|4326)$","i");if(!n||!l.test(n))throw new M.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function te(e,t={}){var $;const n=[],l=new Set,c=new Set;let C,D=!1,y=null,P=!1,{geometryType:f=null}=t,H=!1;for(const I of k(e)){const{geometry:E,properties:S,id:T}=I;if((!E||(f||(f=G(E.type)),G(E.type)===f))&&(D||(D=ce(ue(E))),P||(P=null!=T,P&&(C=typeof T,S&&(y=Object.keys(S).filter(x=>S[x]===T)))),S&&y&&P&&null!=T&&(y.length>1?y=y.filter(x=>S[x]===T):1===y.length&&(y=S[y[0]]===T?y:[])),!H&&S)){let x=!0;for(const F in S){if(l.has(F))continue;const Y=S[F];if(null==Y){x=!1,c.add(F);continue}const p=Q(Y);if("unknown"===p){c.add(F);continue}c.delete(F),l.add(F);const X=(0,Z.q6)(F);X&&n.push({name:X,alias:F,type:p})}H=x}}const J=null!=($=(0,Z.q6)(1===(null==y?void 0:y.length)&&y[0]||null))?$:void 0;if(J)for(const I of n)if(I.name===J&&(0,Z.H7)(I)){I.type="esriFieldTypeOID";break}return{fields:n,geometryType:f,hasZ:D,objectIdFieldName:J,objectIdFieldType:C,unknownFields:Array.from(c)}}function oe(e,t){return Array.from(function*de(e,t={}){const{geometryType:n,objectIdField:l}=t;for(const c of e){const{geometry:C,properties:D,id:y}=c;if(C&&G(C.type)!==n)continue;const P=D||{};let f;l&&(f=P[l],null==y||f||(P[l]=f=y)),yield new a.u_(C?_(new le.Z,C,t):null,P,null,null!=f?f:void 0)}}(k(e),t))}}}]);
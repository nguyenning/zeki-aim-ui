"use strict";var Q=Object.defineProperty,$=Object.defineProperties,A=Object.getOwnPropertyDescriptors,I=Object.getOwnPropertySymbols,G=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,Z=(d,a,o)=>a in d?Q(d,a,{enumerable:!0,configurable:!0,writable:!0,value:o}):d[a]=o,h=(d,a)=>{for(var o in a||(a={}))G.call(a,o)&&Z(d,o,a[o]);if(I)for(var o of I(a))B.call(a,o)&&Z(d,o,a[o]);return d},N=(d,a)=>$(d,A(a));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5625],{85625:(d,a,o)=>{o.r(a),o.d(a,{default:()=>U});var l=o(15861),i=o(17626),C=(o(29132),o(26584)),S=o(62208),j=o(21726),n=o(77712),x=(o(85931),o(8314)),J=(o(90912),o(68653)),b=o(76898),w=o(32258),D=o(47996),L=o(10699),P=o(59289),T=o(17253),E=o(2004);let c=class extends D.Z{constructor(t){var e;super(t),e=this,this.type="csv",this.refresh=(0,L.Ds)(function(){var r=(0,l.Z)(function*(u){yield e.load();const{extent:y,timeExtent:p}=yield e._connection.invoke("refresh",u);return e.sourceJSON.extent=y,p&&(e.sourceJSON.timeInfo.timeExtent=[p.start,p.end]),{dataChanged:!0,updates:{extent:e.sourceJSON.extent,timeInfo:e.sourceJSON.timeInfo}}});return function(u){return r.apply(this,arguments)}}())}load(t){const e=(0,S.pC)(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),Promise.resolve(this)}destroy(){var t;null==(t=this._connection)||t.close(),this._connection=null}openPorts(){var t=this;return(0,l.Z)(function*(){return yield t.load(),t._connection.openPorts()})()}queryFeatures(t,e={}){var r=this;return(0,l.Z)(function*(){yield r.load(e);const u=yield r._connection.invoke("queryFeatures",t?t.toJSON():null,e);return T.default.fromJSON(u)})()}queryFeaturesJSON(t,e={}){var r=this;return(0,l.Z)(function*(){return yield r.load(e),r._connection.invoke("queryFeatures",t?t.toJSON():null,e)})()}queryFeatureCount(t,e={}){var r=this;return(0,l.Z)(function*(){return yield r.load(e),r._connection.invoke("queryFeatureCount",t?t.toJSON():null,e)})()}queryObjectIds(t,e={}){var r=this;return(0,l.Z)(function*(){return yield r.load(e),r._connection.invoke("queryObjectIds",t?t.toJSON():null,e)})()}queryExtent(t,e={}){var r=this;return(0,l.Z)(function*(){yield r.load(e);const u=yield r._connection.invoke("queryExtent",t?t.toJSON():null,e);return{count:u.count,extent:E.Z.fromJSON(u.extent)}})()}querySnapping(t,e={}){var r=this;return(0,l.Z)(function*(){return yield r.load(e),r._connection.invoke("querySnapping",t,e)})()}_startWorker(t){var e=this;return(0,l.Z)(function*(){e._connection=yield(0,P.bA)("CSVSourceWorker",{strategy:(0,x.Z)("feature-layers-workers")?"dedicated":"local",signal:t});const{url:r,delimiter:u,fields:y,latitudeField:p,longitudeField:W,spatialReference:v,timeInfo:m}=e.loadOptions,g=yield e._connection.invoke("load",{url:r,customParameters:e.customParameters,parsingOptions:{delimiter:u,fields:null==y?void 0:y.map(M=>M.toJSON()),latitudeField:p,longitudeField:W,spatialReference:null==v?void 0:v.toJSON(),timeInfo:null==m?void 0:m.toJSON()}},{signal:t});e.locationInfo=g.locationInfo,e.sourceJSON=g.layerDefinition,e.delimiter=g.delimiter})()}};(0,i._)([(0,n.Cb)()],c.prototype,"type",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"loadOptions",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"customParameters",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"locationInfo",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"sourceJSON",void 0),(0,i._)([(0,n.Cb)()],c.prototype,"delimiter",void 0),c=(0,i._)([(0,b.j)("esri.layers.graphics.sources.CSVSource")],c);var V=o(56554),f=o(84952),O=o(29840),R=o(65234);function F(t,e){throw new C.Z(e,`CSVLayer (title: ${t.title}, id: ${t.id}) cannot be saved to a portal item`)}let s=class extends w.default{constructor(...t){super(...t),this.capabilities=(0,V.MS)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.portalItem=null,this.spatialReference=R.Z.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return"string"==typeof t?h({url:t},e):t}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(t,e){return null!=e.showLabels?e.showLabels:!!(e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.labelingInfo)}set url(t){if(!t)return void this._set("url",t);const e=(0,j.mN)(t);this._set("url",e.path),e.query&&(this.customParameters=h(h({},this.customParameters),e.query))}createGraphicsSource(t){var e=this;return(0,l.Z)(function*(){const r=new c({loadOptions:{delimiter:e.delimiter,fields:e.fields,latitudeField:e.latitudeField,longitudeField:e.longitudeField,spatialReference:e.spatialReference,timeInfo:e.timeInfo,url:e.url},customParameters:e.customParameters});return e._set("source",r),yield r.load({signal:t}),e.read({locationInfo:r.locationInfo,columnDelimiter:r.delimiter},{origin:"service",url:e.parsedUrl}),r})()}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(f.Z.from(t)||this.createQuery())).then(r=>{if(null!=r&&r.features)for(const u of r.features)u.layer=u.sourceLayer=this;return r})}queryObjectIds(t,e){return this.load().then(()=>this.source.queryObjectIds(f.Z.from(t)||this.createQuery()))}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(f.Z.from(t)||this.createQuery()))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(f.Z.from(t)||this.createQuery()))}write(t,e){return super.write(t,N(h({},e),{writeLayerSchema:!0}))}clone(){throw new C.Z("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}save(t){var e=this;return(0,l.Z)(function*(){return F(e,"csv-layer:save")})()}saveAs(t,e){var r=this;return(0,l.Z)(function*(){return F(r,"csv-layer:save-as")})()}hasDataChanged(){var t=this;return(0,l.Z)(function*(){try{const{dataChanged:e,updates:r}=yield t.source.refresh(t.customParameters);return(0,S.pC)(r)&&t.read(r,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),e}catch(e){}return!1})()}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,i._)([(0,n.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"capabilities",void 0),(0,i._)([(0,n.Cb)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],s.prototype,"delimiter",void 0),(0,i._)([(0,n.Cb)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],s.prototype,"editingEnabled",void 0),(0,i._)([(0,n.Cb)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],s.prototype,"fields",void 0),(0,i._)([(0,n.Cb)({type:Boolean,readOnly:!0})],s.prototype,"isTable",null),(0,i._)([(0,J.r)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],s.prototype,"readWebMapLabelsVisible",null),(0,i._)([(0,n.Cb)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],s.prototype,"latitudeField",void 0),(0,i._)([(0,n.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,i._)([(0,n.Cb)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"locationType",void 0),(0,i._)([(0,n.Cb)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],s.prototype,"longitudeField",void 0),(0,i._)([(0,n.Cb)({type:["CSV"]})],s.prototype,"operationalLayerType",void 0),(0,i._)([(0,n.Cb)()],s.prototype,"outFields",void 0),(0,i._)([(0,n.Cb)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],s.prototype,"path",void 0),(0,i._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],s.prototype,"portalItem",void 0),(0,i._)([(0,n.Cb)({json:{read:!1},cast:null,type:c,readOnly:!0})],s.prototype,"source",void 0),(0,i._)([(0,n.Cb)({json:{read:!1},value:"csv",readOnly:!0})],s.prototype,"type",void 0),(0,i._)([(0,n.Cb)({json:{read:O.r,write:{isRequired:!0,ignoreOrigin:!0,writer:O.w}}})],s.prototype,"url",null),s=(0,i._)([(0,b.j)("esri.layers.CSVLayer")],s);const U=s}}]);
"use strict";var Fe=Object.defineProperty,Ze=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ke=(te,X,n)=>X in te?Fe(te,X,{enumerable:!0,configurable:!0,writable:!0,value:n}):te[X]=n,_e=(te,X)=>{for(var n in X||(X={}))Ge.call(X,n)&&Ke(te,n,X[n]);if(we)for(var n of we(X))ze.call(X,n)&&Ke(te,n,X[n]);return te},fe=(te,X)=>Ze(te,Ne(X));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8592],{85840:(te,X,n)=>{n.d(X,{Z:()=>E});var l=n(17626),O=n(14517),S=n(79608),W=n(61996),Z=n(86810),j=n(62208),I=n(77712),y=(n(90912),n(85931),n(76898));let c=0,f=class extends((0,Z.eC)((0,S.J)((0,W.IG)(O.Z)))){constructor(C){super(C),this.id=`${Date.now().toString(16)}-analysis-${c++}`,this.title=null}get parent(){return this._get("parent")}set parent(C){const u=this.parent;if((0,j.pC)(u))switch(u.type){case"line-of-sight":case"dimension":u.releaseAnalysis(this);break;case"2d":case"3d":u.analyses.includes(this)&&u.analyses.remove(this)}this._set("parent",C)}get isEditable(){return this.requiredPropertiesForEditing.every(j.pC)}};(0,l._)([(0,I.Cb)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,l._)([(0,I.Cb)({type:String})],f.prototype,"title",void 0),(0,l._)([(0,I.Cb)({constructOnly:!0})],f.prototype,"type",void 0),(0,l._)([(0,I.Cb)({clonable:!1,value:null})],f.prototype,"parent",null),(0,l._)([(0,I.Cb)({readOnly:!0})],f.prototype,"isEditable",null),(0,l._)([(0,I.Cb)({readOnly:!0})],f.prototype,"requiredPropertiesForEditing",void 0),f=(0,l._)([(0,y.j)("esri.analysis.Analysis")],f);const E=f},69186:(te,X,n)=>{n.d(X,{Z:()=>C});var l=n(17626),S=(n(29132),n(97662)),W=n(79608),Z=n(23719),j=n(86810),I=n(77712),T=n(66656),y=(n(85931),n(76898)),c=n(90912),f=n(72642);let E=class extends((0,j.eC)(W.j)){constructor(u){super(u),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=S.n.Direct,this.offset=0,this.orientation=0}};(0,l._)([(0,I.Cb)({type:["length"],json:{write:{isRequired:!0}}})],E.prototype,"type",void 0),(0,l._)([(0,I.Cb)({type:f.Z,json:{write:!0}})],E.prototype,"startPoint",void 0),(0,l._)([(0,I.Cb)({type:f.Z,json:{write:!0}})],E.prototype,"endPoint",void 0),(0,l._)([(0,I.Cb)({type:S.V,nonNullable:!0,json:{write:{isRequired:!0}}})],E.prototype,"measureType",void 0),(0,l._)([(0,I.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],E.prototype,"offset",void 0),(0,l._)([(0,I.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,T.p)(u=>Z.BV.normalize((0,c.q9)(u),0,!0))],E.prototype,"orientation",void 0),E=(0,l._)([(0,y.j)("esri.analysis.LengthDimension")],E);const C=E},61642:(te,X,n)=>{n.d(X,{Z:()=>u});var l=n(17626),O=n(8425),S=n(14517),W=n(79608),Z=n(86810),j=n(62208),I=n(77712),y=(n(90912),n(85931),n(76898)),c=n(128),f=n(72642),E=n(82706);let C=class extends((0,Z.eC)((0,W.J)(S.Z))){constructor(A){super(A),this.position=null,this.elevationInfo=null,this.feature=null}equals(A){return(0,j._W)(this.position,A.position)&&(0,j._W)(this.elevationInfo,A.elevationInfo)&&(0,O.kk)(this.feature,A.feature)}};(0,l._)([(0,I.Cb)({type:f.Z}),(0,c.B)()],C.prototype,"position",void 0),(0,l._)([(0,I.Cb)({type:E.Z}),(0,c.B)()],C.prototype,"elevationInfo",void 0),(0,l._)([(0,I.Cb)(O.rX)],C.prototype,"feature",void 0),C=(0,l._)([(0,y.j)("esri.analysis.LineOfSightAnalysisObserver")],C);const u=C},57574:(te,X,n)=>{n.d(X,{Z:()=>C});var l=n(17626),O=n(8425),S=n(79608),W=n(86810),Z=n(62208),j=n(77712),K=(n(90912),n(85931),n(76898)),y=n(128),c=n(72642),f=n(82706);let E=class extends((0,W.eC)(S.j)){constructor(u){super(u),this.position=null,this.elevationInfo=null,this.feature=null}equals(u){return(0,Z._W)(this.position,u.position)&&(0,Z._W)(this.elevationInfo,u.elevationInfo)&&(0,O.kk)(this.feature,u.feature)}};(0,l._)([(0,j.Cb)({type:c.Z}),(0,y.B)()],E.prototype,"position",void 0),(0,l._)([(0,j.Cb)({type:f.Z}),(0,y.B)()],E.prototype,"elevationInfo",void 0),(0,l._)([(0,j.Cb)(O.rX)],E.prototype,"feature",void 0),E=(0,l._)([(0,K.j)("esri.analysis.LineOfSightAnalysisTarget")],E);const C=E},97662:(te,X,n)=>{var l,S;n.d(X,{V:()=>O,n:()=>l}),(S=l||(l={})).Horizontal="horizontal",S.Vertical="vertical",S.Direct="direct";const O=[l.Horizontal,l.Vertical,l.Direct]},8425:(te,X,n)=>{n.d(X,{kk:()=>O,pD:()=>S,rX:()=>W});var l=n(62208);function O(I,T){return S(I)===S(T)}function S(I){if((0,l.Wi)(I))return null;let K=null;return K=null!=I.objectId?I.objectId:null!=I.layer&&"objectIdField"in I.layer&&null!=I.layer.objectIdField&&null!=I.attributes?I.attributes[I.layer.objectIdField]:I.uid,null==K?null:`o-${null!=I.layer?I.layer.id:""}-${K}`}const W={json:{write:{writer:function Z(I,T){var K;(0,l.Wi)(I)||null==(null==(K=I.layer)?void 0:K.objectIdField)||null==I.attributes||(T.feature={layerId:I.layer.id,objectId:I.attributes[I.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function j(I){if(null!=I.layerId&&null!=I.objectId)return{uid:null,layer:{id:I.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:I.objectId}}}}}}}},91365:(te,X,n)=>{n.d(X,{Qn:()=>T,iG:()=>I});var W,l=n(25919),O=n(21837);class S{}S.instance=new O.vF("Etc/UTC"),(W||(W={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const Z={[W.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class j extends Error{constructor(y,c){super((0,l.Hy)(Z[y],c)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,j)}}class I{constructor(y){this._date=y,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(y=0,c=1,f=1,E=0,C=0,u=0,A=0,_){if(isNaN(y)||isNaN(c)||isNaN(f)||isNaN(E)||isNaN(C)||isNaN(u)||isNaN(A))return null;let m=0;const g=O.ou.local(y,c).daysInMonth;f<1&&(m=f-1,f=1),f>g&&(m=f-g,f=g);let M=0;c>12?(M=c-12,c=12):c<1&&(M=c-1,c=1);let L=0;C>59?(L=C-59,C=59):C<0&&(L=C,C=0);let h=0;u>59?(h=u-59,u=59):u<0&&(h=u,u=0);let x=0;A>999?(x=A-999,A=999):A<0&&(x=A,A=0);let v=O.ou.fromObject({day:f,year:y,month:c,hour:E,minute:C,second:u,millisecond:A},{zone:T(_)});return 0!==M&&(v=v.plus({months:M})),0!==m&&(v=v.plus({days:m})),0!==L&&(v=v.plus({minutes:L})),0!==h&&(v=v.plus({seconds:h})),0!==x&&(v=v.plus({milliseconds:x})),new I(v)}static get systemTimeZoneCanonicalName(){var y;return null!=(y=Intl.DateTimeFormat().resolvedOptions().timeZone)?y:"system"}static arcadeDateAndZoneToArcadeDate(y,c){const f=T(c);return y.isUnknownTimeZone||f===S.instance?I.fromParts(y.year,y.monthJS+1,y.day,y.hour,y.minute,y.second,y.millisecond,f):new I(y._date.setZone(c))}static dateJSToArcadeDate(y){return new I(O.ou.fromJSDate(y,{zone:"system"}))}static dateJSAndZoneToArcadeDate(y,c="system"){return new I(O.ou.fromJSDate(y,{zone:c}))}static unknownEpochToArcadeDate(y){return new I(O.ou.fromMillis(y,{zone:S.instance}))}static unknownDateJSToArcadeDate(y){return new I(O.ou.fromMillis(y.getTime(),{zone:S.instance}))}static epochToArcadeDate(y,c="system"){return new I(O.ou.fromMillis(y,{zone:c}))}static dateTimeToArcadeDate(y){return new I(y)}changeTimeZone(y){const c=T(y);return I.dateTimeToArcadeDate(this._date.setZone(c))}static dateTimeAndZoneToArcadeDate(y,c){const f=T(c);return y.zone===S.instance||f===S.instance?I.fromParts(y.year,y.month,y.day,y.hour,y.minute,y.second,y.millisecond,f):new I(y.setZone(f))}static nowToArcadeDate(y){return new I(O.ou.fromJSDate(new Date,{zone:y}))}static nowUTCToArcadeDate(){return new I(O.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===I.systemTimeZoneCanonicalName}equals(y){return this.isSystem&&y.isSystem?this.toNumber()===y.toNumber():this.isUnknownTimeZone===y.isUnknownTimeZone&&this._date.equals(y._date)}get isUnknownTimeZone(){return this._date.zone===S.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let y=this._date.weekday;return y>6&&(y=0),y}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const y=this.zone;return"fixed"===y.type?0===y.fixed?"utc":y.formatOffset(0,"short"):y.name}stringify(){return JSON.stringify(this.toJSDate())}plus(y){return new I(this._date.plus(y))}diff(y,c="milliseconds"){return this._date.diff(y._date,c)[c]}toISOString(y){return this._date.toISO(y?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(y,c){return this._date.toFormat(y,c)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new I(this._date.toUTC())}toLocal(){return new I(this._date.toLocal())}toString(){return this.toISOString(!0)}}function T(K){if(K instanceof O.ld)return K;if("system"===K.toLowerCase())return"system";if("utc"===K.toLowerCase())return"utc";if("unknown"===K.toLowerCase())return S.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(K)){const c=O.Qf.parseSpecifier("UTC"+(K.startsWith("+")||K.startsWith("-")?"":"+")+K);if(c)return c}const y=O.vF.create(K);if(!y.isValid)throw new j(W.TimeZoneNotRecognised);return y}},29050:(te,X,n)=>{n.d(X,{nu:()=>K}),n(91365);var O=n(60466),Z=(n(41039),n(21837),n(60194));class K{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(c,f){const E=new K;return E.dateTimeReferenceMetaData=f,E._fieldIndex=c instanceof O.Z?c:new O.Z(c),E}static createFromLayer(c){var E,C,u,A,_,m,g,M;if(!c)return null;if(!c.fieldsIndex)return!c.declaredClass&&c.fields?K.create(c.fields,c):null;const f=new K;return f._fieldIndex=c.fieldsIndex,f.dateTimeReferenceMetaData={timeInfo:null!=(C=null==(E=null==c?void 0:c.timeInfo)?void 0:E.toJSON())?C:null,editFieldsInfo:null!=(A=null==(u=null==c?void 0:c.editFieldsInfo)?void 0:u.toJSON())?A:null,dateFieldsTimeReference:null!=(m=null==(_=null==c?void 0:c.dateFieldsTimeReference)?void 0:_.toJSON())?m:null,preferredTimeReference:null!=(M=null==(g=null==c?void 0:c.preferredTimeReference)?void 0:g.toJSON())?M:null,datesInUnknownTimezone:!0===(null==c?void 0:c.datesInUnknownTimezone)},f}fieldTimeZone(c){var A,_,m,g,M,L,h,x,v,B,P,b,z,w,Y,R,D,p,V,U,F,G,J;const f=null==(A=this._fieldIndex)?void 0:A.get(c);if(!f||"date"!==f.type&&"esriFieldTypeDate"!==f.type)return null;const E=this._fieldTimeZoneIndex[f.name];if(void 0!==E)return E;const C=[{field:null==(m=null==(_=this.dateTimeReferenceMetaData)?void 0:_.editFieldsInfo)?void 0:m.creationDateField,timeReference:null==(M=null==(g=this.dateTimeReferenceMetaData)?void 0:g.editFieldsInfo)?void 0:M.dateFieldsTimeReference,isunknown:!0===(null==(L=this.dateTimeReferenceMetaData)?void 0:L.datesInUnknownTimezone)},{field:null==(x=null==(h=this.dateTimeReferenceMetaData)?void 0:h.editFieldsInfo)?void 0:x.editDateField,timeReference:null==(B=null==(v=this.dateTimeReferenceMetaData)?void 0:v.editFieldsInfo)?void 0:B.dateFieldsTimeReference,isunknown:!0===(null==(P=this.dateTimeReferenceMetaData)?void 0:P.datesInUnknownTimezone)},{field:null==(z=null==(b=this.dateTimeReferenceMetaData)?void 0:b.timeInfo)?void 0:z.startTimeField,timeReference:null==(Y=null==(w=this.dateTimeReferenceMetaData)?void 0:w.timeInfo)?void 0:Y.timeReference,isunknown:!0===(null==(R=this.dateTimeReferenceMetaData)?void 0:R.datesInUnknownTimezone)},{field:null==(p=null==(D=this.dateTimeReferenceMetaData)?void 0:D.timeInfo)?void 0:p.endTimeField,timeReference:null==(U=null==(V=this.dateTimeReferenceMetaData)?void 0:V.timeInfo)?void 0:U.timeReference,isunknown:!0===(null==(F=this.dateTimeReferenceMetaData)?void 0:F.datesInUnknownTimezone)}];for(const k of C)if(k.field===f.name){const ee=this.convertToIANA(k.timeReference,k.isunknown);return this._fieldTimeZoneIndex[f.name]=ee,ee}const u=this.convertToIANA(null==(G=this.dateTimeReferenceMetaData)?void 0:G.dateFieldsTimeReference,null==(J=this.dateTimeReferenceMetaData)?void 0:J.datesInUnknownTimezone);return this._fieldTimeZoneIndex[f.name]=u,u}convertToIANA(c,f){return f?"unknown":function T(y){return null!=y&&y.timeZoneIANA?null==y?void 0:y.timeZoneIANA:null!=y&&y.timeZone?(0,Z.G)(y,""):""}(c)}get layerPreferredTimeZone(){var f,E;if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const c=null==(f=this.dateTimeReferenceMetaData)?void 0:f.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(c,!0===(null==(E=this.dateTimeReferenceMetaData)?void 0:E.datesInUnknownTimezone)),this._ianaPreferred}get layerTimeInfoTimeZone(){var f,E;if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const c=null==(E=null==(f=this.dateTimeReferenceMetaData)?void 0:f.timeInfo)?void 0:E.timeReference;return this._ianaTimeInfo=this.convertToIANA(c,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){var f,E,C;if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const c=null==(E=null==(f=this.dateTimeReferenceMetaData)?void 0:f.editFieldsInfo)?void 0:E.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(c,null==(C=this.dateTimeReferenceMetaData)?void 0:C.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){var f,E;if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const c=null==(f=this.dateTimeReferenceMetaData)?void 0:f.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(c,!0===(null==(E=this.dateTimeReferenceMetaData)?void 0:E.datesInUnknownTimezone)),this._ianaLayerDateFields}}},57577:(te,X,n)=>{function l(O){throw new Error('Could not dynamically require "'+O+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}n.d(X,{c:()=>l})},7006:(te,X,n)=>{n.d(X,{A:()=>z,B:()=>w,C:()=>Y,D:()=>R,E:()=>D,F:()=>p,G:()=>V,H:()=>U,I:()=>F,J:()=>G,K:()=>J,L:()=>k,M:()=>ee,N:()=>q,a:()=>Z,b:()=>j,c:()=>W,d:()=>I,e:()=>S,f:()=>T,g:()=>Q,h:()=>K,i:()=>y,j:()=>E,k:()=>A,l:()=>m,m:()=>g,n:()=>M,o:()=>C,p:()=>L,q:()=>x,r:()=>u,s:()=>_,t:()=>c,u:()=>h,v:()=>v,w:()=>f,x:()=>B,y:()=>P,z:()=>b});var l=n(4918),O=n(15994);function S(N){return l.G.extendedSpatialReferenceInfo(N)}function W(N,H,$){return l.G.clip(O.N,N,H,$)}function Z(N,H,$){return l.G.cut(O.N,N,H,$)}function j(N,H,$){return l.G.contains(O.N,N,H,$)}function I(N,H,$){return l.G.crosses(O.N,N,H,$)}function T(N,H,$,se){return l.G.distance(O.N,N,H,$,se)}function K(N,H,$){return l.G.equals(O.N,N,H,$)}function y(N,H,$){return l.G.intersects(O.N,N,H,$)}function c(N,H,$){return l.G.touches(O.N,N,H,$)}function f(N,H,$){return l.G.within(O.N,N,H,$)}function E(N,H,$){return l.G.disjoint(O.N,N,H,$)}function C(N,H,$){return l.G.overlaps(O.N,N,H,$)}function u(N,H,$,se){return l.G.relate(O.N,N,H,$,se)}function A(N,H){return l.G.isSimple(O.N,N,H)}function _(N,H){return l.G.simplify(O.N,N,H)}function m(N,H,$=!1){return l.G.convexHull(O.N,N,H,$)}function g(N,H,$){return l.G.difference(O.N,N,H,$)}function M(N,H,$){return l.G.symmetricDifference(O.N,N,H,$)}function L(N,H,$){return l.G.intersect(O.N,N,H,$)}function h(N,H,$=null){return l.G.union(O.N,N,H,$)}function x(N,H,$,se,oe,re,ae){return l.G.offset(O.N,N,H,$,se,oe,re,ae)}function v(N,H,$,se,oe=!1){return l.G.buffer(O.N,N,H,$,se,oe)}function B(N,H,$,se,oe,re,ae){return l.G.geodesicBuffer(O.N,N,H,$,se,oe,re,ae)}function P(N,H,$,se=!0){return l.G.nearestCoordinate(O.N,N,H,$,se)}function b(N,H,$){return l.G.nearestVertex(O.N,N,H,$)}function z(N,H,$,se,oe){return l.G.nearestVertices(O.N,N,H,$,se,oe)}function w(N,H,$,se){if(null==H||null==se)throw new Error("Illegal Argument Exception");const oe=l.G.rotate(H,$,se);return oe.spatialReference=N,oe}function Y(N,H,$){if(null==H||null==$)throw new Error("Illegal Argument Exception");const se=l.G.flipHorizontal(H,$);return se.spatialReference=N,se}function R(N,H,$){if(null==H||null==$)throw new Error("Illegal Argument Exception");const se=l.G.flipVertical(H,$);return se.spatialReference=N,se}function D(N,H,$,se,oe){return l.G.generalize(O.N,N,H,$,se,oe)}function p(N,H,$,se){return l.G.densify(O.N,N,H,$,se)}function V(N,H,$,se,oe=0){return l.G.geodesicDensify(O.N,N,H,$,se,oe)}function U(N,H,$){return l.G.planarArea(O.N,N,H,$)}function F(N,H,$){return l.G.planarLength(O.N,N,H,$)}function G(N,H,$,se){return l.G.geodesicArea(O.N,N,H,$,se)}function J(N,H,$,se){return l.G.geodesicLength(O.N,N,H,$,se)}function k(N,H,$){return null==H||null==$?[]:l.G.intersectLinesToPoints(O.N,N,H,$)}function ee(N,H){l.G.changeDefaultSpatialReferenceTolerance(N,H)}function q(N){l.G.clearDefaultSpatialReferenceTolerance(N)}const Q=Object.freeze(Object.defineProperty({__proto__:null,buffer:v,changeDefaultSpatialReferenceTolerance:ee,clearDefaultSpatialReferenceTolerance:q,clip:W,contains:j,convexHull:m,crosses:I,cut:Z,densify:p,difference:g,disjoint:E,distance:T,equals:K,extendedSpatialReferenceInfo:S,flipHorizontal:Y,flipVertical:R,generalize:D,geodesicArea:G,geodesicBuffer:B,geodesicDensify:V,geodesicLength:J,intersect:L,intersectLinesToPoints:k,intersects:y,isSimple:A,nearestCoordinate:P,nearestVertex:b,nearestVertices:z,offset:x,overlaps:C,planarArea:U,planarLength:F,relate:u,rotate:w,simplify:_,symmetricDifference:M,touches:c,union:h,within:f},Symbol.toStringTag,{value:"Module"}))},58774:(te,X,n)=>{n.d(X,{b:()=>c,j:()=>I});var l=n(15861),O=n(54346),S=n(8314);let Z=null,j=null;function I(){return T.apply(this,arguments)}function T(){return(T=(0,l.Z)(function*(){return Z||(Z=K()),Z})).apply(this,arguments)}function K(){return y.apply(this,arguments)}function y(){return(y=(0,l.Z)(function*(){j=yield((0,S.Z)("esri-csp-restrictions")?yield n.e(71).then(n.bind(n,10071)).then(E=>E.l):yield n.e(9507).then(n.bind(n,99507)).then(E=>E.l)).load({locateFile:E=>(0,O.V)(`esri/core/libs/libtess/${E}`)})})).apply(this,arguments)}function c(f,E){const C=Math.max(f.length,128e3);return j.triangulate(f,E,C)}},99746:(te,X,n)=>{n.d(X,{Z:()=>v});var L,l=n(17626),O=n(86810),S=n(62208),W=n(77712),I=(n(90912),n(85931),n(76898)),T=n(28347),K=n(43703),y=n(48977),c=n(78451),f=n(84161),E=n(28093),C=n(72642),u=n(55915),A=n(81863),_=n(89586),m=n(60479),g=n(79800),M=n(9554);let h=L=class extends O.wq{constructor(B){super(B),this.origin=(0,E.c)(),this.translation=(0,E.c)(),this.rotation=(0,_.Ue)(),this.scale=(0,E.f)(1,1,1),this.geographic=!0}get localMatrix(){const B=(0,K.c)();return(0,y.s)(x,(0,_.ZZ)(this.rotation),(0,_.WH)(this.rotation)),(0,T.g)(B,x,this.translation,this.scale),B}get localMatrixInverse(){return(0,T.a)((0,K.c)(),this.localMatrix)}applyLocal(B,P){return(0,f.m)(P,B,this.localMatrix)}applyLocalInverse(B,P){return(0,f.m)(P,B,this.localMatrixInverse)}project(B,P){const b=new Float64Array(B.length),z=m.fP.fromTypedArray(b),w=m.fP.fromTypedArray(B);if(this.geographic){const D=(0,A.rS)(P),p=(0,K.c)();return(0,u.Bm)(P,this.origin,p,D),(0,T.m)(p,p,this.localMatrix),(0,g.t)(z,w,p),(0,u.CM)(b,D,0,b,P,0,b.length/3),b}const{localMatrix:Y,origin:R}=this;(0,T.h)(Y,K.I)?(0,M.c)(z,w):(0,g.t)(z,w,Y);for(let D=0;D<b.length;D+=3)b[D+0]+=R[0],b[D+1]+=R[1],b[D+2]+=R[2];return b}getOriginPoint(B){const[P,b,z]=this.origin;return new C.Z({x:P,y:b,z,spatialReference:B})}equals(B){return(0,S.pC)(B)&&this.geographic===B.geographic&&(0,f.k)(this.origin,B.origin)&&(0,T.j)(this.localMatrix,B.localMatrix)}clone(){const B={origin:(0,E.a)(this.origin),translation:(0,E.a)(this.translation),rotation:(0,_.Ue)(this.rotation),scale:(0,E.a)(this.scale),geographic:this.geographic};return new L(B)}};(0,l._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),(0,l._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,l._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotation",void 0),(0,l._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,l._)([(0,W.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],h.prototype,"geographic",void 0),(0,l._)([(0,W.Cb)()],h.prototype,"localMatrix",null),(0,l._)([(0,W.Cb)()],h.prototype,"localMatrixInverse",null),h=L=(0,l._)([(0,I.j)("esri.geometry.support.MeshTransform")],h);const x=(0,c.a)(),v=h},92545:(te,X,n)=>{function l(O,S){var W;return O.isGeographic||O.isWebMercator&&(null==(W=null==S?void 0:S.geographic)||W)}n.d(X,{h:()=>l})},60853:(te,X,n)=>{n.d(X,{FF:()=>_,I5:()=>u,Yq:()=>m,iv:()=>C,w1:()=>A});var l=n(62208),O=n(16730),S=n(550),W=n(28347),Z=n(43703),j=n(30217),I=n(55915),T=n(81863),K=n(99746),y=n(60479),c=n(79800),f=n(92545),E=n(65231);function C(U,F,G){return(0,f.h)(F.spatialReference,G)?function M(U,F,G){const J=F.spatialReference,k=P(F,G,R),ee=new Float64Array(U.position.length),q=function L(U,F,G,J){(0,c.t)(y.fP.fromTypedArray(J),y.fP.fromTypedArray(U),F);const k=new Float64Array(U.length);return(0,E.To)(J,k,G)}(U.position,k,J,ee),Q=(0,j.b)(p,k);return{position:q,normal:h(q,ee,U.normal,Q,J),tangent:x(q,ee,U.tangent,Q,J)}}(U,F,G):function g(U,F,G){const J=new Float64Array(U.position.length),k=U.position,ee=F.x,q=F.y,Q=F.z||0,{horizontal:N,vertical:H}=Y(G?G.unit:null,F.spatialReference);for(let $=0;$<k.length;$+=3)J[$+0]=k[$+0]*N+ee,J[$+1]=k[$+1]*N+q,J[$+2]=k[$+2]*H+Q;return{position:J,normal:U.normal,tangent:U.tangent}}(U,F,G)}function u(U,F,G){const{position:J,normal:k,tangent:ee}=U;if((0,l.Wi)(F))return{position:J,normal:k,tangent:ee};const q=F.localMatrix;return C({position:(0,E.zZ)(J,new Float64Array(J.length),q),normal:(0,l.pC)(k)?(0,E.w9)(k,new Float32Array(k.length),q):null,tangent:(0,l.pC)(ee)?(0,E.VS)(ee,new Float32Array(ee.length),q):null},F.getOriginPoint(G),{geographic:F.geographic})}function A(U,F,G){var J;if(null!=G&&G.useTransform){const{position:k,normal:ee,tangent:q}=U;return{vertexAttributes:{position:k,normal:ee,tangent:q},transform:new K.Z({origin:[F.x,F.y,null!=(J=F.z)?J:0],geographic:(0,f.h)(F.spatialReference,G)})}}return{vertexAttributes:C(U,F,G),transform:null}}function _(U,F,G){return(0,f.h)(F.spatialReference,G)?function B(U,F,G){const J=F.spatialReference;P(F,G,R);const k=(0,W.a)(D,R),ee=new Float64Array(U.position.length),q=function b(U,F,G,J){const k=(0,E.XO)(U,F,J),ee=y.fP.fromTypedArray(k),q=new Float64Array(k.length),Q=y.fP.fromTypedArray(q);return(0,c.t)(Q,ee,G),q}(U.position,J,k,ee),Q=(0,j.b)(p,k);return{position:q,normal:z(U.normal,U.position,ee,J,Q),tangent:w(U.tangent,U.position,ee,J,Q)}}(U,F,G):v(U,F,G)}function m(U,F,G,J){if((0,l.Wi)(F))return _(U,G,J);const k=u(U,F,G.spatialReference);return G.equals(F.getOriginPoint(G.spatialReference))?v(k,G,J):_(k,G,J)}function h(U,F,G,J,k){if((0,l.Wi)(G))return null;const ee=new Float32Array(G.length);return(0,c.a)(y.ct.fromTypedArray(ee),y.ct.fromTypedArray(G),J),(0,E.Yk)(ee,U,F,k,ee),ee}function x(U,F,G,J,k){if((0,l.Wi)(G))return null;const ee=new Float32Array(G.length);(0,c.a)(y.ct.fromTypedArray(ee,4*Float32Array.BYTES_PER_ELEMENT),y.ct.fromTypedArray(G,4*Float32Array.BYTES_PER_ELEMENT),J);for(let q=3;q<ee.length;q+=4)ee[q]=G[q];return(0,E.M2)(ee,U,F,k,ee),ee}function v(U,F,G){const J=new Float64Array(U.position.length),k=U.position,ee=F.x,q=F.y,Q=F.z||0,{horizontal:N,vertical:H}=Y(G?G.unit:null,F.spatialReference);for(let $=0;$<k.length;$+=3)J[$+0]=(k[$+0]-ee)/N,J[$+1]=(k[$+1]-q)/N,J[$+2]=(k[$+2]-Q)/H;return{position:J,normal:U.normal,tangent:U.tangent}}function P(U,F,G){(0,I.Bm)(U.spatialReference,[U.x,U.y,U.z||0],G,(0,T.rS)(U.spatialReference));const{horizontal:J,vertical:k}=Y(F?F.unit:null,U.spatialReference);return(0,W.k)(G,G,[J,J,k]),G}function z(U,F,G,J,k){if((0,l.Wi)(U))return null;const ee=(0,E.Iz)(U,F,G,J,new Float32Array(U.length)),q=y.ct.fromTypedArray(ee);return(0,c.a)(q,q,k),ee}function w(U,F,G,J,k){if((0,l.Wi)(U))return null;const ee=(0,E.wi)(U,F,G,J,new Float32Array(U.length)),q=y.ct.fromTypedArray(ee,4*Float32Array.BYTES_PER_ELEMENT);return(0,c.a)(q,q,k),ee}function Y(U,F){if((0,l.Wi)(U))return V;const G=F.isGeographic?1:(0,O.c9)(F),J=F.isGeographic?1:(0,O._R)(F),k=(0,O.En)(1,U,"meters");return{horizontal:k*G,vertical:k*J}}const R=(0,Z.c)(),D=(0,Z.c)(),p=(0,S.c)(),V={horizontal:1,vertical:1}},65629:(te,X,n)=>{n.d(X,{SR:()=>K,Ui:()=>T});var l=n(62208),O=n(65401),S=n(32442),W=n(25748),Z=n(91179),j=n(74618),I=n(37053);function T(L){return y(L,!0)}function K(L){return y(L,!1)}function y(L,h){if((0,l.Wi)(L))return null;const x=L.spatialReference,v=(0,I.C5)(x),B="toJSON"in L?L.toJSON():L;if(!v)return B;const P=(0,I.sS)(x)?102100:4326,b=j.UZ[P].maxX,z=j.UZ[P].minX;if((0,Z.wp)(B))return f(B,b,z);if((0,Z.aW)(B))return B.points=B.points.map(w=>f(w,b,z)),B;if((0,Z.YX)(B))return function c(L,h){if(!h)return L;const x=function E(L,h){const x=[],{ymin:v,ymax:B,xmin:P,xmax:b}=L,z=L.xmax-L.xmin,[w,Y]=h.valid,{x:R,frameId:D}=C(L.xmin,h),{x:p,frameId:V}=C(L.xmax,h),U=R===p&&z>0;if(z>2*Y){const F={xmin:P<b?R:p,ymin:v,xmax:Y,ymax:B},G={xmin:w,ymin:v,xmax:P<b?p:R,ymax:B},J={xmin:0,ymin:v,xmax:Y,ymax:B},k={xmin:w,ymin:v,xmax:0,ymax:B},ee=[],q=[];u(F,J)&&ee.push(D),u(F,k)&&q.push(D),u(G,J)&&ee.push(V),u(G,k)&&q.push(V);for(let Q=D+1;Q<V;Q++)ee.push(Q),q.push(Q);x.push(new m(F,[D]),new m(G,[V]),new m(J,ee),new m(k,q))}else R>p||U?x.push(new m({xmin:R,ymin:v,xmax:Y,ymax:B},[D]),new m({xmin:w,ymin:v,xmax:p,ymax:B},[V])):x.push(new m({xmin:R,ymin:v,xmax:p,ymax:B},[D]));return x}(L,h).map(v=>v.extent);return x.length<2?x[0]||L:x.length>2?(L.xmin=h.valid[0],L.xmax=h.valid[1],L):{rings:x.map(v=>[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]])}}(B,v);if((0,Z.oU)(B)||(0,Z.l9)(B)){const w=(0,S.$P)(g,B),Y={xmin:w[0],ymin:w[1],xmax:w[2],ymax:w[3]},R=(0,j.XZ)(Y.xmin,z)*(2*b),D=0===R?B:(0,j.Sy)(B,R);return Y.xmin+=R,Y.xmax+=R,Y.xmax>b?_(D,b,h):Y.xmin<z?_(D,z,h):D}return B}function f(L,h,x){if(Array.isArray(L)){const v=L[0];if(v>h){const B=(0,j.XZ)(v,h);L[0]=v+B*(-2*h)}else if(v<x){const B=(0,j.XZ)(v,x);L[0]=v+B*(-2*x)}}else{const v=L.x;if(v>h){const B=(0,j.XZ)(v,h);L.x+=B*(-2*h)}else if(v<x){const B=(0,j.XZ)(v,x);L.x+=B*(-2*x)}}return L}function C(L,h){const[x,v]=h.valid,B=2*v;let P,b=0;return L>v?(P=Math.ceil(Math.abs(L-v)/B),L-=P*B,b=P):L<x&&(P=Math.ceil(Math.abs(L-x)/B),L+=P*B,b=-P),{x:L,frameId:b}}function u(L,h){const{xmin:x,ymin:v,xmax:B,ymax:P}=h;return A(L,x,v)&&A(L,x,P)&&A(L,B,P)&&A(L,B,v)}function A(L,h,x){return h>=L.xmin&&h<=L.xmax&&x>=L.ymin&&x<=L.ymax}function _(L,h,x=!0){const v=!(0,Z.l9)(L);if(v&&(0,W.Zy)(L),x)return(new M).cut(L,h);const B=v?L.rings:L.paths,P=v?4:2,b=B.length,z=-2*h;for(let w=0;w<b;w++){const Y=B[w];if(Y&&Y.length>=P){const R=[];for(const D of Y)R.push([D[0]+z,D[1]]);B.push(R)}}return v?L.rings=B:L.paths=B,L}class m{constructor(h,x){this.extent=h,this.frameIds=x}}const g=(0,O.Ue)();class M{constructor(){this._linesIn=[],this._linesOut=[]}cut(h,x){let v;if(this._xCut=x,h.rings)this._closed=!0,v=h.rings,this._minPts=4;else{if(!h.paths)return null;this._closed=!1,v=h.paths,this._minPts=2}for(const P of v){if(!P||P.length<this._minPts)continue;let b=!0;for(const z of P)b?(this.moveTo(z),b=!1):this.lineTo(z);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),v=[];for(const P of this._linesIn)P&&P.length>=this._minPts&&v.push(P);const B=-2*this._xCut;for(const P of this._linesOut)if(P&&P.length>=this._minPts){for(const b of P)b[0]+=B;v.push(P)}return this._closed?h.rings=v:h.paths=v,h}moveTo(h){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(h[0]),this._moveTo(h[0],h[1],this._prevSide),this._prevPt=h,this._firstPt=h}lineTo(h){const x=this._side(h[0]);if(x*this._prevSide==-1){const v=this._intersect(this._prevPt,h);this._lineTo(this._xCut,v,0),this._prevSide=0,this._lineTo(h[0],h[1],x)}else this._lineTo(h[0],h[1],x);this._prevSide=x,this._prevPt=h}close(){const h=this._firstPt,x=this._prevPt;h[0]===x[0]&&h[1]===x[1]||this.lineTo(h),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(h,x,v){this._closed?(this._lineIn.push([v<=0?h:this._xCut,x]),this._lineOut.push([v>=0?h:this._xCut,x])):(v<=0&&this._lineIn.push([h,x]),v>=0&&this._lineOut.push([h,x]))}_lineTo(h,x,v){this._closed?(this._addPolyVertex(this._lineIn,v<=0?h:this._xCut,x),this._addPolyVertex(this._lineOut,v>=0?h:this._xCut,x)):v<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([h,x])):v>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([h,x])):this._prevSide<0?(this._lineIn.push([h,x]),this._lineOut.push([h,x])):this._prevSide>0&&(this._lineOut.push([h,x]),this._lineIn.push([h,x]))}_addPolyVertex(h,x,v){const B=h.length;B>1&&h[B-1][0]===x&&h[B-2][0]===x?h[B-1][1]=v:h.push([x,v])}_checkClosingPt(h){const x=h.length;x>3&&h[0][0]===this._xCut&&h[x-2][0]===this._xCut&&h[1][0]===this._xCut&&(h[0][1]=h[x-2][1],h.pop())}_side(h){return h<this._xCut?-1:h>this._xCut?1:0}_intersect(h,x){return h[1]+(this._xCut-h[0])/(x[0]-h[0])*(x[1]-h[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},28678:(te,X,n)=>{n.r(X),n.d(X,{default:()=>Y});var z,l=n(15861),O=n(17626),W=(n(29132),n(84792)),Z=n(26584),j=n(99959),I=n(77275),T=n(21726),K=n(77712),f=(n(90912),n(85931),n(68653)),E=n(76898),C=n(99433),u=n(44917),A=n(552),_=n(49286),m=n(6647),g=n(30346),M=n(99555),L=n(12585),h=n(72258),x=n(2584),v=n(91309),B=n(2004),P=n(65234),b=n(72642);let w=z=class extends((0,A.h)((0,g.Q)((0,M.M)((0,_.q)((0,m.I)((0,j.R)(u.Z))))))){constructor(...R){super(...R),this.copyright="",this.fullExtent=new B.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,P.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=P.Z.WebMercator,this.subDomains=null,this.tileInfo=new x.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new b.Z({x:-20037508.342787,y:20037508.342787,spatialReference:P.Z.WebMercator}),spatialReference:P.Z.WebMercator,lods:[new h.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new h.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new h.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new h.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new h.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new h.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new h.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new h.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new h.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new h.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new h.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new h.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new h.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new h.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new h.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new h.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new h.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new h.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new h.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new h.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new h.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new h.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new h.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new h.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(R,D){return"string"==typeof R?_e({urlTemplate:R},D):R}load(R){const D=this.loadFromPortal({supportedTypes:["WMTS"]},R).then(()=>{var V;let p="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const U=new T.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&(null==(V=U.authority)?void 0:V.includes("{subDomain}"))&&(p="is missing 'subDomains' property")}else p="spatialReference must match tileInfo.spatialReference";else p="is missing the required 'urlTemplate' property value";if(p)throw new Z.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${p}`)});return this.addResolvingPromise(D),Promise.resolve(this)}get levelValues(){const R=[];if(!this.tileInfo)return null;for(const D of this.tileInfo.lods)R[D.level]=D.levelValue||D.level;return R}readSpatialReference(R,D){return R||D.fullExtent&&D.fullExtent.spatialReference&&P.Z.fromJSON(D.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const R=[],{urlTemplate:D,subDomains:p}=this,V=new T.R9(D),U=V.scheme?V.scheme+"://":"//",F=U+V.authority+"/",G=V.authority;if(null!=G&&G.includes("{subDomain}")){if(p&&p.length>0&&G.split(".").length>1)for(const J of p)R.push(U+G.replace(/\{subDomain\}/gi,J)+"/")}else R.push(F);return R.map(J=>("/"!==J.charAt(J.length-1)&&(J+="/"),J))}get urlPath(){if(!this.urlTemplate)return null;const R=this.urlTemplate,D=new T.R9(R);return R.substring(((D.scheme?D.scheme+"://":"//")+D.authority+"/").length)}readUrlTemplate(R,D){return R||D.templateUrl}writeUrlTemplate(R,D){R&&(0,T.oC)(R)&&(R="https:"+R),R&&(R=R.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),R=(0,T.Fv)(R)),D.templateUrl=R}fetchTile(R,D,p,V={}){const{signal:U}=V,F=this.getTileUrl(R,D,p),G={responseType:"image",signal:U,query:_e({},this.refreshParameters)};return(0,W.default)(F,G).then(J=>J.data)}fetchImageBitmapTile(R,D,p,V={}){var U=this;return(0,l.Z)(function*(){const{signal:F}=V;if(U.fetchTile!==z.prototype.fetchTile){const ee=yield U.fetchTile(R,D,p,V);try{return createImageBitmap(ee)}catch(q){throw new Z.Z("request:server",`Unable to load tile ${R}/${D}/${p}`,{error:q,level:R,row:D,col:p})}}const G=U.getTileUrl(R,D,p),J={responseType:"blob",signal:F,query:_e({},U.refreshParameters)},{data:k}=yield(0,W.default)(G,J);return(0,L.g)(k,G)})()}getTileUrl(R,D,p){const{levelValues:V,tileServers:U,urlPath:F}=this;if(!V||!U||!F)return"";const G=V[R];return U[D%U.length]+(0,I.gx)(F,{level:G,z:G,col:p,x:p,row:D,y:D})}};(0,O._)([(0,K.Cb)({type:String,value:"",json:{write:!0}})],w.prototype,"copyright",void 0),(0,O._)([(0,K.Cb)({type:B.Z,json:{write:!0},nonNullable:!0})],w.prototype,"fullExtent",void 0),(0,O._)([(0,K.Cb)({readOnly:!0,json:{read:!1,write:!1}})],w.prototype,"legendEnabled",void 0),(0,O._)([(0,K.Cb)({type:["show","hide"]})],w.prototype,"listMode",void 0),(0,O._)([(0,K.Cb)({json:{read:!0,write:!0}})],w.prototype,"blendMode",void 0),(0,O._)([(0,K.Cb)()],w.prototype,"levelValues",null),(0,O._)([(0,K.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],w.prototype,"isReference",void 0),(0,O._)([(0,K.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],w.prototype,"operationalLayerType",void 0),(0,O._)([(0,K.Cb)({readOnly:!0,json:{read:!1,write:!1}})],w.prototype,"popupEnabled",void 0),(0,O._)([(0,K.Cb)({type:P.Z})],w.prototype,"spatialReference",void 0),(0,O._)([(0,f.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],w.prototype,"readSpatialReference",null),(0,O._)([(0,K.Cb)({type:[String],json:{write:!0}})],w.prototype,"subDomains",void 0),(0,O._)([(0,K.Cb)({type:x.Z,json:{write:!0}})],w.prototype,"tileInfo",void 0),(0,O._)([(0,K.Cb)({readOnly:!0})],w.prototype,"tileServers",null),(0,O._)([(0,K.Cb)({json:{read:!1}})],w.prototype,"type",void 0),(0,O._)([(0,K.Cb)()],w.prototype,"urlPath",null),(0,O._)([(0,K.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],w.prototype,"urlTemplate",void 0),(0,O._)([(0,f.r)("urlTemplate",["urlTemplate","templateUrl"])],w.prototype,"readUrlTemplate",null),(0,O._)([(0,C.c)("urlTemplate",{templateUrl:{type:String}})],w.prototype,"writeUrlTemplate",null),(0,O._)([(0,K.Cb)({type:v.B,json:{write:!0}})],w.prototype,"wmtsInfo",void 0),w=z=(0,O._)([(0,E.j)("esri.layers.WebTileLayer")],w);const Y=w},20925:(te,X,n)=>{n.d(X,{Z:()=>A});var c,l=n(17626),O=n(46160),S=n(47877),W=n(14889),Z=n(77712),T=(n(90912),n(85931),n(76898)),K=n(49410),y=n(11136);const f={type:O.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:E}}},read:!1}};function E(_,m,g){if(_&&Array.isArray(_))return new O.Z(_.map(M=>{const L=function u(_){return"group"===_.layerType?C:K.Z}(M);if(L){const h=new L;return h.read(M,g),h}return g&&g.messages&&M&&g.messages.push(new W.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(M.type||"unknown")+"' are not supported",{definition:M,context:g})),null}))}let C=c=class extends y.Z{constructor(_){super(_),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,S.w)(this,_=>c.forEachSublayer(this.sublayers,m=>{"building-group"!==m.type&&_(m)}))}};var _;(0,l._)([(0,Z.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],C.prototype,"listMode",void 0),(0,l._)([(0,Z.Cb)(f)],C.prototype,"sublayers",void 0),C=c=(0,l._)([(0,T.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],C),(_=C||(C={})).sublayersProperty=f,_.readSublayers=E,_.forEachSublayer=function m(g,M){g.forEach(L=>{M(L),"building-group"===L.type&&m(L.sublayers,M)})};const A=C},47519:(te,X,n)=>{var l,O;n.d(X,{i:()=>l}),(O=l||(l={}))[O.PROJECT_VERTICES=1]="PROJECT_VERTICES"},1476:(te,X,n)=>{n.d(X,{S:()=>O,X:()=>l});const l=1;function O(S,W){var j;let Z=0;for(const I of W){const T=null==(j=I.attributes)?void 0:j[S];"number"==typeof T&&isFinite(T)&&(Z=Math.max(Z,T))}return Z}},35775:(te,X,n)=>{n.d(X,{O0:()=>c,av:()=>I,b:()=>_,d1:()=>K,og:()=>C});var l=n(15861),O=n(62208),S=n(37053),W=n(36630);class Z{constructor(){this.code=null,this.description=null}}class j{constructor(M){this.error=new Z,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=M}}function I(g){return new j(g)}class T{constructor(M){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=M}}function K(g){return new T(g)}const y=new Set;function c(g,M,L,h=!1,x){var v;y.clear();for(const B in L){const P=g.get(B);if(!P)continue;const b=L[B],z=f(P,b);if(z!==b&&x&&x.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:P,originalValue:b,sanitizedValue:z}}),y.add(P.name),P&&(h||P.editable)){const w=(0,W.Qc)(P,z);if(w)return I((0,W.vP)(w,P,z));M[P.name]=z}}for(const B of null!=(v=null==g?void 0:g.requiredFields)?v:[])if(!y.has(B.name))return I(`missing required field "${B.name}"`);return null}function f(g,M){let L=M;return"string"==typeof M&&(0,W.H7)(g)?L=parseFloat(M):null!=M&&(0,W.qN)(g)&&"string"!=typeof M&&(L=String(M)),(0,W.Pz)(L)}let E;function C(g,M){if(!g||!(0,S.JY)(M))return g;if("rings"in g||"paths"in g){if((0,O.Wi)(E))throw new TypeError("geometry engine not loaded");return E.simplify(M,g)}return g}function u(){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(){return(0,O.Wi)(E)&&(E=yield Promise.all([n.e(4918),n.e(8592),n.e(2825)]).then(n.bind(n,32825))),E})).apply(this,arguments)}function _(g,M){return m.apply(this,arguments)}function m(){return(m=(0,l.Z)(function*(g,M){!(0,S.JY)(g)||"esriGeometryPolygon"!==M&&"esriGeometryPolyline"!==M||(yield u())})).apply(this,arguments)}},5143:(te,X,n)=>{n.d(X,{Z:()=>c});var l=n(17626),S=(n(29132),n(77712)),j=(n(90912),n(85931),n(68653)),I=n(76898),T=n(51026),K=n(28930),y=n(65234);const c=f=>{let E=class extends f{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(C,u){return null!=u.minLOD&&null!=u.maxLOD?C:0}readMaxScale(C,u){return null!=u.minLOD&&null!=u.maxLOD?C:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(C,u){return u.capabilities&&u.capabilities.includes("Tilemap")?new K.y({layer:this}):null}};return(0,l._)([(0,S.Cb)({json:{read:{source:"copyrightText"}}})],E.prototype,"copyright",void 0),(0,l._)([(0,S.Cb)()],E.prototype,"minScale",void 0),(0,l._)([(0,j.r)("service","minScale")],E.prototype,"readMinScale",null),(0,l._)([(0,S.Cb)()],E.prototype,"maxScale",void 0),(0,l._)([(0,j.r)("service","maxScale")],E.prototype,"readMaxScale",null),(0,l._)([(0,S.Cb)({type:y.Z})],E.prototype,"spatialReference",void 0),(0,l._)([(0,S.Cb)({readOnly:!0})],E.prototype,"supportsBlankTile",null),(0,l._)([(0,S.Cb)(T.h)],E.prototype,"tileInfo",void 0),(0,l._)([(0,S.Cb)()],E.prototype,"tilemapCache",void 0),(0,l._)([(0,j.r)("service","tilemapCache",["capabilities"])],E.prototype,"readTilemapCache",null),(0,l._)([(0,S.Cb)()],E.prototype,"version",void 0),E=(0,l._)([(0,I.j)("esri.layers.mixins.ArcGISCachedService")],E),E}},22825:(te,X,n)=>{n.d(X,{A:()=>O});const l=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function O(S){return null!=S&&l.some(([W,Z])=>S>=W&&S<=Z)}},89628:(te,X,n)=>{n.d(X,{$9:()=>m,G4:()=>x,Lu:()=>_,WW:()=>D,d:()=>w,eS:()=>b,gp:()=>B,j:()=>L,w9:()=>g,yN:()=>Y});var l=n(15861),S=(n(29132),n(84792)),W=n(26584),Z=n(63290),j=n(62208),I=n(37053),T=n(46367),K=n(82054),y=n(95786),c=n(58775),f=n(56554),E=n(60466),C=n(85),u=n(65234);const A=Z.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),_="http://www.opengis.net/def/crs/",m=`${_}OGC/1.3/CRS84`;function g(Q,N){return M.apply(this,arguments)}function M(){return(M=(0,l.Z)(function*(Q,N,H={},$=5){const{links:se}=Q,oe=q(se,"items","application/geo+json")||q(se,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,j.Wi)(oe))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:re}=yield(0,S.default)(oe.href,{signal:H.signal,query:fe(_e({limit:$},H.customParameters),{token:H.apiKey}),headers:{accept:"application/geo+json"}});yield(0,c.O3)(re);const ae=(0,c.my)(re,{geometryType:N.geometryType}),ue=N.fields||ae.fields||[],Re=null!=N.hasZ?N.hasZ:ae.hasZ,ve=ae.geometryType,ce=N.objectIdField||ae.objectIdFieldName||"OBJECTID";let le=N.timeInfo;const pe=ue.find(({name:ie})=>ie===ce);if(pe)pe.editable=!1,pe.nullable=!1;else{if(!ae.objectIdFieldType)throw new W.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");ue.unshift({name:ce,alias:ce,type:"number"===ae.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(ce!==ae.objectIdFieldName){const ie=ue.find(({name:ne})=>ne===ae.objectIdFieldName);ie&&(ie.type="esriFieldTypeInteger")}ue===ae.fields&&ae.unknownFields.length>0&&A.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:ae.unknownFields}});for(const ie of ue){if(null==ie.name&&(ie.name=ie.alias),null==ie.alias&&(ie.alias=ie.name),"esriFieldTypeOID"!==ie.type&&"esriFieldTypeGlobalID"!==ie.type&&(ie.editable=null==ie.editable||!!ie.editable,ie.nullable=null==ie.nullable||!!ie.nullable),!ie.name)throw new W.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:ie});if(!C.v.jsonValues.includes(ie.type))throw new W.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${ie.name}"`,{field:ie})}if(le){const ie=new E.Z(ue);if(le.startTimeField){const ne=ie.get(le.startTimeField);ne?(le.startTimeField=ne.name,ne.type="esriFieldTypeDate"):le.startTimeField=null}if(le.endTimeField){const ne=ie.get(le.endTimeField);ne?(le.endTimeField=ne.name,ne.type="esriFieldTypeDate"):le.endTimeField=null}if(le.trackIdField){const ne=ie.get(le.trackIdField);ne?le.trackIdField=ne.name:(le.trackIdField=null,A.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:le}}))}le.startTimeField||le.endTimeField||(A.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:le}}),le=null)}return{drawingInfo:ve?(0,f.bU)(ve):null,extent:ee(Q),geometryType:ve,fields:ue,hasZ:!!Re,objectIdField:ce,timeInfo:le}})).apply(this,arguments)}function L(Q){return h.apply(this,arguments)}function h(){return(h=(0,l.Z)(function*(Q,N={}){const{links:H}=Q,$=q(H,"data","application/json")||q(H,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,j.Wi)($))throw new W.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:se,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)($.href,{signal:re,headers:{accept:"application/json"},query:fe(_e({},oe),{token:se})});return ae})).apply(this,arguments)}function x(Q){return v.apply(this,arguments)}function v(){return(v=(0,l.Z)(function*(Q,N={}){const{links:H}=Q,$=q(H,"conformance","application/json")||q(H,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,j.Wi)($))throw new W.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:se,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)($.href,{signal:re,headers:{accept:"application/json"},query:fe(_e({},oe),{token:se})});return ae})).apply(this,arguments)}function B(Q){return P.apply(this,arguments)}function P(){return(P=(0,l.Z)(function*(Q,N={}){const{apiKey:H,customParameters:$,signal:se}=N,{data:oe}=yield(0,S.default)(Q,{signal:se,headers:{accept:"application/json"},query:fe(_e({},$),{token:H})});return oe})).apply(this,arguments)}function b(Q){return z.apply(this,arguments)}function z(){return(z=(0,l.Z)(function*(Q,N={}){const H="application/vnd.oai.openapi+json;version=3.0",$=q(Q.links,"service-desc",H);if((0,j.Wi)($))return A.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:se,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)($.href,{signal:re,headers:{accept:H},query:fe(_e({},oe),{token:se})});return ae})).apply(this,arguments)}function w(Q){var se;const N=null==(se=new RegExp("^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$","i").exec(Q))?void 0:se.groups;if(!N)return null;const{authority:H,code:$}=N;switch(H.toLowerCase()){case"ogc":switch($.toLowerCase()){case"crs27":return u.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return u.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const oe=Number.parseInt($,10);return Number.isNaN(oe)?null:oe}default:return null}}function Y(Q,N,H){return R.apply(this,arguments)}function R(){return(R=(0,l.Z)(function*(Q,N,H){const $=yield D(Q,N,H);return(0,K.cn)($)})).apply(this,arguments)}function D(Q,N,H){return p.apply(this,arguments)}function p(){return(p=(0,l.Z)(function*(Q,N,H){const{collection:$,layerDefinition:se,maxRecordCount:oe,queryParameters:{apiKey:re,customParameters:ae},spatialReference:ue,supportedCrs:Re}=Q,{links:ve}=$,ce=q(ve,"items","application/geo+json")||q(ve,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,j.Wi)(ce))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:le,num:pe,start:ie,timeExtent:ne,where:de}=N;if(N.objectIds)throw new W.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const ye=u.Z.fromJSON(ue),Ee=(0,j.Pt)(N.outSpatialReference,ye),me=Ee.isWGS84?null:U(Ee,Re),Oe=k(le,Re),je=G(ne),Ce=J(de),he=null!=pe?pe:null!=ie&&void 0!==ie?10:oe,{data:Me}=yield(0,S.default)(ce.href,fe(_e({},H),{query:fe(_e(_e({},ae),Oe),{crs:me,datetime:je,query:Ce,limit:he,startindex:ie,token:re}),headers:{accept:"application/geo+json"}}));let Pe=!1;Me.links&&(Pe=!!Me.links.find(Ue=>"next"===Ue.rel)),!Pe&&Number.isInteger(Me.numberMatched)&&Number.isInteger(Me.numberReturned)&&(Pe=Me.numberReturned<Me.numberMatched);const{fields:Ie,geometryType:De,hasZ:Le,objectIdField:Ae}=se,be=(0,c.lG)(Me,{geometryType:De,hasZ:Le,objectIdField:Ae});if(!me&&Ee.isWebMercator)for(const xe of be)if((0,j.pC)(xe.geometry)&&null!=De){const Ue=(0,K.di)(xe.geometry,De,Le,!1);Ue.spatialReference=u.Z.WGS84,xe.geometry=(0,K.GH)((0,T.iV)(Ue,Ee))}for(const xe of be)xe.objectId=xe.attributes[Ae];const Se=me||!me&&Ee.isWebMercator?Ee.toJSON():I.Zn,Te=new y.Z;return Te.exceededTransferLimit=Pe,Te.features=be,Te.fields=Ie,Te.geometryType=De,Te.hasZ=Le,Te.objectIdFieldName=Ae,Te.spatialReference=Se,Te})).apply(this,arguments)}function U(Q,N){var oe,re,ae;const{isWebMercator:H,wkid:$}=Q;if(!$)return null;const se=H?null!=(ae=null!=(re=null!=(oe=N[3857])?oe:N[102100])?re:N[102113])?ae:N[900913]:N[Q.wkid];return se?`${_}${se}`:null}function F(Q){if((0,j.Wi)(Q))return"";const{xmin:N,ymin:H,xmax:$,ymax:se}=Q;return`${N},${H},${$},${se}`}function G(Q){if((0,j.Wi)(Q))return null;const{start:N,end:H}=Q;return`${(0,j.pC)(N)?N.toISOString():".."}/${(0,j.pC)(H)?H.toISOString():".."}`}function J(Q){return(0,j.Wi)(Q)||!Q||"1=1"===Q?null:Q}function k(Q,N){if(!function V(Q){return(0,j.pC)(Q)&&"extent"===Q.type}(Q))return null;const{spatialReference:H}=Q;if(!H||H.isWGS84)return{bbox:F(Q)};const $=U(H,N);return(0,j.pC)($)?{bbox:F(Q),"bbox-crs":$}:H.isWebMercator?{bbox:F((0,T.iV)(Q,u.Z.WGS84))}:null}function ee(Q){var ae;const N=null==(ae=Q.extent)?void 0:ae.spatial;if(!N)return null;const H=N.bbox[0],$=4===H.length;return{xmin:H[0],ymin:H[1],xmax:$?H[2]:H[3],ymax:$?H[3]:H[4],zmin:$?void 0:H[2],zmax:$?void 0:H[5],spatialReference:u.Z.WGS84.toJSON()}}function q(Q,N,H){return Q.find($=>$.rel===N&&$.type===H)||Q.find($=>$.rel===N&&!$.type)}},14772:(te,X,n)=>{n.d(X,{R:()=>C});var l=n(17626),O=n(14517),S=n(80542),W=n(62208),Z=n(95737),j=n(77712),K=(n(90912),n(85931),n(76898)),y=n(13812),c=n(59990),f=n(13410);const E={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let C=class extends((0,S.p)(O.Z)){constructor(u){super(u),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const u=this.visibleSublayers.map(A=>{const _=(0,c.f)(this.floors,A);return A.toExportImageJSON(_)});return u.length?JSON.stringify(u):null}get hasDynamicLayers(){return this.layer&&(0,f.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(u){this._get("layer")!==u&&(this._set("layer",u),this.handles.remove("layer"),u&&this.handles.add([u.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),u.on("sublayer-update",A=>this.notifyChange(E[A.propertyName]))],"layer"))}get layers(){const u=this.visibleSublayers;return u?u.length?"show:"+u.map(A=>A.id).join(","):"show:-1":null}get layerDefs(){var _;const u=!(null==(_=this.floors)||!_.length),A=this.visibleSublayers.filter(m=>null!=m.definitionExpression||u&&null!=m.floorInfo);return A.length?JSON.stringify(A.reduce((m,g)=>{const M=(0,c.f)(this.floors,g),L=(0,Z._)(M,g.definitionExpression);return(0,W.pC)(L)&&(m[g.id]=L),m},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const u=this.layer;return u&&(u.commitProperty("dpi"),u.commitProperty("imageFormat"),u.commitProperty("imageTransparency"),u.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const u=[];if(!this.layer)return u;const A=this.layer.sublayers,_=g=>{const M=this.scale;g.visible&&(0===M||(0===g.minScale||M<=g.minScale)&&(0===g.maxScale||M>=g.maxScale))&&(g.sublayers?g.sublayers.forEach(_):u.unshift(g))};A&&A.forEach(_);const m=this._get("visibleSublayers");return!m||m.length!==u.length||m.some((g,M)=>u[M]!==g)?u:m}toJSON(){const u=this.layer;let A={dpi:u.dpi,format:u.imageFormat,transparent:u.imageTransparency,gdbVersion:u.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?A.dynamicLayers=this.dynamicLayers:A=fe(_e({},A),{layers:this.layers,layerDefs:this.layerDefs}),A}};(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"dynamicLayers",null),(0,l._)([(0,j.Cb)()],C.prototype,"floors",void 0),(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"hasDynamicLayers",null),(0,l._)([(0,j.Cb)()],C.prototype,"layer",null),(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"layers",null),(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"layerDefs",null),(0,l._)([(0,j.Cb)({type:Number})],C.prototype,"scale",void 0),(0,l._)([(0,j.Cb)(y.qG)],C.prototype,"timeExtent",void 0),(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"version",null),(0,l._)([(0,j.Cb)({readOnly:!0})],C.prototype,"visibleSublayers",null),C=(0,l._)([(0,K.j)("esri.layers.mixins.ExportImageParameters")],C)},51920:(te,X,n)=>{n.d(X,{j:()=>K});var l=n(17626),O=n(14517),S=n(80542),W=n(77712),I=(n(90912),n(85931),n(76898));const T={visible:"visibleSublayers"};let K=class extends((0,S.p)(O.Z)){constructor(y){super(y),this.scale=0}set layer(y){this._get("layer")!==y&&(this._set("layer",y),this.handles.remove("layer"),y&&this.handles.add([y.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),y.on("wms-sublayer-update",c=>this.notifyChange(T[c.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:y})=>y).map(({name:y})=>y).join()}get version(){this.commitProperty("layers");const y=this.layer;return y&&y.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:y,scale:c}=this,f=null==y?void 0:y.sublayers,E=[],C=u=>{const{minScale:A,maxScale:_,sublayers:m,visible:g}=u;g&&(0===c||(0===A||c<=A)&&(0===_||c>=_))&&(m?m.forEach(C):E.push(u))};return null==f||f.forEach(C),E}toJSON(){const{layer:y,layers:c}=this,{imageFormat:f,imageTransparency:E,version:C}=y;return{format:f,request:"GetMap",service:"WMS",styles:"",transparent:E?"TRUE":"FALSE",version:C,layers:c}}};(0,l._)([(0,W.Cb)()],K.prototype,"layer",null),(0,l._)([(0,W.Cb)({readOnly:!0})],K.prototype,"layers",null),(0,l._)([(0,W.Cb)({type:Number})],K.prototype,"scale",void 0),(0,l._)([(0,W.Cb)({readOnly:!0})],K.prototype,"version",null),(0,l._)([(0,W.Cb)({readOnly:!0})],K.prototype,"visibleSublayers",null),K=(0,l._)([(0,I.j)("esri.layers.support.ExportWMSImageParameters")],K)},74711:(te,X,n)=>{n.d(X,{W:()=>K});var l=n(15861),O=n(24263),S=n(84792),W=n(62208),Z=n(10699),j=n(80415),I=n(84687),T=n(55463);class K{constructor(c,f,E,C){var A;this._parsedUrl=c,this._portalItem=f,this._apiKey=E,this.signal=C,this._rootDocument=null;const u=null==(A=this._parsedUrl)?void 0:A.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);u&&(this._urlParts={root:u[1],layerId:parseInt(u[2],10)})}fetch(){var c=this;return(0,l.Z)(function*(){var C;if(!c._urlParts)return null;const f=null!=(C=c._portalItem)?C:yield c._portalItemFromServiceItemId();if((0,W.Wi)(f))return c._loadFromUrl();const E=yield c._findAndLoadRelatedPortalItem(f);return(0,W.Wi)(E)?null:c._loadFeatureLayerFromPortalItem(E)})()}fetchPortalItem(){var c=this;return(0,l.Z)(function*(){var E;if(!c._urlParts)return null;const f=null!=(E=c._portalItem)?E:yield c._portalItemFromServiceItemId();return(0,W.Wi)(f)?null:c._findAndLoadRelatedPortalItem(f)})()}_fetchRootDocument(){var c=this;return(0,l.Z)(function*(){if((0,W.pC)(c._rootDocument))return c._rootDocument;if((0,W.Wi)(c._urlParts))return c._rootDocument={},{};const f={query:{f:"json",token:c._apiKey},responseType:"json",signal:c.signal},E=`${c._urlParts.root}/SceneServer`;try{const C=yield(0,S.default)(E,f);c._rootDocument=C.data}catch(C){c._rootDocument={}}return c._rootDocument})()}_fetchServiceOwningPortalUrl(){var c=this;return(0,l.Z)(function*(){var u,A;const f=null==(u=c._parsedUrl)?void 0:u.path,E=f?null==(A=O.id)?void 0:A.findServerInfo(f):null;if(null!=E&&E.owningSystemUrl)return E.owningSystemUrl;const C=f?f.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const _=(yield(0,S.default)(C,{query:{f:"json"},responseType:"json",signal:c.signal})).data.owningSystemUrl;if(_)return _}catch(_){(0,Z.r9)(_)}return null})()}_findAndLoadRelatedPortalItem(c){var f=this;return(0,l.Z)(function*(){try{return(yield c.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:f.signal})).find(E=>"Feature Service"===E.type)||null}catch(E){return(0,Z.r9)(E),null}})()}_loadFeatureLayerFromPortalItem(c){var f=this;return(0,l.Z)(function*(){var C;yield c.load({signal:f.signal});const E=yield f._findMatchingAssociatedSublayerUrl(null!=(C=c.url)?C:"");return new j.default({url:E,portalItem:c}).load({signal:f.signal})})()}_loadFromUrl(){var c=this;return(0,l.Z)(function*(){var E;const f=yield c._findMatchingAssociatedSublayerUrl(`${null==(E=c._urlParts)?void 0:E.root}/FeatureServer`);return new j.default({url:f}).load({signal:c.signal})})()}_findMatchingAssociatedSublayerUrl(c){var f=this;return(0,l.Z)(function*(){var h;const E=c.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),C={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:f.signal},u=null==(h=f._urlParts)?void 0:h.layerId,A=f._fetchRootDocument(),_=(0,S.default)(E,C),[m,g]=yield Promise.all([_,A]),M=g&&g.layers,L=m.data&&m.data.layers;if(!Array.isArray(L))throw new Error("expected layers array");if(Array.isArray(M)){for(let x=0;x<Math.min(M.length,L.length);x++)if(M[x].id===u)return`${E}/${L[x].id}`}else if(null!=u&&u<L.length)return`${E}/${L[u].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var c=this;return(0,l.Z)(function*(){const f=(yield c._fetchRootDocument()).serviceItemId;if(!f)return null;const E=new T.default({id:f,apiKey:c._apiKey}),C=yield c._fetchServiceOwningPortalUrl();(0,W.pC)(C)&&(E.portal=new I.Z({url:C}));try{return E.load({signal:c.signal})}catch(u){return(0,Z.r9)(u),null}})()}}},17732:(te,X,n)=>{n.d(X,{L:()=>f});var l=n(17626),O=n(14517),S=n(62208),W=n(77712),I=(n(90912),n(85931),n(76898)),T=n(37118),K=n(55915),y=n(65401),c=n(65629);let f=class extends O.Z{constructor(E){super(E)}get bounds(){const E=this.coords;return(0,S.Wi)(E)||(0,S.Wi)(E.extent)?null:(0,y.oJ)(E.extent)}get coords(){var C;const E=null==(C=(0,S.Wg)(this.element.georeference))?void 0:C.coords;return(0,K.dz)(E,this.spatialReference).geometry}get normalizedCoords(){return T.Z.fromJSON((0,c.Ui)(this.coords))}get normalizedBounds(){const E=(0,S.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,S.pC)(E)?(0,y.oJ)(E):null}};(0,l._)([(0,W.Cb)()],f.prototype,"spatialReference",void 0),(0,l._)([(0,W.Cb)()],f.prototype,"element",void 0),(0,l._)([(0,W.Cb)()],f.prototype,"bounds",null),(0,l._)([(0,W.Cb)()],f.prototype,"coords",null),(0,l._)([(0,W.Cb)()],f.prototype,"normalizedCoords",null),(0,l._)([(0,W.Cb)()],f.prototype,"normalizedBounds",null),f=(0,l._)([(0,I.j)("esri.layers.support.MediaElementView")],f)},28930:(te,X,n)=>{n.d(X,{y:()=>B});var v,l=n(15861),O=n(17626),S=n(84792),W=n(14517),Z=n(27306),j=n(26584),I=n(80542),T=n(63290),K=n(93961),y=n(77029),c=n(10699),f=n(32917),E=n(50618),C=n(21726),u=n(77712),A=n(66656),_=n(85931),m=n(76898),g=n(68511),M=n(58817);class L{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(b,z){if("unknown"!==this._allAvailability)return this._allAvailability;const w=(b-this.location.top)*this.location.width+(z-this.location.left),R=w>>3,D=this._tileAvailabilityBitSet;return R<0||R>D.length?"unknown":D[R]&1<<w%8?"available":"unavailable"}_updateFromData(b){let Y=!0,R=!0;const D=Math.ceil(this.location.width*this.location.height/8),p=new Uint8Array(D);let V=0;for(let U=0;U<b.length;U++){const F=U%8;b[U]?(R=!1,p[V]|=1<<F):Y=!1,7===F&&++V}R?this._allAvailability="unavailable":Y?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=p,this.byteSize+=p.length)}static fromDefinition(b,z){const w=b.service.request||S.default,{row:Y,col:R,width:D,height:p}=b,V={query:{f:"json"}};return z=z?_e(_e({},V),z):V,w(function x(P){let b;if("vector-tile"===P.service.type)b=`${P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`;else{const w=P.service.tileServers;b=`${w&&w.length?w[P.row%w.length]:P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}const z=P.service.query;return z&&(b=`${b}?${z}`),b}(b),z).then(U=>U.data).catch(U=>{if(U&&U.details&&422===U.details.httpStatus)return{location:{top:Y,left:R,width:D,height:p},valid:!0,data:(0,_.a9)(D*p,0)};throw U}).then(U=>{if(U.location&&(U.location.top!==Y||U.location.left!==R||U.location.width!==D||U.location.height!==p))throw new j.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:U,definition:{top:Y,left:R,width:D,height:p}});return L.fromJSON(U)})}static fromJSON(b){L._validateJSON(b);const z=new L;return z.location=Object.freeze((0,M.d9)(b.location)),z._updateFromData(b.data),Object.freeze(z)}static _validateJSON(b){if(!b||!b.location)throw new j.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new j.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new j.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new j.Z("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new j.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function h(P){return`${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}let B=v=class extends((0,I.p)(W.Z)){constructor(P){super(P),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*Z.Y8.MEGABYTES,this.request=S.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new K.Z(this.cacheByteSize),this.addHandles([(0,f.YP)(()=>{const{layer:P}=this;return[null==P?void 0:P.parsedUrl,null==P?void 0:P.tileServers,null==P?void 0:P.apiKey,null==P?void 0:P.customParameters]},()=>this._initializeTilemapDefinition()),(0,f.YP)(()=>{var P,b;return null==(b=null==(P=this.layer)?void 0:P.tileInfo)?void 0:b.lods},P=>this._initializeAvailableLevels(P),f.tX)]),this._initializeTilemapDefinition()}castLevels(P){return P<=2?(T.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",P),3):P}get size(){return 1<<this.levels}fetchTilemap(P,b,z,w){if(!this._availableLevels[P])return Promise.reject(new j.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`));const Y=this._tmpTilemapDefinition,R=this._tilemapFromCache(P,b,z,Y);if(R)return Promise.resolve(R);const D=w&&w.signal;return w=fe(_e({},w),{signal:null}),new Promise((p,V)=>{(0,c.fu)(D,()=>V((0,c.zE)()));const U=h(Y);let F=this._pendingTilemapRequests[U];if(!F){F=L.fromDefinition(Y,w).then(J=>(this._tilemapCache.put(U,J,J.byteSize),J));const G=()=>delete this._pendingTilemapRequests[U];this._pendingTilemapRequests[U]=F,F.then(G,G)}F.then(p,V)})}getAvailability(P,b,z){if(!this._availableLevels[P])return"unavailable";const w=this._tilemapFromCache(P,b,z,this._tmpTilemapDefinition);return w?w.getAvailability(b,z):"unknown"}fetchAvailability(P,b,z,w){return this._availableLevels[P]?this.fetchTilemap(P,b,z,w).catch(Y=>Y).then(Y=>{if(Y instanceof L){const R=Y.getAvailability(b,z);if("unavailable"===R)throw new j.Z("tile-map:tile-unavailable","Tile is not available",{level:P,row:b,col:z});return R}if((0,c.D_)(Y))throw Y;return"unknown"}):Promise.reject(new j.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`))}fetchAvailabilityUpsample(P,b,z,w,Y){w.level=P,w.row=b,w.col=z;const R=this.layer.tileInfo;R.updateTileInfo(w);const D=this.fetchAvailability(P,b,z,Y).catch(p=>{if((0,c.D_)(p))throw p;if(R.upsampleTile(w))return this.fetchAvailabilityUpsample(w.level,w.row,w.col,w);throw p});return this._fetchAvailabilityUpsamplePrefetch(w.id,P,b,z,Y,D),D}_fetchAvailabilityUpsamplePrefetch(P,b,z,w,Y,R){var D=this;return(0,l.Z)(function*(){if(!D._prefetchingEnabled||null==P)return;const p=`prefetch-${P}`;if(D.handles.has(p))return;const V=new AbortController;R.then(()=>V.abort(),()=>V.abort());let U=!1;if(D.handles.add({remove(){U||(U=!0,V.abort())}},p),yield(0,E.MU)(10,V.signal).catch(()=>{}),U||(U=!0,D.handles.remove(p)),(0,c.Hc)(V))return;const G=new g.f(P,b,z,w),J=fe(_e({},Y),{signal:V.signal}),k=D.layer.tileInfo;for(let ee=0;v._prefetches.length<v._maxPrefetch&&k.upsampleTile(G);++ee){const q=D.fetchAvailability(G.level,G.row,G.col,J);v._prefetches.push(q);const Q=()=>{v._prefetches.removeUnordered(q)};q.then(Q,Q)}})()}_initializeTilemapDefinition(){var w;if(!this.layer.parsedUrl)return;const{parsedUrl:P,apiKey:b,customParameters:z}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:P.path,query:(0,C.B7)(fe(_e(_e({},P.query),z),{token:null!=b?b:null==(w=P.query)?void 0:w.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(P,b,z,w){w.level=P,w.row=b-b%this.size,w.col=z-z%this.size;const Y=h(w);return this._tilemapCache.get(Y)}_initializeAvailableLevels(P){this._availableLevels={},P&&P.forEach(b=>this._availableLevels[b.level]=!0)}get test(){const P=this;return{get prefetchingEnabled(){return P._prefetchingEnabled},set prefetchingEnabled(b){P._prefetchingEnabled=b},hasTilemap:(b,z,w)=>!!P._tilemapFromCache(b,z,w,P._tmpTilemapDefinition)}}};B._maxPrefetch=4,B._prefetches=new y.Z({initialSize:v._maxPrefetch}),(0,O._)([(0,u.Cb)({constructOnly:!0,type:Number})],B.prototype,"levels",void 0),(0,O._)([(0,A.p)("levels")],B.prototype,"castLevels",null),(0,O._)([(0,u.Cb)({readOnly:!0,type:Number})],B.prototype,"size",null),(0,O._)([(0,u.Cb)({constructOnly:!0,type:Number})],B.prototype,"cacheByteSize",void 0),(0,O._)([(0,u.Cb)({constructOnly:!0})],B.prototype,"layer",void 0),(0,O._)([(0,u.Cb)({constructOnly:!0})],B.prototype,"request",void 0),B=v=(0,O._)([(0,m.j)("esri.layers.support.TilemapCache")],B)},91309:(te,X,n)=>{n.d(X,{B:()=>T});var I,l=n(17626),O=n(86810),S=n(58817),W=n(77712),j=(n(90912),n(76898));let T=I=class extends O.wq{constructor(K){super(K)}clone(){return new I({customLayerParameters:(0,S.d9)(this.customLayerParameters),customParameters:(0,S.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,l._)([(0,W.Cb)({json:{type:Object,write:!0}})],T.prototype,"customLayerParameters",void 0),(0,l._)([(0,W.Cb)({json:{type:Object,write:!0}})],T.prototype,"customParameters",void 0),(0,l._)([(0,W.Cb)({type:String,json:{write:!0}})],T.prototype,"layerIdentifier",void 0),(0,l._)([(0,W.Cb)({type:String,json:{write:!0}})],T.prototype,"tileMatrixSet",void 0),(0,l._)([(0,W.Cb)({type:String,json:{write:!0}})],T.prototype,"url",void 0),T=I=(0,l._)([(0,j.j)("esri.layer.support.WMTSLayerInfo")],T)},51026:(te,X,n)=>{n.d(X,{d:()=>S,h:()=>O});var l=n(2584);const O={type:l.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:S}}}}};function S(W,Z,j,I){if(!W)return null;const{minScale:T,maxScale:K,minLOD:y,maxLOD:c}=Z;if(null!=y&&null!=c)return l.Z.fromJSON(I&&I.ignoreMinMaxLOD?W:fe(_e({},W),{lods:W.lods.filter(({level:f})=>null!=f&&f>=y&&f<=c)}));if(0!==T&&0!==K){const f=u=>Math.round(1e4*u)/1e4,E=T?f(T):1/0,C=K?f(K):-1/0;return l.Z.fromJSON(fe(_e({},W),{lods:W.lods.filter(u=>{const A=f(u.scale);return A<=E&&A>=C})}))}return l.Z.fromJSON(W)}},72581:(te,X,n)=>{n.d(X,{IJ:()=>c,m5:()=>u,vB:()=>_,w7:()=>E});var l=n(15861),O=n(84792),S=n(62208),W=n(21726),Z=n(91179),j=n(93555),I=n(76391),T=n(61515);const K="Layer does not support extent calculation.";function c(g,M,L,h){return f.apply(this,arguments)}function f(){return(f=(0,l.Z)(function*(g,M,L,h){const x=yield m(g,M,"json",h);return(0,T.p)(M,L,x.data),x})).apply(this,arguments)}function E(g,M,L){return C.apply(this,arguments)}function C(){return(C=(0,l.Z)(function*(g,M,L){return(0,S.pC)(M.timeExtent)&&M.timeExtent.isEmpty?{data:{objectIds:[]}}:m(g,M,"json",L,{returnIdsOnly:!0})})).apply(this,arguments)}function u(g,M,L){return A.apply(this,arguments)}function A(){return(A=(0,l.Z)(function*(g,M,L){return(0,S.pC)(M.timeExtent)&&M.timeExtent.isEmpty?{data:{count:0,extent:null}}:m(g,M,"json",L,{returnExtentOnly:!0,returnCountOnly:!0}).then(h=>{const x=h.data;if(x.hasOwnProperty("extent"))return h;if(x.features)throw new Error(K);if(x.hasOwnProperty("count"))throw new Error(K);return h})})).apply(this,arguments)}function _(g,M,L){return(0,S.pC)(M.timeExtent)&&M.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):m(g,M,"json",L,{returnIdsOnly:!0,returnCountOnly:!0})}function m(g,M,L,h={},x={}){const v="string"==typeof g?(0,W.mN)(g):g,B=M.geometry?[M.geometry]:[];return h.responseType="pbf"===L?"array-buffer":"json",(0,j.aX)(B,null,h).then(P=>{const b=P&&P[0];(0,S.pC)(b)&&((M=M.clone()).geometry=b);const z=(0,I.A)(_e(_e(fe(_e({},v.query),{f:L}),x),function y(g,M){var v,B;const L=g.geometry,h=g.toJSON(),x=h;if((0,S.pC)(L)&&(x.geometry=JSON.stringify(L),x.geometryType=(0,Z.Ji)(L),x.inSR=L.spatialReference.wkid||JSON.stringify(L.spatialReference)),null!=(v=h.topFilter)&&v.groupByFields&&(x.topFilter.groupByFields=h.topFilter.groupByFields.join(",")),null!=(B=h.topFilter)&&B.orderByFields&&(x.topFilter.orderByFields=h.topFilter.orderByFields.join(",")),h.topFilter&&(x.topFilter=JSON.stringify(x.topFilter)),h.objectIds&&(x.objectIds=h.objectIds.join(",")),h.orderByFields&&(x.orderByFields=h.orderByFields.join(",")),h.outFields&&!((null==M?void 0:M.returnCountOnly)||(null==M?void 0:M.returnExtentOnly)||(null==M?void 0:M.returnIdsOnly))?x.outFields=h.outFields.includes("*")?"*":h.outFields.join(","):delete x.outFields,h.outSR?x.outSR=h.outSR.wkid||JSON.stringify(h.outSR):L&&h.returnGeometry&&(x.outSR=x.inSR),h.returnGeometry&&delete h.returnGeometry,h.timeExtent){const P=h.timeExtent,{start:b,end:z}=P;null==b&&null==z||(x.time=b===z?b:`${null!=b?b:"null"},${null!=z?z:"null"}`),delete h.timeExtent}return x}(M,x)));return(0,O.default)((0,W.v_)(v.path,"queryTopFeatures"),fe(_e({},h),{query:_e(_e({},z),h.query)}))})}},43289:(te,X,n)=>{function j(y){return function W(y,c){return(y%=c)>=0?y:y+c}(.7111111111111111*y,256)}n.d(X,{s5:()=>j}),Math,Math},46519:(te,X,n)=>{n.d(X,{z:()=>E});var l=n(7547),O=n(39351);function S(C,u){return C.x===u.x&&C.y===u.y}function Z(C,u){return C.x=u.y,C.y=-u.x,C}function j(C,u){return C.x=-u.y,C.y=u.x,C}function I(C,u){return C.x=u.x,C.y=u.y,C}function T(C,u){return C.x=-u.x,C.y=-u.y,C}function K(C){return Math.sqrt(C.x*C.x+C.y*C.y)}function y(C,u){return C.x*u.y-C.y*u.x}function c(C,u){return C.x*u.x+C.y*u.y}function f(C,u,A,_){return C.x=u.x*A+u.y*_,C.y=u.x*_-u.y*A,C}class E{constructor(u,A,_){this._writeVertex=u,this._writeTriangle=A,this._canUseThinTessellation=_,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(u,A){(function W(C){if(!C)return;const u=C.length;if(u<=1)return;let A=0;for(let _=1;_<u;_++)S(C[_],C[A])||++A===_||(C[A]=C[_]);C.length=A+1})(u),this._canUseThinTessellation&&A.halfWidth<O.tQ&&!A.offset?this._tessellateThin(u,A):this._tessellate(u,A)}_tessellateThin(u,A){if(u.length<2)return;const _=A.wrapDistance||65535;let m=A.initialDistance||0,g=!1,M=u[0].x,L=u[0].y;const h=u.length;for(let x=1;x<h;++x){g&&(g=!1,m=0);let v=u[x].x,B=u[x].y,P=v-M,b=B-L,z=Math.sqrt(P*P+b*b);if(P/=z,b/=z,m+z>_){g=!0;const p=(_-m)/z;z=_-m,v=(1-p)*M+p*v,B=(1-p)*L+p*B,--x}const w=this._writeVertex(M,L,0,0,P,b,b,-P,0,-1,m),Y=this._writeVertex(M,L,0,0,P,b,-b,P,0,1,m);m+=z;const R=this._writeVertex(v,B,0,0,P,b,b,-P,0,-1,m),D=this._writeVertex(v,B,0,0,P,b,-b,P,0,1,m);this._writeTriangle(w,Y,R),this._writeTriangle(Y,R,D),M=v,L=B}}_tessellate(u,A){const m=u[u.length-1],g=S(u[0],m);if(u.length<(g?3:2))return;const L=A.pixelCoordRatio,h=null!=A.capType?A.capType:l.RL.BUTT,x=null!=A.joinType?A.joinType:l.AH.MITER,v=null!=A.miterLimit?Math.min(A.miterLimit,4):2,B=null!=A.roundLimit?Math.min(A.roundLimit,1.05):1.05,P=null!=A.halfWidth?A.halfWidth:2,b=!!A.textured;let z,w,Y,R=null;const D=this._prevNormal,p=this._nextNormal;let V=-1,U=-1;const F=this._joinNormal;let G,J;const k=this._textureNormalLeft,ee=this._textureNormalRight,q=this._textureNormal;let Q=-1,N=-1;const H=A.wrapDistance||65535;let $=A.initialDistance||0;const se=this._writeVertex,oe=this._writeTriangle,re=(ue,Re,ve,ce,le,pe)=>{const ie=se(w,Y,G,J,ve,ce,ue,Re,le,pe,$);return Q>=0&&N>=0&&ie>=0&&oe(Q,N,ie),Q=N,N=ie,ie};g&&(z=u[u.length-2],p.x=m.x-z.x,p.y=m.y-z.y,U=K(p),p.x/=U,p.y/=U);let ae=!1;for(let ue=0;ue<u.length;++ue){if(ae&&(ae=!1,$=0),z&&(D.x=-p.x,D.y=-p.y,V=U,$+V>H&&(ae=!0)),ae){const ne=(H-$)/V;V=H-$,z={x:(1-ne)*z.x+ne*u[ue].x,y:(1-ne)*z.y+ne*u[ue].y},--ue}else z=u[ue];w=z.x,Y=z.y;const Re=ue<=0&&!ae,ve=ue===u.length-1;if(Re||($+=V),R=ve?g?u[1]:null:u[ue+1],R?(p.x=R.x-w,p.y=R.y-Y,U=K(p),p.x/=U,p.y/=U):(p.x=void 0,p.y=void 0),!g){if(Re){j(F,p),G=F.x,J=F.y,h===l.RL.SQUARE&&(re(-p.y-p.x,p.x-p.y,p.x,p.y,0,-1),re(p.y-p.x,-p.x-p.y,p.x,p.y,0,1)),h===l.RL.ROUND&&(re(-p.y-p.x,p.x-p.y,p.x,p.y,-1,-1),re(p.y-p.x,-p.x-p.y,p.x,p.y,-1,1)),h!==l.RL.ROUND&&h!==l.RL.BUTT||(re(-p.y,p.x,p.x,p.y,0,-1),re(p.y,-p.x,p.x,p.y,0,1));continue}if(ve){Z(F,D),G=F.x,J=F.y,h!==l.RL.ROUND&&h!==l.RL.BUTT||(re(D.y,-D.x,-D.x,-D.y,0,-1),re(-D.y,D.x,-D.x,-D.y,0,1)),h===l.RL.SQUARE&&(re(D.y-D.x,-D.x-D.y,-D.x,-D.y,0,-1),re(-D.y-D.x,D.x-D.y,-D.x,-D.y,0,1)),h===l.RL.ROUND&&(re(D.y-D.x,-D.x-D.y,-D.x,-D.y,1,-1),re(-D.y-D.x,D.x-D.y,-D.x,-D.y,1,1));continue}}let ce,le,pe=-y(D,p);if(Math.abs(pe)<.01)c(D,p)>0?(F.x=D.x,F.y=D.y,pe=1,ce=Number.MAX_VALUE,le=!0):(j(F,p),pe=1,ce=1,le=!1);else{F.x=(D.x+p.x)/pe,F.y=(D.y+p.y)/pe,ce=K(F);const ne=(ce-1)*P*L;le=ce>4||ne>V&&ne>U}G=F.x,J=F.y;let ie=x;switch(x){case l.AH.BEVEL:ce<1.05&&(ie=l.AH.MITER);break;case l.AH.ROUND:ce<B&&(ie=l.AH.MITER);break;case l.AH.MITER:ce>v&&(ie=l.AH.BEVEL)}switch(ie){case l.AH.MITER:if(re(F.x,F.y,-D.x,-D.y,0,-1),re(-F.x,-F.y,-D.x,-D.y,0,1),ve)break;if(b){const ne=ae?0:$;Q=this._writeVertex(w,Y,G,J,p.x,p.y,F.x,F.y,0,-1,ne),N=this._writeVertex(w,Y,G,J,p.x,p.y,-F.x,-F.y,0,1,ne)}break;case l.AH.BEVEL:{const ne=pe<0;let de,ye,Ee,me;if(ne){const he=Q;Q=N,N=he,de=k,ye=ee}else de=ee,ye=k;if(le)Ee=ne?j(this._innerPrev,D):Z(this._innerPrev,D),me=ne?Z(this._innerNext,p):j(this._innerNext,p);else{const he=ne?T(this._inner,F):I(this._inner,F);Ee=he,me=he}const Oe=ne?Z(this._bevelStart,D):j(this._bevelStart,D);re(Ee.x,Ee.y,-D.x,-D.y,de.x,de.y);const je=re(Oe.x,Oe.y,-D.x,-D.y,ye.x,ye.y);if(ve)break;const Ce=ne?j(this._bevelEnd,p):Z(this._bevelEnd,p);if(le){const he=this._writeVertex(w,Y,G,J,-D.x,-D.y,0,0,0,0,$);Q=this._writeVertex(w,Y,G,J,p.x,p.y,me.x,me.y,de.x,de.y,$),N=this._writeVertex(w,Y,G,J,p.x,p.y,Ce.x,Ce.y,ye.x,ye.y,$),this._writeTriangle(je,he,N)}else{if(b){const he=this._bevelMiddle;he.x=(Oe.x+Ce.x)/2,he.y=(Oe.y+Ce.y)/2,f(q,he,-D.x,-D.y),re(he.x,he.y,-D.x,-D.y,q.x,q.y),f(q,he,p.x,p.y),Q=this._writeVertex(w,Y,G,J,p.x,p.y,he.x,he.y,q.x,q.y,$),N=this._writeVertex(w,Y,G,J,p.x,p.y,me.x,me.y,de.x,de.y,$)}else{const he=Q;Q=N,N=he}re(Ce.x,Ce.y,p.x,p.y,ye.x,ye.y)}if(ne){const he=Q;Q=N,N=he}break}case l.AH.ROUND:{const ne=pe<0;let de,ye;if(ne){const ge=Q;Q=N,N=ge,de=k,ye=ee}else de=ee,ye=k;const Ee=ne?T(this._inner,F):I(this._inner,F);let me,Oe;le?(me=ne?j(this._innerPrev,D):Z(this._innerPrev,D),Oe=ne?Z(this._innerNext,p):j(this._innerNext,p)):(me=Ee,Oe=Ee);const je=ne?Z(this._roundStart,D):j(this._roundStart,D),Ce=ne?j(this._roundEnd,p):Z(this._roundEnd,p),he=re(me.x,me.y,-D.x,-D.y,de.x,de.y),Me=re(je.x,je.y,-D.x,-D.y,ye.x,ye.y);if(ve)break;const Pe=this._writeVertex(w,Y,G,J,-D.x,-D.y,0,0,0,0,$);le||this._writeTriangle(Q,N,Pe);const Ie=T(this._outer,Ee),De=this._writeVertex(w,Y,G,J,p.x,p.y,Ce.x,Ce.y,ye.x,ye.y,$);let Le,Ae;const be=ce>2;if(be){let ge;ce!==Number.MAX_VALUE?(Ie.x/=ce,Ie.y/=ce,ge=c(D,Ie),ge=(ce*(ge*ge-1)+1)/ge):ge=-1,Le=ne?Z(this._startBreak,D):j(this._startBreak,D),Le.x+=D.x*ge,Le.y+=D.y*ge,Ae=ne?j(this._endBreak,p):Z(this._endBreak,p),Ae.x+=p.x*ge,Ae.y+=p.y*ge}f(q,Ie,-D.x,-D.y);const Se=this._writeVertex(w,Y,G,J,-D.x,-D.y,Ie.x,Ie.y,q.x,q.y,$);f(q,Ie,p.x,p.y);const Te=b?this._writeVertex(w,Y,G,J,p.x,p.y,Ie.x,Ie.y,q.x,q.y,$):Se,xe=Pe,Ue=b?this._writeVertex(w,Y,G,J,p.x,p.y,0,0,0,0,$):Pe;let Be=-1,We=-1;if(be&&(f(q,Le,-D.x,-D.y),Be=this._writeVertex(w,Y,G,J,-D.x,-D.y,Le.x,Le.y,q.x,q.y,$),f(q,Ae,p.x,p.y),We=this._writeVertex(w,Y,G,J,p.x,p.y,Ae.x,Ae.y,q.x,q.y,$)),b?be?(this._writeTriangle(xe,Me,Be),this._writeTriangle(xe,Be,Se),this._writeTriangle(Ue,Te,We),this._writeTriangle(Ue,We,De)):(this._writeTriangle(xe,Me,Se),this._writeTriangle(Ue,Te,De)):be?(this._writeTriangle(Pe,Me,Be),this._writeTriangle(Pe,Be,We),this._writeTriangle(Pe,We,De)):(this._writeTriangle(Pe,Me,Se),this._writeTriangle(Pe,Te,De)),le?(Q=this._writeVertex(w,Y,G,J,p.x,p.y,Oe.x,Oe.y,de.x,de.y,$),N=De):(Q=b?this._writeVertex(w,Y,G,J,p.x,p.y,Oe.x,Oe.y,de.x,de.y,$):he,this._writeTriangle(Q,Ue,De),N=De),ne){const ge=Q;Q=N,N=ge}break}}}}}},39406:(te,X,n)=>{var l,O,S,W,Z,j,I,T;n.d(X,{LW:()=>l,X:()=>W,jx:()=>O,mD:()=>I,mf:()=>Z}),(T=l||(l={}))[T.FILL=0]="FILL",T[T.LINE=1]="LINE",T[T.MARKER=2]="MARKER",T[T.TEXT=3]="TEXT",T[T.LABEL=4]="LABEL",function(T){T[T.NONE=0]="NONE",T[T.MAP=1]="MAP",T[T.LABEL=2]="LABEL",T[T.LABEL_ALPHA=4]="LABEL_ALPHA",T[T.HITTEST=8]="HITTEST",T[T.HIGHLIGHT=16]="HIGHLIGHT",T[T.CLIP=32]="CLIP",T[T.DEBUG=64]="DEBUG",T[T.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(O||(O={})),function(T){T[T.SIZE=0]="SIZE",T[T.COLOR=1]="COLOR",T[T.OPACITY=2]="OPACITY",T[T.ROTATION=3]="ROTATION"}(S||(S={})),function(T){T[T.NONE=0]="NONE",T[T.OPACITY=1]="OPACITY",T[T.COLOR=2]="COLOR",T[T.ROTATION=4]="ROTATION",T[T.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",T[T.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",T[T.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",T[T.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(W||(W={})),function(T){T[T.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",T[T.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",T[T.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",T[T.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(Z||(Z={})),function(T){T[T.SPRITE=0]="SPRITE",T[T.GLYPH=1]="GLYPH"}(j||(j={})),function(T){T[T.DEFAULT=0]="DEFAULT",T[T.SIMPLE=1]="SIMPLE",T[T.DOT_DENSITY=2]="DOT_DENSITY",T[T.OUTLINE_FILL=3]="OUTLINE_FILL",T[T.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",T[T.HEATMAP=5]="HEATMAP",T[T.PIE_CHART=6]="PIE_CHART"}(I||(I={}))},13112:(te,X,n)=>{n.d(X,{Z:()=>T});var l=n(17626),O=n(80542),S=n(77712),j=(n(90912),n(85931),n(76898));let I=class extends O.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const K=this.get("tileStore.tileScheme.spatialReference");return K&&K.toJSON()||null}};(0,l._)([(0,S.Cb)({readOnly:!0})],I.prototype,"supportsTileUpdates",null),(0,l._)([(0,S.Cb)({constructOnly:!0})],I.prototype,"remoteClient",void 0),(0,l._)([(0,S.Cb)({constructOnly:!0})],I.prototype,"service",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"spatialReference",null),(0,l._)([(0,S.Cb)({constructOnly:!0})],I.prototype,"tileInfo",void 0),(0,l._)([(0,S.Cb)({constructOnly:!0})],I.prototype,"tileStore",void 0),I=(0,l._)([(0,j.j)("esri.views.2d.layers.features.processors.BaseProcessor")],I);const T=I},55376:(te,X,n)=>{function l(O,S,W,Z){const j=O.clone(),I=1<<j.level,T=j.col+S,K=j.row+W;return Z&&T<0?(j.col=T+I,j.world-=1):T>=I?(j.col=T-I,j.world+=1):j.col=T,j.row=K,j}n.d(X,{M:()=>l})},84378:(te,X,n)=>{n.d(X,{Z:()=>O});var l=n(27899);class O{constructor(){this.spans=[]}acquire(W){this.lodInfo=W}release(){this.lodInfo=null,this.spans.length=0}forEach(W,Z){const{spans:j,lodInfo:I}=this,{level:T}=I;if(0!==j.length)for(const{row:K,colFrom:y,colTo:c}of j)for(let f=y;f<=c;f++)W.call(Z,T,K,I.normalizeCol(f),I.getWorldForColumn(f))}}O.pool=new l.Z(O)},9598:(te,X,n)=>{n.d(X,{Z:()=>u});var l=n(37053),O=n(62208),S=n(58098);function W(A,_){return[A,_]}function Z(A,_,m){return A[0]=_,A[1]=m,A}const I=new S.Z("0/0/0/0");class T{static create(_,m,g=null){const M=(0,l.C5)(_.spatialReference),L=m.origin||W(_.origin.x,_.origin.y),h=W(_.size[0]*m.resolution,_.size[1]*m.resolution),x=W(-1/0,-1/0),v=W(1/0,1/0),B=W(1/0,1/0);(0,O.pC)(g)&&(Z(x,Math.max(0,Math.floor((g.xmin-L[0])/h[0])),Math.max(0,Math.floor((L[1]-g.ymax)/h[1]))),Z(v,Math.max(0,Math.floor((g.xmax-L[0])/h[0])),Math.max(0,Math.floor((L[1]-g.ymin)/h[1]))),Z(B,v[0]-x[0]+1,v[1]-x[1]+1));const{cols:P,rows:b}=m;let z,w,Y,R;return!g&&P&&b&&(Z(x,P[0],b[0]),Z(v,P[1],b[1]),Z(B,P[1]-P[0]+1,b[1]-b[0]+1)),_.isWrappable?(z=W(Math.ceil(Math.round((M.valid[1]-M.valid[0])/m.resolution)/_.size[0]),B[1]),w=W(Math.floor((M.origin[0]-L[0])/h[0]),x[1]),Y=W(z[0]+w[0]-1,v[1]),R=!0):(w=x,Y=v,z=B,R=!1),new T(m.level,m.resolution,m.scale,L,x,v,B,h,w,Y,z,R)}constructor(_,m,g,M,L,h,x,v,B,P,b,z){this.level=_,this.resolution=m,this.scale=g,this.origin=M,this.first=L,this.last=h,this.size=x,this.norm=v,this.worldStart=B,this.worldEnd=P,this.worldSize=b,this.wrap=z}normalizeCol(_){if(!this.wrap)return _;const m=this.worldSize[0];return _<0?m-1-Math.abs((_+1)%m):_%m}denormalizeCol(_,m){return this.wrap?this.worldSize[0]*m+_:_}getWorldForColumn(_){return this.wrap?Math.floor(_/this.worldSize[0]):0}getFirstColumnForWorld(_){return _*this.worldSize[0]+this.first[0]}getLastColumnForWorld(_){return _*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(_){return(_-this.origin[0])/this.norm[0]}getXForColumn(_){return this.origin[0]+_*this.norm[0]}getRowForY(_){return(this.origin[1]-_)/this.norm[1]}getYForRow(_){return this.origin[1]-_*this.norm[1]}getTileBounds(_,m,g=!1){I.set(m);const M=g?I.col:this.denormalizeCol(I.col,I.world),L=I.row;return function j(A,_,m,g,M){A[0]=_,A[1]=m,A[2]=g,A[3]=M}(_,this.getXForColumn(M),this.getYForRow(L+1),this.getXForColumn(M+1),this.getYForRow(L)),_}getTileCoords(_,m,g=!1){I.set(m);const M=g?I.col:this.denormalizeCol(I.col,I.world);return Array.isArray(_)?Z(_,this.getXForColumn(M),this.getYForRow(I.row)):(_.x=this.getXForColumn(M),_.y=this.getYForRow(I.row)),_}}var K=n(84378);class y{constructor(_,m,g){this.row=_,this.colFrom=m,this.colTo=g}}const c=new S.Z("0/0/0/0");class f{static create(_,m){_[1]>m[1]&&([_,m]=[m,_]);const[g,M]=_,[L,h]=m,x=L-g,v=h-M,B=0!==v?x/v:0,P=(Math.ceil(M)-M)*B,b=(Math.floor(M)-M)*B;return new f(g,Math.floor(M),Math.ceil(h),B,x<0?P:b,x<0?b:P,x<0?L:g,x<0?g:L)}constructor(_,m,g,M,L,h,x,v){this.x=_,this.ymin=m,this.ymax=g,this.invM=M,this.leftAdjust=L,this.rightAdjust=h,this.leftBound=x,this.rightBound=v}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const E=[[0,0],[0,0],[0,0],[0,0]];class u{constructor(_,m=null){this.tileInfo=_,this.fullExtent=m,this.scales=[],this._infoByScale={},this._infoByLevel={};const g=_.lods.slice();g.sort((L,h)=>h.scale-L.scale);const M=this._lodInfos=g.map(L=>T.create(_,L,m));g.forEach((L,h)=>{this._infoByLevel[L.level]=M[h],this._infoByScale[L.scale]=M[h],this.scales[h]=L.scale},this),this._wrap=_.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(_){return this._infoByLevel["number"==typeof _?_:_.level]}getTileBounds(_,m,g=!1){c.set(m);const M=this._infoByLevel[c.level];return M?M.getTileBounds(_,c,g):_}getTileCoords(_,m,g=!1){c.set(m);const M=this._infoByLevel[c.level];return M?M.getTileCoords(_,c,g):_}getTileCoverage(_,m=192,g="closest"){const M="closest"===g?this.getClosestInfoForScale(_.scale):this.getSmallestInfoForScale(_.scale),L=K.Z.pool.acquire(M),h=this._wrap;let x,v,B,P=1/0,b=-1/0;const z=L.spans;E[0][0]=E[0][1]=E[1][1]=E[3][0]=-m,E[1][0]=E[2][0]=_.size[0]+m,E[2][1]=E[3][1]=_.size[1]+m;for(const D of E)_.toMap(D,D),D[0]=M.getColumnForX(D[0]),D[1]=M.getRowForY(D[1]);const w=[];let Y=3;for(let D=0;D<4;D++){if(E[D][1]===E[Y][1]){Y=D;continue}const p=f.create(E[D],E[Y]);P=Math.min(p.ymin,P),b=Math.max(p.ymax,b),void 0===w[p.ymin]&&(w[p.ymin]=[]),w[p.ymin].push(p),Y=D}if(null==P||null==b||b-P>100)return null;let R=[];for(x=P;x<b;){null!=w[x]&&(R=R.concat(w[x])),v=1/0,B=-1/0;for(let D=R.length-1;D>=0;D--){const p=R[D];v=Math.min(v,p.getLeftCol()),B=Math.max(B,p.getRightCol())}if(v=Math.floor(v),B=Math.floor(B),x>=M.first[1]&&x<=M.last[1])if(h)if(M.size[0]<M.worldSize[0]){const D=Math.floor(B/M.worldSize[0]);for(let p=Math.floor(v/M.worldSize[0]);p<=D;p++)z.push(new y(x,Math.max(M.getFirstColumnForWorld(p),v),Math.min(M.getLastColumnForWorld(p),B)))}else z.push(new y(x,v,B));else v>M.last[0]||B<M.first[0]||(v=Math.max(v,M.first[0]),B=Math.min(B,M.last[0]),z.push(new y(x,v,B)));x+=1;for(let D=R.length-1;D>=0;D--){const p=R[D];p.ymax>=x?p.incrRow():R.splice(D,1)}}return L}getTileParentId(_){c.set(_);const g=this._lodInfos.indexOf(this._infoByLevel[c.level])-1;return g<0?null:(this._getTileIdAtLOD(c,this._lodInfos[g],c),c.id)}getTileResolution(_){const m=this._infoByLevel["object"==typeof _?_.level:_];return m?m.resolution:-1}getTileScale(_){const m=this._infoByLevel[_.level];return m?m.scale:-1}intersects(_,m){c.set(m);const g=this._infoByLevel[c.level],M=_.lodInfo;if(M.resolution>g.resolution){this._getTileIdAtLOD(c,M,c);const h=M.denormalizeCol(c.col,c.world);for(const x of _.spans)if(x.row===c.row&&x.colFrom<=h&&x.colTo>=h)return!0}if(M.resolution<g.resolution){const[h,x,v,B]=_.spans.reduce((R,D)=>(R[0]=Math.min(R[0],D.row),R[1]=Math.max(R[1],D.row),R[2]=Math.min(R[2],D.colFrom),R[3]=Math.max(R[3],D.colTo),R),[1/0,-1/0,1/0,-1/0]),P=g.denormalizeCol(c.col,c.world),b=M.getColumnForX(g.getXForColumn(P)),z=M.getRowForY(g.getYForRow(c.row)),w=M.getColumnForX(g.getXForColumn(P+1))-1,Y=M.getRowForY(g.getYForRow(c.row+1))-1;return!(b>B||w<v||z>x||Y<h)}const L=M.denormalizeCol(c.col,c.world);return _.spans.some(h=>h.row===c.row&&h.colFrom<=L&&h.colTo>=L)}normalizeBounds(_,m,g){if(_[0]=m[0],_[1]=m[1],_[2]=m[2],_[3]=m[3],this._wrap){const M=(0,l.C5)(this.tileInfo.spatialReference),L=-g*(M.valid[1]-M.valid[0]);_[0]+=L,_[2]+=L}return _}getSmallestInfoForScale(_){const m=this.scales;if(this._infoByScale[_])return this._infoByScale[_];if(_>m[0])return this._infoByScale[m[0]];for(let g=1;g<m.length-1;g++)if(_>m[g]+1e-6)return this._infoByScale[m[g-1]];return this._infoByScale[m[m.length-1]]}getClosestInfoForScale(_){const m=this.scales;return this._infoByScale[_]||(_=m.reduce((g,M)=>Math.abs(M-_)<Math.abs(g-_)?M:g,m[0])),this._infoByScale[_]}scaleToLevel(_){const m=this.scales;if(this._infoByScale[_])return this._infoByScale[_].level;for(let g=m.length-1;g>=0;g--)if(_<m[g])return g===m.length-1?this._infoByScale[m[m.length-1]].level:this._infoByScale[m[g]].level+(m[g]-_)/(m[g]-m[g+1]);return this._infoByScale[m[0]].level}scaleToZoom(_){return this.tileInfo.scaleToZoom(_)}_getTileIdAtLOD(_,m,g){const M=this._infoByLevel[g.level];return _.set(g),m.resolution<M.resolution?null:(m.resolution===M.resolution||(_.level=m.level,_.col=Math.floor(g.col*M.resolution/m.resolution+.01),_.row=Math.floor(g.row*M.resolution/m.resolution+.01)),_)}}},95277:(te,X,n)=>{n.d(X,{c:()=>S,t:()=>W});var l=n(62208),O=n(60507);function S(Z,j=(0,O.RL)(Z)){return"on-the-ground"!==j.mode&&!((0,l.Wi)(Z.geometry)||!Z.geometry.hasZ)}function W(Z,j){let I=null;const T=Z.events.on("grab-changed",K=>{(0,l.pC)(I)&&(I.remove(),I=null),"start"===K.action&&(I=Z.disableDisplay()),j&&j(K)});return{remove(){(0,l.pC)(I)&&I.remove(),T.remove()}}}},50916:(te,X,n)=>{n.d(X,{r:()=>c});var l=n(17626),O=n(26584),S=n(62208),W=n(32917),Z=n(77712),T=(n(90912),n(85931),n(76898)),K=n(41632),y=n(61779);const c=f=>{let E=class extends f{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const C=this.tileInfo.lods;return this.levelRangeFromScaleRange(C[0].scale,C[C.length-1].scale)}get displayLevelRange(){const C=this.tileInfo.lods,_=this.levelRangeFromScaleRange(this.layer.minScale||C[0].scale,this.layer.maxScale||C[C.length-1].scale);return this.layer.maxScale&&_.maxLevel++,_}getTileUrl(C,u,A){return this.layer.getTileUrl(C,u,A)}_addTilingSchemeMatchPromise(){if((0,S.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new O.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const C=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,S.pC)(C))return this.addResolvingPromise(Promise.reject(C));const u=(0,W.N1)(()=>{var A,_;return null==(_=null==(A=this.view)?void 0:A.basemapTerrain)?void 0:_.tilingSchemeLocked}).then(()=>{const _=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(_)throw _});this.addResolvingPromise(u)}_getTileInfoSupportError(C,u){const A=(0,y.er)(C,u,this.view.spatialReference,this.view.state.viewingMode);if(A){const _={layer:this.layer,error:A};let m;switch(A.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":m=new O.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",_);break;default:m=new O.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",_)}return m}return null}_getTileInfoCompatibilityError(C,u){return(0,S.Wi)(C)||!u.compatibleWith(C)?new O.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface"):null}levelRangeFromScaleRange(C,u){const A={minLevel:0,maxLevel:1/0},_=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!_)return A;const m=_.levels[0],g=M=>{const L=Math.log(m.scale/M)/Math.LN2;return.5-Math.abs(.5-L%1)<1e-9?Math.round(L):Math.ceil(L)};return null!=C&&C>0&&(A.minLevel=Math.max(0,g(C))),null!=u&&u>0&&(A.maxLevel=Math.max(0,g(u))),A}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,l._)([(0,Z.Cb)({readOnly:!0})],E.prototype,"imageFormatIsOpaque",null),(0,l._)([(0,Z.Cb)({readOnly:!0})],E.prototype,"updating",void 0),(0,l._)([(0,Z.Cb)(K.q)],E.prototype,"updatingProgress",void 0),(0,l._)([(0,Z.Cb)(K.V)],E.prototype,"updatingProgressValue",void 0),(0,l._)([(0,Z.Cb)()],E.prototype,"fullExtent",null),(0,l._)([(0,Z.Cb)({readOnly:!0})],E.prototype,"isOpaque",null),(0,l._)([(0,Z.Cb)({readOnly:!0})],E.prototype,"dataLevelRange",null),(0,l._)([(0,Z.Cb)({readOnly:!0})],E.prototype,"displayLevelRange",null),(0,l._)([(0,Z.Cb)()],E.prototype,"layer",void 0),(0,l._)([(0,Z.Cb)()],E.prototype,"tileInfo",void 0),E=(0,l._)([(0,T.j)("esri.views.3d.layers.TiledLayerView3D")],E),E}},32400:(te,X,n)=>{n.d(X,{D:()=>w});var l=n(15861),O=n(17626),S=n(88879),W=n(46160),Z=n(80542),j=n(54024),I=n(62208),T=n(10699),K=n(32917),y=n(77712),E=(n(90912),n(85931),n(76898)),C=n(84682),u=n(44917),A=n(84786),_=n(39256),m=n(96854),g=n(62600),M=n(80960),L=n(8333),h=n(94991),x=n(83518),v=n(14752),B=n(67873),P=n(67225),b=n(42743),z=n(23147);let w=class extends Z.r{constructor(R){super(R),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=g.Lw.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null}initialize(){const{layer:R}=this,D="effectiveScaleRange"in R?R:null,p=this.scaleVisibilityEnabled&&(0,I.pC)(D),V=new L.w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:z.j.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(U,F)=>new h.Z({graphicsCoreOwner:this,graphicsCore:U,queryGraphicUIDsInExtent:F,elevationProvider:this.view.elevationProvider}),scaleVisibility:p?(U,F)=>new B.Z({graphicsCoreOwner:this,layer:D,queryGraphicUIDsInExtent:F,graphicsCore:U,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:U=>new v.d(U)}});if(this._set("graphicsCore",V),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new x.Z({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const U=this.owner;this.updatingHandles.add(()=>U.fullOpacity,()=>this.graphicsCore.opacityChange())}if("elevationInfo"in R){const U=R;this.updatingHandles.add(()=>U.elevationInfo,(F,G)=>{(0,C.Hg)(F,G)&&this.updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})}this._set("initializePromise",this._initializeAsync()),this.updatingHandles.addPromise(this.initializePromise)}_initializeAsync(){var R=this;return(0,l.Z)(function*(){try{yield R.graphicsCore.initializePromise}catch(D){if((0,T.D_)(D))return;throw D}R.destroyed||(R.handles.add((0,K.YP)(()=>R.view.clippingArea,()=>R._updateClippingExtent(),K.Z_)),R._updateClippingExtent(),R._setupSuspendResumeExtent(),R.graphicsCore.startCreateGraphics())})()}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("frustumVisibility",(0,I.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,I.SC)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){var R;return null==(R=this.graphicsCore)?void 0:R.scaleVisibility}get elevationAlignment(){var R;return null==(R=this.graphicsCore)?void 0:R.elevationAlignment}get objectStates(){var R;return null==(R=this.graphicsCore)?void 0:R.objectStates}get scaleVisibilitySuspended(){return!(!(0,I.pC)(this.scaleVisibility)||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return(0,I.pC)(this.frustumVisibility)&&this.frustumVisibility.suspended}get suspended(){var R;return null!=(R=this.owner.suspended)&&R}get updating(){var R;return!!((null==(R=this.graphicsCore)?void 0:R.updating)||(0,I.pC)(this.scaleVisibility)&&this.scaleVisibility.updating||(0,I.pC)(this.frustumVisibility)&&this.frustumVisibility.updating||this.updatingHandles.updating)}get graphics3DGraphics(){var R;return null==(R=this.graphicsCore)?void 0:R.graphics3DGraphics}get graphics3DGraphicsByObjectID(){var R;return null==(R=this.graphicsCore)?void 0:R.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){var R;return null!=(R=this.owner.fullOpacity)?R:1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(R){this.graphicsCore.notifyGraphicGeometryChanged(R)}notifyGraphicVisibilityChanged(R){this.graphicsCore.notifyGraphicVisibilityChanged(R)}getRenderingInfo(R,D,p){const V=(0,_.Kb)(R,{renderer:D,arcade:p});if((0,I.pC)(V)&&V.color){const U=V.color;U[0]=U[0]/255,U[1]=U[1]/255,U[2]=U[2]/255}return V}getRenderingInfoAsync(R,D,p,V){return(0,_.xn)(R,_e({renderer:D,arcade:p},V))}getHit(R){if(this.owner.loadedGraphics){const D=this.owner.loadedGraphics.find(p=>p.uid===R);if(D){const V=(0,A.mW)(D,this.layer instanceof u.Z?this.layer:null);return{type:"graphic",graphic:V,layer:V.layer}}}return null}whenGraphicBounds(R,D){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(R,D):Promise.reject()}computeAttachmentOrigin(R,D){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(R,D):null}getSymbolLayerSize(R,D){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(R,D):null}maskOccludee(R){const{set:D,handle:p}=this.objectStates.acquireSet(b.V_.MaskOccludee,null);return this.objectStates.setUid(D,R.uid),p}highlight(R){if(R instanceof m.Z)return Y;if("number"==typeof R)return this.highlight([R]);if(R instanceof S.Z)return this.highlight([R]);if(R instanceof W.Z&&(R=R.toArray()),Array.isArray(R)&&R.length>0){if(R[0]instanceof S.Z){const D=R.map(U=>U.uid),{set:p,handle:V}=this.objectStates.acquireSet(b.V_.Highlight,null);return this.objectStates.setUids(p,D),V}if("number"==typeof R[0]){const D=R,{set:p,handle:V}=this.objectStates.acquireSet(b.V_.Highlight,null);return this.objectStates.setObjectIds(p,D),V}}return Y}_setupSuspendResumeExtent(){const{scaleVisibility:R,frustumVisibility:D}=this;if((0,I.Wi)(R)&&(0,I.Wi)(D))return;const p=({computedExtent:V,extentPadding:U})=>{this._suspendResumeExtent=(0,P.Go)(V,this._suspendResumeExtent,M.Z,U),(0,I.pC)(R)&&R.setExtent(this._suspendResumeExtent),(0,I.pC)(D)&&D.setExtent(this._suspendResumeExtent)};this.handles.add((0,K.YP)(()=>{var V,U;return{computedExtent:null==(V=this.graphicsCore)?void 0:V.computedExtent,extentPadding:null==(U=this.graphicsCore)?void 0:U.extentPadding}},V=>p(V),K.tX))}_updateClippingExtent(){this.graphicsCore.setClippingExtent(this.view.clippingArea,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,O._)([(0,y.Cb)()],w.prototype,"type",void 0),(0,O._)([(0,y.Cb)({constructOnly:!0})],w.prototype,"owner",void 0),(0,O._)([(0,y.Cb)()],w.prototype,"layer",null),(0,O._)([(0,y.Cb)()],w.prototype,"view",null),(0,O._)([(0,y.Cb)({constructOnly:!0})],w.prototype,"graphicsCore",void 0),(0,O._)([(0,y.Cb)()],w.prototype,"scaleVisibility",null),(0,O._)([(0,y.Cb)({constructOnly:!0})],w.prototype,"frustumVisibility",void 0),(0,O._)([(0,y.Cb)()],w.prototype,"elevationAlignment",null),(0,O._)([(0,y.Cb)()],w.prototype,"objectStates",null),(0,O._)([(0,y.Cb)()],w.prototype,"scaleVisibilitySuspended",null),(0,O._)([(0,y.Cb)({readOnly:!0})],w.prototype,"frustumVisibilitySuspended",null),(0,O._)([(0,y.Cb)()],w.prototype,"suspended",null),(0,O._)([(0,y.Cb)({readOnly:!0})],w.prototype,"updating",null),(0,O._)([(0,y.Cb)()],w.prototype,"loadedGraphics",null),(0,O._)([(0,y.Cb)()],w.prototype,"fullOpacity",null),(0,O._)([(0,y.Cb)()],w.prototype,"slicePlaneEnabled",null),(0,O._)([(0,y.Cb)()],w.prototype,"drapeSourceType",void 0),(0,O._)([(0,y.Cb)()],w.prototype,"updatePolicy",null),(0,O._)([(0,y.Cb)({constructOnly:!0})],w.prototype,"scaleVisibilityEnabled",void 0),(0,O._)([(0,y.Cb)({constructOnly:!0})],w.prototype,"frustumVisibilityEnabled",void 0),(0,O._)([(0,y.Cb)()],w.prototype,"initializePromise",void 0),w=(0,O._)([(0,E.j)("esri.views.3d.layers.graphics.GraphicsProcessor")],w);const Y=(0,j.kB)()},3493:(te,X,n)=>{n.d(X,{Z6:()=>T,ZS:()=>I,sw:()=>j});var l=n(58817),O=n(62208),S=n(97445);const W={setAttribute(){},rollback(){},commit(){}};var Z,u;function j(u,A){const _=A.attributes[u.objectIdField],m=u.sessions.get(_);if(m)return m;const g=(0,l.d9)(A.attributes),M=new Set;if(null==_)return W;const L=u.i3sOverrides.createInteractiveEditSession(_),h=new Map;let v=Z.EDITING;const B={setAttribute(P,b){if(v!==Z.EDITING)return;const z=u.fieldsIndex.get(P);if((0,O.Wi)(z))return;const w=u.attributeStorageInfo.findIndex(D=>D.name===z.name);if(w<0)return;L.set(w,b);const Y=u.attributeStorageInfo[w];let R=!1;M.add(P),u.forEachNode((D,p)=>{const V=((P,b)=>{const z=h.get(P);if(null==z){const w=b.indexOf(_);return h.set(P,w),w}return z})(D,p);if(-1===V)return;const U=u.getAttributeData(D.index);if(U){const F=U[Y.name];F&&(F[V]=b,u.setAttributeData(D.index,U,A),R=!0)}}),R&&u.clearMemCache()},rollback(){if(v===Z.EDITING){for(const P of M)this.setAttribute(P,g[P]);L.rollback(),v=Z.ROLLED_BACK,u.sessions.delete(_)}},commit(){v===Z.EDITING&&(L.commit(),v=Z.COMMITTED,u.sessions.delete(_))}};return u.sessions.set(_,B),B}function I(u,A){const _=[...A.addedFeatures,...A.updatedFeatures,...A.deletedFeatures];for(const m of _)m.objectId&&u.i3sOverrides.updateGeometry(m.objectId)}function T(u,A){const _=function K(u,A){const _=A.edits.updateFeatures;if(!_||0===_.length)return new C;const m=function f(u){const A=new Set;if(!u.updatedFeatures)return A;for(const _ of u.updatedFeatures)null!=_.objectId&&null==_.error&&A.add(_.objectId);return A}(A),g=new C,M=new Map;for(let v=0;v<u.attributeStorageInfo.length;v++)M.set(u.attributeStorageInfo[v].name,v);const L=u.fieldsIndex,h=u.objectIdField,x=_.filter(v=>{const B=(0,S.g)(L,v.attributes,h);return m.has(B)});return u.forEachNode((v,B)=>{const P=new Set(B);for(const b of x){const z=(0,S.g)(L,b.attributes,h);if(!P.has(z))continue;const w=B.indexOf(z);for(const Y in b.attributes){const R=u.fieldsIndex.normalizeFieldName(Y);y(g,v.index,R).push({featureIndex:w,featureId:z,value:b.attributes[Y]})}}}),g}(u,A);if(0===_.size)return;const m=new Map;for(let M=0;M<u.attributeStorageInfo.length;M++)m.set(u.attributeStorageInfo[M].name,M);let g=!1;_.forEach((M,L)=>{const h=u.getAttributeData(L);let x=!1;M.forEach((v,B)=>{const P=(0,O.pC)(h)?h[B]:null,b=m.get(B);for(const{featureIndex:z,value:w,featureId:Y}of v)P&&(P[z]=w,x=!0,g=!0),u.i3sOverrides.updateAttributeValue(Y,b,w)}),x&&u.setAttributeData(L,h,null)}),g&&u.clearMemCache()}function y(u,A,_){const m=function c(u,A){const _=u.get(A);if(_)return _;const m=new E;return u.set(A,m),m}(u,A),g=null!=_&&m.get(_);if(g)return g;const M=new Array;return m.set(_,M),M}(u=Z||(Z={}))[u.EDITING=0]="EDITING",u[u.ROLLED_BACK=1]="ROLLED_BACK",u[u.COMMITTED=2]="COMMITTED";const E=Map,C=Map},40465:(te,X,n)=>{n.d(X,{i:()=>f});var l=n(15861),O=n(17626),S=n(26584),W=n(62208),K=(n(63290),n(90912),n(85931),n(8314),n(76898)),y=n(36630),c=n(10023);const f=E=>{let C=class extends E{_validateFetchPopupFeatures(u){const{layer:A}=this,{popupEnabled:_}=A;if(!_)throw new S.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:A});if(!(0,c.V)(A,u))throw new S.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:A})}prepareFetchPopupFeatures(u){return(0,l.Z)(function*(){})()}fetchPopupFeatures(u,A){var _=this;return(0,l.Z)(function*(){_._validateFetchPopupFeatures(A);const m=(0,W.pC)(A)?A.clientGraphics:null;if(!m||0===m.length)return[];const g="scene"===_.layer.type&&(0,W.pC)(_.layer.associatedLayer)?_.layer.associatedLayer:_.layer;let M=[];"fieldsIndex"in _.layer&&(M=(0,y.Lk)(_.layer.fieldsIndex,yield(0,c.e)(g,(0,c.V)(_.layer,A)))),yield _.prepareFetchPopupFeatures(M);const L=new Set,h=[],x=[];for(const v of m)(0,y.Gm)(M,v,L)?x.push(v):h.push(v);return 0===x.length?h:_.whenGraphicAttributes(x,[...L]).catch(()=>x).then(v=>h.concat(v))})()}};return C=(0,O._)([(0,K.j)("esri.views.3d.layers.support.PopupSceneLayerView")],C),C}},57610:(te,X,n)=>{n.d(X,{K:()=>g});var l=n(15861),O=n(17626),S=n(14517),W=n(63290),Z=n(36082),j=n(77712),I=n(76898),T=n(819);const K=h=>{let x=class extends h{constructor(){super(...arguments),this._numUpdating=0,this._asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(v,B){return function c(h,x){const B=()=>{if(!b||z)return x();b.clear(),z=!0;const w=(0,Z.LJ)(b,x);return z=!1,w};let b=new T.M(()=>{b&&!z&&h(B)}),z=!1;return h(B),{remove:()=>{b&&(b.destroy(),b=null)}}}(P=>this._updateAsync(v,P),B)}_updateAsync(v,B){var P=this;return(0,l.Z)(function*(){if(!P._startAsyncUpdate(v)){try{const b=yield B();P._set(v,b)}catch(b){W.Z.getLogger(P.declaredClass).warn(`Async update of "${String(v)}" failed. Async update functions should not throw exceptions.`)}P._endAsyncUpdate(v)&&P._updateAsync(v,B)}})()}_startAsyncUpdate(v){var P;const B=null!=(P=this._asyncUpdateState.get(v))?P:y.None;return B&y.Updating?(this._asyncUpdateState.set(v,B|y.Invalidated),!0):(++this._numUpdating,this._asyncUpdateState.set(v,B|y.Updating),!1)}_endAsyncUpdate(v){var P;--this._numUpdating;const B=(null!=(P=this._asyncUpdateState.get(v))?P:y.None)&~y.Updating;return B&y.Invalidated?(this._asyncUpdateState.set(v,B&~y.Invalidated),!0):(this._asyncUpdateState.set(v,B),!1)}};return(0,O._)([(0,j.Cb)({readOnly:!0})],x.prototype,"updating",null),(0,O._)([(0,j.Cb)()],x.prototype,"_numUpdating",void 0),x=(0,O._)([(0,I.j)("esri.core.AsyncUpdate")],x),x};var y,h;(h=y||(y={}))[h.None=0]="None",h[h.Updating=1]="Updating",h[h.Invalidated=2]="Invalidated";let f=class extends(K(S.Z)){};f=(0,O._)([(0,I.j)("esri.core.AsyncUpdate")],f);var E=n(80542),C=n(62208),_=(n(90912),n(85931),n(36630));const m="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let g=class extends(K(E.r)){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:h},definitionExpressionFields:x},rendererFields:v,labelingFields:B,viewFilterFields:P}=this;return(0,_.Q0)(h,[...(0,C.Pt)(x,[]),...(0,C.Pt)(v,[]),...(0,C.Pt)(B,[]),...(0,C.Pt)(P,[])])}constructor(h){super(h)}initialize(){var h=this;this.handles.add([this.autoUpdateAsync("rendererFields",(0,l.Z)(function*(){const{fieldsIndex:x,renderer:v}=h.layer;return v?M(B=>v.collectRequiredFields(B,x)):null})),this.autoUpdateAsync("labelingFields",(0,l.Z)(function*(){const{layer:x}=h;return x.labelsVisible?M(v=>(0,_.Mu)(v,x)):null})),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:x,filter:v}=this.layerView;return M(B=>(0,_.Ll)(B,x,v))})])}};function M(h){return L.apply(this,arguments)}function L(){return L=(0,l.Z)(function*(h){const x=new Set;try{return yield h(x),Array.from(x).sort()}catch(v){return W.Z.getLogger(m).error(v),null}}),L.apply(this,arguments)}(0,O._)([(0,j.Cb)()],g.prototype,"layerView",void 0),(0,O._)([(0,j.Cb)()],g.prototype,"layer",null),(0,O._)([(0,j.Cb)()],g.prototype,"requiredFields",null),(0,O._)([(0,j.Cb)()],g.prototype,"rendererFields",void 0),(0,O._)([(0,j.Cb)()],g.prototype,"labelingFields",void 0),(0,O._)([(0,j.Cb)()],g.prototype,"viewFilterFields",void 0),g=(0,O._)([(0,I.j)(m)],g)},67966:(te,X,n)=>{n.d(X,{v:()=>O});var l=n(36630);function O(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:S,layer:{fieldsIndex:W},requiredFields:Z}=this;return(0,l.Q0)(W,S.outFields?[...(0,l.Lk)(W,S.outFields),...Z]:Z)}}}}},95925:(te,X,n)=>{n.d(X,{Er:()=>j,Lp:()=>I,Yq:()=>y});var l=n(15861),O=n(59213),S=n(62208),W=n(10699),Z=n(32917);function j(c,f){c.interactive=!0;const{tool:E,view:C}=c;C.activeTool=E;let u=(0,W.fu)(f,()=>{C.activeTool===E&&(C.activeTool=null)});return(0,O.vr)(function(){var A=(0,l.Z)(function*(_){yield(0,Z.N1)(()=>(0,S.Wi)(E)||!E.active,_),u=(0,S.hw)(u)});return function(_){return A.apply(this,arguments)}}(),f)}function I(c,f){return(0,Z.YP)(()=>c.interactive,()=>function T(c,f){c.interactive?function K(c,f){y(c);const{view:E,analysis:C}=c,u=new f({view:E,analysis:C,analysisViewData:c});c.tool=u,E.tools.add(u)}(c,f):y(c)}(c,f),Z.tX)}function y(c){const{view:f,tool:E}=c;(0,S.Wi)(E)||(f.tools.remove(E),c.tool=null)}},9119:(te,X,n)=>{n.r(X),n.d(X,{default:()=>D});var l=n(17626),S=(n(20383),n(61885)),W=n(72392),Z=n(58817),j=n(62208),I=n(32917),T=n(77712),y=(n(90912),n(76898)),c=n(51470),f=n(36073),E=n(49621),C=n(10228);class u{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-click"}}class A{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-double-click"}}class _{constructor(V,U,F,G,J,k,ee,q,Q,N){this.graphic=V,this.allGraphics=U,this.index=F,this.x=G,this.y=J,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class m{constructor(V,U,F,G,J,k,ee,q,Q,N){this.graphic=V,this.allGraphics=U,this.index=F,this.x=G,this.y=J,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class g{constructor(V,U,F,G,J,k,ee,q,Q,N){this.graphic=V,this.allGraphics=U,this.index=F,this.x=G,this.y=J,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class M{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-pointer-over"}}class L{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-pointer-out"}}class h{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-pointer-down"}}class x{constructor(V,U,F,G,J){this.graphic=V,this.index=U,this.x=F,this.y=G,this.viewEvent=J,this.type="graphic-pointer-up"}}var v=n(18547),B=n(90585),P=n(41900),b=n(57213),z=n(52068),w=n(88493);const Y="indicator-symbols";let R=class extends S.Z.EventedAccessor{constructor(p){super(p),this._activeGraphic=null,this._dragEvent=null,this._handles=new W.Z,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._viewHandles=new W.Z,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.indicatorsEnabled=!1,this.layer=new c.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.view=null}initialize(){(0,C.p)(this.view,this.layer),this._highlightHelper=new E.Z({view:this.view}),this.refresh(),this._handles.add([(0,I.YP)(()=>{var p;return[this.graphics,null==(p=this.graphics)?void 0:p.length]},()=>this.refresh()),(0,I.gx)(()=>{var p;return null==(p=this.view)?void 0:p.ready},()=>{this._viewHandles.add([this.view.on("immediate-click",p=>this._clickHandler(p),v.f.TOOL),this.view.on("double-click",p=>this._doubleClickHandler(p),v.f.TOOL),this.view.on("pointer-down",p=>this._pointerDownHandler(p),v.f.TOOL),this.view.on("pointer-move",p=>this._pointerMoveHandler(p),v.f.TOOL),this.view.on("pointer-up",p=>this._pointerUpHandler(p),v.f.TOOL),this.view.on("drag",p=>this._dragHandler(p),v.f.TOOL),this.view.on("key-down",p=>this._keyDownHandler(p),v.f.TOOL)])},{once:!0,initial:!0}),(0,I.YP)(()=>this.view,p=>{this._highlightHelper.removeAll(),this._highlightHelper.view=p})])}destroy(){var p;this._removeIndicators(),null==(p=this.view.map)||p.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach(V=>V.destroy()),this._manipulators=null,this._handles=(0,j.SC)(this._handles),this._viewHandles=(0,j.SC)(this._viewHandles)}set highlightsEnabled(p){var V,U;null==(V=this._highlightHelper)||V.removeAll(),this._set("highlightsEnabled",p),p&&(null==(U=this._highlightHelper)||U.add(this.graphics))}get state(){const p=!!this.get("view.ready"),V=!!this.get("graphics.length");return p&&V?this._activeGraphic?"moving":"active":p?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(p,V){const U=this.graphics[p];U&&(U.set("geometry",V),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(p){const V=this._findTargetGraphic((0,P.vT)(p));if(V){const U=new u(V,this.graphics.indexOf(V),p.x,p.y,p);this.emit("graphic-click",U),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(U)}}_doubleClickHandler(p){const V=this._findTargetGraphic((0,P.vT)(p));if(V){const U=new A(V,this.graphics.indexOf(V),p.x,p.y,p);this.emit("graphic-double-click",U),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(U)}}_pointerDownHandler(p){const V=this._findTargetGraphic((0,P.vT)(p));if(V){this._activeGraphic=V;const{x:U,y:F}=p,G=new h(V,this.graphics.indexOf(V),U,F,p);this.emit("graphic-pointer-down",G),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(G)}else this._activeGraphic=null}_pointerUpHandler(p){if(this._activeGraphic){const{x:V,y:U}=p,F=this.graphics.indexOf(this._activeGraphic),G=new x(this._activeGraphic,F,V,U,p);this.emit("graphic-pointer-up",G),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(G)}}_pointerMoveHandler(p){if(this._dragEvent)return;const V=this._findTargetGraphic((0,P.vT)(p));if(V){const{x:U,y:F}=p;if(this._hoverGraphic){if(this._hoverGraphic===V)return;const k=this.graphics.indexOf(this._hoverGraphic),ee=new L(this.graphics[k],k,U,F,p);this._hoverGraphic=null,this.emit("graphic-pointer-out",ee),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(ee)}const G=this.graphics.indexOf(V),J=new M(V,G,U,F,p);return this._hoverGraphic=V,this.emit("graphic-pointer-over",J),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(J))}if(this._hoverGraphic){const{x:U,y:F}=p,G=this.graphics.indexOf(this._hoverGraphic),J=new L(this.graphics[G],G,U,F,p);this._hoverGraphic=null,this.emit("graphic-pointer-out",J),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(J)}}_dragHandler(p){if("start"!==p.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;"start"===p.action&&this._removeIndicators(),p.stopPropagation();const{action:V,x:U,y:F}=p,G=this.graphics.indexOf(this._activeGraphic),J=this._dragEvent?U-this._dragEvent.x:0,k=this._dragEvent?F-this._dragEvent.y:0,ee=U-p.origin.x,q=F-p.origin.y,Q="start"===V?this._activeGraphic.geometry:this._initialDragGeometry,N=(0,f.e7)(Q,ee,q,this.view);if(this._activeGraphic.geometry=N,this.enableMoveAllGraphics&&this.graphics.forEach(H=>{H!==this._activeGraphic&&(H.geometry=(0,f.e7)(H.geometry,J,k,this.view))}),this._dragEvent=p,"start"===V){this._initialDragGeometry=(0,Z.d9)(Q);const H=new _(this._activeGraphic,this.graphics,G,U,F,J,k,ee,q,p);this.emit("graphic-move-start",H),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(H),H.defaultPrevented&&this._activeGraphic.set("geometry",Q)}else if("update"===V){const H=new m(this._activeGraphic,this.graphics,G,U,F,J,k,ee,q,p);this.emit("graphic-move",H),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(H),H.defaultPrevented&&(this._activeGraphic.geometry=Q)}else{const H=new g(this._activeGraphic,this.graphics,G,U,F,J,k,ee,q,p);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",H),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(H),H.defaultPrevented&&(this.graphics[G].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(p){"a"!==p.key&&"d"!==p.key&&"n"!==p.key||"moving"!==this.state||p.stopPropagation()}_findTargetGraphic(p){const V=this.view.toMap(p);let U=null,F=Number.MAX_VALUE;this._syncLayerViews();const G=this._layerViews.flatMap(J=>"graphicsViews"in J?Array.from(J.graphicsViews(),k=>k.hitTest(V)).flat():J.graphicsView.hitTest(V)).filter(J=>this.graphics.includes(J));return G.length?G[0]:(this._manipulators.forEach(J=>{const k=J.intersectionDistance(p);(0,j.pC)(k)&&k<F&&(F=k,U=J.graphic)}),U)}_syncLayerViews(){this._layerViews=[];const p=new Set;for(const V of this.graphics){const U=(0,C.j)(this.view,V.layer);U&&p.add(U)}this._layerViews=[...p]}_setUpManipulators(){const{graphics:p,view:V}=this;this._manipulators.forEach(U=>U.destroy()),this._manipulators=null!=p&&p.length?p.map(U=>new B.L({graphic:U,view:V})):[]}_setUpHighlights(){this.highlightsEnabled&&this._highlightHelper.add(this.graphics)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const p of this.graphics){const V=p.clone();V.symbol=this._getSymbolForIndicator(p),this._indicators.push(V),this._handles.add((0,I.YP)(()=>p.symbol,()=>this._setUpIndicators()),Y)}this.layer.addMany(this._indicators)}}_removeIndicators(){this._handles.remove(Y),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach(p=>p.destroy()),this._indicators=[])}_getSymbolForIndicator(p){if((0,j.Wi)(p.symbol))return null;switch(p.symbol.type){case"cim":return new b.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:U,yoffset:F,height:G,width:J}=p.symbol,k=G===J?J:Math.max(G,J);return new b.Z({xoffset:U,yoffset:F,size:k,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:U,yoffset:F,size:G,style:J}=p.symbol;return new b.Z({xoffset:U,yoffset:F,style:"circle"===J?"circle":"square",size:G+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new w.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new z.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:U,yoffset:F}=p.symbol;return new b.Z({xoffset:U,yoffset:F,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}};(0,l._)([(0,T.Cb)()],R.prototype,"_activeGraphic",void 0),(0,l._)([(0,T.Cb)({readOnly:!0})],R.prototype,"type",void 0),(0,l._)([(0,T.Cb)()],R.prototype,"callbacks",void 0),(0,l._)([(0,T.Cb)()],R.prototype,"enableMoveAllGraphics",void 0),(0,l._)([(0,T.Cb)()],R.prototype,"graphics",void 0),(0,l._)([(0,T.Cb)({value:!1})],R.prototype,"highlightsEnabled",null),(0,l._)([(0,T.Cb)()],R.prototype,"indicatorsEnabled",void 0),(0,l._)([(0,T.Cb)()],R.prototype,"layer",void 0),(0,l._)([(0,T.Cb)({readOnly:!0})],R.prototype,"state",null),(0,l._)([(0,T.Cb)()],R.prototype,"view",void 0),R=(0,l._)([(0,y.j)("esri.views.draw.support.GraphicMover")],R);const D=R},49621:(te,X,n)=>{n.d(X,{Z:()=>y});var l=n(17626),O=n(80542),S=n(77712),j=(n(90912),n(85931),n(76898)),I=n(10228),T=n(93579);let K=class extends O.r{constructor(c){super(c),this.view=null}get count(){return this.handles.size}add(c){const f=Array.isArray(c)?c:[c];null!=c&&f&&f.length&&f.forEach(E=>this._highlight(E))}remove(c){const f=Array.isArray(c)?c:[c];null!=c&&f&&f.length&&f.forEach(E=>this._unhighlight(E))}removeAll(){this.handles.removeAll()}_highlight(c){const f=(0,I.j)(this.view,c.layer);(0,T.tl)(f)&&this.handles.add(f.highlight(c),`feature-${c.getObjectId()}`)}_unhighlight(c){c&&this.handles.remove(`feature-${c.getObjectId()}`)}};(0,l._)([(0,S.Cb)({readOnly:!0})],K.prototype,"count",null),(0,l._)([(0,S.Cb)()],K.prototype,"view",void 0),(0,l._)([(0,S.Cb)()],K.prototype,"add",null),K=(0,l._)([(0,j.j)("esri.views.draw.support.HighlightHelper")],K);const y=K},22712:(te,X,n)=>{n.d(X,{f:()=>T});var l=n(17626),O=n(32917),S=n(77712),j=(n(90912),n(85931),n(76898)),I=n(22944);let T=class extends I.m{constructor(K){super(K)}initialize(){this.addHandles((0,O.YP)(()=>this.analysisViewData.visible,K=>this.visible=K,O.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};(0,l._)([(0,S.Cb)({constructOnly:!0})],T.prototype,"analysis",void 0),(0,l._)([(0,S.Cb)()],T.prototype,"analysisViewData",void 0),T=(0,l._)([(0,j.j)("esri.views.interactive.AnalysisToolBase")],T)},70211:(te,X,n)=>{n.d(X,{x:()=>W});var l=n(33351),O=n(97979),S=n(19038);class W extends O.a{constructor(j){super(fe(_e({},j),{constraint:new l.Hk(j.targetPoint)}))}get hints(){return[new S.n(this.targetPoint,this.isDraped,this.domain)]}}},9218:(te,X,n)=>{n.d(X,{X:()=>T,g:()=>K});var l=n(62208),O=n(28093),S=n(59550),W=n(61430),Z=n(75897),j=n(70211);function I({x:y,y:c,z:f}){return(0,S.uc)((0,O.f)(y,c,null!=f?f:0))}function T(y,c){switch(y.type){case"edge":return y.draped?new W.k({edgeStart:I(y.start),edgeEnd:I(y.end),targetPoint:I(y.target),objectId:y.objectId,getGroundElevation:c}):new Z.L({edgeStart:I(y.start),edgeEnd:I(y.end),targetPoint:I(y.target),objectId:y.objectId,isDraped:!1});case"vertex":return new j.x({targetPoint:I(y.target),objectId:y.objectId,isDraped:!1})}}function K(y){return(0,l.pC)(y)&&"3d"===y.type?(c,f,E)=>y.elevationProvider.getElevation(c,f,null!=E?E:0,y.spatialReference,"ground"):()=>null}},17936:(te,X,n)=>{n.d(X,{p:()=>K});var l=n(15861),S=(n(8314),n(93961)),W=n(88159),Z=n(62208),j=n(10699),I=n(16730),T=n(29505);function K(A=!1,_){if(A){const{elevationInfo:m,alignPointsInFeatures:g,spatialReference:M}=_;return new f(m,g,M)}return new y}class y{alignCandidates(_,m){return(0,l.Z)(function*(){return _})()}notifyElevationSourceChange(){}}class f{constructor(_,m,g){this._elevationInfo=_,this._alignPointsInFeatures=m,this.spatialReference=g,this._alignmentsCache=new S.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,I._R)(g)}alignCandidates(_,m){var g=this;return(0,l.Z)(function*(){const M=g._elevationInfo;return(0,Z.pC)(M)&&"absolute-height"===M.mode&&!M.featureExpressionInfo?(g._alignAbsoluteElevationCandidates(_,M),_):g._alignComputedElevationCandidates(_,m)})()}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(_,m){const{offset:g,unit:M}=m;if((0,Z.Wi)(g))return;const L=g*((0,T.Z7)(null!=M?M:"meters")/this._metersPerVerticalUnit);for(const h of _)switch(h.type){case"edge":h.start.z+=L,h.end.z+=L;continue;case"vertex":h.target.z+=L;continue}}_alignComputedElevationCandidates(_,m){var g=this;return(0,l.Z)(function*(){const M=new Map;for(const z of _)(0,W.s1)(M,z.objectId,u).push(z);const[L,h,x]=g._prepareQuery(M),v=yield g._alignPointsInFeatures(L,m);if((0,j.k_)(m),x!==g._cacheVersion)return g._alignComputedElevationCandidates(_,m);g._applyCacheAndResponse(L,v,h);const{drapedObjectIds:B,failedObjectIds:P}=v,b=[];for(const z of _){const{objectId:w}=z;B.has(w)&&"edge"===z.type&&(z.draped=!0),P.has(w)||b.push(z)}return b})()}_prepareQuery(_){const m=[],g=[];for(const[M,L]of _){const h=[];for(const x of L)this._addToQueriesOrCachedResult(M,x.target,h,g),"edge"===x.type&&(this._addToQueriesOrCachedResult(M,x.start,h,g),this._addToQueriesOrCachedResult(M,x.end,h,g));0!==h.length&&m.push({objectId:M,points:h})}return[m,g,this._cacheVersion]}_addToQueriesOrCachedResult(_,m,g,M){const L=C(_,m),h=this._alignmentsCache.get(L);(0,Z.pC)(h)?M.push(new E(m,h)):g.push(m)}_applyCacheAndResponse(_,{elevations:m,drapedObjectIds:g,failedObjectIds:M},L){for(const v of L)v.apply();let h=0;const x=this._alignmentsCache;for(const{objectId:v,points:B}of _){if(M.has(v)){h+=B.length;continue}const P=!g.has(v);for(const b of B){const z=C(v,b),w=m[h++];b.z=w,P&&x.put(z,w,1)}}}}class E{constructor(_,m){this.point=_,this.z=m}apply(){this.point.z=this.z}}function C(A,{x:_,y:m,z:g}){return`${A}-${_}-${m}-${null!=g?g:0}}`}function u(){return[]}},1520:(te,X,n)=>{n.d(X,{c:()=>Z}),n(8314);class O{filter(f,E){return E}notifyElevationSourceChange(){}}class S{filter(f,E){const{point:C,distance:u}=f,{z:A}=C;if(null==A||0===E.length)return E;const _=function K(c){return"number"==typeof c?{x:c,y:c,z:c}:c}(u),m=this._updateCandidatesTo3D(E,C,_).filter(W);return m.sort(y),m}_updateCandidatesTo3D(f,E,C){for(const u of f)switch(u.type){case"edge":j(u,E,C);continue;case"vertex":T(u,E,C);continue}return f}}function W(c){return c.distance<=1}function Z(c=!1){return c?new S:new O}function j(c,f,{x:E,y:C,z:u}){const{start:A,end:_,target:m}=c;c.draped||function I(c,f,E,C){const u=C.x-E.x,A=C.y-E.y,_=C.z-E.z,M=Math.min(1,Math.max(0,((f.x-E.x)*u+(f.y-E.y)*A+_*(f.z-E.z))/(u*u+A*A+_*_))),h=E.y+A*M,x=E.z+_*M;c.x=E.x+u*M,c.y=h,c.z=x}(m,f,A,_);const g=(f.x-m.x)/E,M=(f.y-m.y)/C,L=(f.z-m.z)/u;c.distance=Math.sqrt(g*g+M*M+L*L)}function T(c,f,{x:E,y:C,z:u}){const{target:A}=c,_=(f.x-A.x)/E,m=(f.y-A.y)/C,g=(f.z-A.z)/u,M=Math.sqrt(_*_+m*m+g*g);c.distance=M}function y(c,f){return c.distance-f.distance}},83010:(te,X,n)=>{n.d(X,{k:()=>I});var l=n(15861),S=(n(8314),n(58817)),W=n(93961),Z=n(10699),j=n(77275);function I(f=!1,E){return f?new y(E):new T}class T{fetch(){return(0,l.Z)(function*(){return[]})()}notifySymbologyChange(){}}class y{constructor(E){this._getSymbologyCandidates=E,this._candidatesCache=new W.Z(1024),this._cacheVersion=0}fetch(E,C){var u=this;return(0,l.Z)(function*(){if(0===E.length)return[];const A=[],_=[],m=u._candidatesCache;for(const v of E){const B=c(v),P=m.get(B);if(P)for(const b of P)_.push((0,S.d9)(b));else A.push(v),m.put(B,[],1)}if(0===A.length)return _;const g=u._cacheVersion,{candidates:M,sourceCandidateIndices:L}=yield u._getSymbologyCandidates(A,C);if((0,Z.k_)(C),g!==u._cacheVersion)return u.fetch(E,C);const h=[],{length:x}=M;for(let v=0;v<x;++v){const B=M[v],P=c(A[L[v]]),b=m.get(P);b.push(B),m.put(P,b,b.length),h.push((0,S.d9)(B))}return _.concat(h)})()}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function c(f){var E,C,u;switch(f.type){case"vertex":{const{objectId:A,target:_}=f,m=`${A}-vertex-${_.x}-${_.y}-${null!=(E=_.z)?E:0}`;return(0,j.hP)(m).toString()}case"edge":{const{objectId:A,start:_,end:m}=f,g=`${A}-edge-${_.x}-${_.y}-${null!=(C=_.z)?C:0}-to-${m.x}-${m.y}-${null!=(u=m.z)?u:0}`;return(0,j.hP)(g).toString()}default:return""}}},51810:(te,X,n)=>{n.d(X,{c:()=>j,p:()=>I});var l=n(17626),O=n(15572),S=n(77712),W=n(76898),Z=n(62980);let j=class extends Z.h{constructor(T){super(T),this.type="extent-rotate",this.angle=0}};(0,l._)([(0,S.Cb)()],j.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],j.prototype,"angle",void 0),j=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],j);let I=class extends Z.h{constructor(T){super(T),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=O.yP,this.ySize=O.yP}};(0,l._)([(0,S.Cb)()],I.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"xScale",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"yScale",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"xSize",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"ySize",void 0),I=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],I)},31712:(te,X,n)=>{n.d(X,{$E:()=>j,QW:()=>I,c1:()=>c,in:()=>T,j:()=>y,nk:()=>K});var l=n(17626),O=n(15572),S=n(77712),W=n(76898),Z=n(62980);let j=class extends Z.h{constructor(f){super(f),this.type="translate-graphic",this.distance=O.yP}};(0,l._)([(0,S.Cb)()],j.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],j.prototype,"distance",void 0),j=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],j);let I=class extends Z.h{constructor(f){super(f),this.type="translate-graphic-z",this.distance=O.yP}};(0,l._)([(0,S.Cb)()],I.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],I.prototype,"distance",void 0),I=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],I);let T=class extends Z.h{constructor(f){super(f),this.type="translate-graphic-xy",this.distance=O.yP}};(0,l._)([(0,S.Cb)()],T.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],T.prototype,"distance",void 0),T=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],T);let K=class extends Z.h{constructor(f){super(f),this.type="translate-vertex",this.distance=O.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,l._)([(0,S.Cb)()],K.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],K.prototype,"distance",void 0),(0,l._)([(0,S.Cb)()],K.prototype,"elevation",void 0),(0,l._)([(0,S.Cb)()],K.prototype,"area",void 0),(0,l._)([(0,S.Cb)()],K.prototype,"totalLength",void 0),K=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],K);let y=class extends Z.h{constructor(f){super(f),this.type="translate-vertex-z",this.distance=O.yP,this.elevation=null}};(0,l._)([(0,S.Cb)()],y.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],y.prototype,"distance",void 0),(0,l._)([(0,S.Cb)()],y.prototype,"elevation",void 0),y=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],y);let c=class extends Z.h{constructor(f){super(f),this.type="translate-vertex-xy",this.distance=O.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,l._)([(0,S.Cb)()],c.prototype,"type",void 0),(0,l._)([(0,S.Cb)()],c.prototype,"distance",void 0),(0,l._)([(0,S.Cb)()],c.prototype,"elevation",void 0),(0,l._)([(0,S.Cb)()],c.prototype,"area",void 0),(0,l._)([(0,S.Cb)()],c.prototype,"totalLength",void 0),c=(0,l._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],c)},78465:(te,X,n)=>{n.d(X,{Z:()=>A});var l=n(15861),O=n(17626),S=n(63290),W=n(62208),Z=n(76825),j=n(32917),I=n(77712),y=(n(90912),n(85931),n(76898)),c=n(55915),f=n(45611);const E="esri.views.layers.SceneLayerView",C=S.Z.getLogger(E);let u=class extends f.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(_){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return(0,Z.lK)(this._layerFilter)}get _layerFilter(){const _=this.layer.filter;if((0,W.Wi)(_)||_.geometries.length<1)return null;const m=this._geometryEngine;if((0,W.Wi)(m)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return Z.cn;const g=_.geometries.getItemAt(0).spatialReference,M=_.geometries.toArray().map(v=>{try{v=m.simplify(v)}catch(B){return C.warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==v)return null;if(v.spatialReference.equals(g))return v;try{return(0,c.iV)(v,g)}catch(B){return C.warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}}).filter(W.pC).sort((v,B)=>v.extent.xmin-B.extent.xmin),L=new Set,h=new Array,x=new Array;for(let v of M){const B=v.extent.xmin;if(h.length=0,L.forEach(P=>{if(B>=P.extent.xmax)return x.push(P),void L.delete(P);v.extent.ymin<=P.extent.ymax&&v.extent.ymax>=P.extent.ymin&&m.intersects(v,P)&&h.push(P)}),h.length>0){h.push(v);try{v=m.union(h)}catch(P){C.warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}h.pop(),h.forEach(P=>L.delete(P))}L.add(v)}return L.forEach(v=>x.push(v)),x.length>0?{spatialRelationship:_.spatialRelationship,geometries:x}:null}get _filterNeedsProjectionEngine(){const _=this.layer.filter;if((0,W.Wi)(_)||_.geometries.length<=1)return!1;const m=_.geometries.getItemAt(0).spatialReference;return _.geometries.some(({spatialReference:g})=>!g.equals(m)&&!(0,c.Up)(g,m))}get layerFilterUpdating(){return(0,Z.j)(this._layerFilter)}initialize(){var _=this;(0,j.N1)(()=>!this._geometryEngine&&(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,l.Z)(function*(){return _._geometryEngine=yield Promise.all([n.e(4918),n.e(4766)]).then(n.bind(n,44766))})),this._projectionEngineLoaded=(0,c.kR)(),(0,j.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,l.Z)(function*(){yield(0,c.zD)(),_._projectionEngineLoaded=!0}))}highlight(_){throw new Error("Not implemented")}queryFeatures(_,m){throw new Error("Not implemented")}queryObjectIds(_,m){throw new Error("Not implemented")}queryFeatureCount(_,m){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(_,m){throw new Error("Not implemented")}};(0,O._)([(0,I.Cb)()],u.prototype,"layer",void 0),(0,O._)([(0,I.Cb)()],u.prototype,"availableFields",null),(0,O._)([(0,I.Cb)()],u.prototype,"maximumNumberOfFeatures",null),(0,O._)([(0,I.Cb)({readOnly:!0})],u.prototype,"maximumNumberOfFeaturesExceeded",null),(0,O._)([(0,I.Cb)()],u.prototype,"filter",void 0),(0,O._)([(0,I.Cb)({readOnly:!0})],u.prototype,"layerFilter",null),(0,O._)([(0,I.Cb)({readOnly:!0})],u.prototype,"_layerFilter",null),(0,O._)([(0,I.Cb)()],u.prototype,"_geometryEngine",void 0),(0,O._)([(0,I.Cb)()],u.prototype,"_projectionEngineLoaded",void 0),(0,O._)([(0,I.Cb)()],u.prototype,"_filterNeedsProjectionEngine",null),(0,O._)([(0,I.Cb)()],u.prototype,"layerFilterUpdating",null),u=(0,O._)([(0,y.j)(E)],u);const A=u},73187:(te,X,n)=>{n.d(X,{q:()=>A});var l=n(17626),O=n(91558),S=n(88879),W=n(14517),Z=n(21286),j=n(62208),I=n(77712),y=(n(90912),n(85931),n(76898)),c=n(69852),f=n(88493),E=n(35540),C=n(21716);const u=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let A=class extends W.Z{constructor(_){super(_),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=u.map(_=>new f.Z({color:[_[0],_[1],_[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(_){this._enabled!==_&&(this._enabled=_,this.update())}update(){if(!this._enabled)return void this.clear();const m=this.getTiles(),g=new Array,M=new Set(this._labels.keys());m.forEach((h,x)=>{const v=h.lij.toString();M.delete(v);const B=h.lij[0],P=h.geometry;if(this.enablePolygons&&!this._polygons.has(v)){const b=new S.Z({geometry:P,symbol:this._symbols[B%this._symbols.length]});this._polygons.set(v,b),g.push(b)}if(this.enableLabels){const b=(h=>{if((0,j.pC)(h.label))return h.label;let x=h.lij.toString();return(0,j.pC)(h.loadPriority)&&(x+=` (${h.loadPriority})`),x})(h),z=x/(m.length-1),w=(0,Z.t7)(0,200,z),Y=(0,Z.t7)(20,6,z)/.75,R=(0,j.pC)(h.loadPriority)&&h.loadPriority>=m.length,D=new O.Z([w,R?0:w,R?0:w]),p="3d"===this.view.type?()=>new c.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new C.Z({text:b,halo:{color:"white",size:1/.75},material:{color:D},size:Y})]}):()=>new E.Z({text:b,haloColor:"white",haloSize:1/.75,color:D,size:Y}),V=this._labels.get(v);if(V){const U=p();((0,j.Wi)(V.symbol)||JSON.stringify(U)!==JSON.stringify(V.symbol))&&(V.symbol=U)}else{const U=new S.Z({geometry:P.extent.center,symbol:p()});this._labels.set(v,U),g.push(U)}}});const L=new Array;M.forEach(h=>{const x=this._polygons.get(h);null!=x&&(L.push(x),this._polygons.delete(h));const v=this._labels.get(h);null!=v&&(L.push(v),this._labels.delete(h))}),this.view.graphics.removeMany(L),this.view.graphics.addMany(g)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,l._)([(0,I.Cb)({constructOnly:!0})],A.prototype,"view",void 0),(0,l._)([(0,I.Cb)({readOnly:!0})],A.prototype,"updating",void 0),(0,l._)([(0,I.Cb)()],A.prototype,"enabled",null),A=(0,l._)([(0,y.j)("esri.views.support.TileTreeDebugger")],A)},60863:(te,X,n)=>{n.d(X,{d:()=>K});var l=n(15861),O=n(76210),S=n(23663),W=n(66554),Z=n(85589);const T=(0,O.GH)(class extends O.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,W.u)(this,this.effectiveLocale)}connectedCallback(){(0,S.c)(this),(0,W.c)(this)}componentWillLoad(){var y=this;return(0,l.Z)(function*(){yield(0,W.s)(y)})()}disconnectedCallback(){(0,S.d)(this),(0,W.d)(this)}render(){const{el:y,loading:c,messages:f}=this,E=y.innerHTML.trim().length>0,C=c?(0,O.h)("calcite-loader",{label:f.loading}):null,u=E?(0,O.h)("div",{class:"content"},(0,O.h)("slot",null)):null;return(0,O.h)("div",{class:"scrim"},C,u)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function K(){"undefined"!=typeof customElements&&["calcite-scrim","calcite-loader"].forEach(c=>{switch(c){case"calcite-scrim":customElements.get(c)||customElements.define(c,T);break;case"calcite-loader":customElements.get(c)||(0,Z.d)()}})}K()},89251:(te,X,n)=>{n.d(X,{C:()=>O,I:()=>Z,M:()=>W,S:()=>S,a:()=>y,g:()=>T,u:()=>K});var l=n(76210);const O={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},S={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},W=5,Z={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},I="calcite-list-item";function T(c){const f=c.target.assignedElements({flatten:!0});return[...f.filter(u=>null==u?void 0:u.matches("calcite-list-item-group")).map(u=>Array.from(u.querySelectorAll(I))).reduce((u,A)=>[...u,...A],[]),...f.filter(u=>null==u?void 0:u.matches(I))]}function K(c){c.forEach(f=>{f.setPosition=c.indexOf(f)+1,f.setSize=c.length})}function y(c,f=!1){return l.Z5.isBrowser?document.evaluate(f?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",c,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);
"use strict";var Fe=Object.defineProperty,Ne=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,Ge=Object.prototype.hasOwnProperty,ze=Object.prototype.propertyIsEnumerable,Ke=(te,J,n)=>J in te?Fe(te,J,{enumerable:!0,configurable:!0,writable:!0,value:n}):te[J]=n,ce=(te,J)=>{for(var n in J||(J={}))Ge.call(J,n)&&Ke(te,n,J[n]);if(we)for(var n of we(J))ze.call(J,n)&&Ke(te,n,J[n]);return te},fe=(te,J)=>Ne(te,Ze(J));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8592],{85840:(te,J,n)=>{n.d(J,{Z:()=>E});var c=n(17626),I=n(14517),S=n(79608),W=n(61996),w=n(86810),U=n(62208),T=n(77712),y=(n(90912),n(85931),n(76898));let _=0,f=class extends((0,w.eC)((0,S.J)((0,W.IG)(I.Z)))){constructor(M){super(M),this.id=`${Date.now().toString(16)}-analysis-${_++}`,this.title=null}get parent(){return this._get("parent")}set parent(M){const h=this.parent;if((0,U.pC)(h))switch(h.type){case"line-of-sight":case"dimension":h.releaseAnalysis(this);break;case"2d":case"3d":h.analyses.includes(this)&&h.analyses.remove(this)}this._set("parent",M)}get isEditable(){return this.requiredPropertiesForEditing.every(U.pC)}};(0,c._)([(0,T.Cb)({type:String,constructOnly:!0,clonable:!1})],f.prototype,"id",void 0),(0,c._)([(0,T.Cb)({type:String})],f.prototype,"title",void 0),(0,c._)([(0,T.Cb)({constructOnly:!0})],f.prototype,"type",void 0),(0,c._)([(0,T.Cb)({clonable:!1,value:null})],f.prototype,"parent",null),(0,c._)([(0,T.Cb)({readOnly:!0})],f.prototype,"isEditable",null),(0,c._)([(0,T.Cb)({readOnly:!0})],f.prototype,"requiredPropertiesForEditing",void 0),f=(0,c._)([(0,y.j)("esri.analysis.Analysis")],f);const E=f},69186:(te,J,n)=>{n.d(J,{Z:()=>M});var c=n(17626),S=(n(29132),n(97662)),W=n(79608),w=n(23719),U=n(86810),T=n(77712),A=n(66656),y=(n(85931),n(76898)),_=n(90912),f=n(72642);let E=class extends((0,U.eC)(W.j)){constructor(h){super(h),this.type="length",this.startPoint=null,this.endPoint=null,this.measureType=S.n.Direct,this.offset=0,this.orientation=0}};(0,c._)([(0,T.Cb)({type:["length"],json:{write:{isRequired:!0}}})],E.prototype,"type",void 0),(0,c._)([(0,T.Cb)({type:f.Z,json:{write:!0}})],E.prototype,"startPoint",void 0),(0,c._)([(0,T.Cb)({type:f.Z,json:{write:!0}})],E.prototype,"endPoint",void 0),(0,c._)([(0,T.Cb)({type:S.V,nonNullable:!0,json:{write:{isRequired:!0}}})],E.prototype,"measureType",void 0),(0,c._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}})],E.prototype,"offset",void 0),(0,c._)([(0,T.Cb)({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),(0,A.p)(h=>w.BV.normalize((0,_.q9)(h),0,!0))],E.prototype,"orientation",void 0),E=(0,c._)([(0,y.j)("esri.analysis.LengthDimension")],E);const M=E},61642:(te,J,n)=>{n.d(J,{Z:()=>h});var c=n(17626),I=n(8425),S=n(14517),W=n(79608),w=n(86810),U=n(62208),T=n(77712),y=(n(90912),n(85931),n(76898)),_=n(128),f=n(72642),E=n(82706);let M=class extends((0,w.eC)((0,W.J)(S.Z))){constructor(x){super(x),this.position=null,this.elevationInfo=null,this.feature=null}equals(x){return(0,U._W)(this.position,x.position)&&(0,U._W)(this.elevationInfo,x.elevationInfo)&&(0,I.kk)(this.feature,x.feature)}};(0,c._)([(0,T.Cb)({type:f.Z}),(0,_.B)()],M.prototype,"position",void 0),(0,c._)([(0,T.Cb)({type:E.Z}),(0,_.B)()],M.prototype,"elevationInfo",void 0),(0,c._)([(0,T.Cb)(I.rX)],M.prototype,"feature",void 0),M=(0,c._)([(0,y.j)("esri.analysis.LineOfSightAnalysisObserver")],M);const h=M},57574:(te,J,n)=>{n.d(J,{Z:()=>M});var c=n(17626),I=n(8425),S=n(79608),W=n(86810),w=n(62208),U=n(77712),Z=(n(90912),n(85931),n(76898)),y=n(128),_=n(72642),f=n(82706);let E=class extends((0,W.eC)(S.j)){constructor(h){super(h),this.position=null,this.elevationInfo=null,this.feature=null}equals(h){return(0,w._W)(this.position,h.position)&&(0,w._W)(this.elevationInfo,h.elevationInfo)&&(0,I.kk)(this.feature,h.feature)}};(0,c._)([(0,U.Cb)({type:_.Z}),(0,y.B)()],E.prototype,"position",void 0),(0,c._)([(0,U.Cb)({type:f.Z}),(0,y.B)()],E.prototype,"elevationInfo",void 0),(0,c._)([(0,U.Cb)(I.rX)],E.prototype,"feature",void 0),E=(0,c._)([(0,Z.j)("esri.analysis.LineOfSightAnalysisTarget")],E);const M=E},97662:(te,J,n)=>{var c,S;n.d(J,{V:()=>I,n:()=>c}),(S=c||(c={})).Horizontal="horizontal",S.Vertical="vertical",S.Direct="direct";const I=[c.Horizontal,c.Vertical,c.Direct]},8425:(te,J,n)=>{n.d(J,{kk:()=>I,pD:()=>S,rX:()=>W});var c=n(62208);function I(T,A){return S(T)===S(A)}function S(T){if((0,c.Wi)(T))return null;let Z=null;return Z=null!=T.objectId?T.objectId:null!=T.layer&&"objectIdField"in T.layer&&null!=T.layer.objectIdField&&null!=T.attributes?T.attributes[T.layer.objectIdField]:T.uid,null==Z?null:`o-${null!=T.layer?T.layer.id:""}-${Z}`}const W={json:{write:{writer:function w(T,A){var Z;(0,c.Wi)(T)||null==(null==(Z=T.layer)?void 0:Z.objectIdField)||null==T.attributes||(A.feature={layerId:T.layer.id,objectId:T.attributes[T.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function U(T){if(null!=T.layerId&&null!=T.objectId)return{uid:null,layer:{id:T.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:T.objectId}}}}}}}},91365:(te,J,n)=>{n.d(J,{Qn:()=>A,iG:()=>T});var W,c=n(25919),I=n(21837);class S{}S.instance=new I.vF("Etc/UTC"),(W||(W={})).TimeZoneNotRecognised="TimeZoneNotRecognised";const w={[W.TimeZoneNotRecognised]:"Timezone identifier has not been recognised."};class U extends Error{constructor(y,_){super((0,c.Hy)(w[y],_)),this.declaredRootClass="esri.arcade.arcadedate.dateerror",Error.captureStackTrace&&Error.captureStackTrace(this,U)}}class T{constructor(y){this._date=y,this.declaredRootClass="esri.arcade.arcadedate"}static fromParts(y=0,_=1,f=1,E=0,M=0,h=0,x=0,l){if(isNaN(y)||isNaN(_)||isNaN(f)||isNaN(E)||isNaN(M)||isNaN(h)||isNaN(x))return null;let m=0;const v=I.ou.local(y,_).daysInMonth;f<1&&(m=f-1,f=1),f>v&&(m=f-v,f=v);let O=0;_>12?(O=_-12,_=12):_<1&&(O=_-1,_=1);let C=0;M>59?(C=M-59,M=59):M<0&&(C=M,M=0);let u=0;h>59?(u=h-59,h=59):h<0&&(u=h,h=0);let D=0;x>999?(D=x-999,x=999):x<0&&(D=x,x=0);let g=I.ou.fromObject({day:f,year:y,month:_,hour:E,minute:M,second:h,millisecond:x},{zone:A(l)});return 0!==O&&(g=g.plus({months:O})),0!==m&&(g=g.plus({days:m})),0!==C&&(g=g.plus({minutes:C})),0!==u&&(g=g.plus({seconds:u})),0!==D&&(g=g.plus({milliseconds:D})),new T(g)}static get systemTimeZoneCanonicalName(){var y;return null!=(y=Intl.DateTimeFormat().resolvedOptions().timeZone)?y:"system"}static arcadeDateAndZoneToArcadeDate(y,_){const f=A(_);return y.isUnknownTimeZone||f===S.instance?T.fromParts(y.year,y.monthJS+1,y.day,y.hour,y.minute,y.second,y.millisecond,f):new T(y._date.setZone(_))}static dateJSToArcadeDate(y){return new T(I.ou.fromJSDate(y,{zone:"system"}))}static dateJSAndZoneToArcadeDate(y,_="system"){return new T(I.ou.fromJSDate(y,{zone:_}))}static unknownEpochToArcadeDate(y){return new T(I.ou.fromMillis(y,{zone:S.instance}))}static unknownDateJSToArcadeDate(y){return new T(I.ou.fromMillis(y.getTime(),{zone:S.instance}))}static epochToArcadeDate(y,_="system"){return new T(I.ou.fromMillis(y,{zone:_}))}static dateTimeToArcadeDate(y){return new T(y)}changeTimeZone(y){const _=A(y);return T.dateTimeToArcadeDate(this._date.setZone(_))}static dateTimeAndZoneToArcadeDate(y,_){const f=A(_);return y.zone===S.instance||f===S.instance?T.fromParts(y.year,y.month,y.day,y.hour,y.minute,y.second,y.millisecond,f):new T(y.setZone(f))}static nowToArcadeDate(y){return new T(I.ou.fromJSDate(new Date,{zone:y}))}static nowUTCToArcadeDate(){return new T(I.ou.utc())}get isSystem(){return"system"===this.timeZone||this.timeZone===T.systemTimeZoneCanonicalName}equals(y){return this.isSystem&&y.isSystem?this.toNumber()===y.toNumber():this.isUnknownTimeZone===y.isUnknownTimeZone&&this._date.equals(y._date)}get isUnknownTimeZone(){return this._date.zone===S.instance}get isValid(){return this._date.isValid}get hour(){return this._date.hour}get second(){return this._date.second}get day(){return this._date.day}get dayOfWeekISO(){return this._date.weekday}get dayOfWeekJS(){let y=this._date.weekday;return y>6&&(y=0),y}get millisecond(){return this._date.millisecond}get monthISO(){return this._date.month}get weekISO(){return this._date.weekNumber}get yearISO(){return this._date.weekYear}get monthJS(){return this._date.month-1}get year(){return this._date.year}get minute(){return this._date.minute}get zone(){return this._date.zone}get timeZoneOffset(){return this.isUnknownTimeZone?0:this._date.offset}get timeZone(){if(this.isUnknownTimeZone)return"unknown";if("system"===this._date.zone.type)return"system";const y=this.zone;return"fixed"===y.type?0===y.fixed?"utc":y.formatOffset(0,"short"):y.name}stringify(){return JSON.stringify(this.toJSDate())}plus(y){return new T(this._date.plus(y))}diff(y,_="milliseconds"){return this._date.diff(y._date,_)[_]}toISOString(y){return this._date.toISO(y?{suppressMilliseconds:!0,includeOffset:!this.isUnknownTimeZone}:{includeOffset:!this.isUnknownTimeZone})}toFormat(y,_){return this._date.toFormat(y,_)}toJSDate(){return this._date.toJSDate()}toSQLString(){return"timestamp '"+this._date.toFormat("yyyy-LL-dd HH:mm:ss")+"'"}toDateTime(){return this._date}toNumber(){return this._date.toMillis()}getTime(){return this._date.toMillis()}toUTC(){return new T(this._date.toUTC())}toLocal(){return new T(this._date.toLocal())}toString(){return this.toISOString(!0)}}function A(Z){if(Z instanceof I.ld)return Z;if("system"===Z.toLowerCase())return"system";if("utc"===Z.toLowerCase())return"utc";if("unknown"===Z.toLowerCase())return S.instance;if(/^[\+\-]?[0-9]{1,2}([:][0-9]{2})?$/.test(Z)){const _=I.Qf.parseSpecifier("UTC"+(Z.startsWith("+")||Z.startsWith("-")?"":"+")+Z);if(_)return _}const y=I.vF.create(Z);if(!y.isValid)throw new U(W.TimeZoneNotRecognised);return y}},29050:(te,J,n)=>{n.d(J,{nu:()=>Z}),n(91365);var I=n(60466),w=(n(41039),n(21837),n(60194));class Z{constructor(){this.dateTimeReferenceMetaData=null,this._fieldTimeZoneIndex={},this._fieldIndex=null,this._ianaPreferred=null,this._ianaTimeInfo=null,this._ianaEditFields=null,this._ianaLayerDateFields=null}static create(_,f){const E=new Z;return E.dateTimeReferenceMetaData=f,E._fieldIndex=_ instanceof I.Z?_:new I.Z(_),E}static createFromLayer(_){var E,M,h,x,l,m,v,O;if(!_)return null;if(!_.fieldsIndex)return!_.declaredClass&&_.fields?Z.create(_.fields,_):null;const f=new Z;return f._fieldIndex=_.fieldsIndex,f.dateTimeReferenceMetaData={timeInfo:null!=(M=null==(E=null==_?void 0:_.timeInfo)?void 0:E.toJSON())?M:null,editFieldsInfo:null!=(x=null==(h=null==_?void 0:_.editFieldsInfo)?void 0:h.toJSON())?x:null,dateFieldsTimeReference:null!=(m=null==(l=null==_?void 0:_.dateFieldsTimeReference)?void 0:l.toJSON())?m:null,preferredTimeReference:null!=(O=null==(v=null==_?void 0:_.preferredTimeReference)?void 0:v.toJSON())?O:null,datesInUnknownTimezone:!0===(null==_?void 0:_.datesInUnknownTimezone)},f}fieldTimeZone(_){var x,l,m,v,O,C,u,D,g,j,P,b,G,K,Y,B,L,p,$,R,F,H,X;const f=null==(x=this._fieldIndex)?void 0:x.get(_);if(!f||"date"!==f.type&&"esriFieldTypeDate"!==f.type)return null;const E=this._fieldTimeZoneIndex[f.name];if(void 0!==E)return E;const M=[{field:null==(m=null==(l=this.dateTimeReferenceMetaData)?void 0:l.editFieldsInfo)?void 0:m.creationDateField,timeReference:null==(O=null==(v=this.dateTimeReferenceMetaData)?void 0:v.editFieldsInfo)?void 0:O.dateFieldsTimeReference,isunknown:!0===(null==(C=this.dateTimeReferenceMetaData)?void 0:C.datesInUnknownTimezone)},{field:null==(D=null==(u=this.dateTimeReferenceMetaData)?void 0:u.editFieldsInfo)?void 0:D.editDateField,timeReference:null==(j=null==(g=this.dateTimeReferenceMetaData)?void 0:g.editFieldsInfo)?void 0:j.dateFieldsTimeReference,isunknown:!0===(null==(P=this.dateTimeReferenceMetaData)?void 0:P.datesInUnknownTimezone)},{field:null==(G=null==(b=this.dateTimeReferenceMetaData)?void 0:b.timeInfo)?void 0:G.startTimeField,timeReference:null==(Y=null==(K=this.dateTimeReferenceMetaData)?void 0:K.timeInfo)?void 0:Y.timeReference,isunknown:!0===(null==(B=this.dateTimeReferenceMetaData)?void 0:B.datesInUnknownTimezone)},{field:null==(p=null==(L=this.dateTimeReferenceMetaData)?void 0:L.timeInfo)?void 0:p.endTimeField,timeReference:null==(R=null==($=this.dateTimeReferenceMetaData)?void 0:$.timeInfo)?void 0:R.timeReference,isunknown:!0===(null==(F=this.dateTimeReferenceMetaData)?void 0:F.datesInUnknownTimezone)}];for(const k of M)if(k.field===f.name){const ee=this.convertToIANA(k.timeReference,k.isunknown);return this._fieldTimeZoneIndex[f.name]=ee,ee}const h=this.convertToIANA(null==(H=this.dateTimeReferenceMetaData)?void 0:H.dateFieldsTimeReference,null==(X=this.dateTimeReferenceMetaData)?void 0:X.datesInUnknownTimezone);return this._fieldTimeZoneIndex[f.name]=h,h}convertToIANA(_,f){return f?"unknown":function A(y){return null!=y&&y.timeZoneIANA?null==y?void 0:y.timeZoneIANA:null!=y&&y.timeZone?(0,w.G)(y,""):""}(_)}get layerPreferredTimeZone(){var f,E;if(null!==this._ianaPreferred)return this._ianaPreferred;this._ianaPreferred="";const _=null==(f=this.dateTimeReferenceMetaData)?void 0:f.preferredTimeReference;return this._ianaPreferred=this.convertToIANA(_,!0===(null==(E=this.dateTimeReferenceMetaData)?void 0:E.datesInUnknownTimezone)),this._ianaPreferred}get layerTimeInfoTimeZone(){var f,E;if(null!==this._ianaTimeInfo)return this._ianaTimeInfo;this._ianaTimeInfo="";const _=null==(E=null==(f=this.dateTimeReferenceMetaData)?void 0:f.timeInfo)?void 0:E.timeReference;return this._ianaTimeInfo=this.convertToIANA(_,!1),this._ianaTimeInfo}get layerEditFieldsTimeZone(){var f,E,M;if(null!==this._ianaEditFields)return this._ianaEditFields;this._ianaEditFields="";const _=null==(E=null==(f=this.dateTimeReferenceMetaData)?void 0:f.editFieldsInfo)?void 0:E.dateFieldsTimeReference;return this._ianaEditFields=this.convertToIANA(_,null==(M=this.dateTimeReferenceMetaData)?void 0:M.datesInUnknownTimezone),this._ianaEditFields}get layerDateFieldsTimeZone(){var f,E;if(null!==this._ianaLayerDateFields)return this._ianaLayerDateFields;this._ianaLayerDateFields="";const _=null==(f=this.dateTimeReferenceMetaData)?void 0:f.dateFieldsTimeReference;return this._ianaLayerDateFields=this.convertToIANA(_,!0===(null==(E=this.dateTimeReferenceMetaData)?void 0:E.datesInUnknownTimezone)),this._ianaLayerDateFields}}},57577:(te,J,n)=>{function c(I){throw new Error('Could not dynamically require "'+I+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}n.d(J,{c:()=>c})},7006:(te,J,n)=>{n.d(J,{A:()=>G,B:()=>K,C:()=>Y,D:()=>B,E:()=>L,F:()=>p,G:()=>$,H:()=>R,I:()=>F,J:()=>H,K:()=>X,L:()=>k,M:()=>ee,N:()=>q,a:()=>w,b:()=>U,c:()=>W,d:()=>T,e:()=>S,f:()=>A,g:()=>Q,h:()=>Z,i:()=>y,j:()=>E,k:()=>x,l:()=>m,m:()=>v,n:()=>O,o:()=>M,p:()=>C,q:()=>D,r:()=>h,s:()=>l,t:()=>_,u:()=>u,v:()=>g,w:()=>f,x:()=>j,y:()=>P,z:()=>b});var c=n(4918),I=n(15994);function S(N){return c.G.extendedSpatialReferenceInfo(N)}function W(N,z,V){return c.G.clip(I.N,N,z,V)}function w(N,z,V){return c.G.cut(I.N,N,z,V)}function U(N,z,V){return c.G.contains(I.N,N,z,V)}function T(N,z,V){return c.G.crosses(I.N,N,z,V)}function A(N,z,V,ne){return c.G.distance(I.N,N,z,V,ne)}function Z(N,z,V){return c.G.equals(I.N,N,z,V)}function y(N,z,V){return c.G.intersects(I.N,N,z,V)}function _(N,z,V){return c.G.touches(I.N,N,z,V)}function f(N,z,V){return c.G.within(I.N,N,z,V)}function E(N,z,V){return c.G.disjoint(I.N,N,z,V)}function M(N,z,V){return c.G.overlaps(I.N,N,z,V)}function h(N,z,V,ne){return c.G.relate(I.N,N,z,V,ne)}function x(N,z){return c.G.isSimple(I.N,N,z)}function l(N,z){return c.G.simplify(I.N,N,z)}function m(N,z,V=!1){return c.G.convexHull(I.N,N,z,V)}function v(N,z,V){return c.G.difference(I.N,N,z,V)}function O(N,z,V){return c.G.symmetricDifference(I.N,N,z,V)}function C(N,z,V){return c.G.intersect(I.N,N,z,V)}function u(N,z,V=null){return c.G.union(I.N,N,z,V)}function D(N,z,V,ne,oe,re,ae){return c.G.offset(I.N,N,z,V,ne,oe,re,ae)}function g(N,z,V,ne,oe=!1){return c.G.buffer(I.N,N,z,V,ne,oe)}function j(N,z,V,ne,oe,re,ae){return c.G.geodesicBuffer(I.N,N,z,V,ne,oe,re,ae)}function P(N,z,V,ne=!0){return c.G.nearestCoordinate(I.N,N,z,V,ne)}function b(N,z,V){return c.G.nearestVertex(I.N,N,z,V)}function G(N,z,V,ne,oe){return c.G.nearestVertices(I.N,N,z,V,ne,oe)}function K(N,z,V,ne){if(null==z||null==ne)throw new Error("Illegal Argument Exception");const oe=c.G.rotate(z,V,ne);return oe.spatialReference=N,oe}function Y(N,z,V){if(null==z||null==V)throw new Error("Illegal Argument Exception");const ne=c.G.flipHorizontal(z,V);return ne.spatialReference=N,ne}function B(N,z,V){if(null==z||null==V)throw new Error("Illegal Argument Exception");const ne=c.G.flipVertical(z,V);return ne.spatialReference=N,ne}function L(N,z,V,ne,oe){return c.G.generalize(I.N,N,z,V,ne,oe)}function p(N,z,V,ne){return c.G.densify(I.N,N,z,V,ne)}function $(N,z,V,ne,oe=0){return c.G.geodesicDensify(I.N,N,z,V,ne,oe)}function R(N,z,V){return c.G.planarArea(I.N,N,z,V)}function F(N,z,V){return c.G.planarLength(I.N,N,z,V)}function H(N,z,V,ne){return c.G.geodesicArea(I.N,N,z,V,ne)}function X(N,z,V,ne){return c.G.geodesicLength(I.N,N,z,V,ne)}function k(N,z,V){return null==z||null==V?[]:c.G.intersectLinesToPoints(I.N,N,z,V)}function ee(N,z){c.G.changeDefaultSpatialReferenceTolerance(N,z)}function q(N){c.G.clearDefaultSpatialReferenceTolerance(N)}const Q=Object.freeze(Object.defineProperty({__proto__:null,buffer:g,changeDefaultSpatialReferenceTolerance:ee,clearDefaultSpatialReferenceTolerance:q,clip:W,contains:U,convexHull:m,crosses:T,cut:w,densify:p,difference:v,disjoint:E,distance:A,equals:Z,extendedSpatialReferenceInfo:S,flipHorizontal:Y,flipVertical:B,generalize:L,geodesicArea:H,geodesicBuffer:j,geodesicDensify:$,geodesicLength:X,intersect:C,intersectLinesToPoints:k,intersects:y,isSimple:x,nearestCoordinate:P,nearestVertex:b,nearestVertices:G,offset:D,overlaps:M,planarArea:R,planarLength:F,relate:h,rotate:K,simplify:l,symmetricDifference:O,touches:_,union:u,within:f},Symbol.toStringTag,{value:"Module"}))},58774:(te,J,n)=>{n.d(J,{b:()=>_,j:()=>T});var c=n(15861),I=n(54346),S=n(8314);let w=null,U=null;function T(){return A.apply(this,arguments)}function A(){return(A=(0,c.Z)(function*(){return w||(w=Z()),w})).apply(this,arguments)}function Z(){return y.apply(this,arguments)}function y(){return(y=(0,c.Z)(function*(){U=yield((0,S.Z)("esri-csp-restrictions")?yield n.e(71).then(n.bind(n,10071)).then(E=>E.l):yield n.e(9507).then(n.bind(n,99507)).then(E=>E.l)).load({locateFile:E=>(0,I.V)(`esri/core/libs/libtess/${E}`)})})).apply(this,arguments)}function _(f,E){const M=Math.max(f.length,128e3);return U.triangulate(f,E,M)}},99746:(te,J,n)=>{n.d(J,{Z:()=>g});var C,c=n(17626),I=n(86810),S=n(62208),W=n(77712),T=(n(90912),n(85931),n(76898)),A=n(28347),Z=n(43703),y=n(48977),_=n(78451),f=n(84161),E=n(28093),M=n(72642),h=n(55915),x=n(81863),l=n(89586),m=n(60479),v=n(79800),O=n(9554);let u=C=class extends I.wq{constructor(j){super(j),this.origin=(0,E.c)(),this.translation=(0,E.c)(),this.rotation=(0,l.Ue)(),this.scale=(0,E.f)(1,1,1),this.geographic=!0}get localMatrix(){const j=(0,Z.c)();return(0,y.s)(D,(0,l.ZZ)(this.rotation),(0,l.WH)(this.rotation)),(0,A.g)(j,D,this.translation,this.scale),j}get localMatrixInverse(){return(0,A.a)((0,Z.c)(),this.localMatrix)}applyLocal(j,P){return(0,f.m)(P,j,this.localMatrix)}applyLocalInverse(j,P){return(0,f.m)(P,j,this.localMatrixInverse)}project(j,P){const b=new Float64Array(j.length),G=m.fP.fromTypedArray(b),K=m.fP.fromTypedArray(j);if(this.geographic){const L=(0,x.rS)(P),p=(0,Z.c)();return(0,h.Bm)(P,this.origin,p,L),(0,A.m)(p,p,this.localMatrix),(0,v.t)(G,K,p),(0,h.CM)(b,L,0,b,P,0,b.length/3),b}const{localMatrix:Y,origin:B}=this;(0,A.h)(Y,Z.I)?(0,O.c)(G,K):(0,v.t)(G,K,Y);for(let L=0;L<b.length;L+=3)b[L+0]+=B[0],b[L+1]+=B[1],b[L+2]+=B[2];return b}getOriginPoint(j){const[P,b,G]=this.origin;return new M.Z({x:P,y:b,z:G,spatialReference:j})}equals(j){return(0,S.pC)(j)&&this.geographic===j.geographic&&(0,f.k)(this.origin,j.origin)&&(0,A.j)(this.localMatrix,j.localMatrix)}clone(){const j={origin:(0,E.a)(this.origin),translation:(0,E.a)(this.translation),rotation:(0,l.Ue)(this.rotation),scale:(0,E.a)(this.scale),geographic:this.geographic};return new C(j)}};(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"origin",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"translation",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"rotation",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],u.prototype,"scale",void 0),(0,c._)([(0,W.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],u.prototype,"geographic",void 0),(0,c._)([(0,W.Cb)()],u.prototype,"localMatrix",null),(0,c._)([(0,W.Cb)()],u.prototype,"localMatrixInverse",null),u=C=(0,c._)([(0,T.j)("esri.geometry.support.MeshTransform")],u);const D=(0,_.a)(),g=u},92545:(te,J,n)=>{function c(I,S){var W;return I.isGeographic||I.isWebMercator&&(null==(W=null==S?void 0:S.geographic)||W)}n.d(J,{h:()=>c})},60853:(te,J,n)=>{n.d(J,{FF:()=>l,I5:()=>h,Yq:()=>m,iv:()=>M,w1:()=>x});var c=n(62208),I=n(16730),S=n(550),W=n(28347),w=n(43703),U=n(30217),T=n(55915),A=n(81863),Z=n(99746),y=n(60479),_=n(79800),f=n(92545),E=n(65231);function M(R,F,H){return(0,f.h)(F.spatialReference,H)?function O(R,F,H){const X=F.spatialReference,k=P(F,H,B),ee=new Float64Array(R.position.length),q=function C(R,F,H,X){(0,_.t)(y.fP.fromTypedArray(X),y.fP.fromTypedArray(R),F);const k=new Float64Array(R.length);return(0,E.To)(X,k,H)}(R.position,k,X,ee),Q=(0,U.b)(p,k);return{position:q,normal:u(q,ee,R.normal,Q,X),tangent:D(q,ee,R.tangent,Q,X)}}(R,F,H):function v(R,F,H){const X=new Float64Array(R.position.length),k=R.position,ee=F.x,q=F.y,Q=F.z||0,{horizontal:N,vertical:z}=Y(H?H.unit:null,F.spatialReference);for(let V=0;V<k.length;V+=3)X[V+0]=k[V+0]*N+ee,X[V+1]=k[V+1]*N+q,X[V+2]=k[V+2]*z+Q;return{position:X,normal:R.normal,tangent:R.tangent}}(R,F,H)}function h(R,F,H){const{position:X,normal:k,tangent:ee}=R;if((0,c.Wi)(F))return{position:X,normal:k,tangent:ee};const q=F.localMatrix;return M({position:(0,E.zZ)(X,new Float64Array(X.length),q),normal:(0,c.pC)(k)?(0,E.w9)(k,new Float32Array(k.length),q):null,tangent:(0,c.pC)(ee)?(0,E.VS)(ee,new Float32Array(ee.length),q):null},F.getOriginPoint(H),{geographic:F.geographic})}function x(R,F,H){var X;if(null!=H&&H.useTransform){const{position:k,normal:ee,tangent:q}=R;return{vertexAttributes:{position:k,normal:ee,tangent:q},transform:new Z.Z({origin:[F.x,F.y,null!=(X=F.z)?X:0],geographic:(0,f.h)(F.spatialReference,H)})}}return{vertexAttributes:M(R,F,H),transform:null}}function l(R,F,H){return(0,f.h)(F.spatialReference,H)?function j(R,F,H){const X=F.spatialReference;P(F,H,B);const k=(0,W.a)(L,B),ee=new Float64Array(R.position.length),q=function b(R,F,H,X){const k=(0,E.XO)(R,F,X),ee=y.fP.fromTypedArray(k),q=new Float64Array(k.length),Q=y.fP.fromTypedArray(q);return(0,_.t)(Q,ee,H),q}(R.position,X,k,ee),Q=(0,U.b)(p,k);return{position:q,normal:G(R.normal,R.position,ee,X,Q),tangent:K(R.tangent,R.position,ee,X,Q)}}(R,F,H):g(R,F,H)}function m(R,F,H,X){if((0,c.Wi)(F))return l(R,H,X);const k=h(R,F,H.spatialReference);return H.equals(F.getOriginPoint(H.spatialReference))?g(k,H,X):l(k,H,X)}function u(R,F,H,X,k){if((0,c.Wi)(H))return null;const ee=new Float32Array(H.length);return(0,_.a)(y.ct.fromTypedArray(ee),y.ct.fromTypedArray(H),X),(0,E.Yk)(ee,R,F,k,ee),ee}function D(R,F,H,X,k){if((0,c.Wi)(H))return null;const ee=new Float32Array(H.length);(0,_.a)(y.ct.fromTypedArray(ee,4*Float32Array.BYTES_PER_ELEMENT),y.ct.fromTypedArray(H,4*Float32Array.BYTES_PER_ELEMENT),X);for(let q=3;q<ee.length;q+=4)ee[q]=H[q];return(0,E.M2)(ee,R,F,k,ee),ee}function g(R,F,H){const X=new Float64Array(R.position.length),k=R.position,ee=F.x,q=F.y,Q=F.z||0,{horizontal:N,vertical:z}=Y(H?H.unit:null,F.spatialReference);for(let V=0;V<k.length;V+=3)X[V+0]=(k[V+0]-ee)/N,X[V+1]=(k[V+1]-q)/N,X[V+2]=(k[V+2]-Q)/z;return{position:X,normal:R.normal,tangent:R.tangent}}function P(R,F,H){(0,T.Bm)(R.spatialReference,[R.x,R.y,R.z||0],H,(0,A.rS)(R.spatialReference));const{horizontal:X,vertical:k}=Y(F?F.unit:null,R.spatialReference);return(0,W.k)(H,H,[X,X,k]),H}function G(R,F,H,X,k){if((0,c.Wi)(R))return null;const ee=(0,E.Iz)(R,F,H,X,new Float32Array(R.length)),q=y.ct.fromTypedArray(ee);return(0,_.a)(q,q,k),ee}function K(R,F,H,X,k){if((0,c.Wi)(R))return null;const ee=(0,E.wi)(R,F,H,X,new Float32Array(R.length)),q=y.ct.fromTypedArray(ee,4*Float32Array.BYTES_PER_ELEMENT);return(0,_.a)(q,q,k),ee}function Y(R,F){if((0,c.Wi)(R))return $;const H=F.isGeographic?1:(0,I.c9)(F),X=F.isGeographic?1:(0,I._R)(F),k=(0,I.En)(1,R,"meters");return{horizontal:k*H,vertical:k*X}}const B=(0,w.c)(),L=(0,w.c)(),p=(0,S.c)(),$={horizontal:1,vertical:1}},65629:(te,J,n)=>{n.d(J,{SR:()=>Z,Ui:()=>A});var c=n(62208),I=n(65401),S=n(32442),W=n(25748),w=n(91179),U=n(74618),T=n(37053);function A(C){return y(C,!0)}function Z(C){return y(C,!1)}function y(C,u){if((0,c.Wi)(C))return null;const D=C.spatialReference,g=(0,T.C5)(D),j="toJSON"in C?C.toJSON():C;if(!g)return j;const P=(0,T.sS)(D)?102100:4326,b=U.UZ[P].maxX,G=U.UZ[P].minX;if((0,w.wp)(j))return f(j,b,G);if((0,w.aW)(j))return j.points=j.points.map(K=>f(K,b,G)),j;if((0,w.YX)(j))return function _(C,u){if(!u)return C;const D=function E(C,u){const D=[],{ymin:g,ymax:j,xmin:P,xmax:b}=C,G=C.xmax-C.xmin,[K,Y]=u.valid,{x:B,frameId:L}=M(C.xmin,u),{x:p,frameId:$}=M(C.xmax,u),R=B===p&&G>0;if(G>2*Y){const F={xmin:P<b?B:p,ymin:g,xmax:Y,ymax:j},H={xmin:K,ymin:g,xmax:P<b?p:B,ymax:j},X={xmin:0,ymin:g,xmax:Y,ymax:j},k={xmin:K,ymin:g,xmax:0,ymax:j},ee=[],q=[];h(F,X)&&ee.push(L),h(F,k)&&q.push(L),h(H,X)&&ee.push($),h(H,k)&&q.push($);for(let Q=L+1;Q<$;Q++)ee.push(Q),q.push(Q);D.push(new m(F,[L]),new m(H,[$]),new m(X,ee),new m(k,q))}else B>p||R?D.push(new m({xmin:B,ymin:g,xmax:Y,ymax:j},[L]),new m({xmin:K,ymin:g,xmax:p,ymax:j},[$])):D.push(new m({xmin:B,ymin:g,xmax:p,ymax:j},[L]));return D}(C,u).map(g=>g.extent);return D.length<2?D[0]||C:D.length>2?(C.xmin=u.valid[0],C.xmax=u.valid[1],C):{rings:D.map(g=>[[g.xmin,g.ymin],[g.xmin,g.ymax],[g.xmax,g.ymax],[g.xmax,g.ymin],[g.xmin,g.ymin]])}}(j,g);if((0,w.oU)(j)||(0,w.l9)(j)){const K=(0,S.$P)(v,j),Y={xmin:K[0],ymin:K[1],xmax:K[2],ymax:K[3]},B=(0,U.XZ)(Y.xmin,G)*(2*b),L=0===B?j:(0,U.Sy)(j,B);return Y.xmin+=B,Y.xmax+=B,Y.xmax>b?l(L,b,u):Y.xmin<G?l(L,G,u):L}return j}function f(C,u,D){if(Array.isArray(C)){const g=C[0];if(g>u){const j=(0,U.XZ)(g,u);C[0]=g+j*(-2*u)}else if(g<D){const j=(0,U.XZ)(g,D);C[0]=g+j*(-2*D)}}else{const g=C.x;if(g>u){const j=(0,U.XZ)(g,u);C.x+=j*(-2*u)}else if(g<D){const j=(0,U.XZ)(g,D);C.x+=j*(-2*D)}}return C}function M(C,u){const[D,g]=u.valid,j=2*g;let P,b=0;return C>g?(P=Math.ceil(Math.abs(C-g)/j),C-=P*j,b=P):C<D&&(P=Math.ceil(Math.abs(C-D)/j),C+=P*j,b=-P),{x:C,frameId:b}}function h(C,u){const{xmin:D,ymin:g,xmax:j,ymax:P}=u;return x(C,D,g)&&x(C,D,P)&&x(C,j,P)&&x(C,j,g)}function x(C,u,D){return u>=C.xmin&&u<=C.xmax&&D>=C.ymin&&D<=C.ymax}function l(C,u,D=!0){const g=!(0,w.l9)(C);if(g&&(0,W.Zy)(C),D)return(new O).cut(C,u);const j=g?C.rings:C.paths,P=g?4:2,b=j.length,G=-2*u;for(let K=0;K<b;K++){const Y=j[K];if(Y&&Y.length>=P){const B=[];for(const L of Y)B.push([L[0]+G,L[1]]);j.push(B)}}return g?C.rings=j:C.paths=j,C}class m{constructor(u,D){this.extent=u,this.frameIds=D}}const v=(0,I.Ue)();class O{constructor(){this._linesIn=[],this._linesOut=[]}cut(u,D){let g;if(this._xCut=D,u.rings)this._closed=!0,g=u.rings,this._minPts=4;else{if(!u.paths)return null;this._closed=!1,g=u.paths,this._minPts=2}for(const P of g){if(!P||P.length<this._minPts)continue;let b=!0;for(const G of P)b?(this.moveTo(G),b=!1):this.lineTo(G);this._closed&&this.close()}this._pushLineIn(),this._pushLineOut(),g=[];for(const P of this._linesIn)P&&P.length>=this._minPts&&g.push(P);const j=-2*this._xCut;for(const P of this._linesOut)if(P&&P.length>=this._minPts){for(const b of P)b[0]+=j;g.push(P)}return this._closed?u.rings=g:u.paths=g,u}moveTo(u){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(u[0]),this._moveTo(u[0],u[1],this._prevSide),this._prevPt=u,this._firstPt=u}lineTo(u){const D=this._side(u[0]);if(D*this._prevSide==-1){const g=this._intersect(this._prevPt,u);this._lineTo(this._xCut,g,0),this._prevSide=0,this._lineTo(u[0],u[1],D)}else this._lineTo(u[0],u[1],D);this._prevSide=D,this._prevPt=u}close(){const u=this._firstPt,D=this._prevPt;u[0]===D[0]&&u[1]===D[1]||this.lineTo(u),this._checkClosingPt(this._lineIn),this._checkClosingPt(this._lineOut)}_moveTo(u,D,g){this._closed?(this._lineIn.push([g<=0?u:this._xCut,D]),this._lineOut.push([g>=0?u:this._xCut,D])):(g<=0&&this._lineIn.push([u,D]),g>=0&&this._lineOut.push([u,D]))}_lineTo(u,D,g){this._closed?(this._addPolyVertex(this._lineIn,g<=0?u:this._xCut,D),this._addPolyVertex(this._lineOut,g>=0?u:this._xCut,D)):g<0?(0===this._prevSide&&this._pushLineOut(),this._lineIn.push([u,D])):g>0?(0===this._prevSide&&this._pushLineIn(),this._lineOut.push([u,D])):this._prevSide<0?(this._lineIn.push([u,D]),this._lineOut.push([u,D])):this._prevSide>0&&(this._lineOut.push([u,D]),this._lineIn.push([u,D]))}_addPolyVertex(u,D,g){const j=u.length;j>1&&u[j-1][0]===D&&u[j-2][0]===D?u[j-1][1]=g:u.push([D,g])}_checkClosingPt(u){const D=u.length;D>3&&u[0][0]===this._xCut&&u[D-2][0]===this._xCut&&u[1][0]===this._xCut&&(u[0][1]=u[D-2][1],u.pop())}_side(u){return u<this._xCut?-1:u>this._xCut?1:0}_intersect(u,D){return u[1]+(this._xCut-u[0])/(D[0]-u[0])*(D[1]-u[1])}_pushLineIn(){this._lineIn&&this._lineIn.length>=this._minPts&&this._linesIn.push(this._lineIn),this._lineIn=[]}_pushLineOut(){this._lineOut&&this._lineOut.length>=this._minPts&&this._linesOut.push(this._lineOut),this._lineOut=[]}}},20925:(te,J,n)=>{n.d(J,{Z:()=>x});var _,c=n(17626),I=n(46160),S=n(47877),W=n(14889),w=n(77712),A=(n(90912),n(85931),n(76898)),Z=n(49410),y=n(11136);const f={type:I.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:E}}},read:!1}};function E(l,m,v){if(l&&Array.isArray(l))return new I.Z(l.map(O=>{const C=function h(l){return"group"===l.layerType?M:Z.Z}(O);if(C){const u=new C;return u.read(O,v),u}return v&&v.messages&&O&&v.messages.push(new W.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(O.type||"unknown")+"' are not supported",{definition:O,context:v})),null}))}let M=_=class extends y.Z{constructor(l){super(l),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,S.w)(this,l=>_.forEachSublayer(this.sublayers,m=>{"building-group"!==m.type&&l(m)}))}};var l;(0,c._)([(0,w.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],M.prototype,"listMode",void 0),(0,c._)([(0,w.Cb)(f)],M.prototype,"sublayers",void 0),M=_=(0,c._)([(0,A.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],M),(l=M||(M={})).sublayersProperty=f,l.readSublayers=E,l.forEachSublayer=function m(v,O){v.forEach(C=>{O(C),"building-group"===C.type&&m(C.sublayers,O)})};const x=M},47519:(te,J,n)=>{var c,I;n.d(J,{i:()=>c}),(I=c||(c={}))[I.PROJECT_VERTICES=1]="PROJECT_VERTICES"},1476:(te,J,n)=>{n.d(J,{S:()=>I,X:()=>c});const c=1;function I(S,W){var U;let w=0;for(const T of W){const A=null==(U=T.attributes)?void 0:U[S];"number"==typeof A&&isFinite(A)&&(w=Math.max(w,A))}return w}},35775:(te,J,n)=>{n.d(J,{O0:()=>_,av:()=>T,b:()=>l,d1:()=>Z,og:()=>M});var c=n(15861),I=n(62208),S=n(37053),W=n(36630);class w{constructor(){this.code=null,this.description=null}}class U{constructor(O){this.error=new w,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=O}}function T(v){return new U(v)}class A{constructor(O){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=O}}function Z(v){return new A(v)}const y=new Set;function _(v,O,C,u=!1,D){var g;y.clear();for(const j in C){const P=v.get(j);if(!P)continue;const b=C[j],G=f(P,b);if(G!==b&&D&&D.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:P,originalValue:b,sanitizedValue:G}}),y.add(P.name),P&&(u||P.editable)){const K=(0,W.Qc)(P,G);if(K)return T((0,W.vP)(K,P,G));O[P.name]=G}}for(const j of null!=(g=null==v?void 0:v.requiredFields)?g:[])if(!y.has(j.name))return T(`missing required field "${j.name}"`);return null}function f(v,O){let C=O;return"string"==typeof O&&(0,W.H7)(v)?C=parseFloat(O):null!=O&&(0,W.qN)(v)&&"string"!=typeof O&&(C=String(O)),(0,W.Pz)(C)}let E;function M(v,O){if(!v||!(0,S.JY)(O))return v;if("rings"in v||"paths"in v){if((0,I.Wi)(E))throw new TypeError("geometry engine not loaded");return E.simplify(O,v)}return v}function h(){return x.apply(this,arguments)}function x(){return(x=(0,c.Z)(function*(){return(0,I.Wi)(E)&&(E=yield Promise.all([n.e(4918),n.e(8592),n.e(2825)]).then(n.bind(n,32825))),E})).apply(this,arguments)}function l(v,O){return m.apply(this,arguments)}function m(){return(m=(0,c.Z)(function*(v,O){!(0,S.JY)(v)||"esriGeometryPolygon"!==O&&"esriGeometryPolyline"!==O||(yield h())})).apply(this,arguments)}},5143:(te,J,n)=>{n.d(J,{Z:()=>_});var c=n(17626),S=(n(29132),n(77712)),U=(n(90912),n(85931),n(68653)),T=n(76898),A=n(51026),Z=n(28930),y=n(65234);const _=f=>{let E=class extends f{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(M,h){return null!=h.minLOD&&null!=h.maxLOD?M:0}readMaxScale(M,h){return null!=h.minLOD&&null!=h.maxLOD?M:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(M,h){return h.capabilities&&h.capabilities.includes("Tilemap")?new Z.y({layer:this}):null}};return(0,c._)([(0,S.Cb)({json:{read:{source:"copyrightText"}}})],E.prototype,"copyright",void 0),(0,c._)([(0,S.Cb)()],E.prototype,"minScale",void 0),(0,c._)([(0,U.r)("service","minScale")],E.prototype,"readMinScale",null),(0,c._)([(0,S.Cb)()],E.prototype,"maxScale",void 0),(0,c._)([(0,U.r)("service","maxScale")],E.prototype,"readMaxScale",null),(0,c._)([(0,S.Cb)({type:y.Z})],E.prototype,"spatialReference",void 0),(0,c._)([(0,S.Cb)({readOnly:!0})],E.prototype,"supportsBlankTile",null),(0,c._)([(0,S.Cb)(A.h)],E.prototype,"tileInfo",void 0),(0,c._)([(0,S.Cb)()],E.prototype,"tilemapCache",void 0),(0,c._)([(0,U.r)("service","tilemapCache",["capabilities"])],E.prototype,"readTilemapCache",null),(0,c._)([(0,S.Cb)()],E.prototype,"version",void 0),E=(0,c._)([(0,T.j)("esri.layers.mixins.ArcGISCachedService")],E),E}},22825:(te,J,n)=>{n.d(J,{A:()=>I});const c=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function I(S){return null!=S&&c.some(([W,w])=>S>=W&&S<=w)}},89628:(te,J,n)=>{n.d(J,{$9:()=>m,G4:()=>D,Lu:()=>l,WW:()=>L,d:()=>K,eS:()=>b,gp:()=>j,j:()=>C,w9:()=>v,yN:()=>Y});var c=n(15861),S=(n(29132),n(84792)),W=n(26584),w=n(63290),U=n(62208),T=n(37053),A=n(46367),Z=n(82054),y=n(95786),_=n(58775),f=n(56554),E=n(60466),M=n(85),h=n(65234);const x=w.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),l="http://www.opengis.net/def/crs/",m=`${l}OGC/1.3/CRS84`;function v(Q,N){return O.apply(this,arguments)}function O(){return(O=(0,c.Z)(function*(Q,N,z={},V=5){const{links:ne}=Q,oe=q(ne,"items","application/geo+json")||q(ne,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,U.Wi)(oe))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:re}=yield(0,S.default)(oe.href,{signal:z.signal,query:fe(ce({limit:V},z.customParameters),{token:z.apiKey}),headers:{accept:"application/geo+json"}});yield(0,_.O3)(re);const ae=(0,_.my)(re,{geometryType:N.geometryType}),ue=N.fields||ae.fields||[],Re=null!=N.hasZ?N.hasZ:ae.hasZ,ge=ae.geometryType,_e=N.objectIdField||ae.objectIdFieldName||"OBJECTID";let le=N.timeInfo;const pe=ue.find(({name:ie})=>ie===_e);if(pe)pe.editable=!1,pe.nullable=!1;else{if(!ae.objectIdFieldType)throw new W.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");ue.unshift({name:_e,alias:_e,type:"number"===ae.objectIdFieldType?"esriFieldTypeOID":"esriFieldTypeString",editable:!1,nullable:!1})}if(_e!==ae.objectIdFieldName){const ie=ue.find(({name:se})=>se===ae.objectIdFieldName);ie&&(ie.type="esriFieldTypeInteger")}ue===ae.fields&&ae.unknownFields.length>0&&x.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:ae.unknownFields}});for(const ie of ue){if(null==ie.name&&(ie.name=ie.alias),null==ie.alias&&(ie.alias=ie.name),"esriFieldTypeOID"!==ie.type&&"esriFieldTypeGlobalID"!==ie.type&&(ie.editable=null==ie.editable||!!ie.editable,ie.nullable=null==ie.nullable||!!ie.nullable),!ie.name)throw new W.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:ie});if(!M.v.jsonValues.includes(ie.type))throw new W.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${ie.name}"`,{field:ie})}if(le){const ie=new E.Z(ue);if(le.startTimeField){const se=ie.get(le.startTimeField);se?(le.startTimeField=se.name,se.type="esriFieldTypeDate"):le.startTimeField=null}if(le.endTimeField){const se=ie.get(le.endTimeField);se?(le.endTimeField=se.name,se.type="esriFieldTypeDate"):le.endTimeField=null}if(le.trackIdField){const se=ie.get(le.trackIdField);se?le.trackIdField=se.name:(le.trackIdField=null,x.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:le}}))}le.startTimeField||le.endTimeField||(x.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:le}}),le=null)}return{drawingInfo:ge?(0,f.bU)(ge):null,extent:ee(Q),geometryType:ge,fields:ue,hasZ:!!Re,objectIdField:_e,timeInfo:le}})).apply(this,arguments)}function C(Q){return u.apply(this,arguments)}function u(){return(u=(0,c.Z)(function*(Q,N={}){const{links:z}=Q,V=q(z,"data","application/json")||q(z,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,U.Wi)(V))throw new W.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:ne,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)(V.href,{signal:re,headers:{accept:"application/json"},query:fe(ce({},oe),{token:ne})});return ae})).apply(this,arguments)}function D(Q){return g.apply(this,arguments)}function g(){return(g=(0,c.Z)(function*(Q,N={}){const{links:z}=Q,V=q(z,"conformance","application/json")||q(z,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,U.Wi)(V))throw new W.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:ne,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)(V.href,{signal:re,headers:{accept:"application/json"},query:fe(ce({},oe),{token:ne})});return ae})).apply(this,arguments)}function j(Q){return P.apply(this,arguments)}function P(){return(P=(0,c.Z)(function*(Q,N={}){const{apiKey:z,customParameters:V,signal:ne}=N,{data:oe}=yield(0,S.default)(Q,{signal:ne,headers:{accept:"application/json"},query:fe(ce({},V),{token:z})});return oe})).apply(this,arguments)}function b(Q){return G.apply(this,arguments)}function G(){return(G=(0,c.Z)(function*(Q,N={}){const z="application/vnd.oai.openapi+json;version=3.0",V=q(Q.links,"service-desc",z);if((0,U.Wi)(V))return x.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:ne,customParameters:oe,signal:re}=N,{data:ae}=yield(0,S.default)(V.href,{signal:re,headers:{accept:z},query:fe(ce({},oe),{token:ne})});return ae})).apply(this,arguments)}function K(Q){var ne;const N=null==(ne=new RegExp("^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$","i").exec(Q))?void 0:ne.groups;if(!N)return null;const{authority:z,code:V}=N;switch(z.toLowerCase()){case"ogc":switch(V.toLowerCase()){case"crs27":return h.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return h.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const oe=Number.parseInt(V,10);return Number.isNaN(oe)?null:oe}default:return null}}function Y(Q,N,z){return B.apply(this,arguments)}function B(){return(B=(0,c.Z)(function*(Q,N,z){const V=yield L(Q,N,z);return(0,Z.cn)(V)})).apply(this,arguments)}function L(Q,N,z){return p.apply(this,arguments)}function p(){return(p=(0,c.Z)(function*(Q,N,z){const{collection:V,layerDefinition:ne,maxRecordCount:oe,queryParameters:{apiKey:re,customParameters:ae},spatialReference:ue,supportedCrs:Re}=Q,{links:ge}=V,_e=q(ge,"items","application/geo+json")||q(ge,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,U.Wi)(_e))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:le,num:pe,start:ie,timeExtent:se,where:de}=N;if(N.objectIds)throw new W.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const ye=h.Z.fromJSON(ue),Ee=(0,U.Pt)(N.outSpatialReference,ye),me=Ee.isWGS84?null:R(Ee,Re),Oe=k(le,Re),je=H(se),Ce=X(de),he=null!=pe?pe:null!=ie&&void 0!==ie?10:oe,{data:Me}=yield(0,S.default)(_e.href,fe(ce({},z),{query:fe(ce(ce({},ae),Oe),{crs:me,datetime:je,query:Ce,limit:he,startindex:ie,token:re}),headers:{accept:"application/geo+json"}}));let Pe=!1;Me.links&&(Pe=!!Me.links.find(be=>"next"===be.rel)),!Pe&&Number.isInteger(Me.numberMatched)&&Number.isInteger(Me.numberReturned)&&(Pe=Me.numberReturned<Me.numberMatched);const{fields:Ie,geometryType:De,hasZ:Ae,objectIdField:Le}=ne,Ue=(0,_.lG)(Me,{geometryType:De,hasZ:Ae,objectIdField:Le});if(!me&&Ee.isWebMercator)for(const xe of Ue)if((0,U.pC)(xe.geometry)&&null!=De){const be=(0,Z.di)(xe.geometry,De,Ae,!1);be.spatialReference=h.Z.WGS84,xe.geometry=(0,Z.GH)((0,A.iV)(be,Ee))}for(const xe of Ue)xe.objectId=xe.attributes[Le];const Se=me||!me&&Ee.isWebMercator?Ee.toJSON():T.Zn,Te=new y.Z;return Te.exceededTransferLimit=Pe,Te.features=Ue,Te.fields=Ie,Te.geometryType=De,Te.hasZ=Ae,Te.objectIdFieldName=Le,Te.spatialReference=Se,Te})).apply(this,arguments)}function R(Q,N){var oe,re,ae;const{isWebMercator:z,wkid:V}=Q;if(!V)return null;const ne=z?null!=(ae=null!=(re=null!=(oe=N[3857])?oe:N[102100])?re:N[102113])?ae:N[900913]:N[Q.wkid];return ne?`${l}${ne}`:null}function F(Q){if((0,U.Wi)(Q))return"";const{xmin:N,ymin:z,xmax:V,ymax:ne}=Q;return`${N},${z},${V},${ne}`}function H(Q){if((0,U.Wi)(Q))return null;const{start:N,end:z}=Q;return`${(0,U.pC)(N)?N.toISOString():".."}/${(0,U.pC)(z)?z.toISOString():".."}`}function X(Q){return(0,U.Wi)(Q)||!Q||"1=1"===Q?null:Q}function k(Q,N){if(!function $(Q){return(0,U.pC)(Q)&&"extent"===Q.type}(Q))return null;const{spatialReference:z}=Q;if(!z||z.isWGS84)return{bbox:F(Q)};const V=R(z,N);return(0,U.pC)(V)?{bbox:F(Q),"bbox-crs":V}:z.isWebMercator?{bbox:F((0,A.iV)(Q,h.Z.WGS84))}:null}function ee(Q){var ae;const N=null==(ae=Q.extent)?void 0:ae.spatial;if(!N)return null;const z=N.bbox[0],V=4===z.length;return{xmin:z[0],ymin:z[1],xmax:V?z[2]:z[3],ymax:V?z[3]:z[4],zmin:V?void 0:z[2],zmax:V?void 0:z[5],spatialReference:h.Z.WGS84.toJSON()}}function q(Q,N,z){return Q.find(V=>V.rel===N&&V.type===z)||Q.find(V=>V.rel===N&&!V.type)}},14772:(te,J,n)=>{n.d(J,{R:()=>M});var c=n(17626),I=n(14517),S=n(80542),W=n(62208),w=n(95737),U=n(77712),Z=(n(90912),n(85931),n(76898)),y=n(13812),_=n(59990),f=n(13410);const E={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let M=class extends((0,S.p)(I.Z)){constructor(h){super(h),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const h=this.visibleSublayers.map(x=>{const l=(0,_.f)(this.floors,x);return x.toExportImageJSON(l)});return h.length?JSON.stringify(h):null}get hasDynamicLayers(){return this.layer&&(0,f.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(h){this._get("layer")!==h&&(this._set("layer",h),this.handles.remove("layer"),h&&this.handles.add([h.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),h.on("sublayer-update",x=>this.notifyChange(E[x.propertyName]))],"layer"))}get layers(){const h=this.visibleSublayers;return h?h.length?"show:"+h.map(x=>x.id).join(","):"show:-1":null}get layerDefs(){var l;const h=!(null==(l=this.floors)||!l.length),x=this.visibleSublayers.filter(m=>null!=m.definitionExpression||h&&null!=m.floorInfo);return x.length?JSON.stringify(x.reduce((m,v)=>{const O=(0,_.f)(this.floors,v),C=(0,w._)(O,v.definitionExpression);return(0,W.pC)(C)&&(m[v.id]=C),m},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const h=this.layer;return h&&(h.commitProperty("dpi"),h.commitProperty("imageFormat"),h.commitProperty("imageTransparency"),h.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const h=[];if(!this.layer)return h;const x=this.layer.sublayers,l=v=>{const O=this.scale;v.visible&&(0===O||(0===v.minScale||O<=v.minScale)&&(0===v.maxScale||O>=v.maxScale))&&(v.sublayers?v.sublayers.forEach(l):h.unshift(v))};x&&x.forEach(l);const m=this._get("visibleSublayers");return!m||m.length!==h.length||m.some((v,O)=>h[O]!==v)?h:m}toJSON(){const h=this.layer;let x={dpi:h.dpi,format:h.imageFormat,transparent:h.imageTransparency,gdbVersion:h.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?x.dynamicLayers=this.dynamicLayers:x=fe(ce({},x),{layers:this.layers,layerDefs:this.layerDefs}),x}};(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"dynamicLayers",null),(0,c._)([(0,U.Cb)()],M.prototype,"floors",void 0),(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"hasDynamicLayers",null),(0,c._)([(0,U.Cb)()],M.prototype,"layer",null),(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"layers",null),(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"layerDefs",null),(0,c._)([(0,U.Cb)({type:Number})],M.prototype,"scale",void 0),(0,c._)([(0,U.Cb)(y.qG)],M.prototype,"timeExtent",void 0),(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"version",null),(0,c._)([(0,U.Cb)({readOnly:!0})],M.prototype,"visibleSublayers",null),M=(0,c._)([(0,Z.j)("esri.layers.mixins.ExportImageParameters")],M)},51920:(te,J,n)=>{n.d(J,{j:()=>Z});var c=n(17626),I=n(14517),S=n(80542),W=n(77712),T=(n(90912),n(85931),n(76898));const A={visible:"visibleSublayers"};let Z=class extends((0,S.p)(I.Z)){constructor(y){super(y),this.scale=0}set layer(y){this._get("layer")!==y&&(this._set("layer",y),this.handles.remove("layer"),y&&this.handles.add([y.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),y.on("wms-sublayer-update",_=>this.notifyChange(A[_.propertyName]))],"layer"))}get layers(){return this.visibleSublayers.filter(({name:y})=>y).map(({name:y})=>y).join()}get version(){this.commitProperty("layers");const y=this.layer;return y&&y.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:y,scale:_}=this,f=null==y?void 0:y.sublayers,E=[],M=h=>{const{minScale:x,maxScale:l,sublayers:m,visible:v}=h;v&&(0===_||(0===x||_<=x)&&(0===l||_>=l))&&(m?m.forEach(M):E.push(h))};return null==f||f.forEach(M),E}toJSON(){const{layer:y,layers:_}=this,{imageFormat:f,imageTransparency:E,version:M}=y;return{format:f,request:"GetMap",service:"WMS",styles:"",transparent:E?"TRUE":"FALSE",version:M,layers:_}}};(0,c._)([(0,W.Cb)()],Z.prototype,"layer",null),(0,c._)([(0,W.Cb)({readOnly:!0})],Z.prototype,"layers",null),(0,c._)([(0,W.Cb)({type:Number})],Z.prototype,"scale",void 0),(0,c._)([(0,W.Cb)({readOnly:!0})],Z.prototype,"version",null),(0,c._)([(0,W.Cb)({readOnly:!0})],Z.prototype,"visibleSublayers",null),Z=(0,c._)([(0,T.j)("esri.layers.support.ExportWMSImageParameters")],Z)},74711:(te,J,n)=>{n.d(J,{W:()=>Z});var c=n(15861),I=n(24263),S=n(84792),W=n(62208),w=n(10699),U=n(80415),T=n(84687),A=n(55463);class Z{constructor(_,f,E,M){var x;this._parsedUrl=_,this._portalItem=f,this._apiKey=E,this.signal=M,this._rootDocument=null;const h=null==(x=this._parsedUrl)?void 0:x.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);h&&(this._urlParts={root:h[1],layerId:parseInt(h[2],10)})}fetch(){var _=this;return(0,c.Z)(function*(){var M;if(!_._urlParts)return null;const f=null!=(M=_._portalItem)?M:yield _._portalItemFromServiceItemId();if((0,W.Wi)(f))return _._loadFromUrl();const E=yield _._findAndLoadRelatedPortalItem(f);return(0,W.Wi)(E)?null:_._loadFeatureLayerFromPortalItem(E)})()}fetchPortalItem(){var _=this;return(0,c.Z)(function*(){var E;if(!_._urlParts)return null;const f=null!=(E=_._portalItem)?E:yield _._portalItemFromServiceItemId();return(0,W.Wi)(f)?null:_._findAndLoadRelatedPortalItem(f)})()}_fetchRootDocument(){var _=this;return(0,c.Z)(function*(){if((0,W.pC)(_._rootDocument))return _._rootDocument;if((0,W.Wi)(_._urlParts))return _._rootDocument={},{};const f={query:{f:"json",token:_._apiKey},responseType:"json",signal:_.signal},E=`${_._urlParts.root}/SceneServer`;try{const M=yield(0,S.default)(E,f);_._rootDocument=M.data}catch(M){_._rootDocument={}}return _._rootDocument})()}_fetchServiceOwningPortalUrl(){var _=this;return(0,c.Z)(function*(){var h,x;const f=null==(h=_._parsedUrl)?void 0:h.path,E=f?null==(x=I.id)?void 0:x.findServerInfo(f):null;if(null!=E&&E.owningSystemUrl)return E.owningSystemUrl;const M=f?f.replace(/(.*\/rest)\/.*/i,"$1")+"/info":null;try{const l=(yield(0,S.default)(M,{query:{f:"json"},responseType:"json",signal:_.signal})).data.owningSystemUrl;if(l)return l}catch(l){(0,w.r9)(l)}return null})()}_findAndLoadRelatedPortalItem(_){var f=this;return(0,c.Z)(function*(){try{return(yield _.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:f.signal})).find(E=>"Feature Service"===E.type)||null}catch(E){return(0,w.r9)(E),null}})()}_loadFeatureLayerFromPortalItem(_){var f=this;return(0,c.Z)(function*(){var M;yield _.load({signal:f.signal});const E=yield f._findMatchingAssociatedSublayerUrl(null!=(M=_.url)?M:"");return new U.default({url:E,portalItem:_}).load({signal:f.signal})})()}_loadFromUrl(){var _=this;return(0,c.Z)(function*(){var E;const f=yield _._findMatchingAssociatedSublayerUrl(`${null==(E=_._urlParts)?void 0:E.root}/FeatureServer`);return new U.default({url:f}).load({signal:_.signal})})()}_findMatchingAssociatedSublayerUrl(_){var f=this;return(0,c.Z)(function*(){var u;const E=_.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),M={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:f.signal},h=null==(u=f._urlParts)?void 0:u.layerId,x=f._fetchRootDocument(),l=(0,S.default)(E,M),[m,v]=yield Promise.all([l,x]),O=v&&v.layers,C=m.data&&m.data.layers;if(!Array.isArray(C))throw new Error("expected layers array");if(Array.isArray(O)){for(let D=0;D<Math.min(O.length,C.length);D++)if(O[D].id===h)return`${E}/${C[D].id}`}else if(null!=h&&h<C.length)return`${E}/${C[h].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var _=this;return(0,c.Z)(function*(){const f=(yield _._fetchRootDocument()).serviceItemId;if(!f)return null;const E=new A.default({id:f,apiKey:_._apiKey}),M=yield _._fetchServiceOwningPortalUrl();(0,W.pC)(M)&&(E.portal=new T.Z({url:M}));try{return E.load({signal:_.signal})}catch(h){return(0,w.r9)(h),null}})()}}},17732:(te,J,n)=>{n.d(J,{L:()=>f});var c=n(17626),I=n(14517),S=n(62208),W=n(77712),T=(n(90912),n(85931),n(76898)),A=n(37118),Z=n(55915),y=n(65401),_=n(65629);let f=class extends I.Z{constructor(E){super(E)}get bounds(){const E=this.coords;return(0,S.Wi)(E)||(0,S.Wi)(E.extent)?null:(0,y.oJ)(E.extent)}get coords(){var M;const E=null==(M=(0,S.Wg)(this.element.georeference))?void 0:M.coords;return(0,Z.dz)(E,this.spatialReference).geometry}get normalizedCoords(){return A.Z.fromJSON((0,_.Ui)(this.coords))}get normalizedBounds(){const E=(0,S.pC)(this.normalizedCoords)?this.normalizedCoords.extent:null;return(0,S.pC)(E)?(0,y.oJ)(E):null}};(0,c._)([(0,W.Cb)()],f.prototype,"spatialReference",void 0),(0,c._)([(0,W.Cb)()],f.prototype,"element",void 0),(0,c._)([(0,W.Cb)()],f.prototype,"bounds",null),(0,c._)([(0,W.Cb)()],f.prototype,"coords",null),(0,c._)([(0,W.Cb)()],f.prototype,"normalizedCoords",null),(0,c._)([(0,W.Cb)()],f.prototype,"normalizedBounds",null),f=(0,c._)([(0,T.j)("esri.layers.support.MediaElementView")],f)},28930:(te,J,n)=>{n.d(J,{y:()=>j});var g,c=n(15861),I=n(17626),S=n(84792),W=n(14517),w=n(27306),U=n(26584),T=n(80542),A=n(63290),Z=n(93961),y=n(77029),_=n(10699),f=n(32917),E=n(50618),M=n(21726),h=n(77712),x=n(66656),l=n(85931),m=n(76898),v=n(68511),O=n(58817);class C{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(b,G){if("unknown"!==this._allAvailability)return this._allAvailability;const K=(b-this.location.top)*this.location.width+(G-this.location.left),B=K>>3,L=this._tileAvailabilityBitSet;return B<0||B>L.length?"unknown":L[B]&1<<K%8?"available":"unavailable"}_updateFromData(b){let Y=!0,B=!0;const L=Math.ceil(this.location.width*this.location.height/8),p=new Uint8Array(L);let $=0;for(let R=0;R<b.length;R++){const F=R%8;b[R]?(B=!1,p[$]|=1<<F):Y=!1,7===F&&++$}B?this._allAvailability="unavailable":Y?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=p,this.byteSize+=p.length)}static fromDefinition(b,G){const K=b.service.request||S.default,{row:Y,col:B,width:L,height:p}=b,$={query:{f:"json"}};return G=G?ce(ce({},$),G):$,K(function D(P){let b;if("vector-tile"===P.service.type)b=`${P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`;else{const K=P.service.tileServers;b=`${K&&K.length?K[P.row%K.length]:P.service.url}/tilemap/${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}const G=P.service.query;return G&&(b=`${b}?${G}`),b}(b),G).then(R=>R.data).catch(R=>{if(R&&R.details&&422===R.details.httpStatus)return{location:{top:Y,left:B,width:L,height:p},valid:!0,data:(0,l.a9)(L*p,0)};throw R}).then(R=>{if(R.location&&(R.location.top!==Y||R.location.left!==B||R.location.width!==L||R.location.height!==p))throw new U.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:R,definition:{top:Y,left:B,width:L,height:p}});return C.fromJSON(R)})}static fromJSON(b){C._validateJSON(b);const G=new C;return G.location=Object.freeze((0,O.d9)(b.location)),G._updateFromData(b.data),Object.freeze(G)}static _validateJSON(b){if(!b||!b.location)throw new U.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===b.valid)throw new U.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!b.data)throw new U.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(b.data))throw new U.Z("tilemap:data-mismatch","Data must be an array of numbers");if(b.data.length!==b.location.width*b.location.height)throw new U.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function u(P){return`${P.level}/${P.row}/${P.col}/${P.width}/${P.height}`}let j=g=class extends((0,T.p)(W.Z)){constructor(P){super(P),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*w.Y8.MEGABYTES,this.request=S.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new Z.Z(this.cacheByteSize),this.addHandles([(0,f.YP)(()=>{const{layer:P}=this;return[null==P?void 0:P.parsedUrl,null==P?void 0:P.tileServers,null==P?void 0:P.apiKey,null==P?void 0:P.customParameters]},()=>this._initializeTilemapDefinition()),(0,f.YP)(()=>{var P,b;return null==(b=null==(P=this.layer)?void 0:P.tileInfo)?void 0:b.lods},P=>this._initializeAvailableLevels(P),f.tX)]),this._initializeTilemapDefinition()}castLevels(P){return P<=2?(A.Z.getLogger(this.declaredClass).error("Minimum levels for Tilemap is 3, but got ",P),3):P}get size(){return 1<<this.levels}fetchTilemap(P,b,G,K){if(!this._availableLevels[P])return Promise.reject(new U.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`));const Y=this._tmpTilemapDefinition,B=this._tilemapFromCache(P,b,G,Y);if(B)return Promise.resolve(B);const L=K&&K.signal;return K=fe(ce({},K),{signal:null}),new Promise((p,$)=>{(0,_.fu)(L,()=>$((0,_.zE)()));const R=u(Y);let F=this._pendingTilemapRequests[R];if(!F){F=C.fromDefinition(Y,K).then(X=>(this._tilemapCache.put(R,X,X.byteSize),X));const H=()=>delete this._pendingTilemapRequests[R];this._pendingTilemapRequests[R]=F,F.then(H,H)}F.then(p,$)})}getAvailability(P,b,G){if(!this._availableLevels[P])return"unavailable";const K=this._tilemapFromCache(P,b,G,this._tmpTilemapDefinition);return K?K.getAvailability(b,G):"unknown"}fetchAvailability(P,b,G,K){return this._availableLevels[P]?this.fetchTilemap(P,b,G,K).catch(Y=>Y).then(Y=>{if(Y instanceof C){const B=Y.getAvailability(b,G);if("unavailable"===B)throw new U.Z("tile-map:tile-unavailable","Tile is not available",{level:P,row:b,col:G});return B}if((0,_.D_)(Y))throw Y;return"unknown"}):Promise.reject(new U.Z("tilemap-cache:level-unavailable",`Level ${P} is unavailable in the service`))}fetchAvailabilityUpsample(P,b,G,K,Y){K.level=P,K.row=b,K.col=G;const B=this.layer.tileInfo;B.updateTileInfo(K);const L=this.fetchAvailability(P,b,G,Y).catch(p=>{if((0,_.D_)(p))throw p;if(B.upsampleTile(K))return this.fetchAvailabilityUpsample(K.level,K.row,K.col,K);throw p});return this._fetchAvailabilityUpsamplePrefetch(K.id,P,b,G,Y,L),L}_fetchAvailabilityUpsamplePrefetch(P,b,G,K,Y,B){var L=this;return(0,c.Z)(function*(){if(!L._prefetchingEnabled||null==P)return;const p=`prefetch-${P}`;if(L.handles.has(p))return;const $=new AbortController;B.then(()=>$.abort(),()=>$.abort());let R=!1;if(L.handles.add({remove(){R||(R=!0,$.abort())}},p),yield(0,E.MU)(10,$.signal).catch(()=>{}),R||(R=!0,L.handles.remove(p)),(0,_.Hc)($))return;const H=new v.f(P,b,G,K),X=fe(ce({},Y),{signal:$.signal}),k=L.layer.tileInfo;for(let ee=0;g._prefetches.length<g._maxPrefetch&&k.upsampleTile(H);++ee){const q=L.fetchAvailability(H.level,H.row,H.col,X);g._prefetches.push(q);const Q=()=>{g._prefetches.removeUnordered(q)};q.then(Q,Q)}})()}_initializeTilemapDefinition(){var K;if(!this.layer.parsedUrl)return;const{parsedUrl:P,apiKey:b,customParameters:G}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:P.path,query:(0,M.B7)(fe(ce(ce({},P.query),G),{token:null!=b?b:null==(K=P.query)?void 0:K.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(P,b,G,K){K.level=P,K.row=b-b%this.size,K.col=G-G%this.size;const Y=u(K);return this._tilemapCache.get(Y)}_initializeAvailableLevels(P){this._availableLevels={},P&&P.forEach(b=>this._availableLevels[b.level]=!0)}get test(){const P=this;return{get prefetchingEnabled(){return P._prefetchingEnabled},set prefetchingEnabled(b){P._prefetchingEnabled=b},hasTilemap:(b,G,K)=>!!P._tilemapFromCache(b,G,K,P._tmpTilemapDefinition)}}};j._maxPrefetch=4,j._prefetches=new y.Z({initialSize:g._maxPrefetch}),(0,I._)([(0,h.Cb)({constructOnly:!0,type:Number})],j.prototype,"levels",void 0),(0,I._)([(0,x.p)("levels")],j.prototype,"castLevels",null),(0,I._)([(0,h.Cb)({readOnly:!0,type:Number})],j.prototype,"size",null),(0,I._)([(0,h.Cb)({constructOnly:!0,type:Number})],j.prototype,"cacheByteSize",void 0),(0,I._)([(0,h.Cb)({constructOnly:!0})],j.prototype,"layer",void 0),(0,I._)([(0,h.Cb)({constructOnly:!0})],j.prototype,"request",void 0),j=g=(0,I._)([(0,m.j)("esri.layers.support.TilemapCache")],j)},51026:(te,J,n)=>{n.d(J,{d:()=>S,h:()=>I});var c=n(2584);const I={type:c.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:S}}}}};function S(W,w,U,T){if(!W)return null;const{minScale:A,maxScale:Z,minLOD:y,maxLOD:_}=w;if(null!=y&&null!=_)return c.Z.fromJSON(T&&T.ignoreMinMaxLOD?W:fe(ce({},W),{lods:W.lods.filter(({level:f})=>null!=f&&f>=y&&f<=_)}));if(0!==A&&0!==Z){const f=h=>Math.round(1e4*h)/1e4,E=A?f(A):1/0,M=Z?f(Z):-1/0;return c.Z.fromJSON(fe(ce({},W),{lods:W.lods.filter(h=>{const x=f(h.scale);return x<=E&&x>=M})}))}return c.Z.fromJSON(W)}},72581:(te,J,n)=>{n.d(J,{IJ:()=>_,m5:()=>h,vB:()=>l,w7:()=>E});var c=n(15861),I=n(84792),S=n(62208),W=n(21726),w=n(91179),U=n(93555),T=n(76391),A=n(61515);const Z="Layer does not support extent calculation.";function _(v,O,C,u){return f.apply(this,arguments)}function f(){return(f=(0,c.Z)(function*(v,O,C,u){const D=yield m(v,O,"json",u);return(0,A.p)(O,C,D.data),D})).apply(this,arguments)}function E(v,O,C){return M.apply(this,arguments)}function M(){return(M=(0,c.Z)(function*(v,O,C){return(0,S.pC)(O.timeExtent)&&O.timeExtent.isEmpty?{data:{objectIds:[]}}:m(v,O,"json",C,{returnIdsOnly:!0})})).apply(this,arguments)}function h(v,O,C){return x.apply(this,arguments)}function x(){return(x=(0,c.Z)(function*(v,O,C){return(0,S.pC)(O.timeExtent)&&O.timeExtent.isEmpty?{data:{count:0,extent:null}}:m(v,O,"json",C,{returnExtentOnly:!0,returnCountOnly:!0}).then(u=>{const D=u.data;if(D.hasOwnProperty("extent"))return u;if(D.features)throw new Error(Z);if(D.hasOwnProperty("count"))throw new Error(Z);return u})})).apply(this,arguments)}function l(v,O,C){return(0,S.pC)(O.timeExtent)&&O.timeExtent.isEmpty?Promise.resolve({data:{count:0}}):m(v,O,"json",C,{returnIdsOnly:!0,returnCountOnly:!0})}function m(v,O,C,u={},D={}){const g="string"==typeof v?(0,W.mN)(v):v,j=O.geometry?[O.geometry]:[];return u.responseType="pbf"===C?"array-buffer":"json",(0,U.aX)(j,null,u).then(P=>{const b=P&&P[0];(0,S.pC)(b)&&((O=O.clone()).geometry=b);const G=(0,T.A)(ce(ce(fe(ce({},g.query),{f:C}),D),function y(v,O){var g,j;const C=v.geometry,u=v.toJSON(),D=u;if((0,S.pC)(C)&&(D.geometry=JSON.stringify(C),D.geometryType=(0,w.Ji)(C),D.inSR=C.spatialReference.wkid||JSON.stringify(C.spatialReference)),null!=(g=u.topFilter)&&g.groupByFields&&(D.topFilter.groupByFields=u.topFilter.groupByFields.join(",")),null!=(j=u.topFilter)&&j.orderByFields&&(D.topFilter.orderByFields=u.topFilter.orderByFields.join(",")),u.topFilter&&(D.topFilter=JSON.stringify(D.topFilter)),u.objectIds&&(D.objectIds=u.objectIds.join(",")),u.orderByFields&&(D.orderByFields=u.orderByFields.join(",")),u.outFields&&!((null==O?void 0:O.returnCountOnly)||(null==O?void 0:O.returnExtentOnly)||(null==O?void 0:O.returnIdsOnly))?D.outFields=u.outFields.includes("*")?"*":u.outFields.join(","):delete D.outFields,u.outSR?D.outSR=u.outSR.wkid||JSON.stringify(u.outSR):C&&u.returnGeometry&&(D.outSR=D.inSR),u.returnGeometry&&delete u.returnGeometry,u.timeExtent){const P=u.timeExtent,{start:b,end:G}=P;null==b&&null==G||(D.time=b===G?b:`${null!=b?b:"null"},${null!=G?G:"null"}`),delete u.timeExtent}return D}(O,D)));return(0,I.default)((0,W.v_)(g.path,"queryTopFeatures"),fe(ce({},u),{query:ce(ce({},G),u.query)}))})}},43289:(te,J,n)=>{function U(y){return function W(y,_){return(y%=_)>=0?y:y+_}(.7111111111111111*y,256)}n.d(J,{s5:()=>U}),Math,Math},46519:(te,J,n)=>{n.d(J,{z:()=>E});var c=n(7547),I=n(39351);function S(M,h){return M.x===h.x&&M.y===h.y}function w(M,h){return M.x=h.y,M.y=-h.x,M}function U(M,h){return M.x=-h.y,M.y=h.x,M}function T(M,h){return M.x=h.x,M.y=h.y,M}function A(M,h){return M.x=-h.x,M.y=-h.y,M}function Z(M){return Math.sqrt(M.x*M.x+M.y*M.y)}function y(M,h){return M.x*h.y-M.y*h.x}function _(M,h){return M.x*h.x+M.y*h.y}function f(M,h,x,l){return M.x=h.x*x+h.y*l,M.y=h.x*l-h.y*x,M}class E{constructor(h,x,l){this._writeVertex=h,this._writeTriangle=x,this._canUseThinTessellation=l,this._prevNormal={x:void 0,y:void 0},this._nextNormal={x:void 0,y:void 0},this._textureNormalLeft={x:0,y:1},this._textureNormalRight={x:0,y:-1},this._textureNormal={x:void 0,y:void 0},this._joinNormal={x:void 0,y:void 0},this._inner={x:void 0,y:void 0},this._outer={x:void 0,y:void 0},this._roundStart={x:void 0,y:void 0},this._roundEnd={x:void 0,y:void 0},this._startBreak={x:void 0,y:void 0},this._endBreak={x:void 0,y:void 0},this._innerPrev={x:void 0,y:void 0},this._innerNext={x:void 0,y:void 0},this._bevelStart={x:void 0,y:void 0},this._bevelEnd={x:void 0,y:void 0},this._bevelMiddle={x:void 0,y:void 0}}tessellate(h,x){(function W(M){if(!M)return;const h=M.length;if(h<=1)return;let x=0;for(let l=1;l<h;l++)S(M[l],M[x])||++x===l||(M[x]=M[l]);M.length=x+1})(h),this._canUseThinTessellation&&x.halfWidth<I.tQ&&!x.offset?this._tessellateThin(h,x):this._tessellate(h,x)}_tessellateThin(h,x){if(h.length<2)return;const l=x.wrapDistance||65535;let m=x.initialDistance||0,v=!1,O=h[0].x,C=h[0].y;const u=h.length;for(let D=1;D<u;++D){v&&(v=!1,m=0);let g=h[D].x,j=h[D].y,P=g-O,b=j-C,G=Math.sqrt(P*P+b*b);if(P/=G,b/=G,m+G>l){v=!0;const p=(l-m)/G;G=l-m,g=(1-p)*O+p*g,j=(1-p)*C+p*j,--D}const K=this._writeVertex(O,C,0,0,P,b,b,-P,0,-1,m),Y=this._writeVertex(O,C,0,0,P,b,-b,P,0,1,m);m+=G;const B=this._writeVertex(g,j,0,0,P,b,b,-P,0,-1,m),L=this._writeVertex(g,j,0,0,P,b,-b,P,0,1,m);this._writeTriangle(K,Y,B),this._writeTriangle(Y,B,L),O=g,C=j}}_tessellate(h,x){const m=h[h.length-1],v=S(h[0],m);if(h.length<(v?3:2))return;const C=x.pixelCoordRatio,u=null!=x.capType?x.capType:c.RL.BUTT,D=null!=x.joinType?x.joinType:c.AH.MITER,g=null!=x.miterLimit?Math.min(x.miterLimit,4):2,j=null!=x.roundLimit?Math.min(x.roundLimit,1.05):1.05,P=null!=x.halfWidth?x.halfWidth:2,b=!!x.textured;let G,K,Y,B=null;const L=this._prevNormal,p=this._nextNormal;let $=-1,R=-1;const F=this._joinNormal;let H,X;const k=this._textureNormalLeft,ee=this._textureNormalRight,q=this._textureNormal;let Q=-1,N=-1;const z=x.wrapDistance||65535;let V=x.initialDistance||0;const ne=this._writeVertex,oe=this._writeTriangle,re=(ue,Re,ge,_e,le,pe)=>{const ie=ne(K,Y,H,X,ge,_e,ue,Re,le,pe,V);return Q>=0&&N>=0&&ie>=0&&oe(Q,N,ie),Q=N,N=ie,ie};v&&(G=h[h.length-2],p.x=m.x-G.x,p.y=m.y-G.y,R=Z(p),p.x/=R,p.y/=R);let ae=!1;for(let ue=0;ue<h.length;++ue){if(ae&&(ae=!1,V=0),G&&(L.x=-p.x,L.y=-p.y,$=R,V+$>z&&(ae=!0)),ae){const se=(z-V)/$;$=z-V,G={x:(1-se)*G.x+se*h[ue].x,y:(1-se)*G.y+se*h[ue].y},--ue}else G=h[ue];K=G.x,Y=G.y;const Re=ue<=0&&!ae,ge=ue===h.length-1;if(Re||(V+=$),B=ge?v?h[1]:null:h[ue+1],B?(p.x=B.x-K,p.y=B.y-Y,R=Z(p),p.x/=R,p.y/=R):(p.x=void 0,p.y=void 0),!v){if(Re){U(F,p),H=F.x,X=F.y,u===c.RL.SQUARE&&(re(-p.y-p.x,p.x-p.y,p.x,p.y,0,-1),re(p.y-p.x,-p.x-p.y,p.x,p.y,0,1)),u===c.RL.ROUND&&(re(-p.y-p.x,p.x-p.y,p.x,p.y,-1,-1),re(p.y-p.x,-p.x-p.y,p.x,p.y,-1,1)),u!==c.RL.ROUND&&u!==c.RL.BUTT||(re(-p.y,p.x,p.x,p.y,0,-1),re(p.y,-p.x,p.x,p.y,0,1));continue}if(ge){w(F,L),H=F.x,X=F.y,u!==c.RL.ROUND&&u!==c.RL.BUTT||(re(L.y,-L.x,-L.x,-L.y,0,-1),re(-L.y,L.x,-L.x,-L.y,0,1)),u===c.RL.SQUARE&&(re(L.y-L.x,-L.x-L.y,-L.x,-L.y,0,-1),re(-L.y-L.x,L.x-L.y,-L.x,-L.y,0,1)),u===c.RL.ROUND&&(re(L.y-L.x,-L.x-L.y,-L.x,-L.y,1,-1),re(-L.y-L.x,L.x-L.y,-L.x,-L.y,1,1));continue}}let _e,le,pe=-y(L,p);if(Math.abs(pe)<.01)_(L,p)>0?(F.x=L.x,F.y=L.y,pe=1,_e=Number.MAX_VALUE,le=!0):(U(F,p),pe=1,_e=1,le=!1);else{F.x=(L.x+p.x)/pe,F.y=(L.y+p.y)/pe,_e=Z(F);const se=(_e-1)*P*C;le=_e>4||se>$&&se>R}H=F.x,X=F.y;let ie=D;switch(D){case c.AH.BEVEL:_e<1.05&&(ie=c.AH.MITER);break;case c.AH.ROUND:_e<j&&(ie=c.AH.MITER);break;case c.AH.MITER:_e>g&&(ie=c.AH.BEVEL)}switch(ie){case c.AH.MITER:if(re(F.x,F.y,-L.x,-L.y,0,-1),re(-F.x,-F.y,-L.x,-L.y,0,1),ge)break;if(b){const se=ae?0:V;Q=this._writeVertex(K,Y,H,X,p.x,p.y,F.x,F.y,0,-1,se),N=this._writeVertex(K,Y,H,X,p.x,p.y,-F.x,-F.y,0,1,se)}break;case c.AH.BEVEL:{const se=pe<0;let de,ye,Ee,me;if(se){const he=Q;Q=N,N=he,de=k,ye=ee}else de=ee,ye=k;if(le)Ee=se?U(this._innerPrev,L):w(this._innerPrev,L),me=se?w(this._innerNext,p):U(this._innerNext,p);else{const he=se?A(this._inner,F):T(this._inner,F);Ee=he,me=he}const Oe=se?w(this._bevelStart,L):U(this._bevelStart,L);re(Ee.x,Ee.y,-L.x,-L.y,de.x,de.y);const je=re(Oe.x,Oe.y,-L.x,-L.y,ye.x,ye.y);if(ge)break;const Ce=se?U(this._bevelEnd,p):w(this._bevelEnd,p);if(le){const he=this._writeVertex(K,Y,H,X,-L.x,-L.y,0,0,0,0,V);Q=this._writeVertex(K,Y,H,X,p.x,p.y,me.x,me.y,de.x,de.y,V),N=this._writeVertex(K,Y,H,X,p.x,p.y,Ce.x,Ce.y,ye.x,ye.y,V),this._writeTriangle(je,he,N)}else{if(b){const he=this._bevelMiddle;he.x=(Oe.x+Ce.x)/2,he.y=(Oe.y+Ce.y)/2,f(q,he,-L.x,-L.y),re(he.x,he.y,-L.x,-L.y,q.x,q.y),f(q,he,p.x,p.y),Q=this._writeVertex(K,Y,H,X,p.x,p.y,he.x,he.y,q.x,q.y,V),N=this._writeVertex(K,Y,H,X,p.x,p.y,me.x,me.y,de.x,de.y,V)}else{const he=Q;Q=N,N=he}re(Ce.x,Ce.y,p.x,p.y,ye.x,ye.y)}if(se){const he=Q;Q=N,N=he}break}case c.AH.ROUND:{const se=pe<0;let de,ye;if(se){const ve=Q;Q=N,N=ve,de=k,ye=ee}else de=ee,ye=k;const Ee=se?A(this._inner,F):T(this._inner,F);let me,Oe;le?(me=se?U(this._innerPrev,L):w(this._innerPrev,L),Oe=se?w(this._innerNext,p):U(this._innerNext,p)):(me=Ee,Oe=Ee);const je=se?w(this._roundStart,L):U(this._roundStart,L),Ce=se?U(this._roundEnd,p):w(this._roundEnd,p),he=re(me.x,me.y,-L.x,-L.y,de.x,de.y),Me=re(je.x,je.y,-L.x,-L.y,ye.x,ye.y);if(ge)break;const Pe=this._writeVertex(K,Y,H,X,-L.x,-L.y,0,0,0,0,V);le||this._writeTriangle(Q,N,Pe);const Ie=A(this._outer,Ee),De=this._writeVertex(K,Y,H,X,p.x,p.y,Ce.x,Ce.y,ye.x,ye.y,V);let Ae,Le;const Ue=_e>2;if(Ue){let ve;_e!==Number.MAX_VALUE?(Ie.x/=_e,Ie.y/=_e,ve=_(L,Ie),ve=(_e*(ve*ve-1)+1)/ve):ve=-1,Ae=se?w(this._startBreak,L):U(this._startBreak,L),Ae.x+=L.x*ve,Ae.y+=L.y*ve,Le=se?U(this._endBreak,p):w(this._endBreak,p),Le.x+=p.x*ve,Le.y+=p.y*ve}f(q,Ie,-L.x,-L.y);const Se=this._writeVertex(K,Y,H,X,-L.x,-L.y,Ie.x,Ie.y,q.x,q.y,V);f(q,Ie,p.x,p.y);const Te=b?this._writeVertex(K,Y,H,X,p.x,p.y,Ie.x,Ie.y,q.x,q.y,V):Se,xe=Pe,be=b?this._writeVertex(K,Y,H,X,p.x,p.y,0,0,0,0,V):Pe;let Be=-1,We=-1;if(Ue&&(f(q,Ae,-L.x,-L.y),Be=this._writeVertex(K,Y,H,X,-L.x,-L.y,Ae.x,Ae.y,q.x,q.y,V),f(q,Le,p.x,p.y),We=this._writeVertex(K,Y,H,X,p.x,p.y,Le.x,Le.y,q.x,q.y,V)),b?Ue?(this._writeTriangle(xe,Me,Be),this._writeTriangle(xe,Be,Se),this._writeTriangle(be,Te,We),this._writeTriangle(be,We,De)):(this._writeTriangle(xe,Me,Se),this._writeTriangle(be,Te,De)):Ue?(this._writeTriangle(Pe,Me,Be),this._writeTriangle(Pe,Be,We),this._writeTriangle(Pe,We,De)):(this._writeTriangle(Pe,Me,Se),this._writeTriangle(Pe,Te,De)),le?(Q=this._writeVertex(K,Y,H,X,p.x,p.y,Oe.x,Oe.y,de.x,de.y,V),N=De):(Q=b?this._writeVertex(K,Y,H,X,p.x,p.y,Oe.x,Oe.y,de.x,de.y,V):he,this._writeTriangle(Q,be,De),N=De),se){const ve=Q;Q=N,N=ve}break}}}}}},39406:(te,J,n)=>{var c,I,S,W,w,U,T,A;n.d(J,{LW:()=>c,X:()=>W,jx:()=>I,mD:()=>T,mf:()=>w}),(A=c||(c={}))[A.FILL=0]="FILL",A[A.LINE=1]="LINE",A[A.MARKER=2]="MARKER",A[A.TEXT=3]="TEXT",A[A.LABEL=4]="LABEL",function(A){A[A.NONE=0]="NONE",A[A.MAP=1]="MAP",A[A.LABEL=2]="LABEL",A[A.LABEL_ALPHA=4]="LABEL_ALPHA",A[A.HITTEST=8]="HITTEST",A[A.HIGHLIGHT=16]="HIGHLIGHT",A[A.CLIP=32]="CLIP",A[A.DEBUG=64]="DEBUG",A[A.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(I||(I={})),function(A){A[A.SIZE=0]="SIZE",A[A.COLOR=1]="COLOR",A[A.OPACITY=2]="OPACITY",A[A.ROTATION=3]="ROTATION"}(S||(S={})),function(A){A[A.NONE=0]="NONE",A[A.OPACITY=1]="OPACITY",A[A.COLOR=2]="COLOR",A[A.ROTATION=4]="ROTATION",A[A.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",A[A.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",A[A.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",A[A.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(W||(W={})),function(A){A[A.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",A[A.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",A[A.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",A[A.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(w||(w={})),function(A){A[A.SPRITE=0]="SPRITE",A[A.GLYPH=1]="GLYPH"}(U||(U={})),function(A){A[A.DEFAULT=0]="DEFAULT",A[A.SIMPLE=1]="SIMPLE",A[A.DOT_DENSITY=2]="DOT_DENSITY",A[A.OUTLINE_FILL=3]="OUTLINE_FILL",A[A.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",A[A.HEATMAP=5]="HEATMAP",A[A.PIE_CHART=6]="PIE_CHART"}(T||(T={}))},13112:(te,J,n)=>{n.d(J,{Z:()=>A});var c=n(17626),I=n(80542),S=n(77712),U=(n(90912),n(85931),n(76898));let T=class extends I.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const Z=this.get("tileStore.tileScheme.spatialReference");return Z&&Z.toJSON()||null}};(0,c._)([(0,S.Cb)({readOnly:!0})],T.prototype,"supportsTileUpdates",null),(0,c._)([(0,S.Cb)({constructOnly:!0})],T.prototype,"remoteClient",void 0),(0,c._)([(0,S.Cb)({constructOnly:!0})],T.prototype,"service",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"spatialReference",null),(0,c._)([(0,S.Cb)({constructOnly:!0})],T.prototype,"tileInfo",void 0),(0,c._)([(0,S.Cb)({constructOnly:!0})],T.prototype,"tileStore",void 0),T=(0,c._)([(0,U.j)("esri.views.2d.layers.features.processors.BaseProcessor")],T);const A=T},55376:(te,J,n)=>{function c(I,S,W,w){const U=I.clone(),T=1<<U.level,A=U.col+S,Z=U.row+W;return w&&A<0?(U.col=A+T,U.world-=1):A>=T?(U.col=A-T,U.world+=1):U.col=A,U.row=Z,U}n.d(J,{M:()=>c})},84378:(te,J,n)=>{n.d(J,{Z:()=>I});var c=n(27899);class I{constructor(){this.spans=[]}acquire(W){this.lodInfo=W}release(){this.lodInfo=null,this.spans.length=0}forEach(W,w){const{spans:U,lodInfo:T}=this,{level:A}=T;if(0!==U.length)for(const{row:Z,colFrom:y,colTo:_}of U)for(let f=y;f<=_;f++)W.call(w,A,Z,T.normalizeCol(f),T.getWorldForColumn(f))}}I.pool=new c.Z(I)},9598:(te,J,n)=>{n.d(J,{Z:()=>h});var c=n(37053),I=n(62208),S=n(58098);function W(x,l){return[x,l]}function w(x,l,m){return x[0]=l,x[1]=m,x}const T=new S.Z("0/0/0/0");class A{static create(l,m,v=null){const O=(0,c.C5)(l.spatialReference),C=m.origin||W(l.origin.x,l.origin.y),u=W(l.size[0]*m.resolution,l.size[1]*m.resolution),D=W(-1/0,-1/0),g=W(1/0,1/0),j=W(1/0,1/0);(0,I.pC)(v)&&(w(D,Math.max(0,Math.floor((v.xmin-C[0])/u[0])),Math.max(0,Math.floor((C[1]-v.ymax)/u[1]))),w(g,Math.max(0,Math.floor((v.xmax-C[0])/u[0])),Math.max(0,Math.floor((C[1]-v.ymin)/u[1]))),w(j,g[0]-D[0]+1,g[1]-D[1]+1));const{cols:P,rows:b}=m;let G,K,Y,B;return!v&&P&&b&&(w(D,P[0],b[0]),w(g,P[1],b[1]),w(j,P[1]-P[0]+1,b[1]-b[0]+1)),l.isWrappable?(G=W(Math.ceil(Math.round((O.valid[1]-O.valid[0])/m.resolution)/l.size[0]),j[1]),K=W(Math.floor((O.origin[0]-C[0])/u[0]),D[1]),Y=W(G[0]+K[0]-1,g[1]),B=!0):(K=D,Y=g,G=j,B=!1),new A(m.level,m.resolution,m.scale,C,D,g,j,u,K,Y,G,B)}constructor(l,m,v,O,C,u,D,g,j,P,b,G){this.level=l,this.resolution=m,this.scale=v,this.origin=O,this.first=C,this.last=u,this.size=D,this.norm=g,this.worldStart=j,this.worldEnd=P,this.worldSize=b,this.wrap=G}normalizeCol(l){if(!this.wrap)return l;const m=this.worldSize[0];return l<0?m-1-Math.abs((l+1)%m):l%m}denormalizeCol(l,m){return this.wrap?this.worldSize[0]*m+l:l}getWorldForColumn(l){return this.wrap?Math.floor(l/this.worldSize[0]):0}getFirstColumnForWorld(l){return l*this.worldSize[0]+this.first[0]}getLastColumnForWorld(l){return l*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(l){return(l-this.origin[0])/this.norm[0]}getXForColumn(l){return this.origin[0]+l*this.norm[0]}getRowForY(l){return(this.origin[1]-l)/this.norm[1]}getYForRow(l){return this.origin[1]-l*this.norm[1]}getTileBounds(l,m,v=!1){T.set(m);const O=v?T.col:this.denormalizeCol(T.col,T.world),C=T.row;return function U(x,l,m,v,O){x[0]=l,x[1]=m,x[2]=v,x[3]=O}(l,this.getXForColumn(O),this.getYForRow(C+1),this.getXForColumn(O+1),this.getYForRow(C)),l}getTileCoords(l,m,v=!1){T.set(m);const O=v?T.col:this.denormalizeCol(T.col,T.world);return Array.isArray(l)?w(l,this.getXForColumn(O),this.getYForRow(T.row)):(l.x=this.getXForColumn(O),l.y=this.getYForRow(T.row)),l}}var Z=n(84378);class y{constructor(l,m,v){this.row=l,this.colFrom=m,this.colTo=v}}const _=new S.Z("0/0/0/0");class f{static create(l,m){l[1]>m[1]&&([l,m]=[m,l]);const[v,O]=l,[C,u]=m,D=C-v,g=u-O,j=0!==g?D/g:0,P=(Math.ceil(O)-O)*j,b=(Math.floor(O)-O)*j;return new f(v,Math.floor(O),Math.ceil(u),j,D<0?P:b,D<0?b:P,D<0?C:v,D<0?v:C)}constructor(l,m,v,O,C,u,D,g){this.x=l,this.ymin=m,this.ymax=v,this.invM=O,this.leftAdjust=C,this.rightAdjust=u,this.leftBound=D,this.rightBound=g}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}const E=[[0,0],[0,0],[0,0],[0,0]];class h{constructor(l,m=null){this.tileInfo=l,this.fullExtent=m,this.scales=[],this._infoByScale={},this._infoByLevel={};const v=l.lods.slice();v.sort((C,u)=>u.scale-C.scale);const O=this._lodInfos=v.map(C=>A.create(l,C,m));v.forEach((C,u)=>{this._infoByLevel[C.level]=O[u],this._infoByScale[C.scale]=O[u],this.scales[u]=C.scale},this),this._wrap=l.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(l){return this._infoByLevel["number"==typeof l?l:l.level]}getTileBounds(l,m,v=!1){_.set(m);const O=this._infoByLevel[_.level];return O?O.getTileBounds(l,_,v):l}getTileCoords(l,m,v=!1){_.set(m);const O=this._infoByLevel[_.level];return O?O.getTileCoords(l,_,v):l}getTileCoverage(l,m=192,v="closest"){const O="closest"===v?this.getClosestInfoForScale(l.scale):this.getSmallestInfoForScale(l.scale),C=Z.Z.pool.acquire(O),u=this._wrap;let D,g,j,P=1/0,b=-1/0;const G=C.spans;E[0][0]=E[0][1]=E[1][1]=E[3][0]=-m,E[1][0]=E[2][0]=l.size[0]+m,E[2][1]=E[3][1]=l.size[1]+m;for(const L of E)l.toMap(L,L),L[0]=O.getColumnForX(L[0]),L[1]=O.getRowForY(L[1]);const K=[];let Y=3;for(let L=0;L<4;L++){if(E[L][1]===E[Y][1]){Y=L;continue}const p=f.create(E[L],E[Y]);P=Math.min(p.ymin,P),b=Math.max(p.ymax,b),void 0===K[p.ymin]&&(K[p.ymin]=[]),K[p.ymin].push(p),Y=L}if(null==P||null==b||b-P>100)return null;let B=[];for(D=P;D<b;){null!=K[D]&&(B=B.concat(K[D])),g=1/0,j=-1/0;for(let L=B.length-1;L>=0;L--){const p=B[L];g=Math.min(g,p.getLeftCol()),j=Math.max(j,p.getRightCol())}if(g=Math.floor(g),j=Math.floor(j),D>=O.first[1]&&D<=O.last[1])if(u)if(O.size[0]<O.worldSize[0]){const L=Math.floor(j/O.worldSize[0]);for(let p=Math.floor(g/O.worldSize[0]);p<=L;p++)G.push(new y(D,Math.max(O.getFirstColumnForWorld(p),g),Math.min(O.getLastColumnForWorld(p),j)))}else G.push(new y(D,g,j));else g>O.last[0]||j<O.first[0]||(g=Math.max(g,O.first[0]),j=Math.min(j,O.last[0]),G.push(new y(D,g,j)));D+=1;for(let L=B.length-1;L>=0;L--){const p=B[L];p.ymax>=D?p.incrRow():B.splice(L,1)}}return C}getTileParentId(l){_.set(l);const v=this._lodInfos.indexOf(this._infoByLevel[_.level])-1;return v<0?null:(this._getTileIdAtLOD(_,this._lodInfos[v],_),_.id)}getTileResolution(l){const m=this._infoByLevel["object"==typeof l?l.level:l];return m?m.resolution:-1}getTileScale(l){const m=this._infoByLevel[l.level];return m?m.scale:-1}intersects(l,m){_.set(m);const v=this._infoByLevel[_.level],O=l.lodInfo;if(O.resolution>v.resolution){this._getTileIdAtLOD(_,O,_);const u=O.denormalizeCol(_.col,_.world);for(const D of l.spans)if(D.row===_.row&&D.colFrom<=u&&D.colTo>=u)return!0}if(O.resolution<v.resolution){const[u,D,g,j]=l.spans.reduce((B,L)=>(B[0]=Math.min(B[0],L.row),B[1]=Math.max(B[1],L.row),B[2]=Math.min(B[2],L.colFrom),B[3]=Math.max(B[3],L.colTo),B),[1/0,-1/0,1/0,-1/0]),P=v.denormalizeCol(_.col,_.world),b=O.getColumnForX(v.getXForColumn(P)),G=O.getRowForY(v.getYForRow(_.row)),K=O.getColumnForX(v.getXForColumn(P+1))-1,Y=O.getRowForY(v.getYForRow(_.row+1))-1;return!(b>j||K<g||G>D||Y<u)}const C=O.denormalizeCol(_.col,_.world);return l.spans.some(u=>u.row===_.row&&u.colFrom<=C&&u.colTo>=C)}normalizeBounds(l,m,v){if(l[0]=m[0],l[1]=m[1],l[2]=m[2],l[3]=m[3],this._wrap){const O=(0,c.C5)(this.tileInfo.spatialReference),C=-v*(O.valid[1]-O.valid[0]);l[0]+=C,l[2]+=C}return l}getSmallestInfoForScale(l){const m=this.scales;if(this._infoByScale[l])return this._infoByScale[l];if(l>m[0])return this._infoByScale[m[0]];for(let v=1;v<m.length-1;v++)if(l>m[v]+1e-6)return this._infoByScale[m[v-1]];return this._infoByScale[m[m.length-1]]}getClosestInfoForScale(l){const m=this.scales;return this._infoByScale[l]||(l=m.reduce((v,O)=>Math.abs(O-l)<Math.abs(v-l)?O:v,m[0])),this._infoByScale[l]}scaleToLevel(l){const m=this.scales;if(this._infoByScale[l])return this._infoByScale[l].level;for(let v=m.length-1;v>=0;v--)if(l<m[v])return v===m.length-1?this._infoByScale[m[m.length-1]].level:this._infoByScale[m[v]].level+(m[v]-l)/(m[v]-m[v+1]);return this._infoByScale[m[0]].level}scaleToZoom(l){return this.tileInfo.scaleToZoom(l)}_getTileIdAtLOD(l,m,v){const O=this._infoByLevel[v.level];return l.set(v),m.resolution<O.resolution?null:(m.resolution===O.resolution||(l.level=m.level,l.col=Math.floor(v.col*O.resolution/m.resolution+.01),l.row=Math.floor(v.row*O.resolution/m.resolution+.01)),l)}}},95277:(te,J,n)=>{n.d(J,{c:()=>S,t:()=>W});var c=n(62208),I=n(60507);function S(w,U=(0,I.RL)(w)){return"on-the-ground"!==U.mode&&!((0,c.Wi)(w.geometry)||!w.geometry.hasZ)}function W(w,U){let T=null;const A=w.events.on("grab-changed",Z=>{(0,c.pC)(T)&&(T.remove(),T=null),"start"===Z.action&&(T=w.disableDisplay()),U&&U(Z)});return{remove(){(0,c.pC)(T)&&T.remove(),A.remove()}}}},50916:(te,J,n)=>{n.d(J,{r:()=>_});var c=n(17626),I=n(26584),S=n(62208),W=n(32917),w=n(77712),A=(n(90912),n(85931),n(76898)),Z=n(41632),y=n(61779);const _=f=>{let E=class extends f{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const M=this.tileInfo.lods;return this.levelRangeFromScaleRange(M[0].scale,M[M.length-1].scale)}get displayLevelRange(){const M=this.tileInfo.lods,l=this.levelRangeFromScaleRange(this.layer.minScale||M[0].scale,this.layer.maxScale||M[M.length-1].scale);return this.layer.maxScale&&l.maxLevel++,l}getTileUrl(M,h,x){return this.layer.getTileUrl(M,h,x)}_addTilingSchemeMatchPromise(){if((0,S.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new I.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const M=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,S.pC)(M))return this.addResolvingPromise(Promise.reject(M));const h=(0,W.N1)(()=>{var x,l;return null==(l=null==(x=this.view)?void 0:x.basemapTerrain)?void 0:l.tilingSchemeLocked}).then(()=>{const l=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(l)throw l});this.addResolvingPromise(h)}_getTileInfoSupportError(M,h){const x=(0,y.er)(M,h,this.view.spatialReference,this.view.state.viewingMode);if(x){const l={layer:this.layer,error:x};let m;switch(x.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":m=new I.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",l);break;default:m=new I.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",l)}return m}return null}_getTileInfoCompatibilityError(M,h){return(0,S.Wi)(M)||!h.compatibleWith(M)?new I.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface"):null}levelRangeFromScaleRange(M,h){const x={minLevel:0,maxLevel:1/0},l=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!l)return x;const m=l.levels[0],v=O=>{const C=Math.log(m.scale/O)/Math.LN2;return.5-Math.abs(.5-C%1)<1e-9?Math.round(C):Math.ceil(C)};return null!=M&&M>0&&(x.minLevel=Math.max(0,v(M))),null!=h&&h>0&&(x.maxLevel=Math.max(0,v(h))),x}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,c._)([(0,w.Cb)({readOnly:!0})],E.prototype,"imageFormatIsOpaque",null),(0,c._)([(0,w.Cb)({readOnly:!0})],E.prototype,"updating",void 0),(0,c._)([(0,w.Cb)(Z.q)],E.prototype,"updatingProgress",void 0),(0,c._)([(0,w.Cb)(Z.V)],E.prototype,"updatingProgressValue",void 0),(0,c._)([(0,w.Cb)()],E.prototype,"fullExtent",null),(0,c._)([(0,w.Cb)({readOnly:!0})],E.prototype,"isOpaque",null),(0,c._)([(0,w.Cb)({readOnly:!0})],E.prototype,"dataLevelRange",null),(0,c._)([(0,w.Cb)({readOnly:!0})],E.prototype,"displayLevelRange",null),(0,c._)([(0,w.Cb)()],E.prototype,"layer",void 0),(0,c._)([(0,w.Cb)()],E.prototype,"tileInfo",void 0),E=(0,c._)([(0,A.j)("esri.views.3d.layers.TiledLayerView3D")],E),E}},32400:(te,J,n)=>{n.d(J,{D:()=>K});var c=n(15861),I=n(17626),S=n(88879),W=n(46160),w=n(80542),U=n(54024),T=n(62208),A=n(10699),Z=n(32917),y=n(77712),E=(n(90912),n(85931),n(76898)),M=n(84682),h=n(44917),x=n(84786),l=n(39256),m=n(96854),v=n(62600),O=n(80960),C=n(8333),u=n(94991),D=n(83518),g=n(14752),j=n(67873),P=n(67225),b=n(42743),G=n(23147);let K=class extends w.r{constructor(B){super(B),this.type="graphics-3d",this.graphicsCore=null,this.drapeSourceType=v.Lw.Features,this.scaleVisibilityEnabled=!1,this.frustumVisibilityEnabled=!1,this._suspendResumeExtent=null}initialize(){const{layer:B}=this,L="effectiveScaleRange"in B?B:null,p=this.scaleVisibilityEnabled&&(0,T.pC)(L),$=new C.w({owner:this,layer:this.owner.layer,preferredUpdatePolicy:G.j.SYNC,graphicSymbolSupported:!0,componentFactories:{elevationAlignment:(R,F)=>new u.Z({graphicsCoreOwner:this,graphicsCore:R,queryGraphicUIDsInExtent:F,elevationProvider:this.view.elevationProvider}),scaleVisibility:p?(R,F)=>new j.Z({graphicsCoreOwner:this,layer:L,queryGraphicUIDsInExtent:F,graphicsCore:R,basemapTerrain:this.owner.view.basemapTerrain}):null,objectStates:R=>new g.d(R)}});if(this._set("graphicsCore",$),this.frustumVisibilityEnabled&&this._set("frustumVisibility",new D.Z({graphicsCoreOwner:this})),"fullOpacity"in this.owner){const R=this.owner;this.updatingHandles.add(()=>R.fullOpacity,()=>this.graphicsCore.opacityChange())}if("elevationInfo"in B){const R=B;this.updatingHandles.add(()=>R.elevationInfo,(F,H)=>{(0,M.Hg)(F,H)&&this.updatingHandles.addPromise(this.graphicsCore.elevationInfoChange())})}this._set("initializePromise",this._initializeAsync()),this.updatingHandles.addPromise(this.initializePromise)}_initializeAsync(){var B=this;return(0,c.Z)(function*(){try{yield B.graphicsCore.initializePromise}catch(L){if((0,A.D_)(L))return;throw L}B.destroyed||(B.handles.add((0,Z.YP)(()=>B.view.clippingArea,()=>B._updateClippingExtent(),Z.Z_)),B._updateClippingExtent(),B._setupSuspendResumeExtent(),B.graphicsCore.startCreateGraphics())})()}destroy(){this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("frustumVisibility",(0,T.SC)(this.frustumVisibility)),this._set("graphicsCore",(0,T.SC)(this.graphicsCore))}get layer(){return this.owner.layer}get view(){return this.owner.view}get scaleVisibility(){var B;return null==(B=this.graphicsCore)?void 0:B.scaleVisibility}get elevationAlignment(){var B;return null==(B=this.graphicsCore)?void 0:B.elevationAlignment}get objectStates(){var B;return null==(B=this.graphicsCore)?void 0:B.objectStates}get scaleVisibilitySuspended(){return!(!(0,T.pC)(this.scaleVisibility)||!this.scaleVisibility.suspended)}get frustumVisibilitySuspended(){return(0,T.pC)(this.frustumVisibility)&&this.frustumVisibility.suspended}get suspended(){var B;return null!=(B=this.owner.suspended)&&B}get updating(){var B;return!!((null==(B=this.graphicsCore)?void 0:B.updating)||(0,T.pC)(this.scaleVisibility)&&this.scaleVisibility.updating||(0,T.pC)(this.frustumVisibility)&&this.frustumVisibility.updating||this.updatingHandles.updating)}get graphics3DGraphics(){var B;return null==(B=this.graphicsCore)?void 0:B.graphics3DGraphics}get graphics3DGraphicsByObjectID(){var B;return null==(B=this.graphicsCore)?void 0:B.graphics3DGraphicsByObjectID}get loadedGraphics(){return this.owner.loadedGraphics}get fullOpacity(){var B;return null!=(B=this.owner.fullOpacity)?B:1}get slicePlaneEnabled(){return this.owner.slicePlaneEnabled}get updatePolicy(){return this.owner.updatePolicy}notifyGraphicGeometryChanged(B){this.graphicsCore.notifyGraphicGeometryChanged(B)}notifyGraphicVisibilityChanged(B){this.graphicsCore.notifyGraphicVisibilityChanged(B)}getRenderingInfo(B,L,p){const $=(0,l.Kb)(B,{renderer:L,arcade:p});if((0,T.pC)($)&&$.color){const R=$.color;R[0]=R[0]/255,R[1]=R[1]/255,R[2]=R[2]/255}return $}getRenderingInfoAsync(B,L,p,$){return(0,l.xn)(B,ce({renderer:L,arcade:p},$))}getHit(B){if(this.owner.loadedGraphics){const L=this.owner.loadedGraphics.find(p=>p.uid===B);if(L){const $=(0,x.mW)(L,this.layer instanceof h.Z?this.layer:null);return{type:"graphic",graphic:$,layer:$.layer}}}return null}whenGraphicBounds(B,L){return this.graphicsCore?this.graphicsCore.whenGraphicBounds(B,L):Promise.reject()}computeAttachmentOrigin(B,L){return this.graphicsCore?this.graphicsCore.computeAttachmentOrigin(B,L):null}getSymbolLayerSize(B,L){return this.graphicsCore?this.graphicsCore.getSymbolLayerSize(B,L):null}maskOccludee(B){const{set:L,handle:p}=this.objectStates.acquireSet(b.V_.MaskOccludee,null);return this.objectStates.setUid(L,B.uid),p}highlight(B){if(B instanceof m.Z)return Y;if("number"==typeof B)return this.highlight([B]);if(B instanceof S.Z)return this.highlight([B]);if(B instanceof W.Z&&(B=B.toArray()),Array.isArray(B)&&B.length>0){if(B[0]instanceof S.Z){const L=B.map(R=>R.uid),{set:p,handle:$}=this.objectStates.acquireSet(b.V_.Highlight,null);return this.objectStates.setUids(p,L),$}if("number"==typeof B[0]){const L=B,{set:p,handle:$}=this.objectStates.acquireSet(b.V_.Highlight,null);return this.objectStates.setObjectIds(p,L),$}}return Y}_setupSuspendResumeExtent(){const{scaleVisibility:B,frustumVisibility:L}=this;if((0,T.Wi)(B)&&(0,T.Wi)(L))return;const p=({computedExtent:$,extentPadding:R})=>{this._suspendResumeExtent=(0,P.Go)($,this._suspendResumeExtent,O.Z,R),(0,T.pC)(B)&&B.setExtent(this._suspendResumeExtent),(0,T.pC)(L)&&L.setExtent(this._suspendResumeExtent)};this.handles.add((0,Z.YP)(()=>{var $,R;return{computedExtent:null==($=this.graphicsCore)?void 0:$.computedExtent,extentPadding:null==(R=this.graphicsCore)?void 0:R.extentPadding}},$=>p($),Z.tX))}_updateClippingExtent(){this.graphicsCore.setClippingExtent(this.view.clippingArea,this.view.spatialReference)&&this.graphicsCore.recreateAllGraphics()}};(0,I._)([(0,y.Cb)()],K.prototype,"type",void 0),(0,I._)([(0,y.Cb)({constructOnly:!0})],K.prototype,"owner",void 0),(0,I._)([(0,y.Cb)()],K.prototype,"layer",null),(0,I._)([(0,y.Cb)()],K.prototype,"view",null),(0,I._)([(0,y.Cb)({constructOnly:!0})],K.prototype,"graphicsCore",void 0),(0,I._)([(0,y.Cb)()],K.prototype,"scaleVisibility",null),(0,I._)([(0,y.Cb)({constructOnly:!0})],K.prototype,"frustumVisibility",void 0),(0,I._)([(0,y.Cb)()],K.prototype,"elevationAlignment",null),(0,I._)([(0,y.Cb)()],K.prototype,"objectStates",null),(0,I._)([(0,y.Cb)()],K.prototype,"scaleVisibilitySuspended",null),(0,I._)([(0,y.Cb)({readOnly:!0})],K.prototype,"frustumVisibilitySuspended",null),(0,I._)([(0,y.Cb)()],K.prototype,"suspended",null),(0,I._)([(0,y.Cb)({readOnly:!0})],K.prototype,"updating",null),(0,I._)([(0,y.Cb)()],K.prototype,"loadedGraphics",null),(0,I._)([(0,y.Cb)()],K.prototype,"fullOpacity",null),(0,I._)([(0,y.Cb)()],K.prototype,"slicePlaneEnabled",null),(0,I._)([(0,y.Cb)()],K.prototype,"drapeSourceType",void 0),(0,I._)([(0,y.Cb)()],K.prototype,"updatePolicy",null),(0,I._)([(0,y.Cb)({constructOnly:!0})],K.prototype,"scaleVisibilityEnabled",void 0),(0,I._)([(0,y.Cb)({constructOnly:!0})],K.prototype,"frustumVisibilityEnabled",void 0),(0,I._)([(0,y.Cb)()],K.prototype,"initializePromise",void 0),K=(0,I._)([(0,E.j)("esri.views.3d.layers.graphics.GraphicsProcessor")],K);const Y=(0,U.kB)()},3493:(te,J,n)=>{n.d(J,{Z6:()=>A,ZS:()=>T,sw:()=>U});var c=n(58817),I=n(62208),S=n(97445);const W={setAttribute(){},rollback(){},commit(){}};var w,h;function U(h,x){const l=x.attributes[h.objectIdField],m=h.sessions.get(l);if(m)return m;const v=(0,c.d9)(x.attributes),O=new Set;if(null==l)return W;const C=h.i3sOverrides.createInteractiveEditSession(l),u=new Map;let g=w.EDITING;const j={setAttribute(P,b){if(g!==w.EDITING)return;const G=h.fieldsIndex.get(P);if((0,I.Wi)(G))return;const K=h.attributeStorageInfo.findIndex(L=>L.name===G.name);if(K<0)return;C.set(K,b);const Y=h.attributeStorageInfo[K];let B=!1;O.add(P),h.forEachNode((L,p)=>{const $=((P,b)=>{const G=u.get(P);if(null==G){const K=b.indexOf(l);return u.set(P,K),K}return G})(L,p);if(-1===$)return;const R=h.getAttributeData(L.index);if(R){const F=R[Y.name];F&&(F[$]=b,h.setAttributeData(L.index,R,x),B=!0)}}),B&&h.clearMemCache()},rollback(){if(g===w.EDITING){for(const P of O)this.setAttribute(P,v[P]);C.rollback(),g=w.ROLLED_BACK,h.sessions.delete(l)}},commit(){g===w.EDITING&&(C.commit(),g=w.COMMITTED,h.sessions.delete(l))}};return h.sessions.set(l,j),j}function T(h,x){const l=[...x.addedFeatures,...x.updatedFeatures,...x.deletedFeatures];for(const m of l)m.objectId&&h.i3sOverrides.updateGeometry(m.objectId)}function A(h,x){const l=function Z(h,x){const l=x.edits.updateFeatures;if(!l||0===l.length)return new M;const m=function f(h){const x=new Set;if(!h.updatedFeatures)return x;for(const l of h.updatedFeatures)null!=l.objectId&&null==l.error&&x.add(l.objectId);return x}(x),v=new M,O=new Map;for(let g=0;g<h.attributeStorageInfo.length;g++)O.set(h.attributeStorageInfo[g].name,g);const C=h.fieldsIndex,u=h.objectIdField,D=l.filter(g=>{const j=(0,S.g)(C,g.attributes,u);return m.has(j)});return h.forEachNode((g,j)=>{const P=new Set(j);for(const b of D){const G=(0,S.g)(C,b.attributes,u);if(!P.has(G))continue;const K=j.indexOf(G);for(const Y in b.attributes){const B=h.fieldsIndex.normalizeFieldName(Y);y(v,g.index,B).push({featureIndex:K,featureId:G,value:b.attributes[Y]})}}}),v}(h,x);if(0===l.size)return;const m=new Map;for(let O=0;O<h.attributeStorageInfo.length;O++)m.set(h.attributeStorageInfo[O].name,O);let v=!1;l.forEach((O,C)=>{const u=h.getAttributeData(C);let D=!1;O.forEach((g,j)=>{const P=(0,I.pC)(u)?u[j]:null,b=m.get(j);for(const{featureIndex:G,value:K,featureId:Y}of g)P&&(P[G]=K,D=!0,v=!0),h.i3sOverrides.updateAttributeValue(Y,b,K)}),D&&h.setAttributeData(C,u,null)}),v&&h.clearMemCache()}function y(h,x,l){const m=function _(h,x){const l=h.get(x);if(l)return l;const m=new E;return h.set(x,m),m}(h,x),v=null!=l&&m.get(l);if(v)return v;const O=new Array;return m.set(l,O),O}(h=w||(w={}))[h.EDITING=0]="EDITING",h[h.ROLLED_BACK=1]="ROLLED_BACK",h[h.COMMITTED=2]="COMMITTED";const E=Map,M=Map},40465:(te,J,n)=>{n.d(J,{i:()=>f});var c=n(15861),I=n(17626),S=n(26584),W=n(62208),Z=(n(63290),n(90912),n(85931),n(8314),n(76898)),y=n(36630),_=n(10023);const f=E=>{let M=class extends E{_validateFetchPopupFeatures(h){const{layer:x}=this,{popupEnabled:l}=x;if(!l)throw new S.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:x});if(!(0,_.V)(x,h))throw new S.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:x})}prepareFetchPopupFeatures(h){return(0,c.Z)(function*(){})()}fetchPopupFeatures(h,x){var l=this;return(0,c.Z)(function*(){l._validateFetchPopupFeatures(x);const m=(0,W.pC)(x)?x.clientGraphics:null;if(!m||0===m.length)return[];const v="scene"===l.layer.type&&(0,W.pC)(l.layer.associatedLayer)?l.layer.associatedLayer:l.layer;let O=[];"fieldsIndex"in l.layer&&(O=(0,y.Lk)(l.layer.fieldsIndex,yield(0,_.e)(v,(0,_.V)(l.layer,x)))),yield l.prepareFetchPopupFeatures(O);const C=new Set,u=[],D=[];for(const g of m)(0,y.Gm)(O,g,C)?D.push(g):u.push(g);return 0===D.length?u:l.whenGraphicAttributes(D,[...C]).catch(()=>D).then(g=>u.concat(g))})()}};return M=(0,I._)([(0,Z.j)("esri.views.3d.layers.support.PopupSceneLayerView")],M),M}},57610:(te,J,n)=>{n.d(J,{K:()=>v});var c=n(15861),I=n(17626),S=n(14517),W=n(63290),w=n(36082),U=n(77712),T=n(76898),A=n(819);const Z=u=>{let D=class extends u{constructor(){super(...arguments),this._numUpdating=0,this._asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(g,j){return function _(u,D){const j=()=>{if(!b||G)return D();b.clear(),G=!0;const K=(0,w.LJ)(b,D);return G=!1,K};let b=new A.M(()=>{b&&!G&&u(j)}),G=!1;return u(j),{remove:()=>{b&&(b.destroy(),b=null)}}}(P=>this._updateAsync(g,P),j)}_updateAsync(g,j){var P=this;return(0,c.Z)(function*(){if(!P._startAsyncUpdate(g)){try{const b=yield j();P._set(g,b)}catch(b){W.Z.getLogger(P.declaredClass).warn(`Async update of "${String(g)}" failed. Async update functions should not throw exceptions.`)}P._endAsyncUpdate(g)&&P._updateAsync(g,j)}})()}_startAsyncUpdate(g){var P;const j=null!=(P=this._asyncUpdateState.get(g))?P:y.None;return j&y.Updating?(this._asyncUpdateState.set(g,j|y.Invalidated),!0):(++this._numUpdating,this._asyncUpdateState.set(g,j|y.Updating),!1)}_endAsyncUpdate(g){var P;--this._numUpdating;const j=(null!=(P=this._asyncUpdateState.get(g))?P:y.None)&~y.Updating;return j&y.Invalidated?(this._asyncUpdateState.set(g,j&~y.Invalidated),!0):(this._asyncUpdateState.set(g,j),!1)}};return(0,I._)([(0,U.Cb)({readOnly:!0})],D.prototype,"updating",null),(0,I._)([(0,U.Cb)()],D.prototype,"_numUpdating",void 0),D=(0,I._)([(0,T.j)("esri.core.AsyncUpdate")],D),D};var y,u;(u=y||(y={}))[u.None=0]="None",u[u.Updating=1]="Updating",u[u.Invalidated=2]="Invalidated";let f=class extends(Z(S.Z)){};f=(0,I._)([(0,T.j)("esri.core.AsyncUpdate")],f);var E=n(80542),M=n(62208),l=(n(90912),n(85931),n(36630));const m="esri.views.3d.layers.support.SceneLayerViewRequiredFields";let v=class extends(Z(E.r)){get layer(){return this.layerView.layer}get requiredFields(){const{layerView:{layer:{fieldsIndex:u},definitionExpressionFields:D},rendererFields:g,labelingFields:j,viewFilterFields:P}=this;return(0,l.Q0)(u,[...(0,M.Pt)(D,[]),...(0,M.Pt)(g,[]),...(0,M.Pt)(j,[]),...(0,M.Pt)(P,[])])}constructor(u){super(u)}initialize(){var u=this;this.handles.add([this.autoUpdateAsync("rendererFields",(0,c.Z)(function*(){const{fieldsIndex:D,renderer:g}=u.layer;return g?O(j=>g.collectRequiredFields(j,D)):null})),this.autoUpdateAsync("labelingFields",(0,c.Z)(function*(){const{layer:D}=u;return D.labelsVisible?O(g=>(0,l.Mu)(g,D)):null})),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:D,filter:g}=this.layerView;return O(j=>(0,l.Ll)(j,D,g))})])}};function O(u){return C.apply(this,arguments)}function C(){return C=(0,c.Z)(function*(u){const D=new Set;try{return yield u(D),Array.from(D).sort()}catch(g){return W.Z.getLogger(m).error(g),null}}),C.apply(this,arguments)}(0,I._)([(0,U.Cb)()],v.prototype,"layerView",void 0),(0,I._)([(0,U.Cb)()],v.prototype,"layer",null),(0,I._)([(0,U.Cb)()],v.prototype,"requiredFields",null),(0,I._)([(0,U.Cb)()],v.prototype,"rendererFields",void 0),(0,I._)([(0,U.Cb)()],v.prototype,"labelingFields",void 0),(0,I._)([(0,U.Cb)()],v.prototype,"viewFilterFields",void 0),v=(0,I._)([(0,T.j)(m)],v)},67966:(te,J,n)=>{n.d(J,{v:()=>I});var c=n(36630);function I(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:S,layer:{fieldsIndex:W},requiredFields:w}=this;return(0,c.Q0)(W,S.outFields?[...(0,c.Lk)(W,S.outFields),...w]:w)}}}}},95925:(te,J,n)=>{n.d(J,{Er:()=>U,Lp:()=>T,Yq:()=>y});var c=n(15861),I=n(59213),S=n(62208),W=n(10699),w=n(32917);function U(_,f){_.interactive=!0;const{tool:E,view:M}=_;M.activeTool=E;let h=(0,W.fu)(f,()=>{M.activeTool===E&&(M.activeTool=null)});return(0,I.vr)(function(){var x=(0,c.Z)(function*(l){yield(0,w.N1)(()=>(0,S.Wi)(E)||!E.active,l),h=(0,S.hw)(h)});return function(l){return x.apply(this,arguments)}}(),f)}function T(_,f){return(0,w.YP)(()=>_.interactive,()=>function A(_,f){_.interactive?function Z(_,f){y(_);const{view:E,analysis:M}=_,h=new f({view:E,analysis:M,analysisViewData:_});_.tool=h,E.tools.add(h)}(_,f):y(_)}(_,f),w.tX)}function y(_){const{view:f,tool:E}=_;(0,S.Wi)(E)||(f.tools.remove(E),_.tool=null)}},9119:(te,J,n)=>{n.r(J),n.d(J,{default:()=>L});var c=n(17626),S=(n(20383),n(61885)),W=n(72392),w=n(58817),U=n(62208),T=n(32917),A=n(77712),y=(n(90912),n(76898)),_=n(51470),f=n(36073),E=n(49621),M=n(10228);class h{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-click"}}class x{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-double-click"}}class l{constructor($,R,F,H,X,k,ee,q,Q,N){this.graphic=$,this.allGraphics=R,this.index=F,this.x=H,this.y=X,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class m{constructor($,R,F,H,X,k,ee,q,Q,N){this.graphic=$,this.allGraphics=R,this.index=F,this.x=H,this.y=X,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class v{constructor($,R,F,H,X,k,ee,q,Q,N){this.graphic=$,this.allGraphics=R,this.index=F,this.x=H,this.y=X,this.dx=k,this.dy=ee,this.totalDx=q,this.totalDy=Q,this.viewEvent=N,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class O{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-pointer-over"}}class C{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-pointer-out"}}class u{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-pointer-down"}}class D{constructor($,R,F,H,X){this.graphic=$,this.index=R,this.x=F,this.y=H,this.viewEvent=X,this.type="graphic-pointer-up"}}var g=n(18547),j=n(90585),P=n(41900),b=n(57213),G=n(52068),K=n(88493);const Y="indicator-symbols";let B=class extends S.Z.EventedAccessor{constructor(p){super(p),this._activeGraphic=null,this._dragEvent=null,this._handles=new W.Z,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._viewHandles=new W.Z,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.indicatorsEnabled=!1,this.layer=new _.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.view=null}initialize(){(0,M.p)(this.view,this.layer),this._highlightHelper=new E.Z({view:this.view}),this.refresh(),this._handles.add([(0,T.YP)(()=>{var p;return[this.graphics,null==(p=this.graphics)?void 0:p.length]},()=>this.refresh()),(0,T.gx)(()=>{var p;return null==(p=this.view)?void 0:p.ready},()=>{this._viewHandles.add([this.view.on("immediate-click",p=>this._clickHandler(p),g.f.TOOL),this.view.on("double-click",p=>this._doubleClickHandler(p),g.f.TOOL),this.view.on("pointer-down",p=>this._pointerDownHandler(p),g.f.TOOL),this.view.on("pointer-move",p=>this._pointerMoveHandler(p),g.f.TOOL),this.view.on("pointer-up",p=>this._pointerUpHandler(p),g.f.TOOL),this.view.on("drag",p=>this._dragHandler(p),g.f.TOOL),this.view.on("key-down",p=>this._keyDownHandler(p),g.f.TOOL)])},{once:!0,initial:!0}),(0,T.YP)(()=>this.view,p=>{this._highlightHelper.removeAll(),this._highlightHelper.view=p})])}destroy(){var p;this._removeIndicators(),null==(p=this.view.map)||p.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach($=>$.destroy()),this._manipulators=null,this._handles=(0,U.SC)(this._handles),this._viewHandles=(0,U.SC)(this._viewHandles)}set highlightsEnabled(p){var $,R;null==($=this._highlightHelper)||$.removeAll(),this._set("highlightsEnabled",p),p&&(null==(R=this._highlightHelper)||R.add(this.graphics))}get state(){const p=!!this.get("view.ready"),$=!!this.get("graphics.length");return p&&$?this._activeGraphic?"moving":"active":p?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(p,$){const R=this.graphics[p];R&&(R.set("geometry",$),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(p){const $=this._findTargetGraphic((0,P.vT)(p));if($){const R=new h($,this.graphics.indexOf($),p.x,p.y,p);this.emit("graphic-click",R),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(R)}}_doubleClickHandler(p){const $=this._findTargetGraphic((0,P.vT)(p));if($){const R=new x($,this.graphics.indexOf($),p.x,p.y,p);this.emit("graphic-double-click",R),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(R)}}_pointerDownHandler(p){const $=this._findTargetGraphic((0,P.vT)(p));if($){this._activeGraphic=$;const{x:R,y:F}=p,H=new u($,this.graphics.indexOf($),R,F,p);this.emit("graphic-pointer-down",H),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(H)}else this._activeGraphic=null}_pointerUpHandler(p){if(this._activeGraphic){const{x:$,y:R}=p,F=this.graphics.indexOf(this._activeGraphic),H=new D(this._activeGraphic,F,$,R,p);this.emit("graphic-pointer-up",H),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(H)}}_pointerMoveHandler(p){if(this._dragEvent)return;const $=this._findTargetGraphic((0,P.vT)(p));if($){const{x:R,y:F}=p;if(this._hoverGraphic){if(this._hoverGraphic===$)return;const k=this.graphics.indexOf(this._hoverGraphic),ee=new C(this.graphics[k],k,R,F,p);this._hoverGraphic=null,this.emit("graphic-pointer-out",ee),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(ee)}const H=this.graphics.indexOf($),X=new O($,H,R,F,p);return this._hoverGraphic=$,this.emit("graphic-pointer-over",X),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(X))}if(this._hoverGraphic){const{x:R,y:F}=p,H=this.graphics.indexOf(this._hoverGraphic),X=new C(this.graphics[H],H,R,F,p);this._hoverGraphic=null,this.emit("graphic-pointer-out",X),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(X)}}_dragHandler(p){if("start"!==p.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;"start"===p.action&&this._removeIndicators(),p.stopPropagation();const{action:$,x:R,y:F}=p,H=this.graphics.indexOf(this._activeGraphic),X=this._dragEvent?R-this._dragEvent.x:0,k=this._dragEvent?F-this._dragEvent.y:0,ee=R-p.origin.x,q=F-p.origin.y,Q="start"===$?this._activeGraphic.geometry:this._initialDragGeometry,N=(0,f.e7)(Q,ee,q,this.view);if(this._activeGraphic.geometry=N,this.enableMoveAllGraphics&&this.graphics.forEach(z=>{z!==this._activeGraphic&&(z.geometry=(0,f.e7)(z.geometry,X,k,this.view))}),this._dragEvent=p,"start"===$){this._initialDragGeometry=(0,w.d9)(Q);const z=new l(this._activeGraphic,this.graphics,H,R,F,X,k,ee,q,p);this.emit("graphic-move-start",z),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(z),z.defaultPrevented&&this._activeGraphic.set("geometry",Q)}else if("update"===$){const z=new m(this._activeGraphic,this.graphics,H,R,F,X,k,ee,q,p);this.emit("graphic-move",z),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(z),z.defaultPrevented&&(this._activeGraphic.geometry=Q)}else{const z=new v(this._activeGraphic,this.graphics,H,R,F,X,k,ee,q,p);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",z),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(z),z.defaultPrevented&&(this.graphics[H].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(p){"a"!==p.key&&"d"!==p.key&&"n"!==p.key||"moving"!==this.state||p.stopPropagation()}_findTargetGraphic(p){const $=this.view.toMap(p);let R=null,F=Number.MAX_VALUE;this._syncLayerViews();const H=this._layerViews.flatMap(X=>"graphicsViews"in X?Array.from(X.graphicsViews(),k=>k.hitTest($)).flat():X.graphicsView.hitTest($)).filter(X=>this.graphics.includes(X));return H.length?H[0]:(this._manipulators.forEach(X=>{const k=X.intersectionDistance(p);(0,U.pC)(k)&&k<F&&(F=k,R=X.graphic)}),R)}_syncLayerViews(){this._layerViews=[];const p=new Set;for(const $ of this.graphics){const R=(0,M.j)(this.view,$.layer);R&&p.add(R)}this._layerViews=[...p]}_setUpManipulators(){const{graphics:p,view:$}=this;this._manipulators.forEach(R=>R.destroy()),this._manipulators=null!=p&&p.length?p.map(R=>new j.L({graphic:R,view:$})):[]}_setUpHighlights(){this.highlightsEnabled&&this._highlightHelper.add(this.graphics)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const p of this.graphics){const $=p.clone();$.symbol=this._getSymbolForIndicator(p),this._indicators.push($),this._handles.add((0,T.YP)(()=>p.symbol,()=>this._setUpIndicators()),Y)}this.layer.addMany(this._indicators)}}_removeIndicators(){this._handles.remove(Y),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach(p=>p.destroy()),this._indicators=[])}_getSymbolForIndicator(p){if((0,U.Wi)(p.symbol))return null;switch(p.symbol.type){case"cim":return new b.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:R,yoffset:F,height:H,width:X}=p.symbol,k=H===X?X:Math.max(H,X);return new b.Z({xoffset:R,yoffset:F,size:k,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:R,yoffset:F,size:H,style:X}=p.symbol;return new b.Z({xoffset:R,yoffset:F,style:"circle"===X?"circle":"square",size:H+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new K.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new G.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:R,yoffset:F}=p.symbol;return new b.Z({xoffset:R,yoffset:F,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}};(0,c._)([(0,A.Cb)()],B.prototype,"_activeGraphic",void 0),(0,c._)([(0,A.Cb)({readOnly:!0})],B.prototype,"type",void 0),(0,c._)([(0,A.Cb)()],B.prototype,"callbacks",void 0),(0,c._)([(0,A.Cb)()],B.prototype,"enableMoveAllGraphics",void 0),(0,c._)([(0,A.Cb)()],B.prototype,"graphics",void 0),(0,c._)([(0,A.Cb)({value:!1})],B.prototype,"highlightsEnabled",null),(0,c._)([(0,A.Cb)()],B.prototype,"indicatorsEnabled",void 0),(0,c._)([(0,A.Cb)()],B.prototype,"layer",void 0),(0,c._)([(0,A.Cb)({readOnly:!0})],B.prototype,"state",null),(0,c._)([(0,A.Cb)()],B.prototype,"view",void 0),B=(0,c._)([(0,y.j)("esri.views.draw.support.GraphicMover")],B);const L=B},49621:(te,J,n)=>{n.d(J,{Z:()=>y});var c=n(17626),I=n(80542),S=n(77712),U=(n(90912),n(85931),n(76898)),T=n(10228),A=n(93579);let Z=class extends I.r{constructor(_){super(_),this.view=null}get count(){return this.handles.size}add(_){const f=Array.isArray(_)?_:[_];null!=_&&f&&f.length&&f.forEach(E=>this._highlight(E))}remove(_){const f=Array.isArray(_)?_:[_];null!=_&&f&&f.length&&f.forEach(E=>this._unhighlight(E))}removeAll(){this.handles.removeAll()}_highlight(_){const f=(0,T.j)(this.view,_.layer);(0,A.tl)(f)&&this.handles.add(f.highlight(_),`feature-${_.getObjectId()}`)}_unhighlight(_){_&&this.handles.remove(`feature-${_.getObjectId()}`)}};(0,c._)([(0,S.Cb)({readOnly:!0})],Z.prototype,"count",null),(0,c._)([(0,S.Cb)()],Z.prototype,"view",void 0),(0,c._)([(0,S.Cb)()],Z.prototype,"add",null),Z=(0,c._)([(0,U.j)("esri.views.draw.support.HighlightHelper")],Z);const y=Z},22712:(te,J,n)=>{n.d(J,{f:()=>A});var c=n(17626),I=n(32917),S=n(77712),U=(n(90912),n(85931),n(76898)),T=n(22944);let A=class extends T.m{constructor(Z){super(Z)}initialize(){this.addHandles((0,I.YP)(()=>this.analysisViewData.visible,Z=>this.visible=Z,I.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};(0,c._)([(0,S.Cb)({constructOnly:!0})],A.prototype,"analysis",void 0),(0,c._)([(0,S.Cb)()],A.prototype,"analysisViewData",void 0),A=(0,c._)([(0,U.j)("esri.views.interactive.AnalysisToolBase")],A)},70211:(te,J,n)=>{n.d(J,{x:()=>W});var c=n(33351),I=n(97979),S=n(19038);class W extends I.a{constructor(U){super(fe(ce({},U),{constraint:new c.Hk(U.targetPoint)}))}get hints(){return[new S.n(this.targetPoint,this.isDraped,this.domain)]}}},9218:(te,J,n)=>{n.d(J,{X:()=>A,g:()=>Z});var c=n(62208),I=n(28093),S=n(59550),W=n(61430),w=n(75897),U=n(70211);function T({x:y,y:_,z:f}){return(0,S.uc)((0,I.f)(y,_,null!=f?f:0))}function A(y,_){switch(y.type){case"edge":return y.draped?new W.k({edgeStart:T(y.start),edgeEnd:T(y.end),targetPoint:T(y.target),objectId:y.objectId,getGroundElevation:_}):new w.L({edgeStart:T(y.start),edgeEnd:T(y.end),targetPoint:T(y.target),objectId:y.objectId,isDraped:!1});case"vertex":return new U.x({targetPoint:T(y.target),objectId:y.objectId,isDraped:!1})}}function Z(y){return(0,c.pC)(y)&&"3d"===y.type?(_,f,E)=>y.elevationProvider.getElevation(_,f,null!=E?E:0,y.spatialReference,"ground"):()=>null}},17936:(te,J,n)=>{n.d(J,{p:()=>Z});var c=n(15861),S=(n(8314),n(93961)),W=n(88159),w=n(62208),U=n(10699),T=n(16730),A=n(29505);function Z(x=!1,l){if(x){const{elevationInfo:m,alignPointsInFeatures:v,spatialReference:O}=l;return new f(m,v,O)}return new y}class y{alignCandidates(l,m){return(0,c.Z)(function*(){return l})()}notifyElevationSourceChange(){}}class f{constructor(l,m,v){this._elevationInfo=l,this._alignPointsInFeatures=m,this.spatialReference=v,this._alignmentsCache=new S.Z(1024),this._cacheVersion=0,this._metersPerVerticalUnit=(0,T._R)(v)}alignCandidates(l,m){var v=this;return(0,c.Z)(function*(){const O=v._elevationInfo;return(0,w.pC)(O)&&"absolute-height"===O.mode&&!O.featureExpressionInfo?(v._alignAbsoluteElevationCandidates(l,O),l):v._alignComputedElevationCandidates(l,m)})()}notifyElevationSourceChange(){this._alignmentsCache.clear(),this._cacheVersion++}_alignAbsoluteElevationCandidates(l,m){const{offset:v,unit:O}=m;if((0,w.Wi)(v))return;const C=v*((0,A.Z7)(null!=O?O:"meters")/this._metersPerVerticalUnit);for(const u of l)switch(u.type){case"edge":u.start.z+=C,u.end.z+=C;continue;case"vertex":u.target.z+=C;continue}}_alignComputedElevationCandidates(l,m){var v=this;return(0,c.Z)(function*(){const O=new Map;for(const G of l)(0,W.s1)(O,G.objectId,h).push(G);const[C,u,D]=v._prepareQuery(O),g=yield v._alignPointsInFeatures(C,m);if((0,U.k_)(m),D!==v._cacheVersion)return v._alignComputedElevationCandidates(l,m);v._applyCacheAndResponse(C,g,u);const{drapedObjectIds:j,failedObjectIds:P}=g,b=[];for(const G of l){const{objectId:K}=G;j.has(K)&&"edge"===G.type&&(G.draped=!0),P.has(K)||b.push(G)}return b})()}_prepareQuery(l){const m=[],v=[];for(const[O,C]of l){const u=[];for(const D of C)this._addToQueriesOrCachedResult(O,D.target,u,v),"edge"===D.type&&(this._addToQueriesOrCachedResult(O,D.start,u,v),this._addToQueriesOrCachedResult(O,D.end,u,v));0!==u.length&&m.push({objectId:O,points:u})}return[m,v,this._cacheVersion]}_addToQueriesOrCachedResult(l,m,v,O){const C=M(l,m),u=this._alignmentsCache.get(C);(0,w.pC)(u)?O.push(new E(m,u)):v.push(m)}_applyCacheAndResponse(l,{elevations:m,drapedObjectIds:v,failedObjectIds:O},C){for(const g of C)g.apply();let u=0;const D=this._alignmentsCache;for(const{objectId:g,points:j}of l){if(O.has(g)){u+=j.length;continue}const P=!v.has(g);for(const b of j){const G=M(g,b),K=m[u++];b.z=K,P&&D.put(G,K,1)}}}}class E{constructor(l,m){this.point=l,this.z=m}apply(){this.point.z=this.z}}function M(x,{x:l,y:m,z:v}){return`${x}-${l}-${m}-${null!=v?v:0}}`}function h(){return[]}},1520:(te,J,n)=>{n.d(J,{c:()=>w}),n(8314);class I{filter(f,E){return E}notifyElevationSourceChange(){}}class S{filter(f,E){const{point:M,distance:h}=f,{z:x}=M;if(null==x||0===E.length)return E;const l=function Z(_){return"number"==typeof _?{x:_,y:_,z:_}:_}(h),m=this._updateCandidatesTo3D(E,M,l).filter(W);return m.sort(y),m}_updateCandidatesTo3D(f,E,M){for(const h of f)switch(h.type){case"edge":U(h,E,M);continue;case"vertex":A(h,E,M);continue}return f}}function W(_){return _.distance<=1}function w(_=!1){return _?new S:new I}function U(_,f,{x:E,y:M,z:h}){const{start:x,end:l,target:m}=_;_.draped||function T(_,f,E,M){const h=M.x-E.x,x=M.y-E.y,l=M.z-E.z,O=Math.min(1,Math.max(0,((f.x-E.x)*h+(f.y-E.y)*x+l*(f.z-E.z))/(h*h+x*x+l*l))),u=E.y+x*O,D=E.z+l*O;_.x=E.x+h*O,_.y=u,_.z=D}(m,f,x,l);const v=(f.x-m.x)/E,O=(f.y-m.y)/M,C=(f.z-m.z)/h;_.distance=Math.sqrt(v*v+O*O+C*C)}function A(_,f,{x:E,y:M,z:h}){const{target:x}=_,l=(f.x-x.x)/E,m=(f.y-x.y)/M,v=(f.z-x.z)/h,O=Math.sqrt(l*l+m*m+v*v);_.distance=O}function y(_,f){return _.distance-f.distance}},83010:(te,J,n)=>{n.d(J,{k:()=>T});var c=n(15861),S=(n(8314),n(58817)),W=n(93961),w=n(10699),U=n(77275);function T(f=!1,E){return f?new y(E):new A}class A{fetch(){return(0,c.Z)(function*(){return[]})()}notifySymbologyChange(){}}class y{constructor(E){this._getSymbologyCandidates=E,this._candidatesCache=new W.Z(1024),this._cacheVersion=0}fetch(E,M){var h=this;return(0,c.Z)(function*(){if(0===E.length)return[];const x=[],l=[],m=h._candidatesCache;for(const g of E){const j=_(g),P=m.get(j);if(P)for(const b of P)l.push((0,S.d9)(b));else x.push(g),m.put(j,[],1)}if(0===x.length)return l;const v=h._cacheVersion,{candidates:O,sourceCandidateIndices:C}=yield h._getSymbologyCandidates(x,M);if((0,w.k_)(M),v!==h._cacheVersion)return h.fetch(E,M);const u=[],{length:D}=O;for(let g=0;g<D;++g){const j=O[g],P=_(x[C[g]]),b=m.get(P);b.push(j),m.put(P,b,b.length),u.push((0,S.d9)(j))}return l.concat(u)})()}notifySymbologyChange(){this._candidatesCache.clear(),this._cacheVersion++}}function _(f){var E,M,h;switch(f.type){case"vertex":{const{objectId:x,target:l}=f,m=`${x}-vertex-${l.x}-${l.y}-${null!=(E=l.z)?E:0}`;return(0,U.hP)(m).toString()}case"edge":{const{objectId:x,start:l,end:m}=f,v=`${x}-edge-${l.x}-${l.y}-${null!=(M=l.z)?M:0}-to-${m.x}-${m.y}-${null!=(h=m.z)?h:0}`;return(0,U.hP)(v).toString()}default:return""}}},51810:(te,J,n)=>{n.d(J,{c:()=>U,p:()=>T});var c=n(17626),I=n(15572),S=n(77712),W=n(76898),w=n(62980);let U=class extends w.h{constructor(A){super(A),this.type="extent-rotate",this.angle=0}};(0,c._)([(0,S.Cb)()],U.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],U.prototype,"angle",void 0),U=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.ExtentRotateTooltipInfo")],U);let T=class extends w.h{constructor(A){super(A),this.type="extent-scale",this.xScale=0,this.yScale=0,this.xSize=I.yP,this.ySize=I.yP}};(0,c._)([(0,S.Cb)()],T.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"xScale",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"yScale",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"xSize",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"ySize",void 0),T=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.ExtentScaleTooltipInfo")],T)},31712:(te,J,n)=>{n.d(J,{$E:()=>U,QW:()=>T,c1:()=>_,in:()=>A,j:()=>y,nk:()=>Z});var c=n(17626),I=n(15572),S=n(77712),W=n(76898),w=n(62980);let U=class extends w.h{constructor(f){super(f),this.type="translate-graphic",this.distance=I.yP}};(0,c._)([(0,S.Cb)()],U.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],U.prototype,"distance",void 0),U=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicTooltipInfo")],U);let T=class extends w.h{constructor(f){super(f),this.type="translate-graphic-z",this.distance=I.yP}};(0,c._)([(0,S.Cb)()],T.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],T.prototype,"distance",void 0),T=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicZTooltipInfo")],T);let A=class extends w.h{constructor(f){super(f),this.type="translate-graphic-xy",this.distance=I.yP}};(0,c._)([(0,S.Cb)()],A.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],A.prototype,"distance",void 0),A=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateGraphicXYTooltipInfo")],A);let Z=class extends w.h{constructor(f){super(f),this.type="translate-vertex",this.distance=I.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,c._)([(0,S.Cb)()],Z.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],Z.prototype,"distance",void 0),(0,c._)([(0,S.Cb)()],Z.prototype,"elevation",void 0),(0,c._)([(0,S.Cb)()],Z.prototype,"area",void 0),(0,c._)([(0,S.Cb)()],Z.prototype,"totalLength",void 0),Z=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexTooltipInfo")],Z);let y=class extends w.h{constructor(f){super(f),this.type="translate-vertex-z",this.distance=I.yP,this.elevation=null}};(0,c._)([(0,S.Cb)()],y.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],y.prototype,"distance",void 0),(0,c._)([(0,S.Cb)()],y.prototype,"elevation",void 0),y=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexZTooltipInfo")],y);let _=class extends w.h{constructor(f){super(f),this.type="translate-vertex-xy",this.distance=I.yP,this.elevation=null,this.area=null,this.totalLength=null}};(0,c._)([(0,S.Cb)()],_.prototype,"type",void 0),(0,c._)([(0,S.Cb)()],_.prototype,"distance",void 0),(0,c._)([(0,S.Cb)()],_.prototype,"elevation",void 0),(0,c._)([(0,S.Cb)()],_.prototype,"area",void 0),(0,c._)([(0,S.Cb)()],_.prototype,"totalLength",void 0),_=(0,c._)([(0,W.j)("esri.views.interactive.tooltip.TranslateVertexXYTooltipInfo")],_)},78465:(te,J,n)=>{n.d(J,{Z:()=>x});var c=n(15861),I=n(17626),S=n(63290),W=n(62208),w=n(76825),U=n(32917),T=n(77712),y=(n(90912),n(85931),n(76898)),_=n(55915),f=n(45611);const E="esri.views.layers.SceneLayerView",M=S.Z.getLogger(E);let h=class extends f.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(l){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){return(0,w.lK)(this._layerFilter)}get _layerFilter(){const l=this.layer.filter;if((0,W.Wi)(l)||l.geometries.length<1)return null;const m=this._geometryEngine;if((0,W.Wi)(m)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return w.cn;const v=l.geometries.getItemAt(0).spatialReference,O=l.geometries.toArray().map(g=>{try{g=m.simplify(g)}catch(j){return M.warnOncePerTick("Failed to simplify scene filter mask polygon. Polygon will be ignored."),null}if(null==g)return null;if(g.spatialReference.equals(v))return g;try{return(0,_.iV)(g,v)}catch(j){return M.warnOncePerTick("Failed to project scene filter mask polygon. Polygon will be ignored."),null}}).filter(W.pC).sort((g,j)=>g.extent.xmin-j.extent.xmin),C=new Set,u=new Array,D=new Array;for(let g of O){const j=g.extent.xmin;if(u.length=0,C.forEach(P=>{if(j>=P.extent.xmax)return D.push(P),void C.delete(P);g.extent.ymin<=P.extent.ymax&&g.extent.ymax>=P.extent.ymin&&m.intersects(g,P)&&u.push(P)}),u.length>0){u.push(g);try{g=m.union(u)}catch(P){M.warnOncePerTick("Failed to unify filter mask polygons. Polygon will be ignored.");continue}u.pop(),u.forEach(P=>C.delete(P))}C.add(g)}return C.forEach(g=>D.push(g)),D.length>0?{spatialRelationship:l.spatialRelationship,geometries:D}:null}get _filterNeedsProjectionEngine(){const l=this.layer.filter;if((0,W.Wi)(l)||l.geometries.length<=1)return!1;const m=l.geometries.getItemAt(0).spatialReference;return l.geometries.some(({spatialReference:v})=>!v.equals(m)&&!(0,_.Up)(v,m))}get layerFilterUpdating(){return(0,w.j)(this._layerFilter)}initialize(){var l=this;(0,U.N1)(()=>!this._geometryEngine&&(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,c.Z)(function*(){return l._geometryEngine=yield Promise.all([n.e(4918),n.e(4766)]).then(n.bind(n,44766))})),this._projectionEngineLoaded=(0,_.kR)(),(0,U.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,c.Z)(function*(){yield(0,_.zD)(),l._projectionEngineLoaded=!0}))}highlight(l){throw new Error("Not implemented")}queryFeatures(l,m){throw new Error("Not implemented")}queryObjectIds(l,m){throw new Error("Not implemented")}queryFeatureCount(l,m){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(l,m){throw new Error("Not implemented")}};(0,I._)([(0,T.Cb)()],h.prototype,"layer",void 0),(0,I._)([(0,T.Cb)()],h.prototype,"availableFields",null),(0,I._)([(0,T.Cb)()],h.prototype,"maximumNumberOfFeatures",null),(0,I._)([(0,T.Cb)({readOnly:!0})],h.prototype,"maximumNumberOfFeaturesExceeded",null),(0,I._)([(0,T.Cb)()],h.prototype,"filter",void 0),(0,I._)([(0,T.Cb)({readOnly:!0})],h.prototype,"layerFilter",null),(0,I._)([(0,T.Cb)({readOnly:!0})],h.prototype,"_layerFilter",null),(0,I._)([(0,T.Cb)()],h.prototype,"_geometryEngine",void 0),(0,I._)([(0,T.Cb)()],h.prototype,"_projectionEngineLoaded",void 0),(0,I._)([(0,T.Cb)()],h.prototype,"_filterNeedsProjectionEngine",null),(0,I._)([(0,T.Cb)()],h.prototype,"layerFilterUpdating",null),h=(0,I._)([(0,y.j)(E)],h);const x=h},73187:(te,J,n)=>{n.d(J,{q:()=>x});var c=n(17626),I=n(91558),S=n(88879),W=n(14517),w=n(21286),U=n(62208),T=n(77712),y=(n(90912),n(85931),n(76898)),_=n(69852),f=n(88493),E=n(35540),M=n(21716);const h=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let x=class extends W.Z{constructor(l){super(l),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=h.map(l=>new f.Z({color:[l[0],l[1],l[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(l){this._enabled!==l&&(this._enabled=l,this.update())}update(){if(!this._enabled)return void this.clear();const m=this.getTiles(),v=new Array,O=new Set(this._labels.keys());m.forEach((u,D)=>{const g=u.lij.toString();O.delete(g);const j=u.lij[0],P=u.geometry;if(this.enablePolygons&&!this._polygons.has(g)){const b=new S.Z({geometry:P,symbol:this._symbols[j%this._symbols.length]});this._polygons.set(g,b),v.push(b)}if(this.enableLabels){const b=(u=>{if((0,U.pC)(u.label))return u.label;let D=u.lij.toString();return(0,U.pC)(u.loadPriority)&&(D+=` (${u.loadPriority})`),D})(u),G=D/(m.length-1),K=(0,w.t7)(0,200,G),Y=(0,w.t7)(20,6,G)/.75,B=(0,U.pC)(u.loadPriority)&&u.loadPriority>=m.length,L=new I.Z([K,B?0:K,B?0:K]),p="3d"===this.view.type?()=>new _.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new M.Z({text:b,halo:{color:"white",size:1/.75},material:{color:L},size:Y})]}):()=>new E.Z({text:b,haloColor:"white",haloSize:1/.75,color:L,size:Y}),$=this._labels.get(g);if($){const R=p();((0,U.Wi)($.symbol)||JSON.stringify(R)!==JSON.stringify($.symbol))&&($.symbol=R)}else{const R=new S.Z({geometry:P.extent.center,symbol:p()});this._labels.set(g,R),v.push(R)}}});const C=new Array;O.forEach(u=>{const D=this._polygons.get(u);null!=D&&(C.push(D),this._polygons.delete(u));const g=this._labels.get(u);null!=g&&(C.push(g),this._labels.delete(u))}),this.view.graphics.removeMany(C),this.view.graphics.addMany(v)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,c._)([(0,T.Cb)({constructOnly:!0})],x.prototype,"view",void 0),(0,c._)([(0,T.Cb)({readOnly:!0})],x.prototype,"updating",void 0),(0,c._)([(0,T.Cb)()],x.prototype,"enabled",null),x=(0,c._)([(0,y.j)("esri.views.support.TileTreeDebugger")],x)},60863:(te,J,n)=>{n.d(J,{d:()=>Z});var c=n(15861),I=n(76210),S=n(23663),W=n(66554),w=n(85589);const A=(0,I.GH)(class extends I.mv{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.loading=!1,this.messages=void 0,this.messageOverrides=void 0,this.defaultMessages=void 0,this.effectiveLocale=""}onMessagesChange(){}effectiveLocaleChange(){(0,W.u)(this,this.effectiveLocale)}connectedCallback(){(0,S.c)(this),(0,W.c)(this)}componentWillLoad(){var y=this;return(0,c.Z)(function*(){yield(0,W.s)(y)})()}disconnectedCallback(){(0,S.d)(this),(0,W.d)(this)}render(){const{el:y,loading:_,messages:f}=this,E=y.innerHTML.trim().length>0,M=_?(0,I.h)("calcite-loader",{label:f.loading}):null,h=E?(0,I.h)("div",{class:"content"},(0,I.h)("slot",null)):null;return(0,I.h)("div",{class:"scrim"},M,h)}static get assetsDirs(){return["assets"]}get el(){return this}static get watchers(){return{messageOverrides:["onMessagesChange"],effectiveLocale:["effectiveLocaleChange"]}}static get style(){return"@keyframes in{0%{opacity:0}100%{opacity:1}}@keyframes in-down{0%{opacity:0;transform:translate3D(0, -5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-up{0%{opacity:0;transform:translate3D(0, 5px, 0)}100%{opacity:1;transform:translate3D(0, 0, 0)}}@keyframes in-scale{0%{opacity:0;transform:scale3D(0.95, 0.95, 1)}100%{opacity:1;transform:scale3D(1, 1, 1)}}:root{--calcite-animation-timing:calc(150ms * var(--calcite-internal-duration-factor));--calcite-internal-duration-factor:var(--calcite-duration-factor, 1);--calcite-internal-animation-timing-fast:calc(100ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-medium:calc(200ms * var(--calcite-internal-duration-factor));--calcite-internal-animation-timing-slow:calc(300ms * var(--calcite-internal-duration-factor))}.calcite-animate{opacity:0;animation-fill-mode:both;animation-duration:var(--calcite-animation-timing)}.calcite-animate__in{animation-name:in}.calcite-animate__in-down{animation-name:in-down}.calcite-animate__in-up{animation-name:in-up}.calcite-animate__in-scale{animation-name:in-scale}@media (prefers-reduced-motion: reduce){:root{--calcite-internal-duration-factor:0}}:root{--calcite-floating-ui-transition:var(--calcite-animation-timing);--calcite-floating-ui-z-index:600}:host([hidden]){display:none}:host{position:absolute;inset:0px;z-index:700;display:flex;block-size:100%;inline-size:100%;flex-direction:column;align-items:stretch}@keyframes calcite-scrim-fade-in{0%{--tw-bg-opacity:0}100%{--tw-text-opacity:1}}.scrim{position:absolute;inset:0px;display:flex;flex-direction:column;align-content:center;align-items:center;justify-content:center;overflow:hidden;animation:calcite-scrim-fade-in var(--calcite-internal-animation-timing-medium) ease-in-out;background-color:var(--calcite-scrim-background, var(--calcite-scrim-background-internal))}.content{padding:1rem}"}},[1,"calcite-scrim",{loading:[516],messages:[1040],messageOverrides:[1040],defaultMessages:[32],effectiveLocale:[32]}]);function Z(){"undefined"!=typeof customElements&&["calcite-scrim","calcite-loader"].forEach(_=>{switch(_){case"calcite-scrim":customElements.get(_)||customElements.define(_,A);break;case"calcite-loader":customElements.get(_)||(0,w.d)()}})}Z()},89251:(te,J,n)=>{n.d(J,{C:()=>I,I:()=>w,M:()=>W,S:()=>S,a:()=>y,g:()=>A,u:()=>Z});var c=n(76210);const I={container:"container",containerBorderSelected:"container--border-selected",containerBorderUnselected:"container--border-unselected",contentContainer:"content-container",contentContainerSelectable:"content-container--selectable",contentContainerHasCenterContent:"content-container--has-center-content",nestedContainer:"nested-container",nestedContainerHidden:"nested-container--hidden",content:"content",customContent:"custom-content",actionsStart:"actions-start",contentStart:"content-start",label:"label",description:"description",contentEnd:"content-end",actionsEnd:"actions-end",selectionContainer:"selection-container",openContainer:"open-container"},S={actionsStart:"actions-start",contentStart:"content-start",content:"content",contentEnd:"content-end",actionsEnd:"actions-end"},W=5,w={selectedMultiple:"check-circle-f",selectedSingle:"circle-f",unselected:"blank",closedLTR:"caret-right",closedRTL:"caret-left",open:"caret-down",blank:"blank"},T="calcite-list-item";function A(_){const f=_.target.assignedElements({flatten:!0});return[...f.filter(h=>null==h?void 0:h.matches("calcite-list-item-group")).map(h=>Array.from(h.querySelectorAll(T))).reduce((h,x)=>[...h,...x],[]),...f.filter(h=>null==h?void 0:h.matches(T))]}function Z(_){_.forEach(f=>{f.setPosition=_.indexOf(f)+1,f.setSize=_.length})}function y(_,f=!1){return c.Z5.isBrowser?document.evaluate(f?"ancestor::calcite-list-item | ancestor::calcite-list-item-group":"ancestor::calcite-list-item",_,null,XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE,null).snapshotLength:0}}}]);
"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8325],{19702:(D,E,e)=>{e.d(E,{A:()=>d});var i=e(15861),o=e(17626),c=e(54024),l=e(10699),v=e(32917),h=e(77712),P=(e(85931),e(8314),e(90912),e(76898)),p=e(36947);const d=M=>{let t=class extends M{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(a){super.postscript(a),(0,p.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var a=this;return(0,i.Z)(function*(){const s=new AbortController,n=s.signal;a.handles.add((0,c.kB)(()=>s.abort())),yield(0,v.N1)(()=>{var u;return null==(u=a.view.defaultsFromMap)?void 0:u.heightModelInfoReady},n),(0,l.k_)(n);const r=(0,p.Wt)(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);if(r)throw r})()}canResume(){const a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!a||!a.minScale||!a.maxScale||a.minScale>=a.maxScale)}getSuspendInfo(){const a=super.getSuspendInfo(),s=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return s&&s.minScale&&s.maxScale&&s.minScale<s.maxScale&&(a.outsideScaleRange=!0),a}};return(0,o._)([(0,h.Cb)()],t.prototype,"view",void 0),(0,o._)([(0,h.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,o._)([(0,P.j)("esri.views.3d.layers.LayerView3D")],t),t}},68325:(D,E,e)=>{e.r(E),e.d(E,{default:()=>M});var i=e(15861),o=e(17626),c=e(26584),l=e(62208),v=e(10699),h=e(32917),y=e(77712),O=e(76898),_=e(19702),P=e(45611);const p="analysis-view-handles";let d=class extends((0,_.A)(P.Z)){constructor(t){super(t),this.type="line-of-sight-3d",this._analysisModules={"line-of-sight":null}}initialize(){this.handles.add((0,h.YP)(()=>this.layer.analysis,t=>{this._destroyAnalysisView(),(0,l.pC)(t)&&this._createAnalysisView(t)},h.tX),p)}destroy(){this.handles.remove(p),this._destroyAnalysisView()}whenAnalysisView(){var t=this;return(0,i.Z)(function*(){if((0,l.pC)(t.analysisView))return t.analysisView;if((0,l.pC)(t._createAnalysisViewTask))return t._createAnalysisViewTask.promise;throw new c.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")})()}isUpdating(){return(0,l.pC)(this._createAnalysisViewTask)||(0,l.pC)(this.analysisView)&&this.analysisView.updating}_createAnalysisView(t){var a=this;const s=(0,v.vr)(function(){var n=(0,i.Z)(function*(r){return a.analysisView=yield a._createAnalysisViewPromise(t,r),a._createAnalysisViewTask===s&&(a._createAnalysisViewTask=null),a.analysisView});return function(r){return n.apply(this,arguments)}}());this._createAnalysisViewTask=s}_destroyAnalysisView(){this.analysisView=(0,l.SC)(this.analysisView),this._createAnalysisViewTask=(0,l.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(t,a){var s=this;return(0,i.Z)(function*(){const n=t.type;let r=s._analysisModules[n];if((0,l.Wi)(r)){const C=yield s._loadAnalysisModule(n);s._analysisModules[n]=C,r=C}const u=new r.default({analysis:t,view:s.view,parent:s});if(yield u.when(),(0,v.Hc)(a))throw u.destroy(),new c.Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:t});return u})()}_loadAnalysisModule(t){return"line-of-sight"===t?Promise.all([e.e(1668),e.e(3792),e.e(8592),e.e(2114)]).then(e.bind(e,99024)):null}};(0,o._)([(0,y.Cb)()],d.prototype,"type",void 0),(0,o._)([(0,y.Cb)()],d.prototype,"layer",void 0),(0,o._)([(0,y.Cb)()],d.prototype,"analysisView",void 0),(0,o._)([(0,y.Cb)()],d.prototype,"_createAnalysisViewTask",void 0),d=(0,o._)([(0,O.j)("esri.views.3d.layers.LineOfSightLayerView3D")],d);const M=d},45611:(D,E,e)=>{e.d(E,{Z:()=>a});var i=e(17626),o=e(14517),c=e(61885),l=e(80542),v=e(61996),h=e(63290),y=e(62208),O=e(60330),_=e(77712),M=(e(85931),e(8314),e(90912),e(76898));let t=class extends((0,l.p)((0,v.IG)((0,O.v)(c.Z.EventedMixin(o.Z))))){constructor(s){super(s),this.layer=null,this.parent=null}initialize(){this.when().catch(s=>{if("layerview:create-error"!==s.name){const n=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";h.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${n}')`,s)}})}get fullOpacity(){return(0,y.Pt)(this.get("layer.opacity"),1)*(0,y.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var s;return!this.suspended&&!0===(null==(s=this.layer)?void 0:s.legendEnabled)}get updating(){var s;return!!(null!=(s=this.updatingHandles)&&s.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var s;return!0===(null==(s=this.layer)?void 0:s.visible)}set visible(s){void 0!==s?this._override("visible",s):this._clearOverride("visible")}canResume(){var s,n,r;return this.visible&&(null==(s=this.layer)?void 0:s.loaded)&&!(null!=(n=this.parent)&&n.suspended)&&(null==(r=this.view)?void 0:r.ready)||!1}getSuspendInfo(){const s=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(s.viewNotReady=!0),this.layer&&this.layer.loaded||(s.layerNotLoaded=!0),this.visible||(s.layerInvisible=!0),s}isUpdating(){return!1}};(0,i._)([(0,_.Cb)()],t.prototype,"fullOpacity",null),(0,i._)([(0,_.Cb)()],t.prototype,"layer",void 0),(0,i._)([(0,_.Cb)()],t.prototype,"parent",void 0),(0,i._)([(0,_.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,i._)([(0,_.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,i._)([(0,_.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,i._)([(0,_.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,i._)([(0,_.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,i._)([(0,_.Cb)()],t.prototype,"visible",null),(0,i._)([(0,_.Cb)()],t.prototype,"view",void 0),t=(0,i._)([(0,M.j)("esri.views.layers.LayerView")],t);const a=t}}]);
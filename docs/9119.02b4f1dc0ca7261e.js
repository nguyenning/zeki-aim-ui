"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[9119],{22264:(V,x,i)=>{function p(a,r){return r?"xoffset"in r&&r.xoffset?Math.max(a,Math.abs(r.xoffset)):"yoffset"in r&&r.yoffset?Math.max(a,Math.abs(r.yoffset||0)):a:a}function D(a,r){return"number"==typeof a?a:a&&a.stops&&a.stops.length?function I(a){let r=0,d=0;for(let v=0;v<a.length;v++){const _=a[v].size;"number"==typeof _&&(r+=_,d++)}return r/d}(a.stops):r}function S(a){const r=a&&a.renderer,d="touch"===(a&&a.event&&a.event.pointerType)?9:6;if(!r)return d;const v="visualVariables"in r?function m(a,r){if(!r)return a;const d=r.filter(o=>"size"===o.type).map(o=>{const{maxSize:g,minSize:P}=o;return(D(g,a)+D(P,a))/2});let v=0;const _=d.length;if(0===_)return a;for(let o=0;o<_;o++)v+=d[o];const y=Math.floor(v/_);return Math.max(y,a)}(d,r.visualVariables):d;if("simple"===r.type)return p(v,r.symbol);if("unique-value"===r.type){let _=v;return r.uniqueValueInfos.forEach(y=>{_=p(_,y.symbol)}),_}if("class-breaks"===r.type){let _=v;return r.classBreakInfos.forEach(y=>{_=p(_,y.symbol)}),_}return v}i.d(x,{k:()=>S})},9119:(V,x,i)=>{i.r(x),i.d(x,{default:()=>F});var p=i(17626),D=(i(20383),i(61885)),m=i(72392),S=i(58817),a=i(62208),r=i(32917),d=i(77712),_=(i(90912),i(76898)),y=i(51470),o=i(36073),g=i(49621),P=i(10228);class L{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-click"}}class W{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-double-click"}}class K{constructor(s,e,l,c,h,f,G,U,w,H){this.graphic=s,this.allGraphics=e,this.index=l,this.x=c,this.y=h,this.dx=f,this.dy=G,this.totalDx=U,this.totalDy=w,this.viewEvent=H,this.defaultPrevented=!1,this.type="graphic-move-start"}preventDefault(){this.defaultPrevented=!0}}class B{constructor(s,e,l,c,h,f,G,U,w,H){this.graphic=s,this.allGraphics=e,this.index=l,this.x=c,this.y=h,this.dx=f,this.dy=G,this.totalDx=U,this.totalDy=w,this.viewEvent=H,this.defaultPrevented=!1,this.type="graphic-move"}preventDefault(){this.defaultPrevented=!0}}class Z{constructor(s,e,l,c,h,f,G,U,w,H){this.graphic=s,this.allGraphics=e,this.index=l,this.x=c,this.y=h,this.dx=f,this.dy=G,this.totalDx=U,this.totalDy=w,this.viewEvent=H,this.defaultPrevented=!1,this.type="graphic-move-stop"}preventDefault(){this.defaultPrevented=!0}}class u{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-pointer-over"}}class k{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-pointer-out"}}class z{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-pointer-down"}}class n{constructor(s,e,l,c,h){this.graphic=s,this.index=e,this.x=l,this.y=c,this.viewEvent=h,this.type="graphic-pointer-up"}}var E=i(56846),O=i(90585),b=i(41900),T=i(57213),A=i(52068),R=i(88493);const j="indicator-symbols";let M=class extends D.Z.EventedAccessor{constructor(t){super(t),this._activeGraphic=null,this._dragEvent=null,this._handles=new m.Z,this._hoverGraphic=null,this._indicators=[],this._initialDragGeometry=null,this._viewHandles=new m.Z,this._manipulators=[],this._layerViews=null,this.type="graphic-mover",this.callbacks={onGraphicClick(){},onGraphicDoubleClick(){},onGraphicMoveStart(){},onGraphicMove(){},onGraphicMoveStop(){},onGraphicPointerOver(){},onGraphicPointerOut(){},onGraphicPointerDown(){},onGraphicPointerUp(){}},this.enableMoveAllGraphics=!1,this.graphics=[],this.indicatorsEnabled=!1,this.layer=new y.Z({listMode:"hide",internal:!0,title:"GraphicMover highlight layer"}),this.view=null}initialize(){(0,P.p)(this.view,this.layer),this._highlightHelper=new g.Z({view:this.view}),this.refresh(),this._handles.add([(0,r.YP)(()=>{var t;return[this.graphics,null==(t=this.graphics)?void 0:t.length]},()=>this.refresh()),(0,r.gx)(()=>{var t;return null==(t=this.view)?void 0:t.ready},()=>{this._viewHandles.add([this.view.on("immediate-click",t=>this._clickHandler(t),E.f.TOOL),this.view.on("double-click",t=>this._doubleClickHandler(t),E.f.TOOL),this.view.on("pointer-down",t=>this._pointerDownHandler(t),E.f.TOOL),this.view.on("pointer-move",t=>this._pointerMoveHandler(t),E.f.TOOL),this.view.on("pointer-up",t=>this._pointerUpHandler(t),E.f.TOOL),this.view.on("drag",t=>this._dragHandler(t),E.f.TOOL),this.view.on("key-down",t=>this._keyDownHandler(t),E.f.TOOL)])},{once:!0,initial:!0}),(0,r.YP)(()=>this.view,t=>{this._highlightHelper.removeAll(),this._highlightHelper.view=t})])}destroy(){var t;this._removeIndicators(),null==(t=this.view.map)||t.remove(this.layer),this.layer.destroy(),this.reset(),this._manipulators.forEach(s=>s.destroy()),this._manipulators=null,this._handles=(0,a.SC)(this._handles),this._viewHandles=(0,a.SC)(this._viewHandles)}set highlightsEnabled(t){var s,e;null==(s=this._highlightHelper)||s.removeAll(),this._set("highlightsEnabled",t),t&&(null==(e=this._highlightHelper)||e.add(this.graphics))}get state(){const t=!!this.get("view.ready"),s=!!this.get("graphics.length");return t&&s?this._activeGraphic?"moving":"active":t?"ready":"disabled"}refresh(){this.reset(),this._setup()}reset(){this._activeGraphic=null,this._hoverGraphic=null,this._dragEvent=null,this._highlightHelper.removeAll()}updateGeometry(t,s){const e=this.graphics[t];e&&(e.set("geometry",s),this._setUpIndicators())}_setup(){this._setUpHighlights(),this._setUpIndicators(),this._setUpManipulators(),this._syncLayerViews()}_clickHandler(t){const s=this._findTargetGraphic((0,b.vT)(t));if(s){const e=new L(s,this.graphics.indexOf(s),t.x,t.y,t);this.emit("graphic-click",e),this.callbacks.onGraphicClick&&this.callbacks.onGraphicClick(e)}}_doubleClickHandler(t){const s=this._findTargetGraphic((0,b.vT)(t));if(s){const e=new W(s,this.graphics.indexOf(s),t.x,t.y,t);this.emit("graphic-double-click",e),this.callbacks.onGraphicDoubleClick&&this.callbacks.onGraphicDoubleClick(e)}}_pointerDownHandler(t){const s=this._findTargetGraphic((0,b.vT)(t));if(s){this._activeGraphic=s;const{x:e,y:l}=t,c=new z(s,this.graphics.indexOf(s),e,l,t);this.emit("graphic-pointer-down",c),this.callbacks.onGraphicPointerDown&&this.callbacks.onGraphicPointerDown(c)}else this._activeGraphic=null}_pointerUpHandler(t){if(this._activeGraphic){const{x:s,y:e}=t,l=this.graphics.indexOf(this._activeGraphic),c=new n(this._activeGraphic,l,s,e,t);this.emit("graphic-pointer-up",c),this.callbacks.onGraphicPointerUp&&this.callbacks.onGraphicPointerUp(c)}}_pointerMoveHandler(t){if(this._dragEvent)return;const s=this._findTargetGraphic((0,b.vT)(t));if(s){const{x:e,y:l}=t;if(this._hoverGraphic){if(this._hoverGraphic===s)return;const f=this.graphics.indexOf(this._hoverGraphic),G=new k(this.graphics[f],f,e,l,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",G),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(G)}const c=this.graphics.indexOf(s),h=new u(s,c,e,l,t);return this._hoverGraphic=s,this.emit("graphic-pointer-over",h),void(this.callbacks.onGraphicPointerOver&&this.callbacks.onGraphicPointerOver(h))}if(this._hoverGraphic){const{x:e,y:l}=t,c=this.graphics.indexOf(this._hoverGraphic),h=new k(this.graphics[c],c,e,l,t);this._hoverGraphic=null,this.emit("graphic-pointer-out",h),this.callbacks.onGraphicPointerOut&&this.callbacks.onGraphicPointerOut(h)}}_dragHandler(t){if("start"!==t.action&&!this._dragEvent||!this._activeGraphic||!this._activeGraphic.geometry)return;"start"===t.action&&this._removeIndicators(),t.stopPropagation();const{action:s,x:e,y:l}=t,c=this.graphics.indexOf(this._activeGraphic),h=this._dragEvent?e-this._dragEvent.x:0,f=this._dragEvent?l-this._dragEvent.y:0,G=e-t.origin.x,U=l-t.origin.y,w="start"===s?this._activeGraphic.geometry:this._initialDragGeometry,H=(0,o.e7)(w,G,U,this.view);if(this._activeGraphic.geometry=H,this.enableMoveAllGraphics&&this.graphics.forEach(C=>{C!==this._activeGraphic&&(C.geometry=(0,o.e7)(C.geometry,h,f,this.view))}),this._dragEvent=t,"start"===s){this._initialDragGeometry=(0,S.d9)(w);const C=new K(this._activeGraphic,this.graphics,c,e,l,h,f,G,U,t);this.emit("graphic-move-start",C),this.callbacks.onGraphicMoveStart&&this.callbacks.onGraphicMoveStart(C),C.defaultPrevented&&this._activeGraphic.set("geometry",w)}else if("update"===s){const C=new B(this._activeGraphic,this.graphics,c,e,l,h,f,G,U,t);this.emit("graphic-move",C),this.callbacks.onGraphicMove&&this.callbacks.onGraphicMove(C),C.defaultPrevented&&(this._activeGraphic.geometry=w)}else{const C=new Z(this._activeGraphic,this.graphics,c,e,l,h,f,G,U,t);this._dragEvent=null,this._activeGraphic=null,this._setUpIndicators(),this.emit("graphic-move-stop",C),this.callbacks.onGraphicMoveStop&&this.callbacks.onGraphicMoveStop(C),C.defaultPrevented&&(this.graphics[c].set("geometry",this._initialDragGeometry),this._setUpIndicators()),this._initialDragGeometry=null}}_keyDownHandler(t){"a"!==t.key&&"d"!==t.key&&"n"!==t.key||"moving"!==this.state||t.stopPropagation()}_findTargetGraphic(t){const s=this.view.toMap(t);let e=null,l=Number.MAX_VALUE;this._syncLayerViews();const c=this._layerViews.flatMap(h=>"graphicsViews"in h?Array.from(h.graphicsViews(),f=>f.hitTest(s)).flat():h.graphicsView.hitTest(s)).filter(h=>this.graphics.includes(h));return c.length?c[0]:(this._manipulators.forEach(h=>{const f=h.intersectionDistance(t);(0,a.pC)(f)&&f<l&&(l=f,e=h.graphic)}),e)}_syncLayerViews(){this._layerViews=[];const t=new Set;for(const s of this.graphics){const e=(0,P.j)(this.view,s.layer);e&&t.add(e)}this._layerViews=[...t]}_setUpManipulators(){const{graphics:t,view:s}=this;this._manipulators.forEach(e=>e.destroy()),this._manipulators=null!=t&&t.length?t.map(e=>new O.L({graphic:e,view:s})):[]}_setUpHighlights(){this.highlightsEnabled&&this._highlightHelper.add(this.graphics)}_setUpIndicators(){if(this._removeIndicators(),this.indicatorsEnabled){for(const t of this.graphics){const s=t.clone();s.symbol=this._getSymbolForIndicator(t),this._indicators.push(s),this._handles.add((0,r.YP)(()=>t.symbol,()=>this._setUpIndicators()),j)}this.layer.addMany(this._indicators)}}_removeIndicators(){this._handles.remove(j),this._indicators.length&&(this.layer.removeMany(this._indicators),this._indicators.forEach(t=>t.destroy()),this._indicators=[])}_getSymbolForIndicator(t){if((0,a.Wi)(t.symbol))return null;switch(t.symbol.type){case"cim":return new T.Z({style:"circle",size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}});case"picture-marker":{const{xoffset:e,yoffset:l,height:c,width:h}=t.symbol,f=c===h?h:Math.max(c,h);return new T.Z({xoffset:e,yoffset:l,size:f,style:"square",color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-marker":{const{xoffset:e,yoffset:l,size:c,style:h}=t.symbol;return new T.Z({xoffset:e,yoffset:l,style:"circle"===h?"circle":"square",size:c+2,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}case"simple-fill":return new R.Z({color:[0,0,0,0],outline:{style:"dash",color:[255,127,0,1],width:1}});case"simple-line":return new A.Z({color:[255,127,0,1],style:"dash",width:1});case"text":{const{xoffset:e,yoffset:l}=t.symbol;return new T.Z({xoffset:e,yoffset:l,size:12,color:[0,0,0,0],outline:{color:[255,127,0,1],width:1}})}default:return null}}};(0,p._)([(0,d.Cb)()],M.prototype,"_activeGraphic",void 0),(0,p._)([(0,d.Cb)({readOnly:!0})],M.prototype,"type",void 0),(0,p._)([(0,d.Cb)()],M.prototype,"callbacks",void 0),(0,p._)([(0,d.Cb)()],M.prototype,"enableMoveAllGraphics",void 0),(0,p._)([(0,d.Cb)()],M.prototype,"graphics",void 0),(0,p._)([(0,d.Cb)({value:!1})],M.prototype,"highlightsEnabled",null),(0,p._)([(0,d.Cb)()],M.prototype,"indicatorsEnabled",void 0),(0,p._)([(0,d.Cb)()],M.prototype,"layer",void 0),(0,p._)([(0,d.Cb)({readOnly:!0})],M.prototype,"state",null),(0,p._)([(0,d.Cb)()],M.prototype,"view",void 0),M=(0,p._)([(0,_.j)("esri.views.draw.support.GraphicMover")],M);const F=M},49621:(V,x,i)=>{i.d(x,{Z:()=>y});var p=i(17626),I=i(80542),D=i(77712),r=(i(85931),i(8314),i(90912),i(76898)),d=i(10228),v=i(93579);let _=class extends I.r{constructor(o){super(o),this.view=null}get count(){return this.handles.size}add(o){const g=Array.isArray(o)?o:[o];null!=o&&g&&g.length&&g.forEach(P=>this._highlight(P))}remove(o){const g=Array.isArray(o)?o:[o];null!=o&&g&&g.length&&g.forEach(P=>this._unhighlight(P))}removeAll(){this.handles.removeAll()}_highlight(o){const g=(0,d.j)(this.view,o.layer);(0,v.tl)(g)&&this.handles.add(g.highlight(o),`feature-${o.getObjectId()}`)}_unhighlight(o){o&&this.handles.remove(`feature-${o.getObjectId()}`)}};(0,p._)([(0,D.Cb)({readOnly:!0})],_.prototype,"count",null),(0,p._)([(0,D.Cb)()],_.prototype,"view",void 0),(0,p._)([(0,D.Cb)()],_.prototype,"add",null),_=(0,p._)([(0,r.j)("esri.views.draw.support.HighlightHelper")],_);const y=_},90585:(V,x,i)=>{i.d(x,{L:()=>u});var p=i(17626),I=i(14517),D=i(61885),m=i(62208),S=i(32917),a=i(23841),r=i(77712),y=(i(85931),i(8314),i(90912),i(76898)),o=i(67831),g=i(84161),P=i(28093),L=i(55915),W=i(60507),K=i(8080),B=i(82706),Z=i(94672);let u=class extends I.Z{constructor(n){super(n),this.layer=null,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.dragging=!1,this.cursor=null,this.events=new D.Z.EventEmitter,this._circleCollisionCache=null,this._graphicSymbolChangedHandle=null,this._originalSymbol=null}set graphic(n){this._circleCollisionCache=null,this._originalSymbol=n.symbol,this._set("graphic",n),this.attachSymbolChanged()}get elevationInfo(){const n="elevationInfo"in this.graphic.layer&&this.graphic.layer.elevationInfo,E=(0,W.vu)(this.graphic);return new B.ZP({mode:E,offset:n?n.offset:0})}set focusedSymbol(n){n!==this._get("focusedSymbol")&&(this._set("focusedSymbol",n),this._updateGraphicSymbol(),this._circleCollisionCache=null)}grabbableForEvent(){return!0}set grabbing(n){n!==this._get("grabbing")&&(this._set("grabbing",n),this._updateGraphicSymbol())}set hovering(n){n!==this._get("hovering")&&(this._set("hovering",n),this._updateGraphicSymbol())}set selected(n){n!==this._get("selected")&&(this._set("selected",n),this._updateGraphicSymbol(),this.events.emit("select-changed",{action:n?"select":"deselect"}))}get _focused(){return this._get("hovering")||this._get("grabbing")}destroy(){this.detachSymbolChanged(),this._resetGraphicSymbol(),this._set("view",null)}intersectionDistance(n){const E=this.graphic;if(!1===E.visible)return null;const O=E.geometry;if((0,m.Wi)(O))return null;const b=this._get("focusedSymbol"),T=(0,m.pC)(b)?b:E.symbol;return"2d"===this.view.type?this._intersectDistance2D(this.view,n,O,T):this._intersectDistance3D(this.view,n,E)}attach(){this.attachSymbolChanged(),(0,m.pC)(this.layer)&&this.layer.add(this.graphic)}detach(){this.detachSymbolChanged(),this._resetGraphicSymbol(),(0,m.pC)(this.layer)&&this.layer.remove(this.graphic)}attachSymbolChanged(){this.detachSymbolChanged(),this._graphicSymbolChangedHandle=(0,S.YP)(()=>{var n;return null==(n=this.graphic)?void 0:n.symbol},n=>{(0,m.pC)(n)&&n!==this.focusedSymbol&&n!==this._originalSymbol&&(this._originalSymbol=n,this._focused&&(0,m.pC)(this.focusedSymbol)&&(this.graphic.symbol=this.focusedSymbol))},S.Z_)}detachSymbolChanged(){(0,m.pC)(this._graphicSymbolChangedHandle)&&(this._graphicSymbolChangedHandle.remove(),this._graphicSymbolChangedHandle=null)}_updateGraphicSymbol(){this.graphic.symbol=this._focused&&(0,m.pC)(this.focusedSymbol)?this.focusedSymbol:this._originalSymbol}_resetGraphicSymbol(){this.graphic.symbol=this._originalSymbol}_intersectDistance2D(n,E,O,b){if(b=b||(0,K.js)(O),(0,m.Wi)(b))return null;let A=this._circleCollisionCache;if("point"!==O.type||"simple-marker"!==b.type)return(0,Z.D)(E,O,n)?1:null;if((0,m.Wi)(A)||!A.originalPoint.equals(O)){const R=O,j=n.spatialReference;if((0,L.Up)(R.spatialReference,j)){const M=(0,L.iV)(R,j);A={originalPoint:R.clone(),mapPoint:M,radiusPx:(0,a.F2)(b.size)},this._circleCollisionCache=A}}if((0,m.pC)(A)){const R=(0,a.md)(E,z),j=n.toScreen(A.mapPoint),M=A.radiusPx,F=j.x+(0,a.F2)(b.xoffset),t=j.y-(0,a.F2)(b.yoffset);return(0,o.s)(R,[F,t])<M*M?1:null}return null}_intersectDistance3D(n,E,O){const b=n.toMap(E,{include:[O]});return b&&(0,L.KC)(b,k,n.renderSpatialReference)?(0,g.i)(k,n.state.camera.eye):null}};(0,p._)([(0,r.Cb)({constructOnly:!0,nonNullable:!0})],u.prototype,"graphic",null),(0,p._)([(0,r.Cb)()],u.prototype,"elevationInfo",null),(0,p._)([(0,r.Cb)({constructOnly:!0,nonNullable:!0})],u.prototype,"view",void 0),(0,p._)([(0,r.Cb)({value:null})],u.prototype,"focusedSymbol",null),(0,p._)([(0,r.Cb)({constructOnly:!0})],u.prototype,"layer",void 0),(0,p._)([(0,r.Cb)()],u.prototype,"interactive",void 0),(0,p._)([(0,r.Cb)()],u.prototype,"selectable",void 0),(0,p._)([(0,r.Cb)()],u.prototype,"grabbable",void 0),(0,p._)([(0,r.Cb)({value:!1})],u.prototype,"grabbing",null),(0,p._)([(0,r.Cb)()],u.prototype,"dragging",void 0),(0,p._)([(0,r.Cb)()],u.prototype,"hovering",null),(0,p._)([(0,r.Cb)({value:!1})],u.prototype,"selected",null),(0,p._)([(0,r.Cb)()],u.prototype,"cursor",void 0),u=(0,p._)([(0,y.j)("esri.views.interactive.GraphicManipulator")],u);const k=(0,P.c)(),z=(0,a.s1)()},94672:(V,x,i)=>{i.d(x,{D:()=>r,K:()=>a}),i(29132);var I=i(62208),D=i(16730),m=i(22264),S=i(2004);function a(v,_,y,o=new S.Z){let g;if("2d"===y.type)g=_*y.resolution;else if("3d"===y.type){const Z=y.overlayPixelSizeInMapUnits(v),u=y.basemapSpatialReference;g=(0,I.pC)(u)&&!u.equals(y.spatialReference)?(0,D.c9)(u)/(0,D.c9)(y.spatialReference):_*Z}const P=v.x-g,L=v.y-g,W=v.x+g,K=v.y+g,{spatialReference:B}=y;return o.xmin=Math.min(P,W),o.ymin=Math.min(L,K),o.xmax=Math.max(P,W),o.ymax=Math.max(L,K),o.spatialReference=B,o}function r(v,_,y){const o=y.toMap(v);return!(0,I.Wi)(o)&&a(o,(0,m.k)(),y,d).intersects(_)}const d=new S.Z}}]);
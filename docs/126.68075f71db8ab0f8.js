"use strict";var xe=Object.defineProperty,be=Object.defineProperties,Ee=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,Oe=Object.prototype.hasOwnProperty,Pe=Object.prototype.propertyIsEnumerable,re=(E,f,o)=>f in E?xe(E,f,{enumerable:!0,configurable:!0,writable:!0,value:o}):E[f]=o,T=(E,f)=>{for(var o in f||(f={}))Oe.call(f,o)&&re(E,o,f[o]);if(te)for(var o of te(f))Pe.call(f,o)&&re(E,o,f[o]);return E},Q=(E,f)=>be(E,Ee(f));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[126],{50126:(E,f,o)=>{o.d(f,{Z:()=>Ce});var b=o(15861),n=o(17626),R=o(26584),c=o(62208),g=o(32917),u=o(77712),O=(o(90912),o(85931),o(76898)),j=o(84786),P=o(23010),Z=o(78448),D=o(19702),B=o(54984),A=o(14517),C=o(10699),V=o(38114),L=o(20477),Y=o(88879),w=o(55713),W=o(42930),z=o(65234),se=o(36255);class ie{constructor(r){this._controller=r,this._handle=new ae(e=>r.schedule(e))}destroy(){this._handle.destroy()}invoke(r,e){var i=this;return r.buffer&&0!==r.buffer.byteLength?(r.options.sourceSpatialReference&&r.options.sourceSpatialReference instanceof z.Z&&(r.options=Q(T({},r.options),{sourceSpatialReference:r.options.sourceSpatialReference.toJSON()})),this._handle.invoke(r,e).then(s=>{let a=0,d=0;const h=function(){var l=(0,b.Z)(function*(p){if(s.spatialReference=z.Z.fromJSON(s.spatialReference),s.fields)for(;a<s.fields.length;)if(s.fields[a]=se.Z.fromJSON(s.fields[a]),a++,p.madeProgress())return i._controller.reschedule(F=>h(F));const y=s.spatialReference;for(;d<s.features.length;){const F=s.features[d];if(++d,F.uid=Y.Z.generateUID(),(0,c.pC)(F.geometry)&&(F.geometry.spatialReference=y,oe(F.geometry),p.madeProgress()))return i._controller.reschedule(_=>h(_))}return s});return function(y){return l.apply(this,arguments)}}();return this._controller.schedule(l=>h(l))})):Promise.resolve(null)}}function oe(t){switch(t.type){case"polyline":t.paths.reduce((r,e)=>r+e.length,0)<w.DB&&(t.paths=t.paths.map(t.hasZ||t.hasM?r=>r.map(e=>[e[0],e[1],e[2]]):r=>r.map(e=>[e[0],e[1]])));break;case"polygon":t.rings.reduce((r,e)=>r+e.length,0)<w.DB&&(t.rings=t.rings.map(t.hasZ||t.hasM?r=>r.map(e=>[e[0],e[1],e[2]]):r=>r.map(e=>[e[0],e[1]])))}}class ae extends W.q{constructor(r){super("PBFDecoderWorker","_parseFeatureQuery",{_parseFeatureQuery:e=>[e.buffer]},r)}}let S=class extends A.Z{constructor(t){super(t)}get queryFeaturesDehydrated(){var s,a;const t=this.layer.capabilities,r=t&&t.query,i=this.layer.parsedUrl;if(r&&r.supportsFormatPBF){(0,c.Wi)(this._decoder)&&(this._decoder=new ie(this.controller));const d={sourceSpatialReference:null!=(a=null==(s=this.layer.spatialReference)?void 0:s.toJSON())?a:null,applyTransform:!0,maxStringAttributeLength:1024};return(h,l)=>(0,L.Vn)(i,h,"pbf",this._createRequestOptions(l)).then(p=>((0,C.k_)(l),(0,c.pC)(this._decoder)?this._decoder.invoke({buffer:p.data,options:d},l.signal):Promise.reject((0,C.zE)())))}return(d,h)=>(0,L.JT)(i,d,this.layer.spatialReference,this._createRequestOptions(h)).then(l=>(0,V.PA)(l.data))}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}destroy(){this._decoder=(0,c.SC)(this._decoder)}_createRequestOptions(t){return Q(T({},t),{query:T(Q(T({},this.layer.customParameters),{token:this.layer.apiKey}),null==t?void 0:t.query)})}};(0,n._)([(0,u.Cb)({constructOnly:!0})],S.prototype,"layer",void 0),(0,n._)([(0,u.Cb)({constructOnly:!0})],S.prototype,"controller",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],S.prototype,"queryFeaturesDehydrated",null),S=(0,n._)([(0,O.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],S);let N=class extends A.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,n._)([(0,u.Cb)({constructOnly:!0})],N.prototype,"layer",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],N.prototype,"queryFeaturesDehydrated",null),N=(0,n._)([(0,O.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D")],N);let q=class extends A.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}};(0,n._)([(0,u.Cb)({constructOnly:!0})],q.prototype,"layer",void 0),q=(0,n._)([(0,O.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],q);let U=class extends A.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.source.queryFeaturesJSON(t,r).then(V.PA,e=>{if(e&&"query-features-json:unsupported"===e.name)return this.layer.queryFeatures(t,r);throw e})}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,n._)([(0,u.Cb)({constructOnly:!0})],U.prototype,"layer",void 0),(0,n._)([(0,u.Cb)({constructOnly:!0})],U.prototype,"source",void 0),U=(0,n._)([(0,O.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],U);class le{constructor(r){this._memoryCache=null,this._capabilities=null;const e=r.layerView.layer;this._layerView=r.layerView,this.objectIdField=e.objectIdField,this.globalIdField="globalIdField"in e?e.globalIdField:null,this._returnZ=r.returnZ,this._returnM=r.returnM;const i=this._layerView.view.resourceController;this.query=function ne(t,r){return"feature"===t.type&&"feature-layer"===t.source.type?(0,c.pC)(t.infoFor3D)?new N({layer:t}):new S({layer:t,controller:r}):"feature"===t.type&&"memory"===t.source.type||"csv"===t.type||"geojson"===t.type||"oriented-imagery"===t.type||"wfs"===t.type?new U({layer:t,source:t.source}):"ogc-feature"===t.type?new q({layer:t}):null}(e,i.normal),i&&this._memoryCacheEnabled&&(this._memoryCache=i.memoryController.newCache(e.uid))}get _memoryCacheEnabled(){switch(this._layerView.layer.source.type){case"feature-layer":case"ogc-feature":case"oriented-imagery":return!0;case"csv":case"geojson":case"memory":case"wfs":return!1}}destroy(){this._memoryCache=(0,c.SC)(this._memoryCache),this.query.destroy()}createQuery(){const r=this._layerView.layer.createQuery();return r.outFields=this._layerView.availableFields,r.returnZ=this._returnZ,r.returnM=this._returnM,r.outSpatialReference=this.tilingScheme.spatialReference,r}get memoryCache(){return this._memoryCache}get viewingMode(){return this._layerView.view.state.viewingMode}get tilingScheme(){return this._layerView.view.featureTiles.tilingScheme}get scheduler(){const r=this._layerView.view.resourceController;return r?r.scheduler:null}get geometryType(){return this._layerView.layer.geometryType}get fullExtent(){return this._layerView.layer.fullExtent}get tileMaxRecordCount(){return this._layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this._layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return(0,c.pC)(this._capabilities)||(this._capabilities=(0,B.A)(this._layerView.layer)),this._capabilities}logFetchError(r,e){r.error("#fetchTile()",this._layerView.layer,e&&e.message?e.message:e)}}var ue=o(36967),de=o(41632),G=o(23147),pe=o(63290),ce=o(13812),ye=o(2319),he=o(98624),m=o(36630),H=o(59990),J=o(96854),fe=o(46679),K=o(10023);const X="esri.views.layers.FeatureLayerView",$=pe.Z.getLogger(X),me=t=>{let r=class extends t{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.handles.add([(0,g.YP)(()=>{var i;const e=this.layer;return[null==(i=null==e?void 0:e.elevationInfo)?void 0:i.featureExpressionInfo,e&&"displayField"in e?e.displayField:null,e&&"timeInfo"in e&&e.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),g.tX),(0,g.on)(()=>{var e;return null==(e=this.view)?void 0:e.floors},"change",()=>this._handleRequiredFieldsChange()),(0,g.on)(()=>{const e=this.layer;return e&&"sublayers"in e?e.sublayers:null},"change",()=>this._handleRequiredFieldsChange())])}get availableFields(){const{layer:e,layer:{fieldsIndex:i},requiredFields:s}=this;return(0,m.Q0)(i,"outFields"in e&&e.outFields?[...(0,m.Lk)(i,e.outFields),...s]:s)}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){this._override("featureEffect",e)}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){$.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},i=(0,c.pC)(this.filter)?this.filter.createQuery(e):new J.Z(e);if("feature"===this.layer.type){const s=(0,H.c)(this);(0,c.pC)(s)&&(i.where=i.where?`(${i.where}) AND (${s})`:s)}return(0,c.pC)(this.timeExtent)&&(i.timeExtent=(0,c.pC)(i.timeExtent)?i.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),i}createAggregateQuery(){return new J.Z({outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference})}queryFeatures(e,i){throw new Error("missing implementation")}queryObjectIds(e,i){throw new Error("missing implementation")}queryFeatureCount(e,i){throw new Error("missing implementation")}queryExtent(e,i){throw new Error("missing implementation")}fetchPopupFeatures(e,i){var s=this;return(0,b.Z)(function*(){const a=s.validateFetchPopupFeatures(i);if(a)throw a;return s.fetchClientPopupFeatures(i)})()}_loadArcadeModules(e){return e.get("expressionInfos.length")||Array.isArray(e.content)&&e.content.some(i=>"expression"===i.type)?(0,fe.LC)():Promise.resolve()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",e),e.then(()=>{this._updatingRequiredFieldsPromise===e&&this._set("_updatingRequiredFieldsPromise",null)})}_updateRequiredFields(){var e=this;return(0,b.Z)(function*(){if(!e.layer||!e.view)return;const i="3d"===e.view.type,{layer:s,layer:{fieldsIndex:a,objectIdField:d}}=e,h="renderer"in s&&s.renderer,l="orderBy"in s&&s.orderBy,p="featureReduction"in s?s.featureReduction:null,y=new Set,F=yield(0,C.as)([h?h.collectRequiredFields(y,a):null,(0,m.Mu)(y,s),i?(0,m.vl)(y,s):null,(0,c.pC)(e.filter)?(0,m.Ll)(y,s,e.filter):null,(0,c.pC)(e.featureEffect)?(0,m.Ll)(y,s,e.featureEffect.filter):null,p?(0,m.ZV)(y,s,p):null,l?(0,m.Qj)(y,s,l):null]);if("timeInfo"in s&&s.timeInfo&&e.timeExtent&&(0,m.gd)(y,s.fieldsIndex,[s.timeInfo.startField,s.timeInfo.endField]),"feature"===s.type&&(s.floorInfo&&(0,m.gd)(y,s.fieldsIndex,[s.floorInfo.floorField]),i&&(0,c.pC)(s.infoFor3D)&&(null==s.globalIdField&&$.error("globalIdField missing on 3DObjectFeatureLayer"),(0,m.gd)(y,s.fieldsIndex,[s.globalIdField]))),"subtype-group"===s.type){(0,m.AB)(y,a,s.subtypeField);const I=s.sublayers.map(k=>{var ee;return Promise.all([null==(ee=k.renderer)?void 0:ee.collectRequiredFields(y,a),(0,m.Mu)(y,k)])});yield(0,C.as)(I)}for(const I of F)I.error&&$.error(I.error);(0,m.AB)(y,a,d),i&&"displayField"in s&&s.displayField&&(0,m.AB)(y,a,s.displayField);const _=Array.from(y).sort();e._set("requiredFields",_)})()}validateFetchPopupFeatures(e){var i;if((0,c.Wi)(e))return null;for(const s of null!=(i=e.clientGraphics)?i:[]){const a=s.layer;if("popupEnabled"in a&&!a.popupEnabled)return new R.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:a});if(s.isAggregate){const d="featureReduction"in a?a.featureReduction:null;if(!(d&&"popupTemplate"in d&&d.popupEnabled&&d.popupTemplate))return new R.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:a})}else if("popupTemplate"in a&&!(0,K.V)(a,e))return new R.Z("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:a})}}fetchClientPopupFeatures(e){var i=this;return(0,b.Z)(function*(){const s=(0,c.pC)(e)?e.clientGraphics:null;if(!s||0===s.length)return[];const a=new Array(s.length),d=new Map,h=yield i.createPopupQuery(e);for(let l=0;l<s.length;l++){const p=s[l];if(p.isAggregate){a[l]=p;continue}const y=p.layer;if(!("popupEnabled"in y))continue;const F=(0,m.Lk)(i.layer.fieldsIndex,h.outFields),_=(0,K.V)(y,e);if((0,c.Wi)(_))continue;const I=yield i._loadArcadeModules(_);I&&I.arcadeUtils.hasGeometryOperations(_)||!(0,m.R9)(F,p)?d.set(p.getObjectId(),{graphic:p,index:l}):a[l]=p}if("stream"===i.layer.type||0===d.size)return a.filter(Boolean);h.objectIds=Array.from(d.keys());try{const l=yield i.layer.queryFeatures(h);for(const p of l.features){const{graphic:{geometry:y},index:F}=d.get(p.getObjectId());p.geometry||(p.geometry=y),a[F]=p}}catch(l){}return a.filter(Boolean)})()}createPopupQuery(e){var i=this;return(0,b.Z)(function*(){const s=i.layer.createQuery(),a=new Set;let d=!1;const h=(0,c.pC)(e)&&e.clientGraphics?e.clientGraphics.map(l=>l.layer):[i.layer];for(const l of h){if(!("popupEnabled"in l))continue;const p=(0,K.V)(l,e);if((0,c.Wi)(p))continue;const y=yield i._loadArcadeModules(p),F=y&&y.arcadeUtils.hasGeometryOperations(p);d=!("point"!==i.layer.geometryType&&!F);const _=yield(0,K.e)(i.layer,p);for(const I of _)a.add(I)}if(s.returnGeometry=d,s.returnZ=d,s.returnM=d,s.outFields=Array.from(a),s.outSpatialReference=i.view.spatialReference,"feature"===i.layer.type){const l=(0,H.c)(i);(0,c.pC)(l)&&(s.where=s.where?`(${s.where}) AND (${l})`:l)}return s})()}canResume(){return!(!super.canResume()||(0,c.pC)(this.timeExtent)&&this.timeExtent.isEmpty)}};return(0,n._)([(0,u.Cb)()],r.prototype,"_updatingRequiredFieldsPromise",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],r.prototype,"availableFields",null),(0,n._)([(0,u.Cb)({type:ye.Z})],r.prototype,"featureEffect",null),(0,n._)([(0,u.Cb)({type:he.Z})],r.prototype,"filter",void 0),(0,n._)([(0,u.Cb)(ce.qG)],r.prototype,"timeExtent",void 0),(0,n._)([(0,u.Cb)()],r.prototype,"layer",void 0),(0,n._)([(0,u.Cb)({type:Number})],r.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,u.Cb)({readOnly:!0,type:Boolean})],r.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,u.Cb)({readOnly:!0})],r.prototype,"requiredFields",void 0),(0,n._)([(0,u.Cb)()],r.prototype,"suspended",void 0),(0,n._)([(0,u.Cb)()],r.prototype,"view",void 0),r=(0,n._)([(0,O.j)(X)],r),r};var ge=o(45611),Fe=o(94421);let x=class extends((0,Fe.Z)((0,Z.R)(me((0,D.A)(ge.Z))))){constructor(t){super(t),this._controllerTotal=0,this._processorTotal=0,this.suspendResumeExtentMode="data"}initialize(){this.handles.add((0,g.YP)(()=>this._updatingRequiredFieldsPromise,t=>this.updatingHandles.addPromise(t),g.tX))}destroy(){this.updatingHandles.removeAll(),this.handles.removeAll(),this._fetcherContext=(0,c.SC)(this._fetcherContext)}get maximumNumberOfFeatures(){var t,r;return null!=(r=null==(t=this.controller)?void 0:t.maximumNumberOfFeatures)?r:this._get("maximumNumberOfFeatures")}set maximumNumberOfFeatures(t){this._set("maximumNumberOfFeatures",t),this.controller&&(this.controller.maximumNumberOfFeatures=t)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){var e,i;let t=0;if(null!=(e=this.controller)&&e.updating){const s=this.controller.updatingRemaining,a=Math.max(this.controller.updatingTotal,this._controllerTotal);a>0&&(t=(a-s)/a,this._controllerTotal=a)}let r=0;if(null!=(i=this.processor)&&i.updating){const s=this.processor.updatingRemaining,a=Math.max(s,this._processorTotal);a>0&&(r=(a-s)/a,this._processorTotal=a)}return.5*(t+r)}get updatePolicy(){if(!this.controller)return G.j.ASYNC;switch(this.controller.mode){case"snapshot":{const t=ve[this.layer.geometryType];return null==t||this.controller.serviceDataCount>t?G.j.ASYNC:G.j.SYNC}case"tiles":return G.j.ASYNC}}get hasZ(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsZ)&&("returnZ"in t&&null!=t.returnZ?t.returnZ:r.supportsZ)}get hasM(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsM)&&"returnM"in t&&null!=t.returnM&&t.returnM}setVisibility(t,r){var e;null==(e=this.processor)||e.setObjectIdVisibility(t,r)}createQuery(){return super.createQuery()}queryFeatures(t,r){const e=()=>super.queryFeatures(t,r);return"mesh"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(t),e):e()}beforeSetController(t){t.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this._fetcherContext=new le({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const t=new P.g({layerView:this,context:this._fetcherContext,graphics:new ue.g,extent:this.clippingExtent});return this.updatingHandles.add(()=>t.serviceDataExtent,r=>{this.processor&&(this.processor.dataExtent=r)},g.nn),this.handles.add((0,g.YP)(()=>this.suspended,r=>{r?t.suspend():t.resume()},g.tX)),this.updatingHandles.add(()=>{var r;return null==(r=this.processor)?void 0:r.displayFeatureLimit},r=>t.displayFeatureLimit=r,g.nn),this.handles.add((0,g.gx)(()=>!this.updating,()=>{this._controllerTotal=0,this._processorTotal=0})),t}doRefresh(t){var r=this;return(0,b.Z)(function*(){t&&!r.suspended&&r.controller&&r.controller.refetch(),r.processor.refreshFilter()})()}getUsedMemory(){var t,r,e,i;return(null!=(r=null==(t=this.processor)?void 0:t.usedMemory)?r:0)+(null!=(i=null==(e=this.controller)?void 0:e.memoryForUnusedFeatures)?i:0)}getUnloadedMemory(){var s,a,d,h,l,p,y,F;const t=null!=(a=null==(s=this.processor)?void 0:s.unprocessedMemoryEstimate)?a:0,r=null!=(h=null==(d=this.controller)?void 0:d.expectedFeatureDiff)?h:0,e=null!=(p=null==(l=this.processor)?void 0:l.loadedFeatures)?p:0;return t+r*(null!=(F=null==(y=this.processor)?void 0:y.usedMemoryPerFeature)?F:0)*(e/(e+r))}ignoresMemoryFactor(){var t;return null==(t=this.controller)?void 0:t.hasMaximumNumberOfFeaturesOverride}_queryFeaturesMesh(t,r){var e=this;return(0,b.Z)(function*(){yield e._validateQueryFeaturesMesh(t);const i=yield r();if(t&&t.outStatistics||(0,c.Wi)(e.graphics3DProcessor))return i;const s=e.layer.objectIdField,a=e.graphics3DProcessor.graphics3DGraphicsByObjectID,d=[];for(const h of i.features)if(h.geometry){const l=a.get(h.attributes[s]);l&&(h.geometry=(0,j.kB)(l.graphic.geometry),d.push(h))}else d.push(h);return i.features=d,i})()}_validateQueryFeaturesMesh(t){var r=this;return(0,b.Z)(function*(){if(!t)return;const e=s=>{throw new R.Z("feature-layer-view:unsupported-query",`Queries on Mesh feature collection layers do not support '${s}'`)},i=["quantizationParameters","geometryPrecision","maxAllowableOffset"];for(const s of i)null!=t[s]&&e(s);"returnM"in t&&t.returnM&&e("returnM"),"returnCentroid"in t&&t.returnCentroid&&e("returnCentroid"),(0,c.pC)(t.outSpatialReference)&&!t.outSpatialReference.equals(r.view.spatialReference)&&e("outSpatialReference")})()}get performanceInfo(){var i,s,a,d,h,l,p;const t=null==(i=this.controller)?void 0:i.displayFeatureLimit,r=(0,c.pC)(t)?t.averageSymbolComplexity:void 0,e=(0,c.pC)(r)?`f:${r.primitivesPerFeature},v:${r.primitivesPerCoordinate}`:"n/a";return T(Q(T({},this._getResourceInfo()),{partial:this.maximumNumberOfFeaturesExceeded,mode:null!=(a=null==(s=this.controller)?void 0:s.mode)?a:"n/a",symbolComplexity:e,nodes:null!=(h=null==(d=this.controller)?void 0:d.tileDescriptors.length)?h:0}),null!=(p=null==(l=this.controller)?void 0:l.debug)?p:{storedFeatures:0,totalVertices:0})}get test(){var t;return{updatePolicy:this.updatePolicy,controller:this.controller,loadedGraphics:null==(t=this.controller)?void 0:t.graphics}}};(0,n._)([(0,u.Cb)()],x.prototype,"layer",void 0),(0,n._)([(0,u.Cb)()],x.prototype,"controller",void 0),(0,n._)([(0,u.Cb)()],x.prototype,"_controllerTotal",void 0),(0,n._)([(0,u.Cb)()],x.prototype,"_processorTotal",void 0),(0,n._)([(0,u.Cb)()],x.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,u.Cb)()],x.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,u.Cb)(de.q)],x.prototype,"updatingProgress",void 0),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"updatingProgressValue",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"updatePolicy",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"hasZ",null),(0,n._)([(0,u.Cb)({readOnly:!0})],x.prototype,"hasM",null),(0,n._)([(0,u.Cb)()],x.prototype,"suspendResumeExtentMode",void 0),x=(0,n._)([(0,O.j)("esri.views.3d.layers.FeatureLayerViewBase3D")],x);const ve={point:5e3,polygon:500,polyline:1e3},Ce=x},94421:(E,f,o)=>{o.d(f,{Z:()=>O});var b=o(17626),n=o(63290),R=o(10699),c=o(32917),g=o(77712),M=(o(90912),o(85931),o(76898));const O=j=>{let P=class extends j{initialize(){this.handles.add((0,c.on)(()=>this.layer,"refresh",Z=>{this.doRefresh(Z.dataChanged).catch(D=>{(0,R.D_)(D)||n.Z.getLogger(this.declaredClass).error(D)})}),"RefreshableLayerView")}};return(0,b._)([(0,g.Cb)()],P.prototype,"layer",void 0),P=(0,b._)([(0,M.j)("esri.layers.mixins.RefreshableLayerView")],P),P}},10023:(E,f,o)=>{o.d(f,{V:()=>u,e:()=>c});var b=o(15861),n=o(62208),R=o(36630);function c(v){return g.apply(this,arguments)}function g(){return(g=(0,b.Z)(function*(v,M=v.popupTemplate){var V,L;if((0,n.Wi)(M))return[];const O=yield M.getRequiredFields(v.fieldsIndex),{lastEditInfoEnabled:j}=M,{objectIdField:P,typeIdField:Z,globalIdField:D,relationships:B}=v;if(O.includes("*"))return["*"];const A=j?yield(0,R.CH)(v):[],C=(0,R.Q0)(v.fieldsIndex,[...O,...A]);return Z&&C.push(Z),C&&P&&(null==(V=v.fieldsIndex)?void 0:V.has(P))&&!C.includes(P)&&C.push(P),C&&D&&(null==(L=v.fieldsIndex)?void 0:L.has(D))&&!C.includes(D)&&C.push(D),B&&B.forEach(Y=>{var W;const{keyField:w}=Y;C&&w&&(null==(W=v.fieldsIndex)?void 0:W.has(w))&&!C.includes(w)&&C.push(w)}),C})).apply(this,arguments)}function u(v,M){return v.popupTemplate?v.popupTemplate:(0,n.pC)(M)&&M.defaultPopupTemplateEnabled&&(0,n.pC)(v.defaultPopupTemplate)?v.defaultPopupTemplate:null}}}]);
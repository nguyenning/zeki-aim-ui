"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5645],{14259:(b,U,t)=>{t.d(U,{q:()=>p});var y,C,T={};y={get exports(){return T},set exports(h){T=h}},void 0!==(C=function(){function M(s,i,o,_,r){for(;_>o;){if(_-o>600){var a=_-o+1,u=i-o+1,E=Math.log(a),I=.5*Math.exp(2*E/3),R=.5*Math.sqrt(E*I*(a-I)/a)*(u-a/2<0?-1:1);M(s,i,Math.max(o,Math.floor(i-u*I/a+R)),Math.min(_,Math.floor(i+(a-u)*I/a+R)),r)}var A=s[i],D=o,c=_;for(O(s,o,i),r(s[_],A)>0&&O(s,o,_);D<c;){for(O(s,D,c),D++,c--;r(s[D],A)<0;)D++;for(;r(s[c],A)>0;)c--}0===r(s[o],A)?O(s,o,c):O(s,++c,_),c<=i&&(o=c+1),i<=c&&(_=c-1)}}function O(s,i,o){var _=s[i];s[i]=s[o],s[o]=_}function n(s,i){return s<i?-1:s>i?1:0}return function h(s,i,o,_,r){M(s,i,o||0,_||s.length-1,r||n)}}())&&(y.exports=C);const p=T},77044:(b,U,t)=>{t.d(U,{Y:()=>C});var y=t(62208);function g(n,s){return n?s?4:3:s?3:2}function C(n,s,i,o,_){if((0,y.Wi)(s)||!s.lengths.length)return null;const r="upperLeft"===(null==_?void 0:_.originPosition)?-1:1;n.lengths.length&&(n.lengths.length=0),n.coords.length&&(n.coords.length=0);const a=n.coords,u=[],E=i?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:I,coords:R}=s,A=g(i,o);let D=0;for(const c of I){const f=T(E,R,D,c,i,o,r);f&&u.push(f),D+=c*A}if(u.sort((c,f)=>{let v=r*c[2]-r*f[2];return 0===v&&i&&(v=c[4]-f[4]),v}),u.length){let c=6*u[0][2];a[0]=u[0][0]/c,a[1]=u[0][1]/c,i&&(c=6*u[0][4],a[2]=0!==c?u[0][3]/c:0),(a[0]<E[0]||a[0]>E[1]||a[1]<E[2]||a[1]>E[3]||i&&(a[2]<E[4]||a[2]>E[5]))&&(a.length=0)}if(!a.length){const c=s.lengths[0]?function m(n,s,i,o,_){const r=g(o,_);let a=s,u=s+r,E=0,I=0,R=0,A=0;for(let D=0,c=i-1;D<c;D++,a+=r,u+=r){const f=n[a],v=n[a+1],L=n[a+2],j=n[u],e=n[u+1],l=n[u+2],d=o?h(f,v,L,j,e,l):p(f,v,j,e);if(d)if(E+=d,o){const P=O(f,v,L,j,e,l);I+=d*P[0],R+=d*P[1],A+=d*P[2]}else{const P=M(f,v,j,e);I+=d*P[0],R+=d*P[1]}}return E>0?o?[I/E,R/E,A/E]:[I/E,R/E]:i>0?o?[n[s],n[s+1],n[s+2]]:[n[s],n[s+1]]:null}(R,0,I[0],i,o):null;if(!c)return null;a[0]=c[0],a[1]=c[1],i&&c.length>2&&(a[2]=c[2])}return n}function T(n,s,i,o,_,r,a=1){const u=g(_,r);let E=i,I=i+u,R=0,A=0,D=0,c=0,f=0;for(let L=0,j=o-1;L<j;L++,E+=u,I+=u){const e=s[E],l=s[E+1],d=s[E+2],P=s[I],B=s[I+1],S=s[I+2];let W=e*B-P*l;c+=W,R+=(e+P)*W,A+=(l+B)*W,_&&(W=e*S-P*d,D+=(d+S)*W,f+=W),e<n[0]&&(n[0]=e),e>n[1]&&(n[1]=e),l<n[2]&&(n[2]=l),l>n[3]&&(n[3]=l),_&&(d<n[4]&&(n[4]=d),d>n[5]&&(n[5]=d))}if(c*a>0&&(c*=-1),f*a>0&&(f*=-1),!c)return null;const v=[R,A,.5*c];return _&&(v[3]=D,v[4]=.5*f),v}function p(n,s,i,o){const _=i-n,r=o-s;return Math.sqrt(_*_+r*r)}function h(n,s,i,o,_,r){const a=o-n,u=_-s,E=r-i;return Math.sqrt(a*a+u*u+E*E)}function M(n,s,i,o){return[n+.5*(i-n),s+.5*(o-s)]}function O(n,s,i,o,_,r){return[n+.5*(o-n),s+.5*(_-s),i+.5*(r-i)]}},19702:(b,U,t)=>{t.d(U,{A:()=>s});var y=t(15861),g=t(17626),C=t(54024),T=t(10699),m=t(32917),p=t(77712),O=(t(90912),t(85931),t(76898)),n=t(36947);const s=i=>{let o=class extends i{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(_){super.postscript(_),(0,n.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var _=this;return(0,y.Z)(function*(){const r=new AbortController,a=r.signal;_.handles.add((0,C.kB)(()=>r.abort())),yield(0,m.N1)(()=>{var E;return null==(E=_.view.defaultsFromMap)?void 0:E.heightModelInfoReady},a),(0,T.k_)(a);const u=(0,n.Wt)(_.layer,_.view.heightModelInfo,_.supportsHeightUnitConversion);if(u)throw u})()}canResume(){const _=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!_||!_.minScale||!_.maxScale||_.minScale>=_.maxScale)}getSuspendInfo(){const _=super.getSuspendInfo(),r=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return r&&r.minScale&&r.maxScale&&r.minScale<r.maxScale&&(_.outsideScaleRange=!0),_}};return(0,g._)([(0,p.Cb)()],o.prototype,"view",void 0),(0,g._)([(0,p.Cb)()],o.prototype,"slicePlaneEnabled",void 0),o=(0,g._)([(0,O.j)("esri.views.3d.layers.LayerView3D")],o),o}},62124:(b,U,t)=>{t.r(U),t.d(U,{default:()=>j});var y=t(15861),g=t(17626),C=t(46160),T=t(46882),m=t(62208),p=t(32917),h=t(77712),n=(t(90912),t(85931),t(76898)),s=t(99683),i=t(58924),o=t(53753),_=t(719),r=t(17718),a=t(29739),u=t(69583),E=t(19702),I=t(32400),R=t(89765),A=t(36967),D=t(23147),c=t(45611);let v=class extends((0,E.A)(c.Z)){constructor(){super(...arguments),this.type="route-3d",this.loadedGraphics=new A.g,this._byObjectID=new Map,this.slicePlaneEnabled=!1,this.fullExtentInLocalViewSpatialReference=null}initialize(){this._set("processor",new I.D({owner:this,scaleVisibilityEnabled:!0,frustumVisibilityEnabled:!0})),this.addResolvingPromise(this.processor.initializePromise),this.updatingHandles.addOnCollectionChange(()=>this._routeItems,e=>this._routeItemsChanged(e),p.nn),this.addResolvingPromise((0,R.E)(this).then(e=>this.fullExtentInLocalViewSpatialReference=e)),this.handles.add((0,p.gx)(()=>{var e,l;return null==(l=null==(e=this.view)?void 0:e.basemapTerrain)?void 0:l.ready},()=>()=>this.notifyChange("updating"),{once:!0}))}destroy(){var e;this.handles.removeAll(),this.updatingHandles.removeAll(),this._set("processor",(0,m.SC)(this.processor)),null==(e=this._get("_routeItems"))||e.destroy()}get _routeItems(){return new T.Z({getCollections:()=>[this.layer.pointBarriers,this.layer.polygonBarriers,this.layer.polylineBarriers,this.layer.stops,this.layer.directionLines,this.layer.directionPoints,(0,m.pC)(this.layer.routeInfo)?new C.Z([this.layer.routeInfo]):null]})}_routeItemsChanged(e){if(e.removed.length){this.loadedGraphics.removeMany(e.removed.map(l=>{const d=this._byObjectID.get(l);return this._byObjectID.delete(l),d}));for(const l of e.removed)this.handles.remove(l)}if(e.added.length){this.loadedGraphics.addMany(e.added.map(l=>{const d=l.toGraphic();return this._byObjectID.set(l,d),d}));for(const l of e.added)this.handles.add([(0,p.YP)(()=>l.geometry,(d,P)=>{this._updateGraphic(l,"geometry",d,P)}),(0,p.YP)(()=>l.symbol,(d,P)=>{this._updateGraphic(l,"symbol",d,P)})],l)}}get legendEnabled(){var e;return this.canResume()&&!(null!=(e=this.processor)&&e.frustumVisibilitySuspended)}getSuspendInfo(){var l,d,P,B;const e=super.getSuspendInfo();return e.outsideScaleRange=null!=(d=null==(l=this.processor)?void 0:l.scaleVisibilitySuspended)&&d,e.outsideOfView=null!=(B=null==(P=this.processor)?void 0:P.frustumVisibilitySuspended)&&B,e}fetchPopupFeatures(e,l){return(0,y.Z)(function*(){var d,P;return null!=(P=null==(d=(0,m.Wg)(l))?void 0:d.clientGraphics)?P:[]})()}getHit(e){return this.processor.getHit(e)}whenGraphicBounds(e,l){return this.processor.whenGraphicBounds(e,l)}computeAttachmentOrigin(e,l){var d;return null==(d=this.processor)?void 0:d.computeAttachmentOrigin(e,l)}getSymbolLayerSize(e,l){return this.processor.getSymbolLayerSize(e,l)}queryGraphics(){var e=this;return(0,y.Z)(function*(){return new C.Z(e.loadedGraphics.toArray())})()}maskOccludee(e){return this.processor.maskOccludee(e)}highlight(e){return function f(e){return e instanceof s.Z||e instanceof i.Z||e instanceof o.Z||e instanceof _.Z||e instanceof r.Z||e instanceof a.Z||e instanceof u.Z}(e)&&(e=this._byObjectID.get(e)),this.processor.highlight(e)}get updatePolicy(){var e;return(null==(e=this.processor)?void 0:e.graphicsCore.effectiveUpdatePolicy)||D.j.SYNC}canResume(){var e;return super.canResume()&&!(null!=(e=this.processor)&&e.scaleVisibilitySuspended)}isUpdating(){var e,l,d;return!((null==(e=this.processor)||!e.updating)&&(null==(d=null==(l=this.view)?void 0:l.basemapTerrain)?void 0:d.ready))}get performanceInfo(){var e,l,d;return{displayedNumberOfFeatures:this.loadedGraphics.length,maximumNumberOfFeatures:-1,totalNumberOfFeatures:-1,nodes:0,core:null,updating:this.updating,elevationUpdating:null!=(l=null==(e=this.processor)?void 0:e.elevationAlignment.updating)&&l,visibilityFrustum:!(null!=(d=this.processor)&&d.frustumVisibilitySuspended)}}_updateGraphic(e,l,d,P){var S;const B=this._byObjectID.get(e);B[l]=d,L.graphic=B,L.property=l,L.oldValue=P,L.newValue=d,null==(S=this.processor)||S.graphicsCore.graphicUpdateHandler(L)}};(0,g._)([(0,h.Cb)()],v.prototype,"_routeItems",null),(0,g._)([(0,h.Cb)()],v.prototype,"loadedGraphics",void 0),(0,g._)([(0,h.Cb)({readOnly:!0})],v.prototype,"legendEnabled",null),(0,g._)([(0,h.Cb)()],v.prototype,"layer",void 0),(0,g._)([(0,h.Cb)({readOnly:!0})],v.prototype,"processor",void 0),(0,g._)([(0,h.Cb)({type:Boolean})],v.prototype,"slicePlaneEnabled",void 0),v=(0,g._)([(0,n.j)("esri.views.3d.layers.RouteLayerView3D")],v);const L={graphic:null,property:null,oldValue:null,newValue:null},j=v},89765:(b,U,t)=>{t.d(U,{E:()=>T});var y=t(62208),g=t(46367),C=t(35082);function T(m){const p=m.view.spatialReference,h=m.layer.fullExtent,M=(0,y.pC)(h)&&h.spatialReference;if((0,y.Wi)(h)||!M)return Promise.resolve(null);if(M.equals(p))return Promise.resolve(h.clone());const O=(0,g.iV)(h,p);return(0,y.pC)(O)?Promise.resolve(O):m.view.state.isLocal?(0,C.projectGeometry)(h,p,m.layer.portalItem).then(n=>!m.destroyed&&n?n:null).catch(()=>null):Promise.resolve(null)}},36967:(b,U,t)=>{t.d(U,{g:()=>T});var y=t(61885),g=t(73234),C=t(28862);class T extends y.Z{constructor(){super(...arguments),this._set=new Set}clear(){if(this._set.size>0){const p=this.toArray();this._set.clear(),this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:p})}}get length(){return this._set.size}addMany(p){if(0!==p.length){for(const h of p)this._set.add(h);this.emit("after-changes",{type:g.y.ADD}),this.emit("change",{added:p,removed:[]})}}remove(p){this._set.delete(p)&&(this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:[p]}))}removeMany(p){const h=[];for(const M of p)this._set.delete(M)&&h.push(M);h.length>0&&(this.emit("after-changes",{type:g.y.REMOVE}),this.emit("change",{added:[],removed:h}))}toArray(){return[...this._set]}find(p){let h;return(0,C.f)(this._set,M=>!!p(M)&&(h=M,!0)),h}forEach(p){this._set.forEach(h=>p(h))}}},45611:(b,U,t)=>{t.d(U,{Z:()=>_});var y=t(17626),g=t(14517),C=t(61885),T=t(80542),m=t(61996),p=t(63290),h=t(62208),M=t(60330),O=t(77712),i=(t(90912),t(85931),t(76898));let o=class extends((0,T.p)((0,m.IG)((0,M.v)(C.Z.EventedMixin(g.Z))))){constructor(r){super(r),this.layer=null,this.parent=null}initialize(){this.when().catch(r=>{if("layerview:create-error"!==r.name){const a=this.layer&&this.layer.id||"no id",u=this.layer&&this.layer.title||"no title";p.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${u}', id: '${a}')`,r)}})}get fullOpacity(){return(0,h.Pt)(this.get("layer.opacity"),1)*(0,h.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var r;return!this.suspended&&!0===(null==(r=this.layer)?void 0:r.legendEnabled)}get updating(){var r;return!!(null!=(r=this.updatingHandles)&&r.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var r;return!0===(null==(r=this.layer)?void 0:r.visible)}set visible(r){this._overrideIfSome("visible",r)}canResume(){var r,a,u;return this.visible&&(null==(r=this.layer)?void 0:r.loaded)&&!(null!=(a=this.parent)&&a.suspended)&&(null==(u=this.view)?void 0:u.ready)||!1}getSuspendInfo(){const r=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(r.viewNotReady=!0),this.layer&&this.layer.loaded||(r.layerNotLoaded=!0),this.visible||(r.layerInvisible=!0),r}isUpdating(){return!1}};(0,y._)([(0,O.Cb)()],o.prototype,"fullOpacity",null),(0,y._)([(0,O.Cb)()],o.prototype,"layer",void 0),(0,y._)([(0,O.Cb)()],o.prototype,"parent",void 0),(0,y._)([(0,O.Cb)({readOnly:!0})],o.prototype,"suspended",null),(0,y._)([(0,O.Cb)({readOnly:!0})],o.prototype,"suspendInfo",null),(0,y._)([(0,O.Cb)({readOnly:!0})],o.prototype,"legendEnabled",null),(0,y._)([(0,O.Cb)({type:Boolean,readOnly:!0})],o.prototype,"updating",null),(0,y._)([(0,O.Cb)({readOnly:!0})],o.prototype,"updatingProgress",null),(0,y._)([(0,O.Cb)()],o.prototype,"visible",null),(0,y._)([(0,O.Cb)()],o.prototype,"view",void 0),o=(0,y._)([(0,i.j)("esri.views.layers.LayerView")],o);const _=o}}]);
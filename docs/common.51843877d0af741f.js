"use strict";var lt=Object.defineProperty,ct=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,tt=(ce,ee,t)=>ee in ce?lt(ce,ee,{enumerable:!0,configurable:!0,writable:!0,value:t}):ce[ee]=t,fe=(ce,ee)=>{for(var t in ee||(ee={}))ut.call(ee,t)&&tt(ce,t,ee[t]);if(et)for(var t of et(ee))ht.call(ee,t)&&tt(ce,t,ee[t]);return ce},Oe=(ce,ee)=>ct(ce,_t(ee));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8592],{91376:(ce,ee,t)=>{function D(m){const S=function K(m,P){return function v(S){return S?S.closest(P)||v(R(A(S))):null}(m)}(m,"[dir]");return S?S.getAttribute("dir"):"ltr"}function A(m){return m.getRootNode()}function R(m){return m.host||null}function U(m,{selector:P,id:v}){return function S(k){if(!k)return null;k.assignedSlot&&(k=k.assignedSlot);const te=A(k),ae=v?"getElementById"in te?te.getElementById(v):null:P?te.querySelector(P):null,Q=R(te);return ae||(Q?S(Q):null)}(m)}t.d(ee,{a:()=>D,b:()=>b,c:()=>U,s:()=>j,t:()=>L});const T=":not([slot])";function b(m,P,v){P&&!Array.isArray(P)&&"string"!=typeof P&&(v=P,P=null);const S=P?Array.isArray(P)?P.map(k=>`[slot="${k}"]`).join(","):`[slot="${P}"]`:T;return null!=v&&v.all?function O(m,P,v){let S=P===T?_(m,T):Array.from(m.querySelectorAll(P));S=v&&!1===v.direct?S:S.filter(te=>te.parentElement===m),S=null!=v&&v.matches?S.filter(te=>null==te?void 0:te.matches(v.matches)):S;const k=null==v?void 0:v.selector;return k?S.map(te=>Array.from(te.querySelectorAll(k))).reduce((te,ae)=>[...te,...ae],[]).filter(te=>!!te):S}(m,S,v):function h(m,P,v){let S=P===T?_(m,T)[0]||null:m.querySelector(P);S=v&&!1===v.direct||(null==S?void 0:S.parentElement)===m?S:null,S=null!=v&&v.matches?null!=S&&S.matches(v.matches)?S:null:S;const k=null==v?void 0:v.selector;return k?null==S?void 0:S.querySelector(k):S}(m,S,v)}function _(m,P){return m?Array.from(m.children||[]).filter(v=>null==v?void 0:v.matches(P)):[]}function j(m,P,v){return"string"==typeof P&&""!==P?P:""===P?m[v]:void 0}function L(m){return(!!m).toString()}},61642:(ce,ee,t)=>{t.d(ee,{Z:()=>w});var c=t(17626),B=t(8425),x=t(14517),W=t(79608),Y=t(86810),F=t(62208),z=t(77712),A=(t(85931),t(8314),t(90912),t(76898)),R=t(40405),G=t(49672),U=t(82706);let K=class extends((0,Y.eC)((0,W.J)(x.Z))){constructor($){super($),this.position=null,this.elevationInfo=null,this.feature=null}equals($){return(0,F._W)(this.position,$.position)&&(0,F._W)(this.elevationInfo,$.elevationInfo)&&(0,B.kk)(this.feature,$.feature)}};(0,c._)([(0,z.Cb)({type:G.Z}),(0,R.B)()],K.prototype,"position",void 0),(0,c._)([(0,z.Cb)({type:U.ZP}),(0,R.B)()],K.prototype,"elevationInfo",void 0),(0,c._)([(0,z.Cb)(B.rX)],K.prototype,"feature",void 0),K=(0,c._)([(0,A.j)("esri.analysis.LineOfSightAnalysisObserver")],K);const w=K},57574:(ce,ee,t)=>{t.d(ee,{Z:()=>K});var c=t(17626),B=t(8425),x=t(79608),W=t(86810),Y=t(62208),F=t(77712),H=(t(85931),t(8314),t(90912),t(76898)),A=t(40405),R=t(49672),G=t(82706);let U=class extends((0,W.eC)(x.j)){constructor(w){super(w),this.position=null,this.elevationInfo=null,this.feature=null}equals(w){return(0,Y._W)(this.position,w.position)&&(0,Y._W)(this.elevationInfo,w.elevationInfo)&&(0,B.kk)(this.feature,w.feature)}};(0,c._)([(0,F.Cb)({type:R.Z}),(0,A.B)()],U.prototype,"position",void 0),(0,c._)([(0,F.Cb)({type:G.ZP}),(0,A.B)()],U.prototype,"elevationInfo",void 0),(0,c._)([(0,F.Cb)(B.rX)],U.prototype,"feature",void 0),U=(0,c._)([(0,H.j)("esri.analysis.LineOfSightAnalysisTarget")],U);const K=U},8425:(ce,ee,t)=>{t.d(ee,{kk:()=>B,pD:()=>x,rX:()=>W});var c=t(62208);function B(z,Z){return x(z)===x(Z)}function x(z){if((0,c.Wi)(z))return null;let D=null;return D=null!=z.objectId?z.objectId:null!=z.layer&&"objectIdField"in z.layer&&null!=z.layer.objectIdField&&null!=z.attributes?z.attributes[z.layer.objectIdField]:z.uid,null==D?null:`o-${null!=z.layer?z.layer.id:""}-${D}`}const W={json:{write:{writer:function Y(z,Z){var D;(0,c.Wi)(z)||null==(null==(D=z.layer)?void 0:D.objectIdField)||null==z.attributes||(Z.feature={layerId:z.layer.id,objectId:z.attributes[z.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function F(z){if(null!=z.layerId&&null!=z.objectId)return{uid:null,layer:{id:z.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:z.objectId}}}}}}}},7006:(ce,ee,t)=>{t.d(ee,{A:()=>m,B:()=>P,C:()=>v,D:()=>S,E:()=>k,F:()=>te,G:()=>ae,H:()=>Q,I:()=>X,J:()=>se,K:()=>oe,a:()=>Y,b:()=>F,c:()=>W,d:()=>z,e:()=>x,f:()=>Z,g:()=>re,h:()=>D,i:()=>H,j:()=>G,k:()=>w,l:()=>V,m:()=>T,n:()=>b,o:()=>U,p:()=>_,q:()=>h,r:()=>K,s:()=>$,t:()=>A,u:()=>O,v:()=>M,w:()=>R,x:()=>j,y:()=>q,z:()=>L});var c=t(4918),B=t(15994);function x(E){return c.G.extendedSpatialReferenceInfo(E)}function W(E,a,C){return c.G.clip(B.N,E,a,C)}function Y(E,a,C){return c.G.cut(B.N,E,a,C)}function F(E,a,C){return c.G.contains(B.N,E,a,C)}function z(E,a,C){return c.G.crosses(B.N,E,a,C)}function Z(E,a,C,J){return c.G.distance(B.N,E,a,C,J)}function D(E,a,C){return c.G.equals(B.N,E,a,C)}function H(E,a,C){return c.G.intersects(B.N,E,a,C)}function A(E,a,C){return c.G.touches(B.N,E,a,C)}function R(E,a,C){return c.G.within(B.N,E,a,C)}function G(E,a,C){return c.G.disjoint(B.N,E,a,C)}function U(E,a,C){return c.G.overlaps(B.N,E,a,C)}function K(E,a,C,J){return c.G.relate(B.N,E,a,C,J)}function w(E,a){return c.G.isSimple(B.N,E,a)}function $(E,a){return c.G.simplify(B.N,E,a)}function V(E,a,C=!1){return c.G.convexHull(B.N,E,a,C)}function T(E,a,C){return c.G.difference(B.N,E,a,C)}function b(E,a,C){return c.G.symmetricDifference(B.N,E,a,C)}function _(E,a,C){return c.G.intersect(B.N,E,a,C)}function O(E,a,C=null){return c.G.union(B.N,E,a,C)}function h(E,a,C,J,ne,le,ie){return c.G.offset(B.N,E,a,C,J,ne,le,ie)}function M(E,a,C,J,ne=!1){return c.G.buffer(B.N,E,a,C,J,ne)}function j(E,a,C,J,ne,le,ie){return c.G.geodesicBuffer(B.N,E,a,C,J,ne,le,ie)}function q(E,a,C,J=!0){return c.G.nearestCoordinate(B.N,E,a,C,J)}function L(E,a,C){return c.G.nearestVertex(B.N,E,a,C)}function m(E,a,C,J,ne){return c.G.nearestVertices(B.N,E,a,C,J,ne)}function P(E,a,C,J){if(null==a||null==J)throw new Error("Illegal Argument Exception");const ne=c.G.rotate(a,C,J);return ne.spatialReference=E,ne}function v(E,a,C){if(null==a||null==C)throw new Error("Illegal Argument Exception");const J=c.G.flipHorizontal(a,C);return J.spatialReference=E,J}function S(E,a,C){if(null==a||null==C)throw new Error("Illegal Argument Exception");const J=c.G.flipVertical(a,C);return J.spatialReference=E,J}function k(E,a,C,J,ne){return c.G.generalize(B.N,E,a,C,J,ne)}function te(E,a,C,J){return c.G.densify(B.N,E,a,C,J)}function ae(E,a,C,J,ne=0){return c.G.geodesicDensify(B.N,E,a,C,J,ne)}function Q(E,a,C){return c.G.planarArea(B.N,E,a,C)}function X(E,a,C){return c.G.planarLength(B.N,E,a,C)}function se(E,a,C,J){return c.G.geodesicArea(B.N,E,a,C,J)}function oe(E,a,C,J){return c.G.geodesicLength(B.N,E,a,C,J)}const re=Object.freeze(Object.defineProperty({__proto__:null,extendedSpatialReferenceInfo:x,clip:W,cut:Y,contains:F,crosses:z,distance:Z,equals:D,intersects:H,touches:A,within:R,disjoint:G,overlaps:U,relate:K,isSimple:w,simplify:$,convexHull:V,difference:T,symmetricDifference:b,intersect:_,union:O,offset:h,buffer:M,geodesicBuffer:j,nearestCoordinate:q,nearestVertex:L,nearestVertices:m,rotate:P,flipHorizontal:v,flipVertical:S,generalize:k,densify:te,geodesicDensify:ae,planarArea:Q,planarLength:X,geodesicArea:se,geodesicLength:oe},Symbol.toStringTag,{value:"Module"}))},99746:(ce,ee,t)=>{t.d(ee,{Z:()=>O});var b,c=t(17626),B=t(86810),x=t(62208),W=t(77712),Z=(t(85931),t(8314),t(90912),t(76898)),D=t(28347),H=t(43703),A=t(84161),R=t(28093),G=t(49672),U=t(55915),K=t(12080),w=t(89586),$=t(60479),V=t(79800),T=t(9554);let _=b=class extends B.wq{constructor(h){super(h),this.origin=(0,R.c)(),this.translation=(0,R.c)(),this.rotation=(0,w.Ue)(),this.scale=(0,R.f)(1,1,1),this.geographic=!0}get localMatrix(){const h=(0,H.c)();return(0,D.u)(h,this.scale),(0,D.e)(h,h,(0,w.WH)(this.rotation),(0,w.ZZ)(this.rotation)),(0,D.j)(h,h,this.translation),h}get localMatrixInverse(){return(0,D.a)((0,H.c)(),this.localMatrix)}applyLocal(h,M){return(0,A.m)(M,h,this.localMatrix)}applyLocalInverse(h,M){return(0,A.m)(M,h,this.localMatrixInverse)}project(h,M){const j=new Float64Array(h.length),q=$.fP.fromTypedArray(j),L=$.fP.fromTypedArray(h);if(this.geographic){const v=(0,K.rS)(M),S=(0,H.c)();return(0,U.Bm)(M,this.origin,S,v),(0,D.m)(S,S,this.localMatrix),(0,V.t)(q,L,S),(0,U.CM)(j,v,0,j,M,0,j.length/3),j}const{localMatrix:m,origin:P}=this;(0,D.v)(m,H.I)?(0,T.c)(q,L):(0,V.t)(q,L,m);for(let v=0;v<j.length;v+=3)j[v+0]+=P[0],j[v+1]+=P[1],j[v+2]+=P[2];return j}getOriginPoint(h){const[M,j,q]=this.origin;return new G.Z({x:M,y:j,z:q,spatialReference:h})}equals(h){return(0,x.pC)(h)&&this.geographic===h.geographic&&(0,A.k)(this.origin,h.origin)&&(0,D.w)(this.localMatrix,h.localMatrix)}clone(){const h={origin:(0,R.a)(this.origin),translation:(0,R.a)(this.translation),rotation:(0,w.Ue)(this.rotation),scale:(0,R.a)(this.scale),geographic:this.geographic};return new b(h)}};(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],_.prototype,"origin",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],_.prototype,"translation",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],_.prototype,"rotation",void 0),(0,c._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],_.prototype,"scale",void 0),(0,c._)([(0,W.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],_.prototype,"geographic",void 0),(0,c._)([(0,W.Cb)()],_.prototype,"localMatrix",null),(0,c._)([(0,W.Cb)()],_.prototype,"localMatrixInverse",null),_=b=(0,c._)([(0,Z.j)("esri.geometry.support.MeshTransform")],_);const O=_},89586:(ce,ee,t)=>{t.d(ee,{EU:()=>U,Ue:()=>Y,WH:()=>K,ZZ:()=>G,qC:()=>R,uT:()=>H});var c=t(21286),B=t(48977),x=t(78451),W=t(84161);function Y(_=$){return[_[0],_[1],_[2],_[3]]}function H(_,O,h=Y()){return(0,W.c)(h,_),h[3]=O,h}function R(_,O,h=Y()){return(0,B.s)(V,_,K(_)),(0,B.s)(T,O,K(O)),(0,B.m)(V,T,V),function w(_,O){return _[3]=O,_}(h,(0,c.BV)((0,B.g)(h,V)))}function G(_){return _}function U(_){return _[3]}function K(_){return(0,c.Vl)(_[3])}const $=[0,0,1,0],V=(0,x.a)(),T=(0,x.a)();Y()},92545:(ce,ee,t)=>{function c(B,x){var W;return B.isGeographic||B.isWebMercator&&(null==(W=null==x?void 0:x.geographic)||W)}t.d(ee,{h:()=>c})},60853:(ce,ee,t)=>{t.d(ee,{FF:()=>$,I5:()=>K,Yq:()=>V,iv:()=>U,w1:()=>w});var c=t(62208),B=t(16730),x=t(550),W=t(28347),Y=t(43703),F=t(30217),z=t(55915),Z=t(12080),D=t(99746),H=t(60479),A=t(79800),R=t(92545),G=t(65231);function U(Q,X,se){return(0,R.h)(X.spatialReference,se)?function b(Q,X,se){const oe=X.spatialReference,re=q(X,se,S),E=new Float64Array(Q.position.length),a=function _(Q,X,se,oe){(0,A.t)(H.fP.fromTypedArray(oe),H.fP.fromTypedArray(Q),X);const re=new Float64Array(Q.length);return(0,G.To)(oe,re,se)}(Q.position,re,oe,E),C=(0,F.a)(te,re);return{position:a,normal:O(a,E,Q.normal,C,oe),tangent:h(a,E,Q.tangent,C,oe)}}(Q,X,se):function T(Q,X,se){const oe=new Float64Array(Q.position.length),re=Q.position,E=X.x,a=X.y,C=X.z||0,{horizontal:J,vertical:ne}=v(se?se.unit:null,X.spatialReference);for(let le=0;le<re.length;le+=3)oe[le+0]=re[le+0]*J+E,oe[le+1]=re[le+1]*J+a,oe[le+2]=re[le+2]*ne+C;return{position:oe,normal:Q.normal,tangent:Q.tangent}}(Q,X,se)}function K(Q,X,se){const{position:oe,normal:re,tangent:E}=Q;if((0,c.Wi)(X))return{position:oe,normal:re,tangent:E};const a=X.localMatrix;return U({position:(0,G.zZ)(oe,new Float64Array(oe.length),a),normal:(0,c.pC)(re)?(0,G.w9)(re,new Float32Array(re.length),a):null,tangent:(0,c.pC)(E)?(0,G.VS)(E,new Float32Array(E.length),a):null},X.getOriginPoint(se),{geographic:X.geographic})}function w(Q,X,se){var oe;if(null!=se&&se.useTransform){const{position:re,normal:E,tangent:a}=Q;return{vertexAttributes:{position:re,normal:E,tangent:a},transform:new D.Z({origin:[X.x,X.y,null!=(oe=X.z)?oe:0],geographic:(0,R.h)(X.spatialReference,se)})}}return{vertexAttributes:U(Q,X,se),transform:null}}function $(Q,X,se){return(0,R.h)(X.spatialReference,se)?j(Q,X,se):M(Q,X,se)}function V(Q,X,se,oe){if((0,c.Wi)(X))return $(Q,se,oe);const re=K(Q,X,se.spatialReference);return se.equals(X.getOriginPoint(se.spatialReference))?M(re,se,oe):(0,R.h)(se.spatialReference,oe)?j(re,se,oe):M(re,se,oe)}function O(Q,X,se,oe,re){if((0,c.Wi)(se))return null;const E=new Float32Array(se.length);return(0,A.a)(H.ct.fromTypedArray(E),H.ct.fromTypedArray(se),oe),(0,G.Yk)(E,Q,X,re,E),E}function h(Q,X,se,oe,re){if((0,c.Wi)(se))return null;const E=new Float32Array(se.length);(0,A.a)(H.ct.fromTypedArray(E,4*Float32Array.BYTES_PER_ELEMENT),H.ct.fromTypedArray(se,4*Float32Array.BYTES_PER_ELEMENT),oe);for(let a=3;a<E.length;a+=4)E[a]=se[a];return(0,G.M2)(E,Q,X,re,E),E}function M(Q,X,se){const oe=new Float64Array(Q.position.length),re=Q.position,E=X.x,a=X.y,C=X.z||0,{horizontal:J,vertical:ne}=v(se?se.unit:null,X.spatialReference);for(let le=0;le<re.length;le+=3)oe[le+0]=(re[le+0]-E)/J,oe[le+1]=(re[le+1]-a)/J,oe[le+2]=(re[le+2]-C)/ne;return{position:oe,normal:Q.normal,tangent:Q.tangent}}function j(Q,X,se){const oe=X.spatialReference;q(X,se,S);const re=(0,W.a)(k,S),E=new Float64Array(Q.position.length),a=function L(Q,X,se,oe){const re=(0,G.XO)(Q,X,oe),E=H.fP.fromTypedArray(re),a=new Float64Array(re.length),C=H.fP.fromTypedArray(a);return(0,A.t)(C,E,se),a}(Q.position,oe,re,E),C=(0,F.a)(te,re);return{position:a,normal:m(Q.normal,Q.position,E,oe,C),tangent:P(Q.tangent,Q.position,E,oe,C)}}function q(Q,X,se){(0,z.Bm)(Q.spatialReference,[Q.x,Q.y,Q.z||0],se,(0,Z.rS)(Q.spatialReference));const{horizontal:oe,vertical:re}=v(X?X.unit:null,Q.spatialReference);return(0,W.h)(se,se,[oe,oe,re]),se}function m(Q,X,se,oe,re){if((0,c.Wi)(Q))return null;const E=(0,G.Iz)(Q,X,se,oe,new Float32Array(Q.length)),a=H.ct.fromTypedArray(E);return(0,A.a)(a,a,re),E}function P(Q,X,se,oe,re){if((0,c.Wi)(Q))return null;const E=(0,G.wi)(Q,X,se,oe,new Float32Array(Q.length)),a=H.ct.fromTypedArray(E,4*Float32Array.BYTES_PER_ELEMENT);return(0,A.a)(a,a,re),E}function v(Q,X){if((0,c.Wi)(Q))return ae;const se=X.isGeographic?1:(0,B.c9)(X),oe=X.isGeographic?1:(0,B._R)(X),re=(0,B.En)(1,Q,"meters");return{horizontal:re*se,vertical:re*oe}}const S=(0,Y.c)(),k=(0,Y.c)(),te=(0,x.c)(),ae={horizontal:1,vertical:1}},65629:(ce,ee,t)=>{t.d(ee,{SR:()=>D,Ui:()=>Z});var c=t(62208),B=t(65401),x=t(32442),W=t(25748),Y=t(91179),F=t(74618),z=t(37053);function Z(_){return H(_,!0)}function D(_){return H(_,!1)}function H(_,O){if((0,c.Wi)(_))return null;const h=_.spatialReference,M=(0,z.C5)(h),j="toJSON"in _?_.toJSON():_;if(!M)return j;const q=(0,z.sS)(h)?102100:4326,L=F.UZ[q].maxX,m=F.UZ[q].minX;if((0,Y.wp)(j))return R(j,L,m);if((0,Y.aW)(j))return j.points=j.points.map(P=>R(P,L,m)),j;if((0,Y.YX)(j))return function A(_,O){if(!O)return _;const h=function G(_,O){const h=[],{ymin:M,ymax:j,xmin:q,xmax:L}=_,m=_.xmax-_.xmin,[P,v]=O.valid,{x:S,frameId:k}=U(_.xmin,O),{x:te,frameId:ae}=U(_.xmax,O),Q=S===te&&m>0;if(m>2*v){const X={xmin:q<L?S:te,ymin:M,xmax:v,ymax:j},se={xmin:P,ymin:M,xmax:q<L?te:S,ymax:j},oe={xmin:0,ymin:M,xmax:v,ymax:j},re={xmin:P,ymin:M,xmax:0,ymax:j},E=[],a=[];K(X,oe)&&E.push(k),K(X,re)&&a.push(k),K(se,oe)&&E.push(ae),K(se,re)&&a.push(ae);for(let C=k+1;C<ae;C++)E.push(C),a.push(C);h.push(new V(X,[k]),new V(se,[ae]),new V(oe,E),new V(re,a))}else S>te||Q?h.push(new V({xmin:S,ymin:M,xmax:v,ymax:j},[k]),new V({xmin:P,ymin:M,xmax:te,ymax:j},[ae])):h.push(new V({xmin:S,ymin:M,xmax:te,ymax:j},[k]));return h}(_,O).map(M=>M.extent);return h.length<2?h[0]||_:h.length>2?(_.xmin=O.valid[0],_.xmax=O.valid[1],_):{rings:h.map(M=>[[M.xmin,M.ymin],[M.xmin,M.ymax],[M.xmax,M.ymax],[M.xmax,M.ymin],[M.xmin,M.ymin]])}}(j,M);if((0,Y.oU)(j)||(0,Y.l9)(j)){const P=(0,x.$P)(T,j),v={xmin:P[0],ymin:P[1],xmax:P[2],ymax:P[3]},S=(0,F.XZ)(v.xmin,m)*(2*L),k=0===S?j:(0,F.Sy)(j,S);return v.xmin+=S,v.xmax+=S,v.xmax>L?$(k,L,O):v.xmin<m?$(k,m,O):k}return j}function R(_,O,h){if(Array.isArray(_)){const M=_[0];if(M>O){const j=(0,F.XZ)(M,O);_[0]=M+j*(-2*O)}else if(M<h){const j=(0,F.XZ)(M,h);_[0]=M+j*(-2*h)}}else{const M=_.x;if(M>O){const j=(0,F.XZ)(M,O);_.x+=j*(-2*O)}else if(M<h){const j=(0,F.XZ)(M,h);_.x+=j*(-2*h)}}return _}function U(_,O){const[h,M]=O.valid,j=2*M;let q,L=0;return _>M?(q=Math.ceil(Math.abs(_-M)/j),_-=q*j,L=q):_<h&&(q=Math.ceil(Math.abs(_-h)/j),_+=q*j,L=-q),{x:_,frameId:L}}function K(_,O){const{xmin:h,ymin:M,xmax:j,ymax:q}=O;return w(_,h,M)&&w(_,h,q)&&w(_,j,q)&&w(_,j,M)}function w(_,O,h){return O>=_.xmin&&O<=_.xmax&&h>=_.ymin&&h<=_.ymax}function $(_,O,h=!0){const M=!(0,Y.l9)(_);if(M&&(0,W.Zy)(_),h)return(new b).cut(_,O);const j=M?_.rings:_.paths,q=M?4:2,L=j.length,m=-2*O;for(let P=0;P<L;P++){const v=j[P];if(v&&v.length>=q){const S=[];for(const k of v)S.push([k[0]+m,k[1]]);j.push(S)}}return M?_.rings=j:_.paths=j,_}class V{constructor(O,h){this.extent=O,this.frameIds=h}}const T=(0,B.Ue)();class b{constructor(){this.linesIn=[],this.linesOut=[]}cut(O,h){let M;if(this.xCut=h,O.rings)this.closed=!0,M=O.rings,this.minPts=4;else{if(!O.paths)return null;this.closed=!1,M=O.paths,this.minPts=2}for(const q of M){if(!q||q.length<this.minPts)continue;let L=!0;for(const m of q)L?(this.moveTo(m),L=!1):this.lineTo(m);this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),M=[];for(const q of this.linesIn)q&&q.length>=this.minPts&&M.push(q);const j=-2*this.xCut;for(const q of this.linesOut)if(q&&q.length>=this.minPts){for(const L of q)L[0]+=j;M.push(q)}return this.closed?O.rings=M:O.paths=M,O}moveTo(O){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(O[0]),this._moveTo(O[0],O[1],this._prevSide),this._prevPt=O,this._firstPt=O}lineTo(O){const h=this._side(O[0]);if(h*this._prevSide==-1){const M=this._intersect(this._prevPt,O);this._lineTo(this.xCut,M,0),this._prevSide=0,this._lineTo(O[0],O[1],h)}else this._lineTo(O[0],O[1],h);this._prevSide=h,this._prevPt=O}close(){const O=this._firstPt,h=this._prevPt;O[0]===h[0]&&O[1]===h[1]||this.lineTo(O),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)}_moveTo(O,h,M){this.closed?(this.lineIn.push([M<=0?O:this.xCut,h]),this.lineOut.push([M>=0?O:this.xCut,h])):(M<=0&&this.lineIn.push([O,h]),M>=0&&this.lineOut.push([O,h]))}_lineTo(O,h,M){this.closed?(this._addPolyVertex(this.lineIn,M<=0?O:this.xCut,h),this._addPolyVertex(this.lineOut,M>=0?O:this.xCut,h)):M<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([O,h])):M>0?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([O,h])):this._prevSide<0?(this.lineIn.push([O,h]),this.lineOut.push([O,h])):this._prevSide>0&&(this.lineOut.push([O,h]),this.lineIn.push([O,h]))}_addPolyVertex(O,h,M){const j=O.length;j>1&&O[j-1][0]===h&&O[j-2][0]===h?O[j-1][1]=M:O.push([h,M])}_checkClosingPt(O){const h=O.length;h>3&&O[0][0]===this.xCut&&O[h-2][0]===this.xCut&&O[1][0]===this.xCut&&(O[0][1]=O[h-2][1],O.pop())}_side(O){return O<this.xCut?-1:O>this.xCut?1:0}_intersect(O,h){return O[1]+(this.xCut-O[0])/(h[0]-O[0])*(h[1]-O[1])}_pushLineIn(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]}_pushLineOut(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]}}},28678:(ce,ee,t)=>{t.r(ee),t.d(ee,{default:()=>m});var c=t(17626),x=(t(29132),t(84792)),W=t(26584),Y=t(99959),F=t(77275),z=t(21726),Z=t(77712),R=(t(85931),t(8314),t(90912),t(68653)),G=t(76898),U=t(99433),K=t(44917),w=t(552),$=t(49286),V=t(6647),T=t(30346),b=t(99555),_=t(72258),O=t(2584),h=t(91309),M=t(2004),j=t(65234),q=t(49672);let L=class extends((0,w.h)((0,T.Q)((0,b.M)((0,$.q)((0,V.I)((0,Y.R)(K.Z))))))){constructor(...P){super(...P),this.copyright="",this.fullExtent=new M.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,j.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=j.Z.WebMercator,this.subDomains=null,this.tileInfo=new O.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new q.Z({x:-20037508.342787,y:20037508.342787,spatialReference:j.Z.WebMercator}),spatialReference:j.Z.WebMercator,lods:[new _.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new _.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new _.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new _.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new _.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new _.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new _.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new _.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new _.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new _.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new _.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new _.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new _.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new _.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new _.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new _.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new _.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new _.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new _.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new _.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new _.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new _.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new _.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new _.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(P,v){return"string"==typeof P?fe({urlTemplate:P},v):P}load(P){const v=this.loadFromPortal({supportedTypes:["WMTS"]},P).then(()=>{let S="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const k=new z.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&k.authority.includes("{subDomain}")&&(S="is missing 'subDomains' property")}else S="spatialReference must match tileInfo.spatialReference";else S="is missing the required 'urlTemplate' property value";if(S)throw new W.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${S}`)});return this.addResolvingPromise(v),Promise.resolve(this)}get levelValues(){const P=[];if(!this.tileInfo)return null;for(const v of this.tileInfo.lods)P[v.level]=v.levelValue||v.level;return P}readSpatialReference(P,v){return P||v.fullExtent&&v.fullExtent.spatialReference&&j.Z.fromJSON(v.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const P=[],{urlTemplate:v,subDomains:S}=this,k=new z.R9(v),te=k.scheme?k.scheme+"://":"//",ae=te+k.authority+"/";if(k.authority.includes("{subDomain}")){if(S&&S.length>0&&k.authority.split(".").length>1)for(const Q of S)P.push(te+k.authority.replace(/\{subDomain\}/gi,Q)+"/")}else P.push(ae);return P.map(Q=>("/"!==Q.charAt(Q.length-1)&&(Q+="/"),Q))}get urlPath(){if(!this.urlTemplate)return null;const P=this.urlTemplate,v=new z.R9(P);return P.substring(((v.scheme?v.scheme+"://":"//")+v.authority+"/").length)}readUrlTemplate(P,v){return P||v.templateUrl}writeUrlTemplate(P,v){P&&(0,z.oC)(P)&&(P="https:"+P),P&&(P=P.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),P=(0,z.Fv)(P)),v.templateUrl=P}fetchTile(P,v,S,k={}){const{signal:te}=k,ae=this.getTileUrl(P,v,S),Q={responseType:"image",signal:te,query:fe({},this.refreshParameters)};return(0,x.default)(ae,Q).then(X=>X.data)}getTileUrl(P,v,S){const k=this.levelValues[P];return this.tileServers[v%this.tileServers.length]+(0,F.gx)(this.urlPath,{level:k,z:k,col:S,x:S,row:v,y:v})}};(0,c._)([(0,Z.Cb)({type:String,value:"",json:{write:!0}})],L.prototype,"copyright",void 0),(0,c._)([(0,Z.Cb)({type:M.Z,json:{write:!0},nonNullable:!0})],L.prototype,"fullExtent",void 0),(0,c._)([(0,Z.Cb)({readOnly:!0,json:{read:!1,write:!1}})],L.prototype,"legendEnabled",void 0),(0,c._)([(0,Z.Cb)({type:["show","hide"]})],L.prototype,"listMode",void 0),(0,c._)([(0,Z.Cb)({json:{read:!0,write:!0}})],L.prototype,"blendMode",void 0),(0,c._)([(0,Z.Cb)()],L.prototype,"levelValues",null),(0,c._)([(0,Z.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],L.prototype,"isReference",void 0),(0,c._)([(0,Z.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],L.prototype,"operationalLayerType",void 0),(0,c._)([(0,Z.Cb)({readOnly:!0,json:{read:!1,write:!1}})],L.prototype,"popupEnabled",void 0),(0,c._)([(0,Z.Cb)({type:j.Z})],L.prototype,"spatialReference",void 0),(0,c._)([(0,R.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],L.prototype,"readSpatialReference",null),(0,c._)([(0,Z.Cb)({type:[String],json:{write:!0}})],L.prototype,"subDomains",void 0),(0,c._)([(0,Z.Cb)({type:O.Z,json:{write:!0}})],L.prototype,"tileInfo",void 0),(0,c._)([(0,Z.Cb)({readOnly:!0})],L.prototype,"tileServers",null),(0,c._)([(0,Z.Cb)({json:{read:!1}})],L.prototype,"type",void 0),(0,c._)([(0,Z.Cb)()],L.prototype,"urlPath",null),(0,c._)([(0,Z.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],L.prototype,"urlTemplate",void 0),(0,c._)([(0,R.r)("urlTemplate",["urlTemplate","templateUrl"])],L.prototype,"readUrlTemplate",null),(0,c._)([(0,U.c)("urlTemplate",{templateUrl:{type:String}})],L.prototype,"writeUrlTemplate",null),(0,c._)([(0,Z.Cb)({type:h.B,json:{write:!0}})],L.prototype,"wmtsInfo",void 0),L=(0,c._)([(0,G.j)("esri.layers.WebTileLayer")],L);const m=L},20925:(ce,ee,t)=>{t.d(ee,{Z:()=>$});var R,c=t(17626),B=t(46160),x=t(47877),W=t(14889),Y=t(77712),D=(t(85931),t(8314),t(90912),t(76898)),H=t(49410),A=t(11136);const G={type:B.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:U}}},read:!1}};function U(V,T,b){if(V&&Array.isArray(V))return new B.Z(V.map(_=>{const O=function w(V){return"group"===V.layerType?K:H.Z}(_);if(O){const h=new O;return h.read(_,b),h}b&&b.messages&&_&&b.messages.push(new W.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(_.type||"unknown")+"' are not supported",{definition:_,context:b}))}))}let K=R=class extends A.Z{constructor(V){super(V),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,x.w)(this,V=>R.forEachSublayer(this.sublayers,T=>{"building-group"!==T.type&&V(T)}))}};var V;(0,c._)([(0,Y.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],K.prototype,"listMode",void 0),(0,c._)([(0,Y.Cb)(G)],K.prototype,"sublayers",void 0),K=R=(0,c._)([(0,D.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],K),(V=K||(K={})).sublayersProperty=G,V.readSublayers=U,V.forEachSublayer=function T(b,_){b.forEach(O=>{_(O),"building-group"===O.type&&T(O.sublayers,_)})};const $=K},1476:(ce,ee,t)=>{t.d(ee,{S:()=>B,X:()=>c});const c=1;function B(x,W){var F;let Y=0;for(const z of W){const Z=null==(F=z.attributes)?void 0:F[x];"number"==typeof Z&&isFinite(Z)&&(Y=Math.max(Y,Z))}return Y}},35775:(ce,ee,t)=>{t.d(ee,{O0:()=>A,av:()=>z,b:()=>$,d1:()=>D,og:()=>U});var c=t(15861),B=t(62208),x=t(37053),W=t(36630);class Y{constructor(){this.code=null,this.description=null}}class F{constructor(b){this.error=new Y,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=b}}function z(T){return new F(T)}class Z{constructor(b){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=b}}function D(T){return new Z(T)}const H=new Set;function A(T,b,_,O=!1,h){H.clear();for(const M in _){const j=T.get(M);if(!j)continue;const q=_[M],L=R(j,q);if(L!==q&&h&&h.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:j,originalValue:q,sanitizedValue:L}}),H.add(j.name),j&&(O||j.editable)){const m=(0,W.Qc)(j,L);if(m)return z((0,W.vP)(m,j,L));b[j.name]=L}}for(const M of T.requiredFields)if(!H.has(M.name))return z(`missing required field "${M.name}"`);return null}function R(T,b){let _=b;return"string"==typeof b&&(0,W.H7)(T)?_=parseFloat(b):null!=b&&(0,W.qN)(T)&&"string"!=typeof b&&(_=String(b)),(0,W.Pz)(_)}let G;function U(T,b){if(!T||!(0,x.JY)(b))return T;if("rings"in T||"paths"in T){if((0,B.Wi)(G))throw new TypeError("geometry engine not loaded");return G.simplify(b,T)}return T}function K(){return w.apply(this,arguments)}function w(){return(w=(0,c.Z)(function*(){return(0,B.Wi)(G)&&(G=yield Promise.all([t.e(8592),t.e(2825)]).then(t.bind(t,32825))),G})).apply(this,arguments)}function $(T,b){return V.apply(this,arguments)}function V(){return(V=(0,c.Z)(function*(T,b){!(0,x.JY)(T)||"esriGeometryPolygon"!==b&&"esriGeometryPolyline"!==b||(yield K())})).apply(this,arguments)}},5143:(ce,ee,t)=>{t.d(ee,{Z:()=>R});var c=t(17626),x=(t(29132),t(77712)),z=(t(85931),t(8314),t(90912),t(68653)),Z=t(76898),D=t(51026),H=t(28930),A=t(65234);const R=G=>{let U=class extends G{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(K,w){return null!=w.minLOD&&null!=w.maxLOD?K:0}readMaxScale(K,w){return null!=w.minLOD&&null!=w.maxLOD?K:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(K,w){return w.capabilities&&w.capabilities.includes("Tilemap")?new H.y({layer:this}):null}};return(0,c._)([(0,x.Cb)({json:{read:{source:"copyrightText"}}})],U.prototype,"copyright",void 0),(0,c._)([(0,x.Cb)()],U.prototype,"minScale",void 0),(0,c._)([(0,z.r)("service","minScale")],U.prototype,"readMinScale",null),(0,c._)([(0,x.Cb)()],U.prototype,"maxScale",void 0),(0,c._)([(0,z.r)("service","maxScale")],U.prototype,"readMaxScale",null),(0,c._)([(0,x.Cb)({type:A.Z})],U.prototype,"spatialReference",void 0),(0,c._)([(0,x.Cb)({readOnly:!0})],U.prototype,"supportsBlankTile",null),(0,c._)([(0,x.Cb)(D.h)],U.prototype,"tileInfo",void 0),(0,c._)([(0,x.Cb)()],U.prototype,"tilemapCache",void 0),(0,c._)([(0,z.r)("service","tilemapCache",["capabilities"])],U.prototype,"readTilemapCache",null),(0,c._)([(0,x.Cb)()],U.prototype,"version",void 0),U=(0,c._)([(0,Z.j)("esri.layers.mixins.ArcGISCachedService")],U),U}},22825:(ce,ee,t)=>{t.d(ee,{A:()=>B});const c=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function B(x){return c.some(([W,Y])=>x>=W&&x<=Y)}},89628:(ce,ee,t)=>{t.d(ee,{$9:()=>V,G4:()=>h,Lu:()=>$,WW:()=>k,d:()=>P,eS:()=>L,gp:()=>j,j:()=>_,w9:()=>T,yN:()=>v});var c=t(15861),x=(t(29132),t(84792)),W=t(26584),Y=t(63290),F=t(62208),z=t(37053),Z=t(46367),D=t(82054),H=t(95786),A=t(58775),R=t(56554),G=t(60466),U=t(85),K=t(65234);const w=Y.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),$="http://www.opengis.net/def/crs/",V=`${$}OGC/1.3/CRS84`;function T(a,C){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)(function*(a,C,J={},ne=5){const{links:le}=a,ie=E(le,"items","application/geo+json")||E(le,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,F.Wi)(ie))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:_e}=yield(0,x.default)(ie.href,{signal:J.signal,query:Oe(fe({limit:ne},J.customParameters),{token:J.apiKey}),headers:{accept:"application/geo+json"}});yield(0,A.O3)(_e);const he=(0,A.my)(_e,{geometryType:C.geometryType}),de=C.fields||he.fields||[],Ee=null!=C.hasZ?C.hasZ:he.hasZ,me=he.geometryType,Pe=C.objectIdField||he.objectIdFieldName||"OBJECTID";let ve=C.timeInfo;const Te=de.find(ue=>ue.name===Pe);if(Te)Te.type="esriFieldTypeOID",Te.editable=!1,Te.nullable=!1;else{if(!he.objectIdFieldType)throw new W.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");de.unshift({name:Pe,alias:Pe,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(Pe!==he.objectIdFieldName){const ue=de.find(Me=>Me.name===he.objectIdFieldName);ue&&(ue.type="esriFieldTypeInteger")}de===he.fields&&he.unknownFields.length>0&&w.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:he.unknownFields}});for(const ue of de){if(null==ue.name&&(ue.name=ue.alias),null==ue.alias&&(ue.alias=ue.name),"esriFieldTypeOID"!==ue.type&&"esriFieldTypeGlobalID"!==ue.type&&(ue.editable=null==ue.editable||!!ue.editable,ue.nullable=null==ue.nullable||!!ue.nullable),!ue.name)throw new W.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:ue});if(!U.v.jsonValues.includes(ue.type))throw new W.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${ue.name}"`,{field:ue})}if(ve){const ue=new G.Z(de);if(ve.startTimeField){const Me=ue.get(ve.startTimeField);Me?(ve.startTimeField=Me.name,Me.type="esriFieldTypeDate"):ve.startTimeField=null}if(ve.endTimeField){const Me=ue.get(ve.endTimeField);Me?(ve.endTimeField=Me.name,Me.type="esriFieldTypeDate"):ve.endTimeField=null}if(ve.trackIdField){const Me=ue.get(ve.trackIdField);Me?ve.trackIdField=Me.name:(ve.trackIdField=null,w.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:ve}}))}ve.startTimeField||ve.endTimeField||(w.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:ve}}),ve=null)}return{drawingInfo:me?(0,R.bU)(me):null,geometryType:me,fields:de,hasZ:!!Ee,objectIdField:Pe,timeInfo:ve}})).apply(this,arguments)}function _(a){return O.apply(this,arguments)}function O(){return(O=(0,c.Z)(function*(a,C={}){const{links:J}=a,ne=E(J,"data","application/json")||E(J,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,F.Wi)(ne))throw new W.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:le,customParameters:ie,signal:_e}=C,{data:he}=yield(0,x.default)(ne.href,{signal:_e,headers:{accept:"application/json"},query:Oe(fe({},ie),{token:le})});return he})).apply(this,arguments)}function h(a){return M.apply(this,arguments)}function M(){return(M=(0,c.Z)(function*(a,C={}){const{links:J}=a,ne=E(J,"conformance","application/json")||E(J,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,F.Wi)(ne))throw new W.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:le,customParameters:ie,signal:_e}=C,{data:he}=yield(0,x.default)(ne.href,{signal:_e,headers:{accept:"application/json"},query:Oe(fe({},ie),{token:le})});return he})).apply(this,arguments)}function j(a){return q.apply(this,arguments)}function q(){return(q=(0,c.Z)(function*(a,C={}){const{apiKey:J,customParameters:ne,signal:le}=C,{data:ie}=yield(0,x.default)(a,{signal:le,headers:{accept:"application/json"},query:Oe(fe({},ne),{token:J})});return ie})).apply(this,arguments)}function L(a){return m.apply(this,arguments)}function m(){return(m=(0,c.Z)(function*(a,C={}){const J="application/vnd.oai.openapi+json;version=3.0",ne=E(a.links,"service-desc",J);if((0,F.Wi)(ne))return w.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:le,customParameters:ie,signal:_e}=C,{data:he}=yield(0,x.default)(ne.href,{signal:_e,headers:{accept:J},query:Oe(fe({},ie),{token:le})});return he})).apply(this,arguments)}function P(a){var le;const C=null==(le=new RegExp("^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$","i").exec(a))?void 0:le.groups;if(!C)return null;const{authority:J,code:ne}=C;switch(J.toLowerCase()){case"ogc":switch(ne.toLowerCase()){case"crs27":return K.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return K.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const ie=Number.parseInt(ne,10);return Number.isNaN(ie)?null:ie}default:return null}}function v(a,C,J){return S.apply(this,arguments)}function S(){return(S=(0,c.Z)(function*(a,C,J){const ne=yield k(a,C,J);return(0,D.cn)(ne)})).apply(this,arguments)}function k(a,C,J){return te.apply(this,arguments)}function te(){return(te=(0,c.Z)(function*(a,C,J){const{capabilities:{query:{maxRecordCount:ne}},collection:le,layerDefinition:ie,queryParameters:{apiKey:_e,customParameters:he},spatialReference:de,supportedCrs:Ee}=a,{links:me}=le,Pe=E(me,"items","application/geo+json")||E(me,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,F.Wi)(Pe))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:ve,num:Te,start:ue,timeExtent:Me,where:Se}=C;if(C.objectIds)throw new W.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const Ae=K.Z.fromJSON(de),Ie=(0,F.Pt)(C.outSpatialReference,Ae),be=Ie.isWGS84?null:Q(Ie,Ee),Ke=re(ve,Ee),Xe=se(Me),Ye=oe(Se),Qe=null!=Te?Te:null!=ue&&void 0!==ue?10:ne,{data:Re}=yield(0,x.default)(Pe.href,Oe(fe({},J),{query:Oe(fe(fe({},he),Ke),{crs:be,datetime:Xe,query:Ye,limit:Qe,startindex:ue,token:_e}),headers:{accept:"application/geo+json"}}));let we=!1;Re.links&&(we=!!Re.links.find(Be=>"next"===Be.rel)),!we&&Number.isInteger(Re.numberMatched)&&Number.isInteger(Re.numberReturned)&&(we=Re.numberReturned<Re.numberMatched);const{fields:Fe,globalIdField:ke,hasM:Ne,hasZ:Ze,objectIdField:Ve}=ie,ze=ie.geometryType,Ge=(0,A.lG)(Re,{geometryType:ze,hasZ:Ze,objectIdField:Ve});if(!be&&Ie.isWebMercator)for(const xe of Ge)if((0,F.pC)(xe.geometry)){const Be=(0,D.di)(xe.geometry,ze,Ze,!1);Be.spatialReference=K.Z.WGS84,xe.geometry=(0,D.GH)((0,Z.iV)(Be,Ie))}for(const xe of Ge)xe.objectId=xe.attributes[Ve];const qe=be||!be&&Ie.isWebMercator?Ie.toJSON():z.Zn,Le=new H.Z;return Le.exceededTransferLimit=we,Le.features=Ge,Le.fields=Fe,Le.geometryType=ze,Le.globalIdFieldName=ke,Le.hasM=Ne,Le.hasZ=Ze,Le.objectIdFieldName=Ve,Le.spatialReference=qe,Le})).apply(this,arguments)}function Q(a,C){var ie,_e,he;const{isWebMercator:J,wkid:ne}=a;if(!ne)return null;const le=J?null!=(he=null!=(_e=null!=(ie=C[3857])?ie:C[102100])?_e:C[102113])?he:C[900913]:C[a.wkid];return le?`${$}${le}`:null}function X(a){if((0,F.Wi)(a))return"";const{xmin:C,ymin:J,xmax:ne,ymax:le}=a;return`${C},${J},${ne},${le}`}function se(a){if((0,F.Wi)(a))return null;const{start:C,end:J}=a;return`${(0,F.pC)(C)?C.toISOString():".."}/${(0,F.pC)(J)?J.toISOString():".."}`}function oe(a){return(0,F.Wi)(a)||!a||"1=1"===a?null:a}function re(a,C){if(!function ae(a){return(0,F.pC)(a)&&"extent"===a.type}(a))return null;const{spatialReference:J}=a;if(!J||J.isWGS84)return{bbox:X(a)};const ne=Q(J,C);return(0,F.pC)(ne)?{bbox:X(a),"bbox-crs":ne}:J.isWebMercator?{bbox:X((0,Z.iV)(a,K.Z.WGS84))}:null}function E(a,C,J){return a.find(ne=>ne.rel===C&&ne.type===J)||a.find(ne=>ne.rel===C&&!ne.type)}},14772:(ce,ee,t)=>{t.d(ee,{R:()=>K});var c=t(17626),B=t(14517),x=t(80542),W=t(62208),Y=t(95737),F=t(77712),H=(t(85931),t(8314),t(90912),t(76898)),A=t(13812),R=t(59990),G=t(13410);const U={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let K=class extends((0,x.p)(B.Z)){constructor(w){super(w),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const w=this.visibleSublayers.map($=>{const V=(0,R.f)(this.floors,$);return $.toExportImageJSON(V)});return w.length?JSON.stringify(w):null}get hasDynamicLayers(){return this.layer&&(0,G.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(w){this._get("layer")!==w&&(this._set("layer",w),this.handles.remove("layer"),w&&this.handles.add([w.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),w.on("sublayer-update",$=>this.notifyChange(U[$.propertyName]))],"layer"))}get layers(){const w=this.visibleSublayers;return w?w.length?"show:"+w.map($=>$.id).join(","):"show:-1":null}get layerDefs(){var V;const w=!(null==(V=this.floors)||!V.length),$=this.visibleSublayers.filter(T=>null!=T.definitionExpression||w&&null!=T.floorInfo);return $.length?JSON.stringify($.reduce((T,b)=>{const _=(0,R.f)(this.floors,b),O=(0,Y._)(_,b.definitionExpression);return(0,W.pC)(O)&&(T[b.id]=O),T},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const w=this.layer;return w&&(w.commitProperty("dpi"),w.commitProperty("imageFormat"),w.commitProperty("imageTransparency"),w.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const w=[];if(!this.layer)return w;const $=this.layer.sublayers,V=b=>{const _=this.scale;b.visible&&(0===_||(0===b.minScale||_<=b.minScale)&&(0===b.maxScale||_>=b.maxScale))&&(b.sublayers?b.sublayers.forEach(V):w.unshift(b))};$&&$.forEach(V);const T=this._get("visibleSublayers");return!T||T.length!==w.length||T.some((b,_)=>w[_]!==b)?w:T}toJSON(){const w=this.layer;let $={dpi:w.dpi,format:w.imageFormat,transparent:w.imageTransparency,gdbVersion:w.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?$.dynamicLayers=this.dynamicLayers:$=Oe(fe({},$),{layers:this.layers,layerDefs:this.layerDefs}),$}};(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"dynamicLayers",null),(0,c._)([(0,F.Cb)()],K.prototype,"floors",void 0),(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"hasDynamicLayers",null),(0,c._)([(0,F.Cb)()],K.prototype,"layer",null),(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"layers",null),(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"layerDefs",null),(0,c._)([(0,F.Cb)({type:Number})],K.prototype,"scale",void 0),(0,c._)([(0,F.Cb)(A.qG)],K.prototype,"timeExtent",void 0),(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"version",null),(0,c._)([(0,F.Cb)({readOnly:!0})],K.prototype,"visibleSublayers",null),K=(0,c._)([(0,H.j)("esri.layers.mixins.ExportImageParameters")],K)},51920:(ce,ee,t)=>{t.d(ee,{j:()=>H});var c=t(17626),B=t(14517),x=t(80542),W=t(77712),Z=(t(85931),t(8314),t(90912),t(76898));const D={visible:"visibleSublayers"};let H=class extends((0,x.p)(B.Z)){constructor(A){super(A),this.scale=0}set layer(A){this._get("layer")!==A&&(this._set("layer",A),this.handles.remove("layer"),A&&this.handles.add([A.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),A.on("wms-sublayer-update",R=>this.notifyChange(D[R.propertyName]))],"layer"))}get layers(){const{visibleSublayers:A}=this;return A.filter(R=>R.name).map(R=>R.name).join(",")}get version(){this.commitProperty("layers");const A=this.layer;return A&&A.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:A,scale:R}=this,G=null==A?void 0:A.sublayers,U=[],K=w=>{const{minScale:$,maxScale:V,sublayers:T,visible:b}=w;b&&(0===R||(0===$||R<=$)&&(0===V||R>=V))&&(T?T.forEach(K):U.unshift(w))};return null==G||G.forEach(K),U}toJSON(){const{layer:A,layers:R}=this,{imageFormat:G,imageTransparency:U,version:K}=A;return{format:G,request:"GetMap",service:"WMS",styles:"",transparent:U?"TRUE":"FALSE",version:K,layers:R}}};(0,c._)([(0,W.Cb)()],H.prototype,"layer",null),(0,c._)([(0,W.Cb)({readOnly:!0})],H.prototype,"layers",null),(0,c._)([(0,W.Cb)({type:Number})],H.prototype,"scale",void 0),(0,c._)([(0,W.Cb)({readOnly:!0})],H.prototype,"version",null),(0,c._)([(0,W.Cb)({readOnly:!0})],H.prototype,"visibleSublayers",null),H=(0,c._)([(0,Z.j)("esri.layers.support.ExportWMSImageParameters")],H)},74711:(ce,ee,t)=>{t.d(ee,{W:()=>D});var c=t(15861),B=t(24263),x=t(84792),W=t(62208),Y=t(10699),F=t(32258),z=t(84687),Z=t(55463);class D{constructor(A,R,G,U){this.parsedUrl=A,this.portalItem=R,this.apiKey=G,this.signal=U,this.rootDocument=null;const K=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);K&&(this.urlParts={root:K[1],layerId:parseInt(K[2],10)})}fetch(){var A=this;return(0,c.Z)(function*(){var U;if(!A.urlParts)return null;const R=null!=(U=A.portalItem)?U:yield A._portalItemFromServiceItemId();if((0,W.Wi)(R))return A._loadFromUrl();const G=yield A._findAndLoadRelatedPortalItem(R);return(0,W.Wi)(G)?null:A._loadFeatureLayerFromPortalItem(G)})()}fetchPortalItem(){var A=this;return(0,c.Z)(function*(){var G;if(!A.urlParts)return null;const R=null!=(G=A.portalItem)?G:yield A._portalItemFromServiceItemId();return(0,W.Wi)(R)?null:A._findAndLoadRelatedPortalItem(R)})()}_fetchRootDocument(){var A=this;return(0,c.Z)(function*(){if((0,W.pC)(A.rootDocument))return A.rootDocument;if((0,W.Wi)(A.urlParts))return A.rootDocument={},{};const R={query:{f:"json",token:A.apiKey},responseType:"json",signal:A.signal},G=`${A.urlParts.root}/SceneServer`;try{const U=yield(0,x.default)(G,R);A.rootDocument=U.data}catch(U){A.rootDocument={}}return A.rootDocument})()}_fetchServiceOwningPortalUrl(){var A=this;return(0,c.Z)(function*(){var U;const R=null==(U=B.id)?void 0:U.findServerInfo(A.parsedUrl.path);if(null!=R&&R.owningSystemUrl)return R.owningSystemUrl;const G=A.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const K=(yield(0,x.default)(G,{query:{f:"json"},responseType:"json",signal:A.signal})).data.owningSystemUrl;if(K)return K}catch(K){(0,Y.r9)(K)}return null})()}_findAndLoadRelatedPortalItem(A){var R=this;return(0,c.Z)(function*(){try{return(yield A.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:R.signal})).find(G=>"Feature Service"===G.type)||null}catch(G){return(0,Y.r9)(G),null}})()}_loadFeatureLayerFromPortalItem(A){var R=this;return(0,c.Z)(function*(){yield A.load({signal:R.signal});const G=yield R._findMatchingAssociatedSublayerUrl(A.url);return new F.default({url:G,portalItem:A}).load({signal:R.signal})})()}_loadFromUrl(){var A=this;return(0,c.Z)(function*(){const R=yield A._findMatchingAssociatedSublayerUrl(`${A.urlParts.root}/FeatureServer`);return new F.default({url:R}).load({signal:A.signal})})()}_findMatchingAssociatedSublayerUrl(A){var R=this;return(0,c.Z)(function*(){const G=A.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),U={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:R.signal},K=R.urlParts.layerId,w=R._fetchRootDocument(),$=(0,x.default)(G,U),[V,T]=yield Promise.all([$,w]),b=T&&T.layers,_=V.data&&V.data.layers;if(!Array.isArray(_))throw new Error("expected layers array");if(Array.isArray(b)){for(let O=0;O<Math.min(b.length,_.length);O++)if(b[O].id===K)return`${G}/${_[O].id}`}else if(K<_.length)return`${G}/${_[K].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var A=this;return(0,c.Z)(function*(){const R=(yield A._fetchRootDocument()).serviceItemId;if(!R)return null;const G=new Z.default({id:R,apiKey:A.apiKey}),U=yield A._fetchServiceOwningPortalUrl();(0,W.pC)(U)&&(G.portal=new z.Z({url:U}));try{return G.load({signal:A.signal})}catch(K){return(0,Y.r9)(K),null}})()}}},28930:(ce,ee,t)=>{t.d(ee,{y:()=>q});var M,c=t(15861),B=t(17626),x=t(84792),W=t(14517),Y=t(27306),F=t(26584),z=t(80542),Z=t(63290),D=t(93961),H=t(77029),A=t(10699),R=t(32917),G=t(50618),U=t(21726),K=t(77712),w=t(85931),V=(t(8314),t(66656)),T=t(76898),b=t(58817);class _{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(m,P){if("unknown"!==this._allAvailability)return this._allAvailability;const v=(m-this.location.top)*this.location.width+(P-this.location.left),k=v>>3,te=this._tileAvailabilityBitSet;return k<0||k>te.length?"unknown":te[k]&1<<v%8?"available":"unavailable"}_updateFromData(m){let S=!0,k=!0;const te=Math.ceil(this.location.width*this.location.height/8),ae=new Uint8Array(te);let Q=0;for(let X=0;X<m.length;X++){const se=X%8;m[X]?(k=!1,ae[Q]|=1<<se):S=!1,7===se&&++Q}k?this._allAvailability="unavailable":S?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=ae,this.byteSize+=ae.length)}static fromDefinition(m,P){const v=m.service.request||x.default,{row:S,col:k,width:te,height:ae}=m,Q={query:{f:"json"}};return P=P?fe(fe({},Q),P):Q,v(function h(L){let m;if("vector-tile"===L.service.type)m=`${L.service.url}/tilemap/${L.level}/${L.row}/${L.col}/${L.width}/${L.height}`;else{const v=L.service.tileServers;m=`${v&&v.length?v[L.row%v.length]:L.service.url}/tilemap/${L.level}/${L.row}/${L.col}/${L.width}/${L.height}`}const P=L.service.query;return P&&(m=`${m}?${P}`),m}(m),P).then(X=>X.data).catch(X=>{if(X&&X.details&&422===X.details.httpStatus)return{location:{top:S,left:k,width:te,height:ae},valid:!0,data:(0,w.a9)(te*ae,0)};throw X}).then(X=>{if(X.location&&(X.location.top!==S||X.location.left!==k||X.location.width!==te||X.location.height!==ae))throw new F.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:X,definition:{top:S,left:k,width:te,height:ae}});return _.fromJSON(X)})}static fromJSON(m){_._validateJSON(m);const P=new _;return P.location=Object.freeze((0,b.d9)(m.location)),P._updateFromData(m.data),Object.freeze(P)}static _validateJSON(m){if(!m||!m.location)throw new F.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===m.valid)throw new F.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!m.data)throw new F.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(m.data))throw new F.Z("tilemap:data-mismatch","Data must be an array of numbers");if(m.data.length!==m.location.width*m.location.height)throw new F.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function O(L){return`${L.level}/${L.row}/${L.col}/${L.width}/${L.height}`}const j=Z.Z.getLogger("esri.layers.support.TilemapCache");let q=M=class extends((0,z.p)(W.Z)){constructor(L){super(L),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*Y.Y8.MEGABYTES,this.request=x.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new D.Z(this.cacheByteSize),this.own([(0,R.YP)(()=>{const{layer:L}=this;return[null==L?void 0:L.parsedUrl,null==L?void 0:L.tileServers,null==L?void 0:L.apiKey,null==L?void 0:L.customParameters]},()=>this._initializeTilemapDefinition()),(0,R.YP)(()=>{var L,m;return null==(m=null==(L=this.layer)?void 0:L.tileInfo)?void 0:m.lods},L=>this._initializeAvailableLevels(L),R.tX)]),this._initializeTilemapDefinition()}castLevels(L){return L<=2?(j.error("Minimum levels for Tilemap is 3, but got ",L),3):L}get size(){return 1<<this.levels}fetchTilemap(L,m,P,v){if(!this._availableLevels[L])return Promise.reject(new F.Z("tilemap-cache:level-unavailable",`Level ${L} is unavailable in the service`));const S=this._tmpTilemapDefinition,k=this._tilemapFromCache(L,m,P,S);if(k)return Promise.resolve(k);const te=v&&v.signal;return v=Oe(fe({},v),{signal:null}),new Promise((ae,Q)=>{(0,A.fu)(te,()=>Q((0,A.zE)()));const X=O(S);let se=this._pendingTilemapRequests[X];if(!se){se=_.fromDefinition(S,v).then(re=>(this._tilemapCache.put(X,re,re.byteSize),re));const oe=()=>delete this._pendingTilemapRequests[X];this._pendingTilemapRequests[X]=se,se.then(oe,oe)}se.then(ae,Q)})}getAvailability(L,m,P){if(!this._availableLevels[L])return"unavailable";const v=this._tilemapFromCache(L,m,P,this._tmpTilemapDefinition);return v?v.getAvailability(m,P):"unknown"}fetchAvailability(L,m,P,v){return this._availableLevels[L]?this.fetchTilemap(L,m,P,v).catch(S=>S).then(S=>{if(S instanceof _){const k=S.getAvailability(m,P);if("unavailable"===k)throw new F.Z("tile-map:tile-unavailable","Tile is not available",{level:L,row:m,col:P});return k}if((0,A.D_)(S))throw S;return"unknown"}):Promise.reject(new F.Z("tilemap-cache:level-unavailable",`Level ${L} is unavailable in the service`))}fetchAvailabilityUpsample(L,m,P,v,S){v.level=L,v.row=m,v.col=P;const k=this.layer.tileInfo;k.updateTileInfo(v);const te=this.fetchAvailability(L,m,P,S).catch(ae=>{if((0,A.D_)(ae))throw ae;if(k.upsampleTile(v))return this.fetchAvailabilityUpsample(v.level,v.row,v.col,v);throw ae});return this._fetchAvailabilityUpsamplePrefetch(v.id,L,m,P,S,te),te}_fetchAvailabilityUpsamplePrefetch(L,m,P,v,S,k){var te=this;return(0,c.Z)(function*(){if(!te._prefetchingEnabled)return;const ae=`prefetch-${L}`;if(te.handles.has(ae))return;const Q=new AbortController;k.then(()=>Q.abort(),()=>Q.abort());let X=!1;if(te.handles.add({remove(){X||(X=!0,Q.abort())}},ae),yield(0,G.MU)(10,Q.signal).catch(()=>{}),X||(X=!0,te.handles.remove(ae)),(0,A.Hc)(Q))return;const oe={id:L,level:m,row:P,col:v},re=Oe(fe({},S),{signal:Q.signal}),E=te.layer.tileInfo;for(let a=0;M._prefetches.length<M._maxPrefetch&&E.upsampleTile(oe);++a){const C=te.fetchAvailability(oe.level,oe.row,oe.col,re);M._prefetches.push(C);const J=()=>{M._prefetches.removeUnordered(C)};C.then(J,J)}})()}_initializeTilemapDefinition(){var v;if(!this.layer.parsedUrl)return;const{parsedUrl:L,apiKey:m,customParameters:P}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:L.path,query:(0,U.B7)(Oe(fe(fe({},L.query),P),{token:null!=m?m:null==(v=L.query)?void 0:v.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(L,m,P,v){v.level=L,v.row=m-m%this.size,v.col=P-P%this.size;const S=O(v);return this._tilemapCache.get(S)}_initializeAvailableLevels(L){this._availableLevels={},L&&L.forEach(m=>this._availableLevels[m.level]=!0)}get test(){const L=this;return{get prefetchingEnabled(){return L._prefetchingEnabled},set prefetchingEnabled(m){L._prefetchingEnabled=m},hasTilemap:(m,P,v)=>!!L._tilemapFromCache(m,P,v,L._tmpTilemapDefinition)}}};q._maxPrefetch=4,q._prefetches=new H.Z({initialSize:M._maxPrefetch}),(0,B._)([(0,K.Cb)({constructOnly:!0,type:Number})],q.prototype,"levels",void 0),(0,B._)([(0,V.p)("levels")],q.prototype,"castLevels",null),(0,B._)([(0,K.Cb)({readOnly:!0,type:Number})],q.prototype,"size",null),(0,B._)([(0,K.Cb)({constructOnly:!0,type:Number})],q.prototype,"cacheByteSize",void 0),(0,B._)([(0,K.Cb)({constructOnly:!0})],q.prototype,"layer",void 0),(0,B._)([(0,K.Cb)({constructOnly:!0})],q.prototype,"request",void 0),q=M=(0,B._)([(0,T.j)("esri.layers.support.TilemapCache")],q)},91309:(ce,ee,t)=>{t.d(ee,{B:()=>Z});var z,c=t(17626),B=t(86810),x=t(58817),W=t(77712),F=(t(90912),t(76898));let Z=z=class extends B.wq{constructor(D){super(D)}clone(){return new z({customLayerParameters:(0,x.d9)(this.customLayerParameters),customParameters:(0,x.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,c._)([(0,W.Cb)({json:{type:Object,write:!0}})],Z.prototype,"customLayerParameters",void 0),(0,c._)([(0,W.Cb)({json:{type:Object,write:!0}})],Z.prototype,"customParameters",void 0),(0,c._)([(0,W.Cb)({type:String,json:{write:!0}})],Z.prototype,"layerIdentifier",void 0),(0,c._)([(0,W.Cb)({type:String,json:{write:!0}})],Z.prototype,"tileMatrixSet",void 0),(0,c._)([(0,W.Cb)({type:String,json:{write:!0}})],Z.prototype,"url",void 0),Z=z=(0,c._)([(0,F.j)("esri.layer.support.WMTSLayerInfo")],Z)},24578:(ce,ee,t)=>{t.r(ee),t.d(ee,{fetchFeatureService:()=>b,fromUrl:()=>Z});var c=t(15861),B=t(84792),x=t(26584),W=t(62208),Y=t(21726),F=t(38305),z=t(30164);function Z(m){return D.apply(this,arguments)}function D(){return(D=(0,c.Z)(function*(m){var te;const P=null==(te=m.properties)?void 0:te.customParameters,v=yield R(m.url,P),S=Oe(fe({},m.properties),{url:m.url});if(!v.sublayerIds)return null!=v.layerOrTableId&&(S.layerId=v.layerOrTableId,S.sourceJSON=v.sourceJSON),new v.Constructor(S);const k=new((yield t.e(5964).then(t.bind(t,25964))).default)({title:v.parsedUrl.title});return A(k,v,S),k})).apply(this,arguments)}function H(m,P){return m?m.find(v=>v.id===P):null}function A(m,P,v){function S(k,te){const ae=Oe(fe({},v),{layerId:k,sublayerTitleMode:"service-name"});return(0,W.pC)(te)&&(ae.sourceJSON=te),new P.Constructor(ae)}P.sublayerIds.forEach(k=>{const te=S(k,H(P.sublayerInfos,k));m.add(te)}),P.tableIds.forEach(k=>{const te=S(k,H(P.tableInfos,k));m.tables.add(te)})}function R(m,P){return G.apply(this,arguments)}function G(){return(G=(0,c.Z)(function*(m,P){var re,E;let v=(0,F.Qc)(m);if((0,W.Wi)(v)&&(v=yield U(m,P)),(0,W.Wi)(v))throw new x.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:m});const{serverType:S,sublayer:k}=v;let te;const ae={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(S){case"MapServer":te=null!=k?"FeatureLayer":M(m,P).then(a=>a?"TileLayer":"MapImageLayer");break;case"ImageServer":te=q(m,{customParameters:P}).then(a=>{const C=a.tileInfo&&a.tileInfo.format;return a.tileInfo?"LERC"!==(null==C?void 0:C.toUpperCase())||a.cacheType&&"elevation"!==a.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":te=q(v.url.path,{customParameters:P}).then(a=>{var C;if(a){if("Voxel"===(null==a?void 0:a.layerType))return"VoxelLayer";if((null==a?void 0:a.layers)&&Array.isArray(a.layers)&&a.layers.length>0){const J={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},ne=null==(C=a.layers[0])?void 0:C.layerType;if(null!=J[ne])return J[ne]}}return"SceneLayer"});break;default:te=ae[S]}const X="FeatureServer"===S,se={parsedUrl:v,Constructor:null,layerOrTableId:X?k:null,sublayerIds:null,tableIds:null},oe=yield te;if({FeatureLayer:!0,SceneLayer:!0}[oe]&&null==k){const a=yield $(m,S,P);X&&(se.sublayerInfos=a.layerInfos,se.tableInfos=a.tableInfos),a.layerIds.length+a.tableIds.length!==1?(se.sublayerIds=a.layerIds,se.tableIds=a.tableIds):X&&(se.layerOrTableId=null!=(re=a.layerIds[0])?re:a.tableIds[0],se.sourceJSON=null!=(E=a.layerInfos[0])?E:a.tableInfos[0])}return se.Constructor=yield O(oe),se})).apply(this,arguments)}function U(m,P){return K.apply(this,arguments)}function K(){return(K=(0,c.Z)(function*(m,P){var Q;const v=yield q(m,{customParameters:P});let S=null,k=null;const te=v.type;if("Feature Layer"===te||"Table"===te?(S="FeatureServer",k=v.id):"indexedVector"===te?S="VectorTileServer":v.hasOwnProperty("mapName")?S="MapServer":v.hasOwnProperty("bandCount")&&v.hasOwnProperty("pixelSizeX")?S="ImageServer":v.hasOwnProperty("maxRecordCount")&&v.hasOwnProperty("allowGeometryUpdates")?S="FeatureServer":v.hasOwnProperty("streamUrls")?S="StreamServer":w(v)?(S="SceneServer",k=v.id):v.hasOwnProperty("layers")&&w(null==(Q=v.layers)?void 0:Q[0])&&(S="SceneServer"),!S)return null;const ae=null!=k?(0,F.DR)(m):null;return{title:(0,W.pC)(ae)&&v.name||(0,Y.vt)(m),serverType:S,sublayer:k,url:{path:(0,W.pC)(ae)?ae.serviceUrl:(0,Y.mN)(m).path}}})).apply(this,arguments)}function w(m){return(null==m?void 0:m.hasOwnProperty("store"))&&m.hasOwnProperty("id")&&"number"==typeof m.id}function $(m,P,v){return V.apply(this,arguments)}function V(){return(V=(0,c.Z)(function*(m,P,v){let S,k=!1;if("FeatureServer"===P){const Q=yield b(m,{customParameters:v});k=!!Q.layersJSON,S=Q.layersJSON||Q.serviceJSON}else S=yield q(m,{customParameters:v});const te=null==S?void 0:S.layers,ae=null==S?void 0:S.tables;return{layerIds:(null==te?void 0:te.map(Q=>Q.id).reverse())||[],tableIds:(null==ae?void 0:ae.map(Q=>Q.id).reverse())||[],layerInfos:k?te:[],tableInfos:k?ae:[]}})).apply(this,arguments)}function T(m){return!m.type||"Feature Layer"===m.type}function b(m,P){return _.apply(this,arguments)}function _(){return(_=(0,c.Z)(function*(m,P){var te,ae;let v=yield q(m,P);v=v||{},v.layers=(null==(te=v.layers)?void 0:te.filter(T))||[];const S={serviceJSON:v};if(v.currentVersion<10.5)return S;const k=yield q(m+"/layers",P);return S.layersJSON={layers:(null==(ae=null==k?void 0:k.layers)?void 0:ae.filter(T))||[],tables:(null==k?void 0:k.tables)||[]},S})).apply(this,arguments)}function O(m){return h.apply(this,arguments)}function h(){return(h=(0,c.Z)(function*(m){return(0,z.T[m])()})).apply(this,arguments)}function M(m,P){return j.apply(this,arguments)}function j(){return(j=(0,c.Z)(function*(m,P){return(yield q(m,{customParameters:P})).tileInfo})).apply(this,arguments)}function q(m,P){return L.apply(this,arguments)}function L(){return(L=(0,c.Z)(function*(m,P){return(yield(0,B.default)(m,{responseType:"json",query:Oe(fe({f:"json"},null==P?void 0:P.customParameters),{token:null==P?void 0:P.apiKey})})).data})).apply(this,arguments)}},96504:(ce,ee,t)=>{t.d(ee,{Z:()=>D});var c=t(17626),B=t(86810),x=t(77712),z=(t(85931),t(8314),t(90912),t(76898));let Z=class extends B.wq{get affectsPixelSize(){return!1}forwardTransform(H){return H}inverseTransform(H){return H}};(0,c._)([(0,x.Cb)()],Z.prototype,"affectsPixelSize",null),(0,c._)([(0,x.Cb)({json:{write:!0}})],Z.prototype,"spatialReference",void 0),Z=(0,c._)([(0,z.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],Z);const D=Z},76671:(ce,ee,t)=>{t.d(ee,{Z:()=>H});var c=t(17626),B=t(77712),F=(t(85931),t(8314),t(90912),t(55342)),z=t(76898),Z=t(96504);let D=class extends Z.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(A){return"point"===(A=A.clone()).type?(A.x>180+this.tolerance&&(A.x-=360),A):(A.xmin>=180-this.tolerance?(A.xmax-=360,A.xmin-=360):A.xmax>180+this.tolerance&&(A.xmin=-180,A.xmax=180),A)}inverseTransform(A){return"point"===(A=A.clone()).type?(A.x<-this.tolerance&&(A.x+=360),A):(A.xmin<-this.tolerance&&(A.xmin+=360,A.xmax+=360),A)}};(0,c._)([(0,F.J)({GCSShiftXform:"gcs-shift"})],D.prototype,"type",void 0),(0,c._)([(0,B.Cb)()],D.prototype,"tolerance",void 0),D=(0,c._)([(0,z.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],D);const H=D},85374:(ce,ee,t)=>{t.d(ee,{Z:()=>V});var c=t(17626),x=(t(29132),t(77712)),z=(t(85931),t(8314),t(90912),t(55342)),Z=t(68653),D=t(76898),H=t(99433),A=t(96504),R=t(49672),G=t(2004);function U(T,b,_){const{x:O,y:h}=b;if(_<2)return{x:T[0]+O*T[2]+h*T[4],y:T[1]+O*T[3]+h*T[5]};if(2===_){const S=O*O,k=h*h,te=O*h;return{x:T[0]+O*T[2]+h*T[4]+S*T[6]+te*T[8]+k*T[10],y:T[1]+O*T[3]+h*T[5]+S*T[7]+te*T[9]+k*T[11]}}const M=O*O,j=h*h,q=O*h,L=M*O,m=M*h,P=O*j,v=h*j;return{x:T[0]+O*T[2]+h*T[4]+M*T[6]+q*T[8]+j*T[10]+L*T[12]+m*T[14]+P*T[16]+v*T[18],y:T[1]+O*T[3]+h*T[5]+M*T[7]+q*T[9]+j*T[11]+L*T[13]+m*T[15]+P*T[17]+v*T[19]}}function K(T,b,_){const{xmin:O,ymin:h,xmax:M,ymax:j,spatialReference:q}=b;let L=[];if(_<2)L.push({x:O,y:j}),L.push({x:M,y:j}),L.push({x:O,y:h}),L.push({x:M,y:h});else{let v=10;for(let S=0;S<v;S++)L.push({x:O,y:h+(j-h)*S/(v-1)}),L.push({x:M,y:h+(j-h)*S/(v-1)});v=8;for(let S=1;S<=v;S++)L.push({x:O+(M-O)*S/v,y:h}),L.push({x:O+(M-O)*S/v,y:j})}L=L.map(v=>U(T,v,_));const m=L.map(v=>v.x),P=L.map(v=>v.y);return new G.Z({xmin:Math.min.apply(null,m),xmax:Math.max.apply(null,m),ymin:Math.min.apply(null,P),ymax:Math.max.apply(null,P),spatialReference:q})}let $=class extends A.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(T,b){const{coeffX:_,coeffY:O}=b;if(null==_||!_.length||null==O||!O.length||_.length!==O.length)return null;const h=[];for(let M=0;M<_.length;M++)h.push(_[M]),h.push(O[M]);return h}writeForwardCoefficients(T,b,_){const O=[],h=[];for(let M=0;M<(null==T?void 0:T.length);M++)M%2==0?O.push(T[M]):h.push(T[M]);b.coeffX=O,b.coeffY=h}get inverseCoefficients(){let T=this._get("inverseCoefficients");const b=this._get("forwardCoefficients");return!T&&b&&this.polynomialOrder<2&&(T=function w(T){const[b,_,O,h,M,j]=T,q=O*j-M*h,L=M*h-O*j;return[(M*_-b*j)/q,(O*_-b*h)/L,j/q,h/L,-M/q,-O/L]}(b)),T}set inverseCoefficients(T){this._set("inverseCoefficients",T)}readInverseCoefficients(T,b){const{inverseCoeffX:_,inverseCoeffY:O}=b;if(null==_||!_.length||null==O||!O.length||_.length!==O.length)return null;const h=[];for(let M=0;M<_.length;M++)h.push(_[M]),h.push(O[M]);return h}writeInverseCoefficients(T,b,_){const O=[],h=[];for(let M=0;M<(null==T?void 0:T.length);M++)M%2==0?O.push(T[M]):h.push(T[M]);b.inverseCoeffX=O,b.inverseCoeffY=h}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(T){if("point"===T.type){const b=U(this.forwardCoefficients,T,this.polynomialOrder);return new R.Z({x:b.x,y:b.y,spatialReference:T.spatialReference})}return K(this.forwardCoefficients,T,this.polynomialOrder)}inverseTransform(T){if("point"===T.type){const b=U(this.inverseCoefficients,T,this.polynomialOrder);return new R.Z({x:b.x,y:b.y,spatialReference:T.spatialReference})}return K(this.inverseCoefficients,T,this.polynomialOrder)}};(0,c._)([(0,x.Cb)({json:{write:!0}})],$.prototype,"polynomialOrder",void 0),(0,c._)([(0,x.Cb)()],$.prototype,"forwardCoefficients",void 0),(0,c._)([(0,Z.r)("forwardCoefficients",["coeffX","coeffY"])],$.prototype,"readForwardCoefficients",null),(0,c._)([(0,H.c)("forwardCoefficients")],$.prototype,"writeForwardCoefficients",null),(0,c._)([(0,x.Cb)({json:{write:!0}})],$.prototype,"inverseCoefficients",null),(0,c._)([(0,Z.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],$.prototype,"readInverseCoefficients",null),(0,c._)([(0,H.c)("inverseCoefficients")],$.prototype,"writeInverseCoefficients",null),(0,c._)([(0,x.Cb)()],$.prototype,"affectsPixelSize",null),(0,c._)([(0,z.J)({PolynomialXform:"polynomial"})],$.prototype,"type",void 0),$=(0,c._)([(0,D.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],$);const V=$},46572:(ce,ee,t)=>{t.d(ee,{j:()=>w,c:()=>$});var c=t(76671),B=t(17626),Z=(t(63290),t(90912),t(85931),t(8314),t(82255),t(55342)),D=t(76898),H=t(96504);let A=class extends H.Z{constructor(){super(...arguments),this.type="identity"}};(0,B._)([(0,Z.J)({IdentityXform:"identity"})],A.prototype,"type",void 0),A=(0,B._)([(0,D.j)("esri.layers.support.rasterTransforms.IdentityTransform")],A);const R=A;var G=t(85374);const U={GCSShiftXform:c.Z,IdentityXform:R,PolynomialXform:G.Z},K=Object.keys(U);function w(V){return!V||K.includes(null==V?void 0:V.type)}function $(V){if(!(null==V?void 0:V.type))return null;const b=U[null==V?void 0:V.type];if(b){const _=new b;return _.read(V),_}return null}},51026:(ce,ee,t)=>{t.d(ee,{d:()=>x,h:()=>B});var c=t(2584);const B={type:c.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:x}}}}};function x(W,Y,F,z){if(!W)return null;const{minScale:Z,maxScale:D,minLOD:H,maxLOD:A}=Y;if(null!=H&&null!=A)return c.Z.fromJSON(z&&z.ignoreMinMaxLOD?W:Oe(fe({},W),{lods:W.lods.filter(({level:R})=>null!=R&&R>=H&&R<=A)}));if(0!==Z&&0!==D){const R=K=>Math.round(1e4*K)/1e4,G=Z?R(Z):1/0,U=D?R(D):-1/0;return c.Z.fromJSON(Oe(fe({},W),{lods:W.lods.filter(K=>{const w=R(K.scale);return w<=G&&w>=U})}))}return c.Z.fromJSON(W)}},39691:(ce,ee,t)=>{t.d(ee,{Y:()=>B});var c=t(16730);const B={readOnly:!0,get(){return(0,c.RG)(this.view)}}},64288:(ce,ee,t)=>{t.d(ee,{cM:()=>Xe,ws:()=>ie,xV:()=>_e,UK:()=>Se,$_:()=>te});var c=t(26584),B=t(63290),W=(t(21286),t(7547)),F=(t(81295),t(39406)),z=t(27899);class Z{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(pe,ye,ge,Ce,De,je,He,Ue,We){this.color=pe,this.haloColor=ye,this.haloSize=ge,this.size=Ce,this.angle=De,this.offsetX=je,this.offsetY=He,this.hAnchor=Ue,this.vAnchor=We}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}Z.pool=new z.Z(Z);var D=t(67969),A=(t(55086),t(40852));const R=B.Z.getLogger("esri.views.2d.engine.webgl.Utils"),G="geometry",$=[{name:G,strideInBytes:12}],V=[{name:G,strideInBytes:36}],T=[{name:G,strideInBytes:24}],b=[{name:G,strideInBytes:12}],_=[{name:G,strideInBytes:40}],O=[{name:G,strideInBytes:36}],h=[{name:G,strideInBytes:36}];function M(N){const pe={};for(const ye of N)pe[ye.name]=ye.strideInBytes;return pe}const j=M([{name:G,strideInBytes:36}]),q=M($),L=M(V),m=M(T),P=M(b),v=M(_),S=M(O),k=M(h);function te(N,pe){switch(N){case F.LW.MARKER:return pe===F.mD.HEATMAP?q:j;case F.LW.FILL:switch(pe){case F.mD.DOT_DENSITY:return P;case F.mD.SIMPLE:case F.mD.OUTLINE_FILL_SIMPLE:return m;default:return L}case F.LW.LINE:return v;case F.LW.TEXT:return S;case F.LW.LABEL:return k}}function ie(N){switch(N){case"butt":return W.RL.BUTT;case"round":return W.RL.ROUND;case"square":return W.RL.SQUARE;default:return R.error(new c.Z("mapview-invalid-type",`Cap type ${N} is not a valid option. Defaulting to round`)),W.RL.ROUND}}function _e(N){switch(N){case"miter":return W.AH.MITER;case"bevel":return W.AH.BEVEL;case"round":return W.AH.ROUND;default:return R.error(new c.Z("mapview-invalid-type",`Join type ${N} is not a valid option. Defaulting to round`)),W.AH.ROUND}}function ue(N){switch(N){case D.g.BYTE:case D.g.UNSIGNED_BYTE:return 1;case D.g.SHORT:case D.g.UNSIGNED_SHORT:return 2;case D.g.FLOAT:case D.g.INT:case D.g.UNSIGNED_INT:return 4}}function Se(N){switch(N){case D.Br.UNSIGNED_BYTE:return Uint8Array;case D.Br.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case D.Br.FLOAT:return Float32Array;default:return void R.error(new c.Z("webgl-utils",`Unable to handle type ${N}`))}}const Ie=N=>{const pe=new Map;for(const ye in N)for(const ge of N[ye])pe.set(ge.name,ge.location);return pe},be=N=>{const pe={};for(const ye in N){const ge=N[ye];pe[ye]=ge.length?ge[0].stride:0}return pe},Ke=new Map,Xe=(N,pe)=>{if(!Ke.has(N)){const ye=function Ae(N){const pe={};for(const ye in N){let Ce=0;pe[ye]=N[ye].map(De=>{const je=new A.G(De.name,De.count,De.type,Ce,0,De.normalized||!1);return Ce+=De.count*ue(De.type),je}),pe[ye].forEach(De=>De.stride=Ce)}return pe}(pe),ge={strides:be(ye),bufferLayouts:ye,attributes:Ie(pe)};Ke.set(N,ge)}return Ke.get(N)}},81295:(ce,ee,t)=>{t.d(ee,{Vs:()=>A,aH:()=>H,t2:()=>D});var c=t(62208),B=t(5254);function D(R){if(!R)return 0;const{r:G,g:U,b:K,a:w}=R;return(0,B.Jz)(G*w,U*w,K*w,255*w)}function H(R){if(!R)return 0;const[G,U,K,w]=R;return(0,B.Jz)(G*(w/255),U*(w/255),K*(w/255),w)}function A(R,G,U=0){if((0,c.Wi)(G))return R[U+0]=0,R[U+1]=0,R[U+2]=0,void(R[U+3]=0);const{r:K,g:w,b:$,a:V}=G;R[U+0]=K*V/255,R[U+1]=w*V/255,R[U+2]=$*V/255,R[U+3]=V}},39406:(ce,ee,t)=>{var c,B,x,W,Y,F,z,Z,D;t.d(ee,{LW:()=>c,X:()=>Y,jx:()=>x,mD:()=>Z,mf:()=>F}),(D=c||(c={}))[D.FILL=0]="FILL",D[D.LINE=1]="LINE",D[D.MARKER=2]="MARKER",D[D.TEXT=3]="TEXT",D[D.LABEL=4]="LABEL",function(D){D[D.SUCCEEDED=0]="SUCCEEDED",D[D.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(B||(B={})),function(D){D[D.NONE=0]="NONE",D[D.MAP=1]="MAP",D[D.LABEL=2]="LABEL",D[D.LABEL_ALPHA=4]="LABEL_ALPHA",D[D.HITTEST=8]="HITTEST",D[D.HIGHLIGHT=16]="HIGHLIGHT",D[D.CLIP=32]="CLIP",D[D.DEBUG=64]="DEBUG",D[D.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(x||(x={})),function(D){D[D.SIZE=0]="SIZE",D[D.COLOR=1]="COLOR",D[D.OPACITY=2]="OPACITY",D[D.ROTATION=3]="ROTATION"}(W||(W={})),function(D){D[D.NONE=0]="NONE",D[D.OPACITY=1]="OPACITY",D[D.COLOR=2]="COLOR",D[D.ROTATION=4]="ROTATION",D[D.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",D[D.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",D[D.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",D[D.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(Y||(Y={})),function(D){D[D.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",D[D.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",D[D.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",D[D.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(F||(F={})),function(D){D[D.SPRITE=0]="SPRITE",D[D.GLYPH=1]="GLYPH"}(z||(z={})),function(D){D[D.DEFAULT=0]="DEFAULT",D[D.SIMPLE=1]="SIMPLE",D[D.DOT_DENSITY=2]="DOT_DENSITY",D[D.OUTLINE_FILL=3]="OUTLINE_FILL",D[D.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",D[D.HEATMAP=5]="HEATMAP",D[D.PIE_CHART=6]="PIE_CHART"}(Z||(Z={}))},18716:(ce,ee,t)=>{t.d(ee,{CA:()=>q,Gq:()=>oe,Xp:()=>j,a:()=>X,dk:()=>ae,hF:()=>m,jj:()=>L,jy:()=>M,m2:()=>P,mE:()=>Q,qr:()=>se});var c=t(26584),B=t(40028),x=t(39406);const O=Object.keys(x.mD).filter(re=>"number"==typeof x.mD[re]).reduce((re,E)=>Oe(fe({},re),{[E]:x.mD[E]}),{});function M(re){return re===x.mD.OUTLINE_FILL||re===x.mD.OUTLINE_FILL_SIMPLE}function j(re){return function h(re){return re===x.mD.SIMPLE||re===x.mD.OUTLINE_FILL_SIMPLE}(re.symbologyType)}function q(re){return M(re.symbologyType)}function L(re,E){switch(re){case x.LW.FILL:return ae.from(E);case x.LW.LINE:return X.from(E);case x.LW.MARKER:return Q.from(E);case x.LW.TEXT:return se.from(E);case x.LW.LABEL:return oe.from(E);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${re}`)}}function m(re){switch(P.load(re).geometryType){case x.LW.MARKER:return new Q(re);case x.LW.FILL:return new ae(re);case x.LW.LINE:return new X(re);case x.LW.TEXT:return new se(re);case x.LW.LABEL:return new oe(re)}}class P{constructor(E){this._data=0,this._data=E}static load(E){const a=this.shared;return a.data=E,a}set data(E){this._data=E}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(E){this.setBits(E,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(E){this.setBit(20,E)}get sdf(){return!!this.bit(11)}set sdf(E){this.setBit(11,E)}get pattern(){return!!this.bit(12)}set pattern(E){this.setBit(12,E)}get textureBinding(){return this.bits(0,8)}set textureBinding(E){this.setBits(E,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(E){this.setBits(E,21,26)}get geometryTypeString(){switch(this.geometryType){case x.LW.FILL:return"fill";case x.LW.MARKER:return"marker";case x.LW.LINE:return"line";case x.LW.TEXT:return"text";case x.LW.LABEL:return"label";default:throw new c.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(E,a){const C=1<<E;a?this._data|=C:this._data&=~C}bit(E){return(this._data&1<<E)>>E}setBits(E,a,C){for(let J=a,ne=0;J<C;J++,ne++)this.setBit(J,0!=(E&1<<ne))}bits(E,a){let C=0;for(let J=E,ne=0;J<a;J++,ne++)C|=this.bit(J)<<ne;return C}hasVV(){return!1}setVV(E,a){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:x.mD[this.symbologyType],options:O,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}P.shared=new P(0);const v=re=>class extends re{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(E){this.setBit(16,E)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(E){this.setBit(17,E)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(E){this.setBit(18,E)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(E){this.setBit(19,E)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(E,a){super.setVV(E,a);const C=function W(re,E,a){const C=x.X.SIZE_FIELD_STOPS|x.X.SIZE_MINMAX_VALUE|x.X.SIZE_SCALE_STOPS|x.X.SIZE_UNIT_VALUE,J=(E&(x.mf.FIELD_TARGETS_OUTLINE|x.mf.MINMAX_TARGETS_OUTLINE|x.mf.SCALE_TARGETS_OUTLINE|x.mf.UNIT_TARGETS_OUTLINE))>>>4;return re===x.LW.LINE&&a.isOutline||re===x.LW.FILL&&M(a.symbologyType)?C&J:C&~J}(this.geometryType,E,a)&E;this.vvSizeMinMaxValue=!!(C&x.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(C&x.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(C&x.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(C&x.X.SIZE_SCALE_STOPS)}},S=re=>class extends re{get vvRotation(){return 0!==this.bit(15)}set vvRotation(E){this.setBit(15,E)}hasVV(){return super.hasVV()||this.vvRotation}setVV(E,a){super.setVV(E,a),this.vvRotation=!a.isOutline&&!!(E&x.X.ROTATION)}},k=re=>class extends re{get vvColor(){return 0!==this.bit(13)}set vvColor(E){this.setBit(13,E)}hasVV(){return super.hasVV()||this.vvColor}setVV(E,a){super.setVV(E,a),this.vvColor=!a.isOutline&&!!(E&x.X.COLOR)}},te=re=>class extends re{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(E){this.setBit(14,E)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(E,a){super.setVV(E,a),this.vvOpacity=!a.isOutline&&!!(E&x.X.OPACITY)}};class ae extends(k(te(v(P)))){static load(E){const a=this.shared;return a.data=E,a}static from(E){const{symbologyType:a,vvFlags:C}=E,J=this.load(0);return J.geometryType=x.LW.FILL,J.symbologyType=a,a!==x.mD.DOT_DENSITY&&J.setVV(C,E),J.data}getVariation(){return Oe(fe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}ae.shared=new ae(0);class Q extends(k(te(S(v(P))))){static load(E){const a=this.shared;return a.data=E,a}static from(E){const{symbologyType:a,vvFlags:C}=E,J=this.load(0);return J.geometryType=x.LW.MARKER,J.symbologyType=a,a!==x.mD.HEATMAP&&J.setVV(C,E),J.data}getVariation(){return Oe(fe({},super.getVariation()),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}Q.shared=new Q(0);class X extends(k(te(v(P)))){static load(E){const a=this.shared;return a.data=E,a}static from(E){const a=this.load(0);return a.geometryType=x.LW.LINE,a.symbologyType=E.symbologyType,a.setVV(E.vvFlags,E),a.data}getVariation(){return Oe(fe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}X.shared=new X(0);class se extends(k(te(S(v(P))))){static load(E){const a=this.shared;return a.data=E,a}static from(E){const a=this.load(0);return a.geometryType=x.LW.TEXT,a.symbologyType=E.symbologyType,a.setVV(E.vvFlags,E),a.data}getVariation(){return Oe(fe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}se.shared=new se(0);class oe extends(v(P)){static load(E){const a=this.shared;return a.data=E,a}static from(E){const a=this.load(0);return a.geometryType=x.LW.LABEL,a.symbologyType=E.symbologyType,a.setVV(E.vvFlags,E),a.mapAligned=(0,B.NS)(E.placement),a.data}getVariation(){return Oe(fe({},super.getVariation()),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}oe.shared=new oe(0)},13112:(ce,ee,t)=>{t.d(ee,{Z:()=>D});var c=t(17626),B=t(80542),x=t(77712),z=(t(85931),t(8314),t(90912),t(76898));let Z=class extends B.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const H=this.get("tileStore.tileScheme.spatialReference");return H&&H.toJSON()||null}};(0,c._)([(0,x.Cb)({readOnly:!0})],Z.prototype,"supportsTileUpdates",null),(0,c._)([(0,x.Cb)({constructOnly:!0})],Z.prototype,"remoteClient",void 0),(0,c._)([(0,x.Cb)({constructOnly:!0})],Z.prototype,"service",void 0),(0,c._)([(0,x.Cb)()],Z.prototype,"spatialReference",null),(0,c._)([(0,x.Cb)({constructOnly:!0})],Z.prototype,"tileInfo",void 0),(0,c._)([(0,x.Cb)({constructOnly:!0})],Z.prototype,"tileStore",void 0),Z=(0,c._)([(0,z.j)("esri.views.2d.layers.features.processors.BaseProcessor")],Z);const D=Z},55376:(ce,ee,t)=>{function x(W,Y,F,z){const Z=W.clone(),D=1<<Z.level,H=Z.col+Y,A=Z.row+F;return z&&H<0?(Z.col=H+D,Z.world-=1):H>=D?(Z.col=H-D,Z.world+=1):Z.col=H,Z.row=A,Z}t.d(ee,{M:()=>x}),t(81340)},74554:(ce,ee,t)=>{var c,B;t.d(ee,{e:()=>c}),(B=c||(c={}))[B.Auto=0]="Auto",B[B.Euclidean=1]="Euclidean",B[B.Geodesic=2]="Geodesic"},68:(ce,ee,t)=>{t.d(ee,{D:()=>B});var c=t(16730);class B{constructor(W=null){this.spatialReference=W}get spatialReference(){return this._spatialReference}set spatialReference(W){W!==this._spatialReference&&(this._spatialReference=W,this._updateNormalizationFactors())}normalizeDistance(W){return W*this._metersPerDistanceUnit}normalizeElevation(W){return W*this._metersPerElevationUnit}normalizeArea(W){return W*this._squareMetersPerAreaUnit}_updateNormalizationFactors(){this._metersPerDistanceUnit=(0,c.c9)(this._spatialReference,1),this._metersPerElevationUnit=(0,c.c9)(this._spatialReference,1),this._squareMetersPerAreaUnit=this._metersPerDistanceUnit*this._metersPerDistanceUnit}}},495:(ce,ee,t)=>{t.d(ee,{H:()=>W,c:()=>Y});var c=t(23841),B=t(67831),x=t(84161);function W(H,A){if((0,x.s)(A,0,0,0),H.length>0){for(let R=0;R<H.length;++R)(0,x.a)(A,A,H[R]);(0,x.g)(A,A,1/H.length)}}function Y(H,A,R,G){G.projectToRenderScreen(H,F),G.projectToRenderScreen(A,Z),(0,B.g)(R,D,z),(0,B.i)(R,R)}const F=(0,c.J$)(),z=F,Z=(0,c.J$)(),D=Z},95277:(ce,ee,t)=>{t.d(ee,{c:()=>x,t:()=>W});var c=t(62208),B=t(60507);function x(Y,F=(0,B.RL)(Y)){return"on-the-ground"!==F.mode&&!((0,c.Wi)(Y.geometry)||!Y.geometry.hasZ)}function W(Y,F){let z=null;const Z=Y.events.on("grab-changed",D=>{(0,c.pC)(z)&&(z.remove(),z=null),"start"===D.action&&(z=Y.disableDisplay()),F&&F(D)});return{remove(){(0,c.pC)(z)&&z.remove(),Z.remove()}}}},50916:(ce,ee,t)=>{t.d(ee,{r:()=>R});var c=t(17626),B=t(26584),x=t(62208),W=t(32917),Y=t(77712),D=(t(85931),t(8314),t(90912),t(76898)),H=t(41632),A=t(61779);const R=G=>{let U=class extends G{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const K=this.tileInfo.lods;return this.levelRangeFromScaleRange(K[0].scale,K[K.length-1].scale)}get displayLevelRange(){const K=this.tileInfo.lods,V=this.levelRangeFromScaleRange(this.layer.minScale||K[0].scale,this.layer.maxScale||K[K.length-1].scale);return this.layer.maxScale&&V.maxLevel++,V}getTileUrl(K,w,$){return this.layer.getTileUrl(K,w,$)}_addTilingSchemeMatchPromise(){if((0,x.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new B.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const K=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,x.pC)(K))return this.addResolvingPromise(Promise.reject(K));const w=(0,W.N1)(()=>{var $,V;return null==(V=null==($=this.view)?void 0:$.basemapTerrain)?void 0:V.tilingSchemeLocked}).then(()=>{const V=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(V)throw V});this.addResolvingPromise(w)}_getTileInfoSupportError(K,w){const $=(0,A.er)(K,w,this.view.spatialReference,this.view.state.viewingMode);if($){const V={layer:this.layer,error:$};let T;switch($.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":T=new B.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",V);break;default:T=new B.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",V)}return T}return null}_getTileInfoCompatibilityError(K,w){return w.compatibleWith(K)?null:new B.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")}levelRangeFromScaleRange(K,w){const $={minLevel:0,maxLevel:1/0},V=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!V)return $;const T=V.levels[0],b=_=>{const O=Math.log(T.scale/_)/Math.LN2;return.5-Math.abs(.5-O%1)<1e-9?Math.round(O):Math.ceil(O)};return null!=K&&K>0&&($.minLevel=Math.max(0,b(K))),null!=w&&w>0&&($.maxLevel=Math.max(0,b(w))),$}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,c._)([(0,Y.Cb)({readOnly:!0})],U.prototype,"imageFormatIsOpaque",null),(0,c._)([(0,Y.Cb)({readOnly:!0})],U.prototype,"updating",void 0),(0,c._)([(0,Y.Cb)(H.q)],U.prototype,"updatingProgress",void 0),(0,c._)([(0,Y.Cb)(H.V)],U.prototype,"updatingProgressValue",void 0),(0,c._)([(0,Y.Cb)()],U.prototype,"fullExtent",null),(0,c._)([(0,Y.Cb)({readOnly:!0})],U.prototype,"isOpaque",null),(0,c._)([(0,Y.Cb)({readOnly:!0})],U.prototype,"dataLevelRange",null),(0,c._)([(0,Y.Cb)({readOnly:!0})],U.prototype,"displayLevelRange",null),(0,c._)([(0,Y.Cb)()],U.prototype,"layer",void 0),(0,c._)([(0,Y.Cb)()],U.prototype,"tileInfo",void 0),U=(0,c._)([(0,D.j)("esri.views.3d.layers.TiledLayerView3D")],U),U}},3493:(ce,ee,t)=>{t.d(ee,{Z:()=>z,s:()=>F});var c=t(58817),B=t(62208),x=t(97445);const W={setAttribute(){},rollback(){},commit(){}};var Y,U;function F(U,K){const w=K.attributes[U.objectIdField],$=U.sessions.get(w);if($)return $;const V=(0,c.d9)(K.attributes),T=new Set;if(null==w)return W;const b=U.attributeOverrides.createInteractiveEditSession(w),_=new Map;let h=Y.EDITING;const M={setAttribute(j,q){if(h!==Y.EDITING)return;const L=U.fieldsIndex.get(j);if((0,B.Wi)(L))return;const m=U.attributeStorageInfo.findIndex(S=>S.name===L.name);if(m<0)return;b.set(m,q);const P=U.attributeStorageInfo[m];let v=!1;T.add(j),U.forEachNode((S,k)=>{const te=((j,q)=>{const L=_.get(j);if(null==L){const m=q.indexOf(w);return _.set(j,m),m}return L})(S,k);if(-1===te)return;const ae=U.getAttributeData(S.index);if(ae){const Q=ae[P.name];Q&&(Q[te]=q,U.setAttributeData(S.index,ae,K),v=!0)}}),v&&U.clearMemCache()},rollback(){if(h===Y.EDITING){for(const j of T)this.setAttribute(j,V[j]);b.rollback(),h=Y.ROLLED_BACK,U.sessions.delete(w)}},commit(){h===Y.EDITING&&(b.commit(),h=Y.COMMITTED,U.sessions.delete(w))}};return U.sessions.set(w,M),M}function z(U,K){const w=function Z(U,K){const w=K.edits.updateFeatures;if(!w||0===w.length)return new G;const $=function A(U){const K=new Set;if(!U.updatedFeatures)return K;for(const w of U.updatedFeatures)null!=w.objectId&&null==w.error&&K.add(w.objectId);return K}(K),V=new G,T=new Map;for(let h=0;h<U.attributeStorageInfo.length;h++)T.set(U.attributeStorageInfo[h].name,h);const b=U.fieldsIndex,_=U.objectIdField,O=w.filter(h=>{const M=(0,x.g)(b,h.attributes,_);return $.has(M)});return U.forEachNode((h,M)=>{const j=new Set(M);for(const q of O){const L=(0,x.g)(b,q.attributes,_);if(!j.has(L))continue;const m=M.indexOf(L);for(const P in q.attributes){const v=U.fieldsIndex.normalizeFieldName(P);D(V,h.index,v).push({featureIndex:m,featureId:L,value:q.attributes[P]})}}}),V}(U,K);if(0===w.size)return;const $=new Map;for(let T=0;T<U.attributeStorageInfo.length;T++)$.set(U.attributeStorageInfo[T].name,T);let V=!1;w.forEach((T,b)=>{const _=U.getAttributeData(b);let O=!1;T.forEach((h,M)=>{const j=(0,B.pC)(_)?_[M]:null,q=$.get(M);for(const{featureIndex:L,value:m,featureId:P}of h)j&&(j[L]=m,O=!0,V=!0),U.attributeOverrides.updateValue(P,q,m)}),O&&U.setAttributeData(b,_,null)}),V&&U.clearMemCache()}function D(U,K,w){const $=function H(U,K){const w=U.get(K);if(w)return w;const $=new R;return U.set(K,$),$}(U,K),V=$.get(w);if(V)return V;const T=new Array;return $.set(w,T),T}(U=Y||(Y={}))[U.EDITING=0]="EDITING",U[U.ROLLED_BACK=1]="ROLLED_BACK",U[U.COMMITTED=2]="COMMITTED";const R=Map,G=Map},40465:(ce,ee,t)=>{t.d(ee,{i:()=>G});var c=t(15861),B=t(17626),x=t(26584),W=t(62208),H=(t(63290),t(90912),t(85931),t(8314),t(82255),t(76898)),A=t(36630),R=t(10023);const G=U=>{let K=class extends U{_validateFetchPopupFeatures(w){const{layer:$}=this,{popupEnabled:V}=$;return V?(0,R.V)($,w)?void 0:new x.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:$}):new x.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:$})}prepareFetchPopupFeatures(w){return(0,c.Z)(function*(){})()}fetchPopupFeatures(w,$){var V=this;return(0,c.Z)(function*(){const T=V._validateFetchPopupFeatures($);if(T)throw T;const b=(0,W.pC)($)?$.clientGraphics:null;if(!b||0===b.length)return[];const _="scene"===V.layer.type&&(0,W.pC)(V.layer.associatedLayer)?V.layer.associatedLayer:V.layer,O=(0,A.Lk)(V.layer.fieldsIndex,yield(0,R.e)(_,(0,R.V)(V.layer,$)));yield V.prepareFetchPopupFeatures(O);const h=new Set,M=[],j=[];for(const q of b)(0,A.Gm)(O,q,h)?j.push(q):M.push(q);return 0===j.length?M:V.whenGraphicAttributes(j,[...h]).catch(()=>j).then(q=>M.concat(q))})()}};return K=(0,B._)([(0,H.j)("esri.views.3d.layers.support.PopupSceneLayerView")],K),K}},57610:(ce,ee,t)=>{t.d(ee,{K:()=>b});var c=t(15861),B=t(17626),x=t(14517),W=t(63290),Y=t(36082),F=t(77712),z=t(76898),Z=t(819);const D=h=>{let M=class extends h{constructor(){super(...arguments),this._numUpdating=0,this.asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(j,q){return function A(h,M){const q=()=>{if(!m||P)return M();m.clear(),P=!0;const v=(0,Y.LJ)(m,M);return P=!1,v};let m=new Z.M(()=>{m&&!P&&h(q)}),P=!1;return h(q),{remove:()=>{m&&(m.destroy(),m=null)}}}(L=>this._updateAsync(j,L),q)}_updateAsync(j,q){var L=this;return(0,c.Z)(function*(){if(!L._startAsyncUpdate(j)){try{const m=yield q();L._set(j,m)}catch(m){W.Z.getLogger(L.declaredClass).warn(`Async update of "${String(j)}" failed. Async update functions should not throw exceptions.`)}L._endAsyncUpdate(j)&&L._updateAsync(j,q)}})()}_startAsyncUpdate(j){var L;const q=null!=(L=this.asyncUpdateState.get(j))?L:H.None;return q&H.Updating?(this.asyncUpdateState.set(j,q|H.Invalidated),!0):(++this._numUpdating,this.asyncUpdateState.set(j,q|H.Updating),!1)}_endAsyncUpdate(j){var L;--this._numUpdating;const q=(null!=(L=this.asyncUpdateState.get(j))?L:H.None)&~H.Updating;return q&H.Invalidated?(this.asyncUpdateState.set(j,q&~H.Invalidated),!0):(this.asyncUpdateState.set(j,q),!1)}};return(0,B._)([(0,F.Cb)({readOnly:!0})],M.prototype,"updating",null),(0,B._)([(0,F.Cb)()],M.prototype,"_numUpdating",void 0),M=(0,B._)([(0,z.j)("esri.core.AsyncUpdate")],M),M};var H,h;(h=H||(H={}))[h.None=0]="None",h[h.Updating=1]="Updating",h[h.Invalidated=2]="Invalidated";let R=class extends(D(x.Z)){};R=(0,B._)([(0,z.j)("esri.core.AsyncUpdate")],R);var G=t(80542),U=t(62208),V=(t(85931),t(8314),t(90912),t(36630));const T=W.Z.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields");let b=class extends(D(G.r)){constructor(h){super(h)}get requiredFields(){const{layerView:{layer:{fieldsIndex:h},definitionExpressionFields:M},rendererFields:j,labelingFields:q,viewFilterFields:L}=this;return(0,V.Q0)(h,[...(0,U.Pt)(M,[]),...(0,U.Pt)(j,[]),...(0,U.Pt)(q,[]),...(0,U.Pt)(L,[])])}initialize(){this.layer=this.layerView.layer,this.handles.add([this.autoUpdateAsync("rendererFields",()=>{const{fieldsIndex:M,renderer:j}=this.layer;return j?_(q=>j.collectRequiredFields(q,M)):null}),this.autoUpdateAsync("labelingFields",()=>{const{layer:M}=this;return M.labelsVisible?_(j=>(0,V.Mu)(j,M)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:M,filter:j}=this.layerView;return _(q=>(0,V.Ll)(q,M,j))})])}};function _(h){return O.apply(this,arguments)}function O(){return O=(0,c.Z)(function*(h){const M=new Set;try{return yield h(M),Array.from(M).sort()}catch(j){return T.error(j),null}}),O.apply(this,arguments)}(0,B._)([(0,F.Cb)()],b.prototype,"layerView",void 0),(0,B._)([(0,F.Cb)()],b.prototype,"layer",void 0),(0,B._)([(0,F.Cb)()],b.prototype,"requiredFields",null),(0,B._)([(0,F.Cb)()],b.prototype,"rendererFields",void 0),(0,B._)([(0,F.Cb)()],b.prototype,"labelingFields",void 0),(0,B._)([(0,F.Cb)()],b.prototype,"viewFilterFields",void 0),b=(0,B._)([(0,z.j)("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],b)},67966:(ce,ee,t)=>{t.d(ee,{v:()=>B});var c=t(36630);function B(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:x,layer:{fieldsIndex:W},requiredFields:Y}=this;return(0,c.Q0)(W,x.outFields?[...(0,c.Lk)(W,x.outFields),...Y]:Y)}}}}},95925:(ce,ee,t)=>{t.d(ee,{Lp:()=>F,P9:()=>Y,Yq:()=>D});var c=t(15861),B=t(62208),x=t(10699),W=t(32917);function Y(H,A,R){const G=Z(H,A);H.view.activeTool=G;let U=(0,x.fu)(R,()=>z(H,A));return(0,x.vr)(function(){var K=(0,c.Z)(function*(w){yield(0,W.N1)(()=>!G.active,w),U=(0,B.hw)(U),z(H,A)});return function(w){return K.apply(this,arguments)}}(),R)}function F(H,A){return(0,W.YP)(()=>H.interactive,()=>z(H,A),W.tX)}function z(H,A){H.interactive?Z(H,A):D(H)}function Z(H,A){D(H);const{view:R,analysis:G}=H,U=new A({view:R,analysis:G,analysisViewData:H});return H.tool=U,R.tools.add(U),U}function D(H){const{view:A,tool:R}=H;(0,B.Wi)(R)||(A.tools.remove(R),H.tool=null)}},34921:(ce,ee,t)=>{t.d(ee,{T:()=>X,I:()=>re});var c=t(17626),B=t(88879),W=(t(8314),t(61885)),Y=t(80542),F=t(54024),z=t(62208),Z=t(77712),D=t(85931),A=(t(90912),t(76898)),R=t(51470),U=(t(29132),t(58817)),K=t(16730),w=t(72149),$=t(44766),V=t(25748),T=t(37053),b=t(70386),_=t(72854),O=t(49672),h=t(55214),M=t(37118);function L(a,C){const J=new O.Z({x:a[0],y:a[1],spatialReference:C});return a.length>2&&(J.z=a[2]),J}function P(a,C,J){const ne=new h.Z({paths:a,spatialReference:C});return J&&(0,V.nc)(ne),ne}function v(a,C,J,ne=!0){const le=(0,U.d9)(a);le.forEach(_e=>{(0,D.fS)(_e[0],_e[_e.length-1])&&1!==_e.length||_e.push(_e[0])});let ie=new M.Z({rings:le,spatialReference:C});return ie.rings.forEach(_e=>{(0,V.bu)(_e,!1,!1)||_e.reverse()}),J&&(0,V.nc)(ie),ne&&ie.isSelfIntersecting&&(0,T.JY)(C)&&(ie=(0,$.simplify)(ie)),ie}function S(a,C,J){const ne=C.mapToLocalMultiple(a),le=[],ie={x:ne[0].x,y:ne[0].y},_e_y=ne[1].y,he=Math.round(ne[1].x-ie.x),de=Math.round(_e_y-ie.y),Ee=Math.max(Math.abs(he),Math.abs(de));if(J){const me={x:ie.x+Ee,y:ie.y+Ee},Pe={x:ie.x-Ee,y:ie.y-Ee};le.push((0,b.Q8)(me.x,Pe.y),(0,b.Q8)(Pe.x,Pe.y),(0,b.Q8)(Pe.x,me.y),(0,b.Q8)(me.x,me.y))}else{const me={x:he>0?ie.x+Ee:ie.x-Ee,y:de>0?ie.y+Ee:ie.y-Ee};le.push((0,b.Q8)(ie.x,ie.y),(0,b.Q8)(me.x,ie.y),(0,b.Q8)(me.x,me.y),(0,b.Q8)(ie.x,me.y))}return v([(0,z.lV)(le.map(me=>C.localToMap(me)))],C.spatialReference,C.doUnnormalization,!0)}function te(a,C,J,ne){const le=C.mapToLocalMultiple(a);let ie=null,_e=null;if(J)ie=le[0],_e=le[1];else{const ue=le[0],Me=le[1],Se=Math.round(Me.x-ue.x),Ae=Math.round(Me.y-ue.y),Ie=Math.max(Math.abs(Se),Math.abs(Ae));ie=(0,b.Q8)(Se>0?ue.x+Ie/2:ue.x-Ie/2,Ae>0?ue.y+Ie/2:ue.y-Ie/2),_e=(0,b.Q8)(Math.abs(Se)>Math.abs(Ae)?ie.x-Ie/2:ie.x,Math.abs(Se)>Math.abs(Ae)?ie.y:ie.y-Ie/2)}const he=C.localToMap(ie),de=C.localToMap(_e);if((0,z.Wi)(he)||(0,z.Wi)(de))return null;C.doUnnormalization&&(0,V.Sq)([[he,de]],C.spatialReference);const Ee=L(he,C.spatialReference),me=L(de,C.spatialReference),Pe=(0,K.c9)(C.spatialReference);let ve=0;if((0,T.JY)(C.spatialReference))ve=Pe*(0,$.distance)(Ee,me,null);else{const ue=ie.x-_e.x,Me=ie.y-_e.y;ve=Pe*Math.sqrt(ue*ue+Me*Me)*(ne||1)}const Te=new w.Z({center:Ee,radius:ve,radiusUnit:"meters",spatialReference:C.spatialReference});return v(Te.rings,Te.spatialReference,!1)}var Q=t(22944);let X=class extends((0,Y.p)(W.Z.EventedMixin(Q.m))){constructor(a){super(a),this._graphic=null,this.defaultZ=0,this.geometryType=null,this.hasZ=!0,this.mode=null,this.snappingManager=null,this.snapToScene=!1}initialize(){this.internalGraphicsLayer=new R.Z({listMode:"hide",internal:!0}),this.view.map.layers.add(this.internalGraphicsLayer),this.drawOperation=this.makeDrawOperation(),this.handles.add([this.drawOperation.on("vertex-add",a=>this.onVertexAdd(a)),this.drawOperation.on("vertex-remove",a=>this.onVertexRemove(a)),this.drawOperation.on("vertex-update",a=>this.onVertexUpdate(a)),this.drawOperation.on("cursor-update",a=>this.onCursorUpdate(a)),this.drawOperation.on("complete",a=>this.onComplete(a))]),this.finishToolCreation()}destroy(){this.drawOperation=(0,z.SC)(this.drawOperation),this._destroyAllVisualisations(),this.view.map.remove(this.internalGraphicsLayer),this.internalGraphicsLayer=(0,z.SC)(this.internalGraphicsLayer),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centered(a){this._set("centered",a),this._updateGraphic()}set enabled(a){this.drawOperation.interactive=a,this._set("enabled",a)}set forceUniformSize(a){this._set("forceUniformSize",a),this._updateGraphic()}get graphic(){return this._graphic}set graphicSymbol(a){this._set("graphicSymbol",a),(0,z.pC)(this._graphic)&&(this._graphic.symbol=a)}get updating(){var a,C;return null!=(C=null==(a=this.drawOperation)?void 0:a.updating)&&C}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(a){this.drawOperation.onInputEvent(a)}redo(){this.drawOperation.redo()}reset(){}undo(){this.drawOperation.undo()}_createGraphic(a){this._graphic=new B.Z(Oe(fe({},this.graphicProperties),{geometry:a,symbol:this.graphicSymbol})),this.internalGraphicsLayer.add(this._graphic),this.handles.add(this.initializeGraphic(this._graphic)),this.notifyChange("graphic"),this.handles.add((0,F.kB)(()=>{(0,z.pC)(this._graphic)&&(this.internalGraphicsLayer.remove(this._graphic),this._graphic=(0,z.SC)(this._graphic))}),se)}_destroyAllVisualisations(){this.handles.remove(oe.outline),this.handles.remove(oe.regularVertices),this.handles.remove(oe.activeVertex),this.handles.remove(se)}_getCreateOperationGeometry(a={operationComplete:!1}){if(null==this.drawOperation||0===this.drawOperation.numVertices)return null;const C=this.drawOperation.stagedVertex,J=this.drawOperation.committedVertices,ne=J.slice();(0,z.pC)(C)&&ne.push(this.drawOperation.coordinateHelper.pointToArray(C));const le=(0,z.pC)(C)?this.drawOperation.coordinateHelper.pointToArray(C):J.splice(-1)[0],ie={regularVertices:null,activeVertex:null,full:null,outline:null},_e=ne.length,he=this.view.spatialReference,de="3d"===this.view.type&&"global"===this.view.viewingMode;switch(this.geometryType){case"point":ie.regularVertices=J,ie.activeVertex=le,ie.full=this.drawOperation.coordinateHelper.arrayToPoint(ne[0]);break;case"multipoint":ie.regularVertices=J,ie.activeVertex=le,_e>0&&(ie.full=function m(a,C){return new _.Z({points:a,spatialReference:C})}(ne,he));break;case"polyline":ie.regularVertices=J,ie.activeVertex=le,_e>0&&(ie.full=P([ne],he,de));break;case"polygon":ie.regularVertices=J,ie.activeVertex=le,_e>0&&(ie.full=v([ne],he,de,!0));break;case"circle":if(_e>0){const Ee=(0,b.Gn)(this.view,ne[0]);if(1===_e&&a.operationComplete){const me=ne[0],Pe=Ee.makeMapPoint(me[0]+E*this.view.resolution,me[1]);ie.full=te([me,Pe],Ee,!0)}else 2===_e&&(ie.full=this.forceUniformSize?te(ne,Ee,this.centered):function ae(a,C,J){const ne=C.mapToLocalMultiple(a),le=ne[0],ie=ne[1],_e=Math.round(ie.x-le.x),he=Math.round(ie.y-le.y),de=(0,b.Q8)(J?le.x:le.x+_e/2,J?le.y:le.y+he/2),Ee=J?_e:_e/2,me=J?he:he/2,ve=[],Te=2*Math.PI/60;for(let ue=0;ue<60;ue++){const Me=Math.cos(ue*Te),Se=Math.sin(ue*Te),Ae=(0,b.Q8)(Ee*Me+de.x,me*Se+de.y);ve.push(Ae)}return ve.push(ve[0]),v([(0,z.lV)(ve.map(ue=>C.localToMap(ue)))],C.spatialReference,C.doUnnormalization,!1)}(ne,Ee,this.centered))}break;case"rectangle":if(_e>0){const Ee=(0,b.Gn)(this.view,ne[0]);if(1===_e&&a.operationComplete){const me=ne[0],Pe=Ee.makeMapPoint(me[0]+E*this.view.resolution,me[1]);ie.full=S([me,Pe],Ee,!0)}else 2===_e&&(ie.full=this.forceUniformSize?S(ne,Ee,this.centered):function k(a,C,J){let ne=C.mapToLocalMultiple(a);if(1===ne.length){const de=ne[0];ne=[(0,b.Q8)(de.x-48,de.y+48),(0,b.Q8)(de.x+48,de.y-48),(0,b.Q8)(de.x+48,de.y-48),(0,b.Q8)(de.x-48,de.y+48)]}const le=[],ie={x:ne[0].x,y:ne[0].y},_e={x:ne[1].x,y:ne[1].y};if(J){const he=Math.round(_e.x-ie.x),de=Math.round(_e.y-ie.y);le.push((0,b.Q8)(ie.x-he,ie.y-de),(0,b.Q8)(_e.x,ie.y-de),(0,b.Q8)(_e.x,_e.y),(0,b.Q8)(ie.x-he,_e.y))}else le.push((0,b.Q8)(ie.x,ie.y),(0,b.Q8)(_e.x,ie.y),(0,b.Q8)(_e.x,_e.y),(0,b.Q8)(ie.x,_e.y));return v([(0,z.lV)(le.map(he=>C.localToMap(he)))],C.spatialReference,C.doUnnormalization,!0)}(ne,Ee,this.centered))}break;default:return null}switch(this.geometryType){case"point":case"multipoint":break;case"polyline":case"polygon":_e>1&&(ie.outline=P([ne],he,de));break;case"circle":case"rectangle":(0,z.pC)(ie.full)&&"polygon"===ie.full.type&&(ie.outline=v(ie.full.rings,he,de))}return ie}initializeGraphic(a){return null}onComplete(a){this._updateGraphic();let C=null;if(this.drawOperation.isCompleted){const J=this._getCreateOperationGeometry({operationComplete:!0});(0,z.pC)(J)&&((0,z.Wi)(this._graphic)?this._createGraphic(J.full):this._graphic.geometry=J.full,C=(0,z.Wg)(this._graphic).clone())}this.emit("complete",fe({graphic:C},a))}onCursorUpdate(a){this._updateGraphic(),this.emit("cursor-update",a)}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}onVertexAdd(a){this._updateGraphic(),this.emit("vertex-add",a)}onVertexRemove(a){this._updateGraphic(),this.emit("vertex-remove",a)}onVertexUpdate(a){this._updateGraphic(),this.emit("vertex-update",a)}_updateGraphic(){const a=this._getCreateOperationGeometry();(0,z.Wi)(a)?this._destroyAllVisualisations():((0,z.pC)(a.outline)?this.handles.add(this.onOutlineChanged(a.outline),oe.outline):this.handles.remove(oe.outline),(0,z.pC)(a.regularVertices)?this.handles.add(this.onRegularVerticesChanged(a.regularVertices),oe.regularVertices):this.handles.remove(oe.regularVertices),(0,z.pC)(a.activeVertex)?this.handles.add(this.onActiveVertexChanged(a.activeVertex),oe.activeVertex):this.handles.remove(oe.activeVertex),(0,z.pC)(a.full)?(0,z.Wi)(this._graphic)?this._createGraphic(a.full):this._graphic.geometry=a.full:this.handles.remove(se))}};(0,c._)([(0,Z.Cb)({value:!0})],X.prototype,"centered",null),(0,c._)([(0,Z.Cb)({nonNullable:!0})],X.prototype,"defaultZ",void 0),(0,c._)([(0,Z.Cb)()],X.prototype,"drawOperation",void 0),(0,c._)([(0,Z.Cb)({value:!0})],X.prototype,"enabled",null),(0,c._)([(0,Z.Cb)({value:!0})],X.prototype,"forceUniformSize",null),(0,c._)([(0,Z.Cb)({constructOnly:!0})],X.prototype,"geometryType",void 0),(0,c._)([(0,Z.Cb)()],X.prototype,"graphic",null),(0,c._)([(0,Z.Cb)({constructOnly:!0})],X.prototype,"graphicProperties",void 0),(0,c._)([(0,Z.Cb)()],X.prototype,"graphicSymbol",null),(0,c._)([(0,Z.Cb)({constructOnly:!0})],X.prototype,"hasZ",void 0),(0,c._)([(0,Z.Cb)({constructOnly:!0})],X.prototype,"mode",void 0),(0,c._)([(0,Z.Cb)()],X.prototype,"snappingManager",void 0),(0,c._)([(0,Z.Cb)()],X.prototype,"snapToScene",void 0),(0,c._)([(0,Z.Cb)({readOnly:!0})],X.prototype,"type",void 0),(0,c._)([(0,Z.Cb)({readOnly:!0})],X.prototype,"updating",null),(0,c._)([(0,Z.Cb)({constructOnly:!0,nonNullable:!0})],X.prototype,"view",void 0),X=(0,c._)([(0,A.j)("esri.views.draw.DrawGraphicTool")],X);const se="create-operation-graphic",oe={outline:"outline-visual",regularVertices:"regular-vertices-visual",activeVertex:"active-vertex-visual"};function re(a){switch(a){case"point":case"polyline":case"polygon":case"multipoint":return a;case"circle":case"rectangle":return"segment";default:return null}}const E=48},22712:(ce,ee,t)=>{t.d(ee,{f:()=>D});var c=t(17626),B=t(32917),x=t(77712),z=(t(85931),t(8314),t(90912),t(76898)),Z=t(22944);let D=class extends Z.m{constructor(H){super(H)}initialize(){this.own((0,B.YP)(()=>this.analysisViewData.visible,H=>this.visible=H,B.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};(0,c._)([(0,x.Cb)({constructOnly:!0})],D.prototype,"analysis",void 0),(0,c._)([(0,x.Cb)()],D.prototype,"analysisViewData",void 0),D=(0,c._)([(0,z.j)("esri.views.interactive.AnalysisToolBase")],D)},70211:(ce,ee,t)=>{t.d(ee,{x:()=>W});var c=t(33351),B=t(97979),x=t(19038);class W extends B.a{constructor(F){super(Oe(fe({},F),{constraint:new c.Hk(F.coordinateHelper,F.targetPoint)}))}get hints(){return[new x.n(this.targetPoint,this.elevationInfo)]}}},9218:(ce,ee,t)=>{t.d(ee,{X:()=>x});var c=t(75897),B=t(70211);function x(W,Y,F){switch(W.type){case"edge":return new c.L({coordinateHelper:Y,edgeStart:Y.pointToVector(W.start),edgeEnd:Y.pointToVector(W.end),targetPoint:Y.pointToVector(W.target),objectId:W.objectId,elevationInfo:F});case"vertex":return new B.x({coordinateHelper:Y,targetPoint:Y.pointToVector(W.target),objectId:W.objectId,elevationInfo:F})}}},78465:(ce,ee,t)=>{t.d(ee,{Z:()=>$});var c=t(15861),B=t(17626),x=t(63290),W=t(62208),Y=t(32917),F=t(77712),U=(t(85931),t(8314),t(90912),t(44648),t(36082),t(383),t(23025),t(55915)),K=t(45611);const w=x.Z.getLogger("esri.views.layers.SceneLayerView");class $ extends K.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(T){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){const T=this.layer.filter;if((0,W.Wi)(T)||T.geometries.length<1)return null;const b=this._geometryEngine;if((0,W.Wi)(b)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return null;try{let _=b.simplify(T.geometries.getItemAt(0));const O=_.spatialReference;for(let h=1;h<T.geometries.length;h++){let M=b.simplify(T.geometries.getItemAt(h));M.spatialReference.equals(O)||(M=(0,U.iV)(M,O)),_=b.union(_,M)}return{spatialRelationship:T.spatialRelationship,geometry:_}}catch(_){return w.warnOncePerTick("Failed to merge scene filter geometries. Layer mask will be ignored."),null}}get _filterNeedsProjectionEngine(){const T=this.layer.filter;if((0,W.Wi)(T)||T.geometries.length<=1)return!1;const b=T.geometries.getItemAt(0).spatialReference;return T.geometries.some(({spatialReference:_})=>!_.equals(b)&&!(0,U.Up)(_,b))}get layerFilterUpdating(){return(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length&&(!this._geometryEngine||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)}initialize(){var T=this;(0,Y.N1)(()=>!this._geometryEngine&&(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,c.Z)(function*(){return T._geometryEngine=yield Promise.resolve().then(t.bind(t,44766))})),this._projectionEngineLoaded=(0,U.kR)(),(0,Y.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,c.Z)(function*(){yield(0,U.zD)(),T._projectionEngineLoaded=!0}))}highlight(T){throw new Error("Not implemented")}queryFeatures(T,b){throw new Error("Not implemented")}queryObjectIds(T,b){throw new Error("Not implemented")}queryFeatureCount(T,b){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(T,b){throw new Error("Not implemented")}}(0,B._)([(0,F.Cb)()],$.prototype,"layer",void 0),(0,B._)([(0,F.Cb)()],$.prototype,"availableFields",null),(0,B._)([(0,F.Cb)()],$.prototype,"maximumNumberOfFeatures",null),(0,B._)([(0,F.Cb)({readOnly:!0})],$.prototype,"maximumNumberOfFeaturesExceeded",null),(0,B._)([(0,F.Cb)()],$.prototype,"filter",void 0),(0,B._)([(0,F.Cb)({readOnly:!0})],$.prototype,"layerFilter",null),(0,B._)([(0,F.Cb)()],$.prototype,"_geometryEngine",void 0),(0,B._)([(0,F.Cb)()],$.prototype,"_projectionEngineLoaded",void 0),(0,B._)([(0,F.Cb)()],$.prototype,"_filterNeedsProjectionEngine",null),(0,B._)([(0,F.Cb)()],$.prototype,"layerFilterUpdating",null)},73187:(ce,ee,t)=>{t.d(ee,{q:()=>$});var c=t(17626),B=t(91558),x=t(88879),W=t(14517),Y=t(21286),F=t(62208),z=t(77712),A=(t(85931),t(8314),t(90912),t(76898)),R=t(69852),G=t(88493),U=t(35540),K=t(21716);const w=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let $=class extends W.Z{constructor(V){super(V),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=w.map(V=>new G.Z({color:[V[0],V[1],V[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(V){this._enabled!==V&&(this._enabled=V,this.update())}update(){if(!this._enabled)return void this.clear();const T=this.getTiles(),b=new Array,_=new Set(this._labels.keys());T.forEach((h,M)=>{const j=h.lij.toString();_.delete(j);const q=h.lij[0],L=h.geometry;if(this.enablePolygons&&!this._polygons.has(j)){const m=new x.Z({geometry:L,symbol:this._symbols[q%this._symbols.length]});this._polygons.set(j,m),b.push(m)}if(this.enableLabels){const m=(h=>{if((0,F.pC)(h.label))return h.label;let M=h.lij.toString();return(0,F.pC)(h.loadPriority)&&(M+=` (${h.loadPriority})`),M})(h),P=M/(T.length-1),v=(0,Y.t7)(0,200,P),S=(0,Y.t7)(20,6,P)/.75,k=(0,F.pC)(h.loadPriority)&&h.loadPriority>=T.length,te=new B.Z([v,k?0:v,k?0:v]),ae="3d"===this.view.type?()=>new R.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new K.Z({text:m,halo:{color:"white",size:1/.75},material:{color:te},size:S})]}):()=>new U.Z({text:m,haloColor:"white",haloSize:1/.75,color:te,size:S});if(this._labels.has(j)){const Q=this._labels.get(j),X=ae();((0,F.Wi)(Q.symbol)||JSON.stringify(X)!==JSON.stringify(Q.symbol))&&(Q.symbol=X)}else{const Q=new x.Z({geometry:L.extent.center,symbol:ae()});this._labels.set(j,Q),b.push(Q)}}});const O=new Array;_.forEach(h=>{this._polygons.has(h)&&(O.push(this._polygons.get(h)),this._polygons.delete(h)),this._labels.has(h)&&(O.push(this._labels.get(h)),this._labels.delete(h))}),this.view.graphics.removeMany(O),this.view.graphics.addMany(b)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,c._)([(0,z.Cb)({constructOnly:!0})],$.prototype,"view",void 0),(0,c._)([(0,z.Cb)({readOnly:!0})],$.prototype,"updating",void 0),(0,c._)([(0,z.Cb)()],$.prototype,"enabled",null),$=(0,c._)([(0,A.j)("esri.views.support.TileTreeDebugger")],$)}}]);
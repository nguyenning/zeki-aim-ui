"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6373],{19702:(g,p,e)=>{e.d(p,{A:()=>h});var a=e(15861),d=e(17626),M=e(54024),y=e(10699),E=e(32917),P=e(77712),l=(e(90912),e(85931),e(76898)),u=e(36947);const h=O=>{let r=class extends O{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(i){super.postscript(i),(0,u.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var i=this;return(0,a.Z)(function*(){const t=new AbortController,o=t.signal;i.handles.add((0,M.kB)(()=>t.abort())),yield(0,E.N1)(()=>{var _;return null==(_=i.view.defaultsFromMap)?void 0:_.heightModelInfoReady},o),(0,y.k_)(o);const c=(0,u.Wt)(i.layer,i.view.heightModelInfo,i.supportsHeightUnitConversion);if(c)throw c})()}canResume(){const i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!i||!i.minScale||!i.maxScale||i.minScale>=i.maxScale)}getSuspendInfo(){const i=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(i.outsideScaleRange=!0),i}};return(0,d._)([(0,P.Cb)()],r.prototype,"view",void 0),(0,d._)([(0,P.Cb)()],r.prototype,"slicePlaneEnabled",void 0),r=(0,d._)([(0,l.j)("esri.views.3d.layers.LayerView3D")],r),r}},6373:(g,p,e)=>{e.r(p),e.d(p,{default:()=>c});var a=e(15861),d=e(17626),M=e(46160),y=e(63290),E=e(62208),P=e(32917),v=e(77712),u=(e(90912),e(85931),e(76898)),h=e(72469),O=e(19702),r=e(50916),i=e(45611),t=e(94421);let o=class extends((0,t.Z)((0,r.r)((0,O.A)(i.Z)))){constructor(){super(...arguments),this.type="wmts-3d"}get hasMixedImageFormats(){return!0}_getCompatibleTileInfoMatrixSet(_,s=!1){const n=(0,h.mt)(this.layer);if((0,E.pC)(n)){if(M.Z.isCollection(n))return n.find(f=>{const I=_(f);return(0,E.pC)(I)&&(s?y.Z.getLogger(this.declaredClass).error("The selected tile matrix set is not compatible with the view",I):this.addResolvingPromise(Promise.reject(I))),null==I});const C=_(n);return(0,E.pC)(C)&&(s?y.Z.getLogger(this.declaredClass).error("The selected tile matrix set is not compatible with the view",C):this.addResolvingPromise(Promise.reject(C))),n}return null}initialize(){this._getCompatibleTileInfoMatrixSet(s=>this._getTileInfoSupportError(s.tileInfo,s.fullExtent));const _=(0,P.N1)(()=>{var s,n;return null==(n=null==(s=this.view)?void 0:s.basemapTerrain)?void 0:n.tilingSchemeLocked}).then(()=>{const s=this._getCompatibleTileInfoMatrixSet(n=>this._getTileInfoError(n.tileInfo,n.fullExtent));(0,E.Wi)(s)||(null!==s.id&&this.layer.activeLayer.tileMatrixSetId!==s.id&&(this.layer.activeLayer.tileMatrixSetId=s.id),s.tileInfo&&(this.tileInfo=s.tileInfo),this.layer.fullExtent=s.fullExtent)});this.addResolvingPromise(_),this.when(()=>this._postInitialize())}refresh(){this.emit("data-changed")}canResume(){if(!super.canResume())return!1;const _=this.layer.activeLayer.tileMatrixSet;return(0,E.pC)(_)&&!this._getTileInfoError(_.tileInfo,_.fullExtent)}doRefresh(){var _=this;return(0,a.Z)(function*(){_.suspended||_.emit("data-changed")})()}_postInitialize(){this.updatingHandles.add(()=>{var _,s;return null==(s=null==(_=this.layer)?void 0:_.activeLayer)?void 0:s.styleId},()=>this.refresh()),this.updatingHandles.add(()=>{var _;return null==(_=this.layer)?void 0:_.activeLayer},_=>{const s=this._getCompatibleTileInfoMatrixSet(n=>this._getTileInfoError(n.tileInfo,n.fullExtent),!0);(0,E.pC)(s)&&null!==s.id&&_.tileMatrixSetId!==s.id&&(this.layer.activeLayer.tileMatrixSetId=s.id),this.notifyChange("suspended"),this.canResume()&&this.refresh()})}_getTileInfoError(_,s){return this._getTileInfoSupportError(_,s)||this._getTileInfoCompatibilityError(_,this.view.basemapTerrain.tilingScheme)}};(0,d._)([(0,v.Cb)({readOnly:!0})],o.prototype,"hasMixedImageFormats",null),(0,d._)([(0,v.Cb)()],o.prototype,"layer",void 0),(0,d._)([(0,v.Cb)()],o.prototype,"suspended",void 0),o=(0,d._)([(0,u.j)("esri.views.3d.layers.WMTSLayerView3d")],o);const c=o},45611:(g,p,e)=>{e.d(p,{Z:()=>i});var a=e(17626),d=e(14517),M=e(61885),y=e(80542),E=e(61996),P=e(63290),v=e(62208),D=e(60330),l=e(77712),O=(e(90912),e(85931),e(76898));let r=class extends((0,y.p)((0,E.IG)((0,D.v)(M.Z.EventedMixin(d.Z))))){constructor(t){super(t),this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const o=this.layer&&this.layer.id||"no id",c=this.layer&&this.layer.title||"no title";P.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${c}', id: '${o}')`,t)}})}get fullOpacity(){return(0,v.Pt)(this.get("layer.opacity"),1)*(0,v.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var t;return!this.suspended&&!0===(null==(t=this.layer)?void 0:t.legendEnabled)}get updating(){var t;return!!(null!=(t=this.updatingHandles)&&t.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var t;return!0===(null==(t=this.layer)?void 0:t.visible)}set visible(t){this._overrideIfSome("visible",t)}canResume(){var t,o,c;return this.visible&&(null==(t=this.layer)?void 0:t.loaded)&&!(null!=(o=this.parent)&&o.suspended)&&(null==(c=this.view)?void 0:c.ready)||!1}getSuspendInfo(){const t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,a._)([(0,l.Cb)()],r.prototype,"fullOpacity",null),(0,a._)([(0,l.Cb)()],r.prototype,"layer",void 0),(0,a._)([(0,l.Cb)()],r.prototype,"parent",void 0),(0,a._)([(0,l.Cb)({readOnly:!0})],r.prototype,"suspended",null),(0,a._)([(0,l.Cb)({readOnly:!0})],r.prototype,"suspendInfo",null),(0,a._)([(0,l.Cb)({readOnly:!0})],r.prototype,"legendEnabled",null),(0,a._)([(0,l.Cb)({type:Boolean,readOnly:!0})],r.prototype,"updating",null),(0,a._)([(0,l.Cb)({readOnly:!0})],r.prototype,"updatingProgress",null),(0,a._)([(0,l.Cb)()],r.prototype,"visible",null),(0,a._)([(0,l.Cb)()],r.prototype,"view",void 0),r=(0,a._)([(0,O.j)("esri.views.layers.LayerView")],r);const i=r},94421:(g,p,e)=>{e.d(p,{Z:()=>l});var a=e(17626),d=e(63290),M=e(10699),y=e(32917),E=e(77712),D=(e(90912),e(85931),e(76898));const l=u=>{let h=class extends u{initialize(){this.handles.add((0,y.on)(()=>this.layer,"refresh",O=>{this.doRefresh(O.dataChanged).catch(r=>{(0,M.D_)(r)||d.Z.getLogger(this.declaredClass).error(r)})}),"RefreshableLayerView")}};return(0,a._)([(0,E.Cb)()],h.prototype,"layer",void 0),h=(0,a._)([(0,D.j)("esri.layers.mixins.RefreshableLayerView")],h),h}}}]);
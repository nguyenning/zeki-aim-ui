"use strict";var et=Object.defineProperty,tt=Object.defineProperties,rt=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,it=Object.prototype.hasOwnProperty,nt=Object.prototype.propertyIsEnumerable,ue=(g,f,i)=>f in g?et(g,f,{enumerable:!0,configurable:!0,writable:!0,value:i}):g[f]=i,D=(g,f)=>{for(var i in f||(f={}))it.call(f,i)&&ue(g,i,f[i]);if(de)for(var i of de(f))nt.call(f,i)&&ue(g,i,f[i]);return g},J=(g,f)=>tt(g,rt(f));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[465],{20465:(g,f,i)=>{i.r(f),i.d(f,{default:()=>qe});var p=i(15861),s=i(17626),N=i(46160),C=i(26584),Y=i(80542),pe=i(72392),ye=i(47877),j=i(62208),z=i(99959),K=i(10699),X=i(32917),V=i(95737),W=i(21726),a=i(77712),E=(i(90912),i(85931),i(68653)),$=i(76898),R=i(31283),he=i(44917),ce=i(50085),fe=i(65088),be=i(552),ve=i(50107),me=i(6733),ge=i(27123),Ce=i(49286),Se=i(6647),Fe=i(30346),Oe=i(99555),Ie=i(97941),Ze=i(38305),P=i(13812),c=i(26331),q=i(55911),k=i(36630),je=i(86810),_=i(99433),Te=i(67945);let F=class extends je.wq{constructor(){super(...arguments),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(e){if(!e)return null;const t={};for(const r of Object.keys(e))t[r]=(0,Te.im)(e[r]);return t}writeDomains(e,t){var n;if(!e)return;const r={};for(const o of Object.keys(e))e[o]&&(r[o]=null==(n=e[o])?void 0:n.toJSON());t.domains=r}};(0,s._)([(0,a.Cb)({type:Number,json:{write:!0}})],F.prototype,"code",void 0),(0,s._)([(0,a.Cb)({type:Object,json:{write:!0}})],F.prototype,"defaultValues",void 0),(0,s._)([(0,a.Cb)({json:{write:!0}})],F.prototype,"domains",void 0),(0,s._)([(0,E.r)("domains")],F.prototype,"readDomains",null),(0,s._)([(0,_.c)("domains")],F.prototype,"writeDomains",null),(0,s._)([(0,a.Cb)({type:String,json:{write:!0}})],F.prototype,"name",void 0),F=(0,s._)([(0,$.j)("esri.layers.support.Subtype")],F);const Le=F;var Ee=i(73281),Pe=i(4832),we=(i(49067),i(96794),i(69747),i(40425),i(69357)),M=i(40342),xe=i(73640),Ae=(i(33474),i(8314),i(61996)),w=i(58817),Re=i(47996),Ge=i(63290),Ue=i(94113),De=i(383),Ne=i(27402),ee=i(32777),Ve=i(170),$e=i(62667),te=i(96854),Me=i(49430),Q=i(8080);const Qe=["charts","editingEnabled","formTemplate","labelsVisible","labelingInfo","legendEnabled","minScale","maxScale","opacity","popupEnabled","popupTemplate","renderer","subtypeCode","templates","title","visible"],re={key:"type",base:we.Z,errorContext:"renderer",typeMap:{simple:M.Z,"unique-value":xe.Z,"class-breaks":Pe.Z}},ie=(0,q.v)(),ne=(0,De.d)({types:re});let Be=0;function x(e){const t=e.json.write;return"object"==typeof t?t.ignoreOrigin=!0:e.json.write={ignoreOrigin:!0},e}function Je(e){switch(e){case"point":case"multipoint":return Q.xA.clone();case"polyline":return Q.CJ.clone();case"polygon":case"multipatch":return Q.z3.clone();default:return null}}function se(e,t){var r;return null==e?null:null==(r=t.subtypes)?void 0:r.find(n=>n.code===e)}function ze(e,t){let r=null;switch(t.geometryType){case"esriGeometryPoint":case"esriGeometryMultipoint":r="point";break;case"esriGeometryPolyline":r="line";break;case"esriGeometryPolygon":case"esriGeometryMultiPatch":r="polygon";break;default:r=null}const n={},o=se(e,t);if((0,j.pC)(o)){const{defaultValues:l}=o;for(const u in l)n[u]=l[u]}return n[t.subtypeField]=e,new ee.Z({name:"New Feature",drawingTool:r,prototype:{attributes:n}})}const oe="esri.layers.support.SubtypeSublayer";let d=class extends((0,Y.p)((0,z.R)((0,Ae.IG)(Re.Z)))){constructor(e){super(e),this.charts=null,this.editingEnabled=!0,this.fieldOverrides=null,this.fieldsIndex=null,this.formTemplate=null,this.id=`${Date.now().toString(16)}-subtype-sublayer-${Be++}`,this.type="subtype-sublayer",this.labelsVisible=!0,this.labelingInfo=null,this.layerType="ArcGISFeatureLayer",this.legendEnabled=!0,this.listMode="show",this.minScale=0,this.maxScale=0,this.opacity=1,this.popupEnabled=!0,this.popupTemplate=null,this.subtypeCode=null,this.templates=null,this.title=null,this.visible=!0}get capabilities(){var e;return null==(e=this.parent)?void 0:e.capabilities}get effectiveCapabilities(){var e;return null==(e=this.parent)?void 0:e.effectiveCapabilities}get effectiveEditingEnabled(){const{parent:e}=this;return e?e.effectiveEditingEnabled&&this.editingEnabled:this.editingEnabled}get elevationInfo(){var e;return null==(e=this.parent)?void 0:e.elevationInfo}writeFieldOverrides(e,t,r){const{fields:n,parent:o}=this;let l;if(n){l=[];let u=0;n.forEach(({name:h,alias:b,editable:I,visible:T})=>{var Z;if(!T)return;const m=null==(Z=null==o?void 0:o.fields)?void 0:Z.find(A=>A.name===h);if(!m)return;const L={name:h};let v=!1;b!==m.alias&&(L.alias=b,v=!0),I!==m.editable&&(L.editable=I,v=!0),l.push(L),v&&u++}),0===u&&l.length===n.length&&(l=null)}else l=(0,w.d9)(e);null!=l&&l.length&&(0,Ue.RB)(r,l,t)}get fields(){var T,m;const{parent:e,fieldOverrides:t,subtypeCode:r}=this,n=null==e?void 0:e.fields;if(!e||null==n||!n.length)return null;const{subtypes:o,subtypeField:l}=e,u=null==o?void 0:o.find(L=>L.code===r),h=null==u?void 0:u.defaultValues,b=null==u?void 0:u.domains,I=[];for(const L of n){const v=L.clone(),{name:Z}=v,A=null==t?void 0:t.find(U=>U.name===Z);if(v.visible=!t||!!A,A){const{alias:U,editable:_e}=A;U&&(v.alias=U),!1===_e&&(v.editable=!1)}const ke=null!=(T=null==h?void 0:h[Z])?T:null;v.defaultValue=Z===l?r:ke;const H=null!=(m=null==b?void 0:b[Z])?m:null;v.domain=Z===l?null:H?"inherited"===H.type?v.domain:H.clone():null,I.push(v)}return I}get geometryType(){var e;return null==(e=this.parent)?void 0:e.geometryType}get effectiveScaleRange(){const{minScale:e,maxScale:t}=this;return{minScale:e,maxScale:t}}get objectIdField(){var e;return this.parent||Ge.Z.getLogger(oe).error(O("objectIdField")),null==(e=this.parent)?void 0:e.objectIdField}get defaultPopupTemplate(){return this.createPopupTemplate()}set renderer(e){(0,k.YN)(e,this.fieldsIndex),this._override("renderer",e)}get renderer(){if(this._isOverridden("renderer"))return this._get("renderer");const{parent:e}=this;return e&&!e.isTable&&"mesh"!==e.geometryType?function He(e){return new M.Z({symbol:Je(e)})}(e.geometryType):null}readRendererFromService(e,t,r){var h,b,I;if("Table"===t.type)return null;const n=null==(h=t.drawingInfo)?void 0:h.renderer,o=ne(n,t,r);let l;const{subtypeCode:u}=this;if(null!=u&&function Ye(e,t){return!(!t||"unique-value"!==(null==e?void 0:e.type)||"string"!=typeof e.field||e.field.toLowerCase()!==t.toLowerCase()||e.field2||e.field3||e.valueExpression)}(o,t.subtypeField)){const T=null==(b=o.uniqueValueInfos)?void 0:b.find(({value:m})=>(m="number"==typeof m?String(m):m)===String(u));T&&(l=new M.Z({symbol:T.symbol}))}else"simple"!==(null==o?void 0:o.type)||(null==(I=o.visualVariables)?void 0:I.length)||(l=o);return l}readRenderer(e,t,r){var l,u,h;const n=null==(u=null==(l=null==t?void 0:t.layerDefinition)?void 0:l.drawingInfo)?void 0:u.renderer;return n?(null==(h=n.visualVariables)?void 0:h.some(b=>"rotationInfo"!==b.type))?void 0:ne(n,t,r)||void 0:void 0}get spatialReference(){var e;return null==(e=this.parent)?void 0:e.spatialReference}readTemplatesFromService(e,t){return[ze(this.subtypeCode,t)]}readTitleFromService(e,t){const r=se(this.subtypeCode,t);return(0,j.pC)(r)?r.name:null}get url(){var e;return null==(e=this.parent)?void 0:e.url}get userHasUpdateItemPrivileges(){var e;return!(null==(e=this.parent)||!e.userHasUpdateItemPrivileges)}addAttachment(e,t){var r=this;return(0,p.Z)(function*(){const{parent:n}=r;if(!n)throw O("addAttachment");if(e.getAttribute(n.subtypeField)!==r.subtypeCode)throw new C.Z("subtype-sublayer:addAttachment","The feature provided does not belong to this SubtypeSublayer");return n.addAttachment(e,t)})()}updateAttachment(e,t,r){var n=this;return(0,p.Z)(function*(){const{parent:o}=n;if(!o)throw O("updateAttachment");if(e.getAttribute(o.subtypeField)!==n.subtypeCode)throw new C.Z("subtype-sublayer:updateAttachment","The feature provided does not belong to this SubtypeSublayer");return o.updateAttachment(e,t,r)})()}deleteAttachments(e,t){var r=this;return(0,p.Z)(function*(){const{parent:n}=r;if(!n)throw O("deleteAttachments");if(e.getAttribute(n.subtypeField)!==r.subtypeCode)throw new C.Z("subtype-sublayer:deleteAttachments","The feature provided does not belong to this SubtypeSublayer");return n.deleteAttachments(e,t)})()}applyEdits(e,t){var r=this;return(0,p.Z)(function*(){if(!r.parent)throw O("applyEdits");return r.parent.applyEdits(e,t)})()}createPopupTemplate(e){let t=this;const{parent:r,fields:n,title:o}=this;if(r){const{displayField:l,editFieldsInfo:u,objectIdField:h}=r;t={displayField:l,editFieldsInfo:u,fields:n,objectIdField:h,title:o}}return(0,Me.eZ)(t,e)}createQuery(){if(!this.parent)throw O("createQuery");const e=(0,c.rP)(this.parent);return e.where=(0,V._)(`${this.parent.subtypeField}=${this.subtypeCode}`,this.parent.definitionExpression),e}getField(e){return this.fieldsIndex.get(e)}getFieldDomain(e){return this._getLayerDomain(e)}hasUserOverrides(){return Qe.some(e=>this.originIdOf(e)===R.s3.USER)}queryAttachments(e,t){var r=this;return(0,p.Z)(function*(){const n=yield r.load();if(!n.parent)throw O("queryAttachments");const o=e.clone();return o.where=ae(o.where,n.parent.subtypeField,n.subtypeCode),n.parent.queryAttachments(e,t)})()}queryFeatures(e,t){var r=this;return(0,p.Z)(function*(){var l;const n=yield r.load();if(!n.parent)throw O("queryFeatures");const o=null!=(l=te.Z.from(e))?l:n.createQuery();return(0,j.pC)(e)&&(o.where=ae(o.where,n.parent.subtypeField,n.subtypeCode)),n.parent.queryFeatures(o,t)})()}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}};(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"capabilities",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"effectiveCapabilities",null),(0,s._)([(0,a.Cb)({json:{write:{ignoreOrigin:!0}}})],d.prototype,"charts",void 0),(0,s._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{name:"enableEditing",write:{ignoreOrigin:!0}}})],d.prototype,"editingEnabled",void 0),(0,s._)([(0,a.Cb)({type:Boolean,readOnly:!0})],d.prototype,"effectiveEditingEnabled",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"elevationInfo",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{name:"layerDefinition.fieldOverrides",origins:{service:{read:!1}},write:{ignoreOrigin:!0,allowNull:!0}}})],d.prototype,"fieldOverrides",void 0),(0,s._)([(0,_.c)("fieldOverrides")],d.prototype,"writeFieldOverrides",null),(0,s._)([(0,a.Cb)(J(D({},ie.fields),{readOnly:!0,json:{read:!1}}))],d.prototype,"fields",null),(0,s._)([(0,a.Cb)(ie.fieldsIndex)],d.prototype,"fieldsIndex",void 0),(0,s._)([(0,a.Cb)({type:Ne.Z,json:{name:"formInfo",write:{ignoreOrigin:!0}}})],d.prototype,"formTemplate",void 0),(0,s._)([(0,a.Cb)({type:String,readOnly:!0,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],d.prototype,"id",void 0),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"geometryType",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"type",void 0),(0,s._)([(0,a.Cb)(x((0,w.d9)(P.iR)))],d.prototype,"labelsVisible",void 0),(0,s._)([(0,a.Cb)({type:[Ve.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",origins:{service:{read:!1}},read:{reader:$e.r},write:{ignoreOrigin:!0}}})],d.prototype,"labelingInfo",void 0),(0,s._)([(0,a.Cb)({type:["ArcGISFeatureLayer"],readOnly:!0,json:{read:!1,write:{ignoreOrigin:!0}}})],d.prototype,"layerType",void 0),(0,s._)([(0,a.Cb)(x((0,w.d9)(P.rn)))],d.prototype,"legendEnabled",void 0),(0,s._)([(0,a.Cb)({type:["show","hide"]})],d.prototype,"listMode",void 0),(0,s._)([(0,a.Cb)((()=>{const e=(0,w.d9)(P.rO);return e.json.origins.service.read=!1,x(e)})())],d.prototype,"minScale",void 0),(0,s._)([(0,a.Cb)((()=>{const e=(0,w.d9)(P.u1);return e.json.origins.service.read=!1,x(e)})())],d.prototype,"maxScale",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],d.prototype,"effectiveScaleRange",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"objectIdField",null),(0,s._)([(0,a.Cb)({type:Number,range:{min:0,max:1},nonNullable:!0,json:{write:{ignoreOrigin:!0}}})],d.prototype,"opacity",void 0),(0,s._)([(0,a.Cb)()],d.prototype,"parent",void 0),(0,s._)([(0,a.Cb)(x((0,w.d9)(P.C_)))],d.prototype,"popupEnabled",void 0),(0,s._)([(0,a.Cb)({type:Ee.Z,json:{name:"popupInfo",write:{ignoreOrigin:!0}}})],d.prototype,"popupTemplate",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],d.prototype,"defaultPopupTemplate",null),(0,s._)([(0,a.Cb)({types:re,json:{write:{target:"layerDefinition.drawingInfo.renderer",ignoreOrigin:!0}}})],d.prototype,"renderer",null),(0,s._)([(0,E.r)("service","renderer",["drawingInfo.renderer","subtypeField","type"])],d.prototype,"readRendererFromService",null),(0,s._)([(0,E.r)("renderer",["layerDefinition.drawingInfo.renderer"])],d.prototype,"readRenderer",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"spatialReference",null),(0,s._)([(0,a.Cb)({type:Number,json:{origins:{service:{read:!1}},write:{ignoreOrigin:!0}}})],d.prototype,"subtypeCode",void 0),(0,s._)([(0,a.Cb)({type:[ee.Z],json:{name:"layerDefinition.templates",write:{ignoreOrigin:!0}}})],d.prototype,"templates",void 0),(0,s._)([(0,E.r)("service","templates",["geometryType","subtypeField","subtypes","type"])],d.prototype,"readTemplatesFromService",null),(0,s._)([(0,a.Cb)({type:String,json:{write:{ignoreOrigin:!0}}})],d.prototype,"title",void 0),(0,s._)([(0,E.r)("service","title",["subtypes"])],d.prototype,"readTitleFromService",null),(0,s._)([(0,a.Cb)({readOnly:!0,json:{read:!1}})],d.prototype,"url",null),(0,s._)([(0,a.Cb)({readOnly:!0})],d.prototype,"userHasUpdateItemPrivileges",null),(0,s._)([(0,a.Cb)({type:Boolean,nonNullable:!0,json:{name:"visibility",write:{ignoreOrigin:!0}}})],d.prototype,"visible",void 0),d=(0,s._)([(0,$.j)(oe)],d);const ae=(e,t,r)=>{const n=new RegExp(`${t}=[0-9]`),o=`${t}=${r}`,l=(0,j.Pt)(e,"");return n.test(l)?l.replace(n,o):(0,V._)(o,l)},O=e=>new C.Z(`This sublayer must have a parent SubtypeGroupLayer in order to use ${e}`),G=d;var Ke=i(73917),Xe=i(5676);const S="SubtypeGroupLayer";function le(e,t){return new C.Z("layer:unsupported",`Layer (${e.title}, ${e.id}) of type '${e.declaredClass}' ${t}`,{layer:e})}const B=(0,q.v)();let y=class extends((0,ge.B)((0,me.o1)((0,be.h)((0,Ie.n)((0,Oe.M)((0,Fe.Q)((0,fe.Y)((0,Ce.q)((0,Se.I)((0,z.R)((0,ve.N)((0,ce.V)((0,Y.p)(he.Z)))))))))))))){constructor(...e){super(...e),this._handles=new pe.Z,this._sublayersCollectionChanged=!1,this._sublayerLookup=new Map,this.fields=null,this.fieldsIndex=null,this.outFields=null,this.subtypes=null,this.sublayers=new(N.Z.ofType(G)),this.timeInfo=null,this.title="Layer",this.type="subtype-group",this.addHandles((0,X.YP)(()=>this.sublayers,(t,r)=>this._handleSublayersChange(t,r),X.Z_))}destroy(){var e;null==(e=this.source)||e.destroy(),this._handles=(0,j.SC)(this._handles)}normalizeCtorArgs(e,t){return"string"==typeof e?D({url:e},t):e}load(e){var t=this;const r=(0,j.pC)(e)?e.signal:null,n=this.loadFromPortal({supportedTypes:["Feature Service"]},e).catch(K.r9).then((0,p.Z)(function*(){if(!t.url)throw new C.Z("subtype-grouplayer:missing-url-or-source","SubtypeGroupLayer must be created with either a url or a portal item");if(null==t.layerId)throw new C.Z("subtype-grouplayer:missing-layerid","layerId is required for a SubtypeGroupLayer created with url");return t._initLayerProperties(yield t.createGraphicsSource(r))})).then(()=>this._setUserPrivileges(this.serviceItemId,e)).then(()=>(0,c.nU)(this,e));return this.addResolvingPromise(n),Promise.resolve(this)}get createQueryVersion(){var e;return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("gdbVersion"),this.commitProperty("historicMoment"),this.commitProperty("returnZ"),this.commitProperty("capabilities"),this.commitProperty("returnM"),(null!=(e=this._get("createQueryVersion"))?e:0)+1}get editingEnabled(){return this.loaded&&null!=this.capabilities&&this.capabilities.operations.supportsEditing&&this.userHasEditingPrivileges}get effectiveEditingEnabled(){return(0,c.sX)(this)}get parsedUrl(){const e=(0,W.mN)(this.url);return null!=e&&null!=this.layerId&&(e.path=(0,W.v_)(e.path,this.layerId.toString())),e}set source(e){this._get("source")!==e&&this._set("source",e)}readTitleFromService(e,{name:t}){return this.url?(0,Ze.a7)(this.url,t):t}addAttachment(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.JD)(r,e,t,S)})()}updateAttachment(e,t,r){var n=this;return(0,p.Z)(function*(){return(0,c.Y5)(n,e,t,r,S)})()}applyEdits(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.Jj)(r,e,t)})()}on(e,t){return super.on(e,t)}createGraphicsSource(e){var t=this;return(0,p.Z)(function*(){const{default:r}=yield(0,K.Hl)(Promise.all([i.e(8592),i.e(5547)]).then(i.bind(i,45547)),e);return new r({layer:t}).load({signal:e})})()}createQuery(){const e=(0,c.rP)(this),t=this.sublayers.map(r=>r.subtypeCode);return e.where=(0,V._)(`${this.subtypeField} IN (${t.join(",")})`,this.definitionExpression),e}deleteAttachments(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.FV)(r,e,t,S)})()}fetchRecomputedExtents(e){var t=this;return(0,p.Z)(function*(){return(0,c.Ci)(t,e,S)})()}getFieldDomain(e,t){return this._getLayerDomain(e)}getField(e){return this.fieldsIndex.get(e)}findSublayerForFeature(e){const t=this.fieldsIndex.get(this.subtypeField);return this._sublayerLookup.get(e.attributes[t.name])}loadAll(){return(0,ye.G)(this,e=>{e(this.sublayers)})}queryAttachments(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.SU)(r,e,t,S)})()}queryFeatures(e,t){var r=this;return(0,p.Z)(function*(){var h;const n=yield r.load(),o=null!=(h=te.Z.from(e))?h:n.createQuery(),l=(0,j.Pt)(o.outFields,[]);l.includes(r.subtypeField)||(l.push(r.subtypeField),o.outFields=l);const u=yield n.source.queryFeatures(o,t);if(null!=u&&u.features)for(const b of u.features)b.layer=b.sourceLayer=r.findSublayerForFeature(b);return u})()}queryObjectIds(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.tD)(r,e,t,S)})()}queryFeatureCount(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.VG)(r,e,t,S)})()}queryExtent(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.KE)(r,e,t,S)})()}queryRelatedFeatures(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.kp)(r,e,t,S)})()}queryRelatedFeaturesCount(e,t){var r=this;return(0,p.Z)(function*(){return(0,c.C9)(r,e,t,S)})()}write(e,t){var l;const{origin:r,layerContainerType:n,messages:o}=t;if(this.isTable){if("web-scene"===r||"web-map"===r&&"tables"!==n)return null==o||o.push(le(this,"using a table source cannot be written to web scenes and web maps")),null}else if(this.loaded&&"web-map"===r&&"tables"===n)return null==o||o.push(le(this,"using a non-table source cannot be written to tables in web maps")),null;return null!=(l=this.sublayers)&&l.length?super.write(e,t):(null==o||o.push(new C.Z("web-document-write:invalid-property",`Layer (${this.title}, ${this.id}) of type '${this.declaredClass}' has invalid value for 'sublayers' property. 'sublayers' collection should contain at least one sublayer`,{layer:this})),null)}serviceSupportsSpatialReference(e){return!!this.loaded&&(0,Xe.D)(this,e)}_getLayerDomain(e){const t=this.fieldsIndex.get(e);return t?t.domain:null}_initLayerProperties(e){var t=this;return(0,p.Z)(function*(){var n;t._set("source",e);const{sourceJSON:r}=e;if(r&&(t.sourceJSON=r,t.read(r,{origin:"service",url:t.parsedUrl})),t.isTable)throw new C.Z("subtype-grouplayer:unsupported-source","SubtypeGroupLayer cannot be created using a layer with table source");if(null==(n=t.subtypes)||!n.length)throw new C.Z("subtype-grouplayer:missing-subtypes","SubtypeGroupLayer must be created using a layer with subtypes");t._verifyFields(),(0,k.UF)(t.timeInfo,t.fieldsIndex)})()}hasDataChanged(){var e=this;return(0,p.Z)(function*(){return(0,c.gG)(e)})()}_verifyFields(){var t,r,n;const e=null!=(r=null==(t=this.parsedUrl)?void 0:t.path)?r:"undefined";this.objectIdField||console.log("SubtypeGroupLayer: 'objectIdField' property is not defined (url: "+e+")"),this.isTable||-1!==e.search(/\/FeatureServer\//i)||(null==(n=this.fields)?void 0:n.some(o=>"geometry"===o.type))||console.log("SubtypeGroupLayer: unable to find field of type 'geometry' in the layer 'fields' list. If you are using a map service layer, features will not have geometry (url: "+e+")")}_handleSublayersChange(e,t){t&&(t.forEach(r=>{r.parent=null}),this.handles.remove("sublayers-owner"),this._sublayerLookup.clear()),e&&(e.forEach(r=>{r.parent=this,this._sublayerLookup.set(r.subtypeCode,r)}),this._sublayersCollectionChanged=!1,this.handles.add([e.on("after-add",({item:r})=>{r.parent=this,this._sublayerLookup.set(r.subtypeCode,r)}),e.on("after-remove",({item:r})=>{r.parent=null,this._sublayerLookup.delete(r.subtypeCode)}),e.on("after-changes",()=>{this._sublayersCollectionChanged=!0})],"sublayers-owner"))}};(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"createQueryVersion",null),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"editingEnabled",null),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"effectiveEditingEnabled",null),(0,s._)([(0,a.Cb)(J(D({},B.fields),{readOnly:!0,json:{origins:{service:{read:!0}},read:!1}}))],y.prototype,"fields",void 0),(0,s._)([(0,a.Cb)(B.fieldsIndex)],y.prototype,"fieldsIndex",void 0),(0,s._)([(0,a.Cb)(P.id)],y.prototype,"id",void 0),(0,s._)([(0,a.Cb)({type:["show","hide","hide-children"]})],y.prototype,"listMode",void 0),(0,s._)([(0,a.Cb)({value:"SubtypeGroupLayer",type:["SubtypeGroupLayer"]})],y.prototype,"operationalLayerType",void 0),(0,s._)([(0,a.Cb)(B.outFields)],y.prototype,"outFields",void 0),(0,s._)([(0,a.Cb)({readOnly:!0})],y.prototype,"parsedUrl",null),(0,s._)([(0,a.Cb)()],y.prototype,"source",null),(0,s._)([(0,a.Cb)({type:[Le],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],y.prototype,"subtypes",void 0),(0,s._)([(0,a.Cb)({type:N.Z.ofType(G),json:{origins:{service:{read:{source:"subtypes",reader:(e,t,r)=>{const n=e.map(({code:o})=>{const l=new G({subtypeCode:o});return l.read(t,r),l});return new(N.Z.ofType(G))(n)}}}},name:"layers",write:{overridePolicy(e,t,r){const n=this.originOf("sublayers"),o=R.s3.PORTAL_ITEM;let l=!0;if((0,R.M9)(n)===o&&(0,R.M9)(r.origin)>o){const u=e.some(h=>h.hasUserOverrides());l=this._sublayersCollectionChanged||u}return{enabled:l,ignoreOrigin:!0}}}}})],y.prototype,"sublayers",void 0),(0,s._)([(0,a.Cb)({type:Ke.Z})],y.prototype,"timeInfo",void 0),(0,s._)([(0,a.Cb)({json:{origins:{"portal-item":{write:{ignoreOrigin:!0,writerEnsuresNonNull:!0}}}}})],y.prototype,"title",void 0),(0,s._)([(0,E.r)("service","title",["name"])],y.prototype,"readTitleFromService",null),(0,s._)([(0,a.Cb)({json:{read:!1}})],y.prototype,"type",void 0),y=(0,s._)([(0,$.j)("esri.layers.SubtypeGroupLayer")],y);const qe=y}}]);
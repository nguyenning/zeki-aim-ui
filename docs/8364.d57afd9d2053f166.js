"use strict";var Le=Object.defineProperty,ge=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,de=(J,G,T)=>G in J?Le(J,G,{enumerable:!0,configurable:!0,writable:!0,value:T}):J[G]=T,ne=(J,G)=>{for(var T in G||(G={}))Pe.call(G,T)&&de(J,T,G[T]);if(ge)for(var T of ge(G))Se.call(G,T)&&de(J,T,G[T]);return J};(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8364],{36243:(J,G,T)=>{T.d(G,{Z:()=>D});class D{constructor(x){this._array=[],x<=0&&console.error("strideInBytes must be positive!"),this._stride=x}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(x,p){return 65535&x|p<<16}static i8888to32(x,p,c,s){return 255&x|(255&p)<<8|(255&c)<<16|s<<24}static i8816to32(x,p,c){return 255&x|(255&p)<<8|c<<16}}},1268:(J,G,T)=>{T.d(G,{EE:()=>x,R:()=>p,_5:()=>d,aF:()=>c,f2:()=>_,fD:()=>w,fR:()=>z,nR:()=>u,r1:()=>g,vL:()=>s});var z,x,p,c,s,u,d,w,g,l,D=T(7547);(l=z||(z={}))[l.BACKGROUND=0]="BACKGROUND",l[l.FILL=1]="FILL",l[l.LINE=2]="LINE",l[l.SYMBOL=3]="SYMBOL",l[l.CIRCLE=4]="CIRCLE",function(l){l[l.VISIBLE=0]="VISIBLE",l[l.NONE=1]="NONE"}(x||(x={})),function(l){l[l.POINT=0]="POINT",l[l.LINE=1]="LINE",l[l.LINE_CENTER=2]="LINE_CENTER"}(p||(p={})),function(l){l[l.MAP=0]="MAP",l[l.VIEWPORT=1]="VIEWPORT",l[l.AUTO=2]="AUTO"}(c||(c={})),function(l){l[l.AUTO=0]="AUTO",l[l.LEFT=1]="LEFT",l[l.CENTER=2]="CENTER",l[l.RIGHT=3]="RIGHT"}(s||(s={})),function(l){l[l.CENTER=0]="CENTER",l[l.LEFT=1]="LEFT",l[l.RIGHT=2]="RIGHT",l[l.TOP=3]="TOP",l[l.BOTTOM=4]="BOTTOM",l[l.TOP_LEFT=5]="TOP_LEFT",l[l.TOP_RIGHT=6]="TOP_RIGHT",l[l.BOTTOM_LEFT=7]="BOTTOM_LEFT",l[l.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(u||(u={})),function(l){l[l.NONE=0]="NONE",l[l.UPPERCASE=1]="UPPERCASE",l[l.LOWERCASE=2]="LOWERCASE"}(d||(d={})),function(l){l[l.MAP=0]="MAP",l[l.VIEWPORT=1]="VIEWPORT"}(w||(w={})),function(l){l[l.HORIZONTAL=0]="HORIZONTAL",l[l.VERTICAL=1]="VERTICAL"}(g||(g={}));class _{}_.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:x.VISIBLE}},_.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:x.VISIBLE}},_.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:x.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:D.RL.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:D.AH.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},_.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:x.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:p.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:u.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:c.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:u.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:s.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:c.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:d.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[g.HORIZONTAL]}},_.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:x.VISIBLE}},_.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},_.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:w.MAP}},_.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:w.MAP},"line-width":{type:"number",minimum:0,default:1}},_.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:w.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:w.MAP}},_.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},_.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:w.MAP}}},13295:(J,G,T)=>{T.d(G,{Et:()=>Ie,sj:()=>xe,Le:()=>Te,_L:()=>Ne,gf:()=>Re,jG:()=>De,nj:()=>Ae});var p,c,i,D=T(919),z=T(62208),x=T(36243);(i=p||(p={}))[i.R8_SIGNED=0]="R8_SIGNED",i[i.R8_UNSIGNED=1]="R8_UNSIGNED",i[i.R16_SIGNED=2]="R16_SIGNED",i[i.R16_UNSIGNED=3]="R16_UNSIGNED",i[i.R8G8_SIGNED=4]="R8G8_SIGNED",i[i.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",i[i.R16G16_SIGNED=6]="R16G16_SIGNED",i[i.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",i[i.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",i[i.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",i[i.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",i[i.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",i[i.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN",function(i){i[i.UNIFORM=0]="UNIFORM",i[i.DATA_DRIVEN=1]="DATA_DRIVEN",i[i.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",i[i.UNUSED=3]="UNUSED"}(c||(c={}));var s=T(67969),u=T(40852);class d{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,n,r,a){const y=this.getUniforms();for(const o of y){const{name:h,type:f,getValue:b}=o,m=b(n,e,r,a);if(null!==m)switch(f){case"float":t.setUniform1f(h,m);break;case"vec2":t.setUniform2fv(h,m);break;case"vec4":t.setUniform4fv(h,m)}}}encodeAttributes(t,e,n,r){var b;const a=this.attributesInfo(),y=this.getEncodingInfos(),o=[];let h=0,f=0;for(const m of Object.keys(y)){const v=y[m],{type:A,precisionFactor:I,isLayout:H}=a[m],L=H?n.getLayoutProperty(m):n.getPaintProperty(m),K=null==(b=L.interpolator)?void 0:b.getInterpolationRange(e);let R=0;for(const U of v){const{offset:O,bufferElementsToAdd:W}=U;if(W>0){for(let $=0;$<W;$++)o.push(0);h+=f,f=U.bufferElementsToAdd}const F=null!=r?r:L.getValue(K?K[R]:e,t);switch(A){case p.R8_SIGNED:case p.R8_UNSIGNED:o[h]|=this._encodeByte(F*(I||1),8*O);break;case p.R16_SIGNED:case p.R16_UNSIGNED:o[h]|=this._encodeShort(F*(I||1),8*O);break;case p.R8G8_SIGNED:case p.R8G8_UNSIGNED:o[h]|=this._encodeByte(F*(I||1),8*O),o[h]|=this._encodeByte(F*(I||1),8*O+8);break;case p.R16G16_SIGNED:case p.R16G16_UNSIGNED:o[h]|=this._encodeShort(F*(I||1),8*O),o[h]|=this._encodeShort(F*(I||1),8*O+16);break;case p.R8G8B8A8_SIGNED:case p.R8G8B8A8_UNSIGNED:o[h]|=this._encodeByte(F*(I||1),8*O),o[h]|=this._encodeByte(F*(I||1),8*O+8),o[h]|=this._encodeByte(F*(I||1),8*O+16),o[h]|=this._encodeByte(F*(I||1),8*O+24);break;case p.R8G8B8A8_COLOR:o[h]=this._encodeColor(F);break;case p.R16G16B16A16_DASHARRAY:case p.R16G16B16A16_PATTERN:this._encodePattern(h,o,F);break;default:throw new Error("Unsupported encoding type")}R++}}return o}getAtributeState(t){let e=0;const n=3+2*t;return e|=this._bit(n),e|=this._bit(n+1)<<1,e}_buildAttributesInfo(){const t=[],e={},n={};let r=-1;const a=this.attributesInfo(),y=this.attributes();let o=-1;for(const m of y){o++;const v=this.getAtributeState(o);if(v===c.UNIFORM||v===c.UNUSED)continue;const A=a[m],I=[];e[m]=I;const H=A.type;for(let L=0;L<v;L++){const{dataType:K,bytesPerElement:R,count:U,normalized:O}=d._encodingInfo[H],W=R*U,F=`${K}-${!0===O}`;let $=n[F],tt=0;if(!$||$.count+U>4)r++,$={dataIndex:r,count:0,offset:0},4!==U&&(n[F]=$),t.push({location:-1,name:"a_data_"+r,count:U,type:K,normalized:O}),tt=Math.ceil(Math.max(W/4,1));else{const et=t[$.dataIndex];et.count+=U,tt=Math.ceil(Math.max(et.count*R/4,1))-Math.ceil(Math.max($.offset/4,1))}I.push({dataIndex:$.dataIndex,offset:$.offset,bufferElementsToAdd:tt}),$.offset+=W,$.count+=U}}for(const m of t)switch(m.type){case s.g.BYTE:case s.g.UNSIGNED_BYTE:m.count=4;break;case s.g.SHORT:case s.g.UNSIGNED_SHORT:m.count+=m.count%2}this._buildVertexBufferLayout(t);let h=0;const f=this._layoutInfo.geometry;for(const m of f)this._locations.set(m.name,h++);const b=this._layoutInfo.opacity;if(b)for(const m of b)this._locations.set(m.name,h++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e={},n=this.geometryInfo();let r=n[0].stride;if(0===t.length)e.geometry=n;else{const a=[];let y=r;for(const o of t)r+=w(o.type)*o.count;for(const o of n)a.push(new u.G(o.name,o.count,o.type,o.offset,r,o.normalized));for(const o of t)a.push(new u.G(o.name,o.count,o.type,y,r,o.normalized)),y+=w(o.type)*o.count;e.geometry=a}this.opacityInfo()&&(e.opacity=this.opacityInfo()),this._layoutInfo=e,this._stride=r}_buildShaderInfo(t,e){let n="\n",r="\n";const a=[];for(const f of t)n+=`attribute ${this._getType(f.count)} ${f.name};\n`;const y=this.attributes(),o=this.attributesInfo();let h=-1;for(const f of y){h++;const{name:b,type:m,precisionFactor:v,isLayout:A}=o[f],I=v&&1!==v?" * "+1/v:"",{bytesPerElement:H,count:L}=d._encodingInfo[m],K=R=>`a_data_${R.dataIndex}${g(L,R.offset,H)}`;switch(this.getAtributeState(h)){case c.UNIFORM:{const R=this._getType(L),U=`u_${b}`;a.push({name:U,type:R,getValue:(O,W,F,$)=>{const tt=A?O.getLayoutValue(f,W):O.getPaintValue(f,W);if(m===p.R16G16B16A16_DASHARRAY){const et=O.getDashKey(tt,O.getLayoutValue("line-cap",W)),kt=$.getMosaicItemPosition(et,!1);if((0,z.Wi)(kt))return null;const{tl:Mt,br:me}=kt;return[Mt[0],me[1],me[0],Mt[1]]}if(m===p.R16G16B16A16_PATTERN){const et=$.getMosaicItemPosition(tt,!f.includes("line-"));if((0,z.Wi)(et))return null;const{tl:kt,br:Mt}=et;return[kt[0],Mt[1],Mt[0],kt[1]]}if(m===p.R8G8B8A8_COLOR){const et=tt[3];return[et*tt[0],et*tt[1],et*tt[2],et]}return tt}}),n+=`uniform ${R} ${U};\n`,r+=`${R} ${b} = ${U};\n`}break;case c.DATA_DRIVEN:{const R=K(e[f][0]);r+=`${this._getType(L)} ${b} = ${R}${I};\n`}break;case c.INTERPOLATED_DATA_DRIVEN:{const R=`u_t_${b}`;a.push({name:R,type:"float",getValue:(W,F,$,tt)=>(A?W.getLayoutProperty(f):W.getPaintProperty(f)).interpolator.interpolationUniformValue($,F)}),n+=`uniform float ${R};\n`;const U=K(e[f][0]),O=K(e[f][1]);r+=`${this._getType(L)} ${b} = mix(${U}${I}, ${O}${I}, ${R});\n`}}}this._shaderHeader=n,this._shaderMain=r,this._uniforms=a}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const e=255*t[3];return x.Z.i8888to32(t[0]*e,t[1]*e,t[2]*e,e)}_encodePattern(t,e,n){if(!n||!n.rect)return;const a=n.rect,y=n.width,o=n.height;e[t]=this._encodeShort(a.x+2,0),e[t]|=this._encodeShort(a.y+2+o,16),e[t+1]=this._encodeShort(a.x+2+y,0),e[t+1]|=this._encodeShort(a.y+2,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}d._encodingInfo={[p.R8_SIGNED]:{dataType:s.g.BYTE,bytesPerElement:1,count:1,normalized:!1},[p.R8_UNSIGNED]:{dataType:s.g.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[p.R16_SIGNED]:{dataType:s.g.SHORT,bytesPerElement:2,count:1,normalized:!1},[p.R16_UNSIGNED]:{dataType:s.g.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[p.R8G8_SIGNED]:{dataType:s.g.BYTE,bytesPerElement:1,count:2,normalized:!1},[p.R8G8_UNSIGNED]:{dataType:s.g.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[p.R16G16_SIGNED]:{dataType:s.g.SHORT,bytesPerElement:2,count:2,normalized:!1},[p.R16G16_UNSIGNED]:{dataType:s.g.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[p.R8G8B8A8_SIGNED]:{dataType:s.g.BYTE,bytesPerElement:1,count:4,normalized:!1},[p.R8G8B8A8_UNSIGNED]:{dataType:s.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[p.R8G8B8A8_COLOR]:{dataType:s.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[p.R16G16B16A16_DASHARRAY]:{dataType:s.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[p.R16G16B16A16_PATTERN]:{dataType:s.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const w=i=>{switch(i){case s.g.FLOAT:case s.g.INT:case s.g.UNSIGNED_INT:return 4;case s.g.SHORT:case s.g.UNSIGNED_SHORT:return 2;case s.g.BYTE:case s.g.UNSIGNED_BYTE:return 1}},g=(i,t,e)=>{const n=t/e;if(1===i)switch(n){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===i)switch(n){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===i)switch(n){case 0:return".xyz";case 1:return".yzw"}return""};class _ extends d{constructor(t){super(t)}geometryInfo(){return _.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return _.ATTRIBUTES}attributesInfo(){return _.ATTRIBUTES_INFO}}_.ATTRIBUTES=[],_.GEOMETRY_LAYOUT=[new u.G("a_pos",2,s.g.BYTE,0,2)],_.ATTRIBUTES_INFO={};class l extends d{constructor(t){super(t)}geometryInfo(){return l.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return l.ATTRIBUTES}attributesInfo(){return l.ATTRIBUTES_INFO}}l.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],l.GEOMETRY_LAYOUT=[new u.G("a_pos",2,s.g.SHORT,0,4)],l.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:p.R8_UNSIGNED},"circle-color":{name:"color",type:p.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:p.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:p.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:p.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:p.R8_UNSIGNED,precisionFactor:32}};class N extends d{constructor(t){super(t)}geometryInfo(){return N.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return N.ATTRIBUTES}attributesInfo(){return N.ATTRIBUTES_INFO}}N.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],N.GEOMETRY_LAYOUT=[new u.G("a_pos",2,s.g.SHORT,0,4)],N.ATTRIBUTES_INFO={"fill-color":{name:"color",type:p.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:p.R16G16B16A16_PATTERN,isOptional:!0}};class P extends d{constructor(t,e){super(t),this._usefillColor=e}geometryInfo(){return P.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this._usefillColor?P.ATTRIBUTES_FILL:P.ATTRIBUTES_OUTLINE}attributesInfo(){return this._usefillColor?P.ATTRIBUTES_INFO_FILL:P.ATTRIBUTES_INFO_OUTLINE}}P.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],P.ATTRIBUTES_FILL=["fill-color","fill-opacity"],P.GEOMETRY_LAYOUT=[new u.G("a_pos",2,s.g.SHORT,0,8),new u.G("a_offset",2,s.g.BYTE,4,8),new u.G("a_xnormal",2,s.g.BYTE,6,8)],P.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:p.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100}},P.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:p.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100}};class k extends d{constructor(t){super(t)}geometryInfo(){return k.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return k.ATTRIBUTES}attributesInfo(){return k.ATTRIBUTES_INFO}}k.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],k.GEOMETRY_LAYOUT=[new u.G("a_pos",2,s.g.SHORT,0,16),new u.G("a_extrude_offset",4,s.g.BYTE,4,16),new u.G("a_dir_normal",4,s.g.BYTE,8,16),new u.G("a_accumulatedDistance",2,s.g.UNSIGNED_SHORT,12,16)],k.ATTRIBUTES_INFO={"line-width":{name:"width",type:p.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:p.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:p.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:p.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:p.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:p.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:p.R16G16B16A16_DASHARRAY,isOptional:!0}};const Ht=[new u.G("a_pos",2,s.g.SHORT,0,16),new u.G("a_vertexOffset",2,s.g.SHORT,4,16),new u.G("a_texAngleRange",4,s.g.UNSIGNED_BYTE,8,16),new u.G("a_levelInfo",4,s.g.UNSIGNED_BYTE,12,16)],jt=[new u.G("a_opacityInfo",1,s.g.UNSIGNED_BYTE,0,1)];class it extends d{constructor(t){super(t)}geometryInfo(){return Ht}opacityInfo(){return jt}attributes(){return it.ATTRIBUTES}attributesInfo(){return it.ATTRIBUTES_INFO}}it.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],it.ATTRIBUTES_INFO={"icon-color":{name:"color",type:p.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:p.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:p.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:p.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:p.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class st extends d{constructor(t){super(t)}geometryInfo(){return Ht}opacityInfo(){return jt}attributes(){return st.ATTRIBUTES}attributesInfo(){return st.ATTRIBUTES_INFO}}st.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],st.ATTRIBUTES_INFO={"text-color":{name:"color",type:p.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:p.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:p.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:p.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:p.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:p.R8_UNSIGNED,isLayout:!0}};var M=T(91558),lt=T(78260),_t=T(13160);function ot(i,t,e,n){const r=3*i,a=3*(e-i)-r,y=1-r-a,o=3*t,h=3*(n-t)-o,f=1-o-h;function b(I){return((y*I+a)*I+r)*I}function v(I){return(3*y*I+2*a)*I+r}return function(I,H=1e-6){return function m(I){return((f*I+h)*I+o)*I}(function A(I,H){let L,K,R,U,O,W;for(R=I,W=0;W<8;W++){if(U=b(R)-I,Math.abs(U)<H)return R;if(O=v(R),Math.abs(O)<1e-6)break;R-=U/O}if(L=0,K=1,R=I,R<L)return L;if(R>K)return K;for(;L<K;){if(U=b(R),Math.abs(U-I)<H)return R;I>U?L=R:K=R,R=.5*(K-L)+L}return R}(I,H))}}const rt={};rt.ease=ot(.25,.1,.25,1),rt.linear=ot(0,0,1,1),rt.easeIn=rt["ease-in"]=ot(.42,0,1,1),rt.easeOut=rt["ease-out"]=ot(0,0,.58,1),rt.easeInOut=rt["ease-in-out"]=ot(.42,0,.58,1);var j=T(86575);const Zt={kind:"null"},S={kind:"number"},X={kind:"string"},V={kind:"boolean"},nt={kind:"color"},Et={kind:"object"},at={kind:"value"};function pt(i,t){return{kind:"array",itemType:i,n:t}}const ie=[Zt,S,X,V,nt,Et,pt(at)];function ut(i){if("array"===i.kind){const t=ut(i.itemType);return"number"==typeof i.n?`array<${t}, ${i.n}>`:"value"===i.itemType.kind?"array":`array<${t}>`}return i.kind}function bt(i){if(null===i)return Zt;if("string"==typeof i)return X;if("boolean"==typeof i)return V;if("number"==typeof i)return S;if(i instanceof M.Z)return nt;if(Array.isArray(i)){let t;for(const e of i){const n=bt(e);if(t){if(t!==n){t=at;break}}else t=n}return pt(t||at,i.length)}return"object"==typeof i?Et:at}function zt(i,t){if("array"===t.kind)return"array"===i.kind&&(0===i.n&&"value"===i.itemType.kind||zt(i.itemType,t.itemType))&&("number"!=typeof t.n||t.n===i.n);if("value"===t.kind)for(const e of ie)if(zt(i,e))return!0;return t.kind===i.kind}function vt(i){if(null===i)return"";const t=typeof i;return"string"===t?i:"number"===t||"boolean"===t?String(i):i instanceof M.Z?i.toString():JSON.stringify(i)}class Kt{constructor(t){this._parent=t,this._vars={}}add(t,e){this._vars[t]=e}get(t){return this._vars[t]?this._vars[t]:this._parent?this._parent.get(t):null}}class wt{constructor(){this.type=at}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new wt}evaluate(t,e){return null==t?void 0:t.id}}class Ct{constructor(){this.type=X}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new Ct}evaluate(t,e){if(!t)return null;switch(t.type){case _t.Vl.Point:return"Point";case _t.Vl.LineString:return"LineString";case _t.Vl.Polygon:return"Polygon";default:return null}}}class Vt{constructor(){this.type=Et}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new Vt}evaluate(t,e){return null==t?void 0:t.values}}class yt{constructor(){this.type=S}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new yt}evaluate(t,e){return e}}class Z{constructor(t,e,n){this._lhs=t,this._rhs=e,this._compare=n,this.type=V}static parse(t,e,n){if(3!==t.length&&4!==t.length)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`"${t[0]}" collator not supported`);return new Z(E(t[1],e),E(t[2],e),n)}evaluate(t,e){return this._compare(this._lhs.evaluate(t,e),this._rhs.evaluate(t,e))}}class It{constructor(t){this._arg=t,this.type=V}static parse(t,e){if(2!==t.length)throw new Error('"!" expects 1 argument');return new It(E(t[1],e))}evaluate(t,e){return!this._arg.evaluate(t,e)}}class Tt{constructor(t){this._args=t,this.type=V}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Tt(n)}evaluate(t,e){for(const n of this._args)if(!n.evaluate(t,e))return!1;return!0}}class Ft{constructor(t){this._args=t,this.type=V}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Ft(n)}evaluate(t,e){for(const n of this._args)if(n.evaluate(t,e))return!0;return!1}}class Rt{constructor(t){this._args=t,this.type=V}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Rt(n)}evaluate(t,e){for(const n of this._args)if(n.evaluate(t,e))return!1;return!0}}class Dt{constructor(t,e,n){this.type=t,this._args=e,this._fallback=n}static parse(t,e,n){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let r;const a=[];for(let o=1;o<t.length-1;o+=2){const h=E(t[o],e),f=E(t[o+1],e,n);r||(r=f.type),a.push({condition:h,output:f})}const y=E(t[t.length-1],e,n);return r||(r=y.type),new Dt(r,a,y)}evaluate(t,e){for(const n of this._args)if(n.condition.evaluate(t,e))return n.output.evaluate(t,e);return this._fallback.evaluate(t,e)}}class xt{constructor(t,e){this.type=t,this._args=e}static parse(t,e){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let n;const r=[];for(let a=1;a<t.length;a++){const y=E(t[a],e);n||(n=y.type),r.push(y)}return new xt(n,r)}evaluate(t,e){for(const n of this._args){const r=n.evaluate(t,e);if(null!==r)return r}return null}}class $t{constructor(t,e,n,r,a){this.type=t,this._input=e,this._labels=n,this._outputs=r,this._fallback=a}static parse(t,e){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let n;const r=E(t[1],e),a=[],y={};let o;for(let h=2;h<t.length-1;h+=2){let f=t[h];Array.isArray(f)||(f=[f]);for(const m of f){const v=typeof m;if("string"!==v&&"number"!==v)throw new Error('"match" requires string or number literal as labels');if(o){if(v!==o)throw new Error('"match" requires labels to have the same type')}else o=v;y[m]=a.length}const b=E(t[h+1],e);n||(n=b.type),a.push(b)}return new $t(n,r,y,a,E(t[t.length-1],e))}evaluate(t,e){const n=this._input.evaluate(t,e);return(this._outputs[this._labels[n]]||this._fallback).evaluate(t,e)}}class q{constructor(t,e,n,r,a){this._operator=t,this.type=e,this.interpolation=n,this.input=r,this._stops=a}static parse(t,e,n){const r=t[0];if(t.length<5)throw new Error(`"${r}" expects at least 4 arguments`);const a=t[1];if(!Array.isArray(a)||0===a.length)throw new Error(`"${a}" is not a valid interpolation`);switch(a[0]){case"linear":if(1!==a.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==a.length||"number"!=typeof a[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==a.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let f=1;f<5;f++){const b=a[f];if("number"!=typeof b||b<0||b>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${a[0]}"`)}if(t.length%2!=1)throw new Error(`"${r}" expects an even number of arguments`);const y=E(t[2],e,S);let o;"interpolate-hcl"===r||"interpolate-lab"===r?o=nt:n&&"value"!==n.kind&&(o=n);const h=[];for(let f=3;f<t.length;f+=2){const b=t[f];if("number"!=typeof b)throw new Error(`"${r}" requires stop inputs as literal numbers`);if(h.length&&h[h.length-1][0]>=b)throw new Error(`"${r}" requires strictly ascending stop inputs`);const m=E(t[f+1],e,o);o||(o=m.type),h.push([b,m])}if(o&&o!==nt&&o!==S&&("array"!==o.kind||o.itemType!==S))throw new Error(`"${r}" cannot interpolate type ${ut(o)}`);return new q(r,o,a,y,h)}evaluate(t,e){const n=this._stops;if(1===n.length)return n[0][1].evaluate(t,e);const r=this.input.evaluate(t,e);if(r<=n[0][0])return n[0][1].evaluate(t,e);if(r>=n[n.length-1][0])return n[n.length-1][1].evaluate(t,e);let a=0;for(;++a<n.length&&!(r<n[a][0]););const h=q.interpolationRatio(this.interpolation,r,n[a-1][0],n[a][0]),f=n[a-1][1].evaluate(t,e),b=n[a][1].evaluate(t,e);if("interpolate"===this._operator){if("array"===this.type.kind&&Array.isArray(f)&&Array.isArray(b))return f.map((m,v)=>(0,j.sX)(m,b[v],h));if("color"===this.type.kind&&f instanceof M.Z&&b instanceof M.Z){const m=new M.Z(f),v=new M.Z(b);return new M.Z([(0,j.sX)(m.r,v.r,h),(0,j.sX)(m.g,v.g,h),(0,j.sX)(m.b,v.b,h),(0,j.sX)(m.a,v.a,h)])}if("number"===this.type.kind&&"number"==typeof f&&"number"==typeof b)return(0,j.sX)(f,b,h);throw new Error(`"${this._operator}" cannot interpolate type ${ut(this.type)}`)}if("interpolate-hcl"===this._operator){const m=(0,lt.sJ)(f),v=(0,lt.sJ)(b),A=v.h-m.h,I=(0,lt.xr)({h:m.h+h*(A>180||A<-180?A-360*Math.round(A/360):A),c:(0,j.sX)(m.c,v.c,h),l:(0,j.sX)(m.l,v.l,h)});return new M.Z(ne({a:(0,j.sX)(f.a,b.a,h)},I))}if("interpolate-lab"===this._operator){const m=(0,lt.Y3)(f),v=(0,lt.Y3)(b),A=(0,lt.xr)({l:(0,j.sX)(m.l,v.l,h),a:(0,j.sX)(m.a,v.a,h),b:(0,j.sX)(m.b,v.b,h)});return new M.Z(ne({a:(0,j.sX)(f.a,b.a,h)},A))}throw new Error(`Unexpected operator "${this._operator}"`)}interpolationUniformValue(t,e){const n=this._stops;if(1===n.length||t>=n[n.length-1][0])return 0;let r=0;for(;++r<n.length&&!(t<n[r][0]););return q.interpolationRatio(this.interpolation,e,n[r-1][0],n[r][0])}getInterpolationRange(t){const e=this._stops;if(1===e.length){const a=e[0][0];return[a,a]}const n=e[e.length-1][0];if(t>=n)return[n,n];let r=0;for(;++r<e.length&&!(t<e[r][0]););return[e[r-1][0],e[r][0]]}static interpolationRatio(t,e,n,r){let a=0;return"linear"===t[0]?a=q._exponentialInterpolationRatio(e,1,n,r):"exponential"===t[0]?a=q._exponentialInterpolationRatio(e,t[1],n,r):"cubic-bezier"===t[0]&&(a=ot(t[1],t[2],t[3],t[4])(q._exponentialInterpolationRatio(e,1,n,r),1e-5)),a<0?a=0:a>1&&(a=1),a}static _exponentialInterpolationRatio(t,e,n,r){const a=r-n;if(0===a)return 0;const y=t-n;return 1===e?y/a:(e**y-1)/(e**a-1)}}class Nt{constructor(t,e,n){this.type=t,this._input=e,this._stops=n}static parse(t,e){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const n=E(t[1],e,S);let r;const a=[];a.push([-1/0,E(t[2],e)]);for(let y=3;y<t.length;y+=2){const o=t[y];if("number"!=typeof o)throw new Error('"step" requires stop inputs as literal numbers');if(a.length&&a[a.length-1][0]>=o)throw new Error('"step" requires strictly ascending stop inputs');const h=E(t[y+1],e);r||(r=h.type),a.push([o,h])}return new Nt(r,n,a)}evaluate(t,e){const n=this._stops;if(1===n.length)return n[0][1].evaluate(t,e);const r=this._input.evaluate(t,e);let a=0;for(;++a<n.length&&!(r<n[a][0]););return this._stops[a-1][1].evaluate(t,e)}}class At{constructor(t,e){this.type=t,this._output=e}static parse(t,e,n){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const r=new Kt(e);for(let y=1;y<t.length-1;y+=2){const o=t[y];if("string"!=typeof o)throw new Error(`"let" requires a string to define variable names - found ${o}`);r.add(o,E(t[y+1],e))}const a=E(t[t.length-1],r,n);return new At(a.type,a)}evaluate(t,e){return this._output.evaluate(t,e)}}class Lt{constructor(t,e){this.type=t,this.output=e}static parse(t,e,n){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');const r=e.get(t[1]);if(!r)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new Lt(n||at,r)}evaluate(t,e){return this.output.evaluate(t,e)}}class Pt{constructor(t,e,n){this.type=t,this._index=e,this._array=n}static parse(t,e){if(3!==t.length)throw new Error('"at" expects 2 arguments');const n=E(t[1],e,S),r=E(t[2],e);return new Pt(r.type.itemType,n,r)}evaluate(t,e){const n=this._index.evaluate(t,e),r=this._array.evaluate(t,e);if(n<0||n>=r.length)throw new Error('"at" index out of bounds');if(n!==Math.floor(n))throw new Error('"at" index must be an integer');return r[n]}}class ft{constructor(t,e){this._key=t,this._obj=e,this.type=at}static parse(t,e){let n,r;switch(t.length){case 2:return n=E(t[1],e),new ft(n);case 3:return n=E(t[1],e),r=E(t[2],e),new ft(n,r);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,e){const n=this._key.evaluate(t,e);return this._obj?this._obj.evaluate(t,e)[n]:null==t?void 0:t.values[n]}}class mt{constructor(t,e){this._key=t,this._obj=e,this.type=V}static parse(t,e){let n,r;switch(t.length){case 2:return n=E(t[1],e),new mt(n);case 3:return n=E(t[1],e),r=E(t[2],e),new mt(n,r);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,e){const n=this._key.evaluate(t,e);return this._obj?n in this._obj.evaluate(t,e):!(null==t||!t.values[n])}}class St{constructor(t,e){this._key=t,this._vals=e,this.type=V}static parse(t,e){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new St(E(t[1],e),E(t[2],e))}evaluate(t,e){const n=this._key.evaluate(t,e);return this._vals.evaluate(t,e).includes(n)}}class gt{constructor(t,e,n){this._item=t,this._array=e,this._from=n,this.type=S}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const n=E(t[1],e),r=E(t[2],e);if(4===t.length){const a=E(t[3],e,S);return new gt(n,r,a)}return new gt(n,r)}evaluate(t,e){const n=this._item.evaluate(t,e),r=this._array.evaluate(t,e);if(this._from){const a=this._from.evaluate(t,e);if(a!==Math.floor(a))throw new Error('"index-of" index must be an integer');return r.indexOf(n,a)}return r.indexOf(n)}}class Ot{constructor(t){this._arg=t,this.type=S}static parse(t,e){if(2!==t.length)throw new Error('"length" expects 2 arguments');const n=E(t[1],e);return new Ot(n)}evaluate(t,e){const n=this._arg.evaluate(t,e);if("string"==typeof n||Array.isArray(n))return n.length;throw new Error('"length" expects string or array')}}class dt{constructor(t,e,n,r){this.type=t,this._array=e,this._from=n,this._to=r}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const n=E(t[1],e),r=E(t[2],e,S);if(r.type!==S)throw new Error('"slice" index must return a number');if(4===t.length){const a=E(t[3],e,S);if(a.type!==S)throw new Error('"slice" index must return a number');return new dt(n.type,n,r,a)}return new dt(n.type,n,r)}evaluate(t,e){const n=this._array.evaluate(t,e);if(!Array.isArray(n)&&"string"!=typeof n)throw new Error('"slice" input must be an array or a string');const r=this._from.evaluate(t,e);if(r<0||r>=n.length)throw new Error('"slice" index out of bounds');if(r!==Math.floor(r))throw new Error('"slice" index must be an integer');if(this._to){const a=this._to.evaluate(t,e);if(a<0||a>=n.length)throw new Error('"slice" index out of bounds');if(a!==Math.floor(a))throw new Error('"slice" index must be an integer');return n.slice(r,a)}return n.slice(r)}}class Ut{constructor(){this.type=V}static parse(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new Ut}evaluate(t,e){return t&&void 0!==t.id}}class Y{constructor(t,e){this._args=t,this._calculate=e,this.type=S}static parse(t,e,n){const r=t.slice(1).map(a=>E(a,e));return new Y(r,n)}evaluate(t,e){let n;return this._args&&(n=this._args.map(r=>r.evaluate(t,e))),this._calculate(n)}}let C=(()=>{class i{constructor(e,n){this._args=e,this._calculate=n,this.type=S}static parse(e,n){const r=e.slice(1).map(a=>E(a,n));return new i(r,i.ops[e[0]])}evaluate(e,n){let r;return this._args&&(r=this._args.map(a=>a.evaluate(e,n))),this._calculate(r)}}return i.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])},i})();class Qt{constructor(t){this._args=t,this.type=X}static parse(t,e){return new Qt(t.slice(1).map(n=>E(n,e)))}evaluate(t,e){return this._args.map(n=>n.evaluate(t,e)).join("")}}let ye=(()=>{class i{constructor(e,n){this._arg=e,this._calculate=n,this.type=X}static parse(e,n){if(2!==e.length)throw new Error(`${e[0]} expects 1 argument`);const r=E(e[1],n);return new i(r,i.ops[e[0]])}evaluate(e,n){return this._calculate(this._arg.evaluate(e,n))}}return i.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()},i})();class Jt{constructor(t){this._args=t,this.type=nt}static parse(t,e){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');const n=t.slice(1).map(r=>E(r,e));return new Jt(n)}evaluate(t,e){const n=this._validate(this._args[0].evaluate(t,e)),r=this._validate(this._args[1].evaluate(t,e)),a=this._validate(this._args[2].evaluate(t,e));return new M.Z({r:n,g:r,b:a})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class qt{constructor(t){this._args=t,this.type=nt}static parse(t,e){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');const n=t.slice(1).map(r=>E(r,e));return new qt(n)}evaluate(t,e){const n=this._validate(this._args[0].evaluate(t,e)),r=this._validate(this._args[1].evaluate(t,e)),a=this._validate(this._args[2].evaluate(t,e)),y=this._validateAlpha(this._args[3].evaluate(t,e));return new M.Z({r:n,g:r,b:a,a:y})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if("number"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class te{constructor(t){this._color=t,this.type=pt(S,4)}static parse(t,e){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');const n=E(t[1],e);return new te(n)}evaluate(t,e){return new M.Z(this._color.evaluate(t,e)).toRgba()}}class ct{constructor(t,e){this.type=t,this._args=e}static parse(t,e){const n=t[0];if(t.length<2)throw new Error(`${n} expects at least one argument`);let r,a=1;if("array"===n){if(t.length>2){switch(t[1]){case"string":r=X;break;case"number":r=S;break;case"boolean":r=V;break;default:throw new Error('"array" type argument must be string, number or boolean')}a++}else r=at;let o;if(t.length>3){if(o=t[2],null!==o&&("number"!=typeof o||o<0||o!==Math.floor(o)))throw new Error('"array" length argument must be a positive integer literal');a++}r=pt(r,o)}else switch(n){case"string":r=X;break;case"number":r=S;break;case"boolean":r=V;break;case"object":r=Et}const y=[];for(;a<t.length;a++){const o=E(t[a],e);y.push(o)}return new ct(r,y)}evaluate(t,e){let n;for(const r of this._args){const a=r.evaluate(t,e);if(n=bt(a),zt(n,this.type))return a}throw new Error(`Expected ${ut(this.type)} but got ${ut(n)}`)}}let ht=(()=>{class i{constructor(e,n){this.type=e,this._args=n}static parse(e,n){const r=e[0],a=i.types[r];if(a===V||a===X){if(2!==e.length)throw new Error(`${r} expects one argument`)}else if(e.length<2)throw new Error(`${r} expects at least one argument`);const y=[];for(let o=1;o<e.length;o++){const h=E(e[o],n);y.push(h)}return new i(a,y)}evaluate(e,n){if(this.type===V)return Boolean(this._args[0].evaluate(e,n));if(this.type===X)return vt(this._args[0].evaluate(e,n));if(this.type===S){for(const r of this._args){const a=Number(r.evaluate(e,n));if(!isNaN(a))return a}return null}if(this.type===nt){for(const r of this._args)try{const a=i.toColor(r.evaluate(e,n));if(a instanceof M.Z)return a}catch(a){}return null}}static toBoolean(e){return Boolean(e)}static toString(e){return vt(e)}static toNumber(e){const n=Number(e);if(isNaN(n))throw new Error(`"${e}" is not a number`);return n}static toColor(e){if(e instanceof M.Z)return e;if("string"==typeof e){const n=M.Z.fromString(e);if(n)return n;throw new Error(`"${e}" is not a color`)}if(Array.isArray(e))return M.Z.fromArray(e);throw new Error(`"${e}" is not a color`)}}return i.types={"to-boolean":V,"to-color":nt,"to-number":S,"to-string":X},i})();class ee{constructor(t){this._val=t,this.type=bt(t)}static parse(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new ee(t[1])}evaluate(t,e){return this._val}}class re{constructor(t){this._arg=t,this.type=X}static parse(t,e){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new re(E(t[1],e))}evaluate(t,e){return ut(bt(this._arg.evaluate(t,e)))}}function E(i,t,e){const n=typeof i;if("string"===n||"boolean"===n||"number"===n||null===i){if(e)switch(e.kind){case"string":"string"!==n&&(i=ht.toString(i));break;case"number":"number"!==n&&(i=ht.toNumber(i));break;case"color":i=ht.toColor(i)}i=["literal",i]}if(!Array.isArray(i)||0===i.length)throw new Error("Expression must be a non empty array");const r=i[0];if("string"!=typeof r)throw new Error("First element of expression must be a string");const a=fe[r];if(void 0===a)throw new Error(`Invalid expression operator "${r}"`);if(!a)throw new Error(`Unimplemented expression operator "${r}"`);return a.parse(i,t,e)}const fe={array:ct,boolean:ct,collator:null,format:null,image:null,literal:ee,number:ct,"number-format":null,object:ct,string:ct,"to-boolean":ht,"to-color":ht,"to-number":ht,"to-string":ht,typeof:re,accumulated:null,"feature-state":null,"geometry-type":Ct,id:wt,"line-progress":null,properties:Vt,at:Pt,get:ft,has:mt,in:St,"index-of":gt,length:Ot,slice:dt,"!":It,"!=":class oe extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n!==r)}},"<":class le extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n<r)}},"<=":class Wt extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n<=r)}},"==":class se extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n===r)}},">":class ue extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n>r)}},">=":class Xt extends Z{static parse(t,e){return Z.parse(t,e,(n,r)=>n>=r)}},all:Tt,any:Ft,case:Dt,coalesce:xt,match:$t,within:null,interpolate:q,"interpolate-hcl":q,"interpolate-lab":q,step:Nt,let:At,var:Lt,concat:Qt,downcase:ye,"is-supported-script":null,"resolved-locale":null,upcase:ye,rgb:Jt,rgba:qt,"to-rgba":te,"-":class ce extends Y{static parse(t,e){switch(t.length){case 2:return Y.parse(t,e,n=>-n[0]);case 3:return Y.parse(t,e,n=>n[0]-n[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}},"*":class he extends Y{static parse(t,e){return Y.parse(t,e,n=>{let r=1;for(const a of n)r*=a;return r})}},"/":class pe extends Y{static parse(t,e){if(3===t.length)return Y.parse(t,e,n=>n[0]/n[1]);throw new Error('"/" expects 2 arguments')}},"%":class Ee extends Y{static parse(t,e){if(3===t.length)return Y.parse(t,e,n=>n[0]%n[1]);throw new Error('"%" expects 2 arguments')}},"^":class be extends Y{static parse(t,e){if(3===t.length)return Y.parse(t,e,n=>n[0]**n[1]);throw new Error('"^" expects 1 or 2 arguments')}},"+":class ve extends Y{static parse(t,e){return Y.parse(t,e,n=>{let r=0;for(const a of n)r+=a;return r})}},abs:C,acos:C,asin:C,atan:C,ceil:C,cos:C,e:C,floor:C,ln:C,ln2:C,log10:C,log2:C,max:C,min:C,pi:C,round:C,sin:C,sqrt:C,tan:C,zoom:yt,"heatmap-density":null,"has-id":Ut,none:Rt};class Q{constructor(t){this._expression=t}filter(t,e){if(!this._expression)return!0;try{return this._expression.evaluate(t,e)}catch(n){return console.log(n.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const e=E(t,null,V);return new Q(e)}catch(e){return console.log(e.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===t.length&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"in":return t.length>=3&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let e=1;e<t.length;e++)if(this.isLegacyFilter(t[e]))return!0;return!1;case"has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;const e=t[0];if(1===t.length)return"any"!==e;switch(e){case"==":return Q.convertComparison("==",t[1],t[2]);case"!=":return Q.negate(Q.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return Q.convertComparison(e,t[1],t[2]);case"in":return Q.convertIn(t[1],t.slice(2));case"!in":return Q.negate(Q.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return Q.convertCombining(e,t.slice(1));case"has":return Q.convertHas(t[1]);case"!has":return Q.negate(Q.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,e,n){switch(e){case"$type":return[t,["geometry-type"],n];case"$id":return[t,["id"],n];default:return[t,["get",e],n]}}static convertIn(t,e){switch(t){case"$type":return["in",["geometry-type"],["literal",e]];case"$id":return["in",["id"],["literal",e]];default:return["in",["get",t],["literal",e]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,e){return[t].concat(e.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}var B=T(1268);class Yt{constructor(t,e){let n;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":n=!0;break;case"array":n="number"===t.value;break;default:n=!1}if(null==e&&(e=t.default),Array.isArray(e)&&e.length>0&&fe[e[0]]){const a={number:S,color:nt,string:X,boolean:V,enum:X};try{const o=E(e,null,"array"===t.type?pt(a[t.value]||at,t.length):a[t.type]);this.getValue=this._buildExpression(o,t),this.isDataDriven=!0,o instanceof q&&o.input instanceof yt&&(this.interpolator=o)}catch(y){console.log(y.message),this.getValue=this._buildSimple(t.default)}return}n&&"interval"===e.type&&(n=!1);const r=e&&e.stops&&e.stops.length>0;if(r)for(const a of e.stops)a[1]=this._validate(a[1],t);if(this.isDataDriven=!!e&&!!e.property,this.isDataDriven)if(void 0!==e.default&&(e.default=this._validate(e.default,t)),r)switch(e.type){case"identity":this.getValue=this._buildIdentity(e,t);break;case"categorical":this.getValue=this._buildCategorical(e,t);break;default:this.getValue=n?this._buildInterpolate(e,t):this._buildInterval(e,t)}else this.getValue=this._buildIdentity(e,t);else r?this.getValue=n?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,t),this.getValue=this._buildSimple(e))}_validate(t,e){if("number"===e.type){if(t<e.minimum)return e.minimum;if(t>e.maximum)return e.maximum}else"color"===e.type?t=Yt._parseColor(t):"enum"===e.type?"string"==typeof t&&(t=e.values.indexOf(t)):"array"===e.type&&"enum"===e.value?t=t.map(n=>"string"==typeof n?e.values.indexOf(n):n):"string"===e.type&&(t=vt(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,e){return(n,r)=>{try{const a=t.evaluate(r,n);return void 0===a?e.default:this._validate(a,e)}catch(a){return console.log(a.message),e.default}}}_buildIdentity(t,e){return(n,r)=>{let a;return r&&(a=r.values[t.property]),void 0!==a&&(a=this._validate(a,e)),null!=a?a:void 0!==t.default?t.default:e.default}}_buildCategorical(t,e){return(n,r)=>{let a;return r&&(a=r.values[t.property]),a=this._categorical(a,t.stops),void 0!==a?a:void 0!==t.default?t.default:e.default}}_buildInterval(t,e){return(n,r)=>{let a;return r&&(a=r.values[t.property]),"number"==typeof a?this._interval(a,t.stops):void 0!==t.default?t.default:e.default}}_buildInterpolate(t,e){return(n,r)=>{let a;return r&&(a=r.values[t.property]),"number"==typeof a?this._interpolate(a,t.stops,t.base||1):void 0!==t.default?t.default:e.default}}_buildZoomInterpolate(t){return e=>this._interpolate(e,t.stops,t.base||1)}_buildZoomInterval(t){return e=>this._interval(e,t.stops)}_categorical(t,e){const n=e.length;for(let r=0;r<n;r++)if(e[r][0]===t)return e[r][1]}_interval(t,e){const n=e.length;let r=0;for(let a=0;a<n&&e[a][0]<=t;a++)r=a;return e[r][1]}_interpolate(t,e,n){let r,a;const y=e.length;for(let o=0;o<y;o++){const h=e[o];if(!(h[0]<=t)){a=h;break}r=h}if(r&&a){const o=a[0]-r[0],h=t-r[0],f=1===n?h/o:(n**h-1)/(n**o-1);if(Array.isArray(r[1])){const b=r[1],m=a[1],v=[];for(let A=0;A<b.length;A++)v.push((0,j.sX)(b[A],m[A],f));return v}return(0,j.sX)(r[1],a[1],f)}return r?r[1]:a?a[1]:void 0}static _isEmpty(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:("string"==typeof t&&(t=new M.Z(t)),t instanceof M.Z&&!this._isEmpty(t)?M.Z.toUnitRGBA(t):void 0)}}var Bt,we=T(39351);!function(i){i[i.BUTT=0]="BUTT",i[i.ROUND=1]="ROUND",i[i.SQUARE=2]="SQUARE",i[i.UNKNOWN=4]="UNKNOWN"}(Bt||(Bt={}));class Gt{constructor(t,e,n,r){switch(this.type=t,this.typeName=e.type,this.id=e.id,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.layout=e.layout,this.paint=e.paint,this.z=n,this.uid=r,t){case B.fR.BACKGROUND:this._layoutDefinition=B.f2.backgroundLayoutDefinition,this._paintDefinition=B.f2.backgroundPaintDefinition;break;case B.fR.FILL:this._layoutDefinition=B.f2.fillLayoutDefinition,this._paintDefinition=B.f2.fillPaintDefinition;break;case B.fR.LINE:this._layoutDefinition=B.f2.lineLayoutDefinition,this._paintDefinition=B.f2.linePaintDefinition;break;case B.fR.SYMBOL:this._layoutDefinition=B.f2.symbolLayoutDefinition,this._paintDefinition=B.f2.symbolPaintDefinition;break;case B.fR.CIRCLE:this._layoutDefinition=B.f2.circleLayoutDefinition,this._paintDefinition=B.f2.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=Q.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,e,n){let r;const a=this._layoutProperties[t];return a&&(r=a.getValue(e,n)),void 0===r&&(r=this._layoutDefinition[t].default),r}getPaintValue(t,e,n){let r;const a=this._paintProperties[t];return a&&(r=a.getValue(e,n)),void 0===r&&(r=this._paintDefinition[t].default),r}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const e in t)if(t[e].isDataDriven)return!0;return!1}_parseLayout(t){const e={};for(const n in t){const r=this._layoutDefinition[n];r&&(e[n]=new Yt(r,t[n]))}return e}_parsePaint(t){const e={};for(const n in t){const r=this._paintDefinition[n];r&&(e[n]=new Yt(r,t[n]))}return e}computeAttributesKey(t,e,n,r){let a=0,y=0;for(const o of e){let h=3;if(!o||o!==r){const f=n[o],{isLayout:b,isOptional:m}=f,v=b?this.getLayoutProperty(o):this.getPaintProperty(o);h=null!=v&&v.interpolator?2:null!=v&&v.isDataDriven?1:m&&!v?3:0}y|=h<<a,a+=2}return y<<3|t}}class Ie extends Gt{constructor(t,e,n,r){super(t,e,n,r),this.backgroundMaterial=new _(this.computeAttributesKey(D._K.BACKGROUND,_.ATTRIBUTES,_.ATTRIBUTES_INFO))}}class Te extends Gt{constructor(t,e,n,r){super(t,e,n,r);const a=this.getPaintProperty("fill-color"),y=this.getPaintProperty("fill-opacity"),o=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=null==a?void 0:a.isDataDriven,this.hasDataDrivenOpacity=null==y?void 0:y.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(null==o?void 0:o.isDataDriven);const h=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!h,this.hasDataDrivenOutlineColor=null==h?void 0:h.isDataDriven,this.hasDataDrivenOutline=h?h.isDataDriven:!!a&&a.isDataDriven,this.hasDataDrivenOutline=(h?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new N(this.computeAttributesKey(D._K.FILL,N.ATTRIBUTES,N.ATTRIBUTES_INFO)),this.outlineMaterial=new P(this.computeAttributesKey(D._K.OUTLINE,this.outlineUsesFillColor?P.ATTRIBUTES_FILL:P.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?P.ATTRIBUTES_INFO_FILL:P.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class Re extends Gt{constructor(t,e,n,r){var y,o,h,f,b,m,v,A,I;super(t,e,n,r);const a=this.getPaintProperty("line-pattern");if(this.lineMaterial=new k(this.computeAttributesKey(D._K.LINE,k.ATTRIBUTES,k.ATTRIBUTES_INFO,a?"line-dasharray":"")),this.hasDataDrivenLine=(null==(y=this.getPaintProperty("line-blur"))?void 0:y.isDataDriven)||(null==(o=this.getPaintProperty("line-color"))?void 0:o.isDataDriven)||(null==(h=this.getPaintProperty("line-gap-width"))?void 0:h.isDataDriven)||(null==(f=this.getPaintProperty("line-offset"))?void 0:f.isDataDriven)||(null==(b=this.getPaintProperty("line-opacity"))?void 0:b.isDataDriven)||(null==(m=this.getPaintProperty("line-pattern"))?void 0:m.isDataDriven)||(null==(v=this.getPaintProperty("line-dasharray"))?void 0:v.isDataDriven)||(null==(A=this.getLayoutProperty("line-cap"))?void 0:A.isDataDriven)||(null==(I=this.getPaintProperty("line-width"))?void 0:I.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const H=this.getPaintProperty("line-width");if(!H||"number"==typeof H&&.5*H<we.tQ){const L=this.getPaintProperty("line-offset");(!L||"number"==typeof L&&0===L)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,e){let n;switch(e){case Bt.BUTT:n="Butt";break;case Bt.ROUND:n="Round";break;case Bt.SQUARE:n="Square";break;default:n="Butt"}return`dasharray-[${t.toString()}]-${n}`}}class De extends Gt{constructor(t,e,n,r){var a,y,o,h,f,b,m,v,A,I,H,L;super(t,e,n,r),this.iconMaterial=new it(this.computeAttributesKey(D._K.ICON,it.ATTRIBUTES,it.ATTRIBUTES_INFO)),this.textMaterial=new st(this.computeAttributesKey(D._K.TEXT,st.ATTRIBUTES,st.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=(null==(a=this.getPaintProperty("icon-color"))?void 0:a.isDataDriven)||(null==(y=this.getPaintProperty("icon-halo-blur"))?void 0:y.isDataDriven)||(null==(o=this.getPaintProperty("icon-halo-color"))?void 0:o.isDataDriven)||(null==(h=this.getPaintProperty("icon-halo-width"))?void 0:h.isDataDriven)||(null==(f=this.getPaintProperty("icon-opacity"))?void 0:f.isDataDriven)||(null==(b=this.getLayoutProperty("icon-size"))?void 0:b.isDataDriven),this.hasDataDrivenText=(null==(m=this.getPaintProperty("text-color"))?void 0:m.isDataDriven)||(null==(v=this.getPaintProperty("text-halo-blur"))?void 0:v.isDataDriven)||(null==(A=this.getPaintProperty("text-halo-color"))?void 0:A.isDataDriven)||(null==(I=this.getPaintProperty("text-halo-width"))?void 0:I.isDataDriven)||(null==(H=this.getPaintProperty("text-opacity"))?void 0:H.isDataDriven)||(null==(L=this.getLayoutProperty("text-size"))?void 0:L.isDataDriven)}}class xe extends Gt{constructor(t,e,n,r){super(t,e,n,r),this.circleMaterial=new l(this.computeAttributesKey(D._K.CIRCLE,l.ATTRIBUTES,l.ATTRIBUTES_INFO))}}class Ne{constructor(t,e,n){let r;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",e),this.keepUpright=t.getLayoutValue("icon-keep-upright",e),this.optional=t.getLayoutValue("icon-optional",e),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",e),this.rotationAlignment===B.aF.AUTO&&(this.rotationAlignment=n?B.aF.MAP:B.aF.VIEWPORT),r=t.getLayoutProperty("icon-anchor"),null!=r&&r.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("icon-anchor",e),r=t.getLayoutProperty("icon-offset"),null!=r&&r.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("icon-offset",e),r=t.getLayoutProperty("icon-padding"),null!=r&&r.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("icon-padding",e),r=t.getLayoutProperty("icon-rotate"),null!=r&&r.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("icon-rotate",e),r=t.getLayoutProperty("icon-size"),null!=r&&r.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("icon-size",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e))}}class Ae{constructor(t,e,n){let r;this.allowOverlap=t.getLayoutValue("text-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",e),this.keepUpright=t.getLayoutValue("text-keep-upright",e),this.optional=t.getLayoutValue("text-optional",e),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",e),this.rotationAlignment===B.aF.AUTO&&(this.rotationAlignment=n?B.aF.MAP:B.aF.VIEWPORT),r=t.getLayoutProperty("text-anchor"),null!=r&&r.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("text-anchor",e),r=t.getLayoutProperty("text-justify"),null!=r&&r.isDataDriven?this._justifyProp=r:this.justify=t.getLayoutValue("text-justify",e),r=t.getLayoutProperty("text-letter-spacing"),null!=r&&r.isDataDriven?this._letterSpacingProp=r:this.letterSpacing=t.getLayoutValue("text-letter-spacing",e),r=t.getLayoutProperty("text-line-height"),null!=r&&r.isDataDriven?this._lineHeightProp=r:this.lineHeight=t.getLayoutValue("text-line-height",e),r=t.getLayoutProperty("text-max-angle"),null!=r&&r.isDataDriven?this._maxAngleProp=r:this.maxAngle=t.getLayoutValue("text-max-angle",e),r=t.getLayoutProperty("text-max-width"),null!=r&&r.isDataDriven?this._maxWidthProp=r:this.maxWidth=t.getLayoutValue("text-max-width",e),r=t.getLayoutProperty("text-offset"),null!=r&&r.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("text-offset",e),r=t.getLayoutProperty("text-padding"),null!=r&&r.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("text-padding",e),r=t.getLayoutProperty("text-rotate"),null!=r&&r.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("text-rotate",e),r=t.getLayoutProperty("text-size"),null!=r&&r.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("text-size",e),r=t.getLayoutProperty("text-writing-mode"),null!=r&&r.isDataDriven?this._writingModeProp=r:this.writingMode=t.getLayoutValue("text-writing-mode",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,e)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,e)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,e)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,e)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,e))}}},78364:(J,G,T)=>{T.d(G,{Z:()=>x});var D=T(1268),z=T(13295);class x{constructor(c){if(this._style=c,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,c.layers||(c.layers=[]),this.version=parseFloat(c.version),this.layers=c.layers.map((s,u,d)=>this._create(s,u,d)).filter(s=>!!s),this.layers){let s;for(let u=0;u<this.layers.length;u++)s=this.layers[u],this._layerByName[s.id]=s,this._uidToLayer.set(s.uid,s),s.type===D.fR.BACKGROUND&&this.backgroundBucketIds.push(s.id)}this._identifyRefLayers()}isPainterDataDriven(c){const s=this._layerByName[c];return!!s&&s.isPainterDataDriven()}getStyleLayerId(c){return c>=this.layers.length?null:this.layers[c].id}getStyleLayerByUID(c){var s;return null!=(s=this._uidToLayer.get(c))?s:null}getStyleLayerIndex(c){const s=this._layerByName[c];return s?this.layers.indexOf(s):-1}setStyleLayer(c,s){if(!c||!c.id)return;const u=this._style;null!=s&&s>=this.layers.length&&(s=this.layers.length-1);let d,w=!0;const g=this._layerByName[c.id];if(g){const _=this.layers.indexOf(g);s||(s=_),s===_?(w=!1,d=x._recreateLayer(c,g),this.layers[s]=d,u.layers[s]=c):(this.layers.splice(_,1),u.layers.splice(_,1),d=this._create(c,s,this.layers),this.layers.splice(s,0,d),u.layers.splice(s,0,c))}else d=this._create(c,s,this.layers),!s||s>=this.layers.length?(this.layers.push(d),u.layers.push(c)):(this.layers.splice(s,0,d),u.layers.splice(s,0,c));this._layerByName[c.id]=d,this._uidToLayer.set(d.uid,d),w&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(c){const s=this._layerByName[c];return s?{type:s.typeName,id:s.id,source:s.source,"source-layer":s.sourceLayer,minzoom:s.minzoom,maxzoom:s.maxzoom,filter:s.filter,layout:s.layout,paint:s.paint}:null}deleteStyleLayer(c){const s=this._layerByName[c];if(s){delete this._layerByName[c],this._uidToLayer.delete(s.uid);const u=this.layers.indexOf(s);this.layers.splice(u,1),this._style.layers.splice(u,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(c){return this._layerByName[c]}getLayoutProperties(c){const s=this._layerByName[c];return s?s.layout:null}getPaintProperties(c){const s=this._layerByName[c];return s?s.paint:null}setPaintProperties(c,s){const u=this._layerByName[c];if(!u)return;const w=x._recreateLayer({type:u.typeName,id:u.id,source:u.source,"source-layer":u.sourceLayer,minzoom:u.minzoom,maxzoom:u.maxzoom,filter:u.filter,layout:u.layout,paint:s},u),g=this.layers.indexOf(u);this.layers[g]=w,this._style.layers[g].paint=s,this._layerByName[u.id]=w,this._uidToLayer.set(u.uid,w)}setLayoutProperties(c,s){const u=this._layerByName[c];if(!u)return;const w=x._recreateLayer({type:u.typeName,id:u.id,source:u.source,"source-layer":u.sourceLayer,minzoom:u.minzoom,maxzoom:u.maxzoom,filter:u.filter,layout:s,paint:u.paint},u),g=this.layers.indexOf(u);this.layers[g]=w,this._style.layers[g].layout=s,this._layerByName[u.id]=w,this._uidToLayer.set(u.uid,w)}setStyleLayerVisibility(c,s){const u=this._layerByName[c];if(!u)return;const d=u.layout||{};d.visibility=s;const g=x._recreateLayer({type:u.typeName,id:u.id,source:u.source,"source-layer":u.sourceLayer,minzoom:u.minzoom,maxzoom:u.maxzoom,filter:u.filter,layout:d,paint:u.paint},u),_=this.layers.indexOf(u);this.layers[_]=g,this._style.layers[_].layout=d,this._layerByName[u.id]=g,this._uidToLayer.set(u.uid,g)}getStyleLayerVisibility(c){var u,d;const s=this._layerByName[c];return s?null!=(d=null==(u=s.layout)?void 0:u.visibility)?d:"visible":"none"}_recomputeZValues(){const c=this.layers,s=1/(c.length+1);for(let u=0;u<c.length;u++)c[u].z=1-(1+u)*s}_identifyRefLayers(){var d,w;const c=[],s=[];let u=0;for(const g of this.layers){const _=g.layout;if(g.type===D.fR.FILL){const l=g;let N=g.source+"|"+g.sourceLayer;N+="|"+(null!=(d=null==_?void 0:_.visibility)?d:""),N+="|"+g.minzoom,N+="|"+g.maxzoom,N+="|"+JSON.stringify(g.filter),(l.hasDataDrivenFill||l.hasDataDrivenOutline)&&(N+="|"+u),c.push({key:N,layer:g})}else if(g.type===D.fR.LINE){const l=g,N=g.paint,P=null!=N&&(null!=N["line-pattern"]||null!=N["line-dasharray"]);let k=g.source+"|"+g.sourceLayer;k+="|"+(null!=(w=null==_?void 0:_.visibility)?w:""),k+="|"+g.minzoom,k+="|"+g.maxzoom,k+="|"+JSON.stringify(g.filter),k+="|"+(void 0!==_?_["line-cap"]:""),k+="|"+(void 0!==_?_["line-join"]:""),(l.hasDataDrivenLine||P)&&(k+="|"+u),s.push({key:k,layer:g})}++u}this._assignRefLayers(c),this._assignRefLayers(s)}_assignRefLayers(c){let s,u;c.sort((w,g)=>w.key<g.key?-1:w.key>g.key?1:0);const d=c.length;for(let w=0;w<d;w++){const g=c[w];if(g.key===s)g.layer.refLayerId=u;else if(s=g.key,u=g.layer.id,g.layer.type===D.fR.FILL){if(!g.layer.getPaintProperty("fill-outline-color"))for(let _=w+1;_<d;_++){const l=c[_];if(l.key!==s)break;if(l.layer.getPaintProperty("fill-outline-color")){c[w]=l,c[_]=g,u=l.layer.id;break}}}else if(g.layer.type===D.fR.LINE){let _=g.layer;for(let l=w+1;l<d;l++){const N=c[l];if(N.key!==s)break;const P=N.layer;(_.canUseThinTessellation&&!P.canUseThinTessellation||!_.canUseThinTessellation&&(P.getPaintProperty("line-pattern")||P.getPaintProperty("line-dasharray")))&&(_=P,c[w]=N,c[l]=g,u=N.layer.id)}}}}_create(c,s,u){const d=1-(1+s)*(1/(u.length+1)),w=this._runningId++;switch(c.type){case"background":return new z.Et(D.fR.BACKGROUND,c,d,w);case"fill":return new z.Le(D.fR.FILL,c,d,w);case"line":return new z.gf(D.fR.LINE,c,d,w);case"symbol":return new z.jG(D.fR.SYMBOL,c,d,w);case"raster":return console.warn(`Unsupported vector tile raster layer ${c.id}`),null;case"circle":return new z.sj(D.fR.CIRCLE,c,d,w)}return null}static _recreateLayer(c,s){switch(c.type){case"background":return new z.Et(D.fR.BACKGROUND,c,s.z,s.uid);case"fill":return new z.Le(D.fR.FILL,c,s.z,s.uid);case"line":return new z.gf(D.fR.LINE,c,s.z,s.uid);case"symbol":return new z.jG(D.fR.SYMBOL,c,s.z,s.uid);case"raster":return console.warn(`Unsupported vector tile raster layer ${c.id}`),null;case"circle":return new z.sj(D.fR.CIRCLE,c,s.z,s.uid)}return null}}},39351:(J,G,T)=>{T.d(G,{AI:()=>x,C1:()=>At,CQ:()=>Pt,CU:()=>It,Ex:()=>lt,I_:()=>s,Ip:()=>xt,Iv:()=>gt,Iw:()=>_t,MI:()=>Nt,SD:()=>dt,Tz:()=>ft,Uh:()=>Lt,V4:()=>Xt,XJ:()=>Dt,_6:()=>Ot,a:()=>Tt,aK:()=>wt,e0:()=>St,fL:()=>Rt,jk:()=>Ut,m4:()=>yt,oK:()=>mt,pU:()=>Kt,ru:()=>c,tQ:()=>Wt,uG:()=>Z,vw:()=>Y,xl:()=>vt,xm:()=>N});const x=1e-30,c=4294967295,s=512,N=29,lt=24,_t=8,vt=1,Kt=2,wt=3,yt=2,Z=1,Wt=1.05,Xt=5,It=6,Tt=1.15,Rt=2,Dt=8,xt=500,Nt=10,At=1024,Lt=2,Pt=0,ft=1,mt=4,St=8,gt=16,Ot=4,dt=1,Ut=4,Y=8}}]);
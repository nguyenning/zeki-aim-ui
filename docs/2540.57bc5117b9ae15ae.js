"use strict";var Te=Object.defineProperty,Me=Object.getOwnPropertySymbols,ye=Object.prototype.hasOwnProperty,Ce=Object.prototype.propertyIsEnumerable,De=(V,R,e)=>R in V?Te(V,R,{enumerable:!0,configurable:!0,writable:!0,value:e}):V[R]=e,me=(V,R)=>{for(var e in R||(R={}))ye.call(R,e)&&De(V,e,R[e]);if(Me)for(var e of Me(R))Ce.call(R,e)&&De(V,e,R[e]);return V};(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[2540],{34013:(V,R,e)=>{e.d(R,{I:()=>f,b:()=>u});var g=e(62208),W=e(99770),j=e(13934),p=e(78925),l=e(24255),v=e(10109),S=e(67022),U=e(33726),w=e(2166),_=e(95285),b=e(65787),y=e(17625),O=e(22355),t=e(35387),d=e(44835),n=e(16396);function u(a){const c=new O.kG,{vertex:m,fragment:P}=c;return(0,w.Sv)(m,a),c.include(l.w,a),c.attributes.add(n.T.POSITION,"vec3"),c.attributes.add(n.T.UV0,"vec2"),c.varyings.add("vpos","vec3"),a.hasMultipassTerrain&&c.varyings.add("depth","float"),m.uniforms.add(new _.A("textureCoordinateScaleFactor",A=>(0,g.pC)(A.texture)&&(0,g.pC)(A.texture.descriptor.textureCoordinateScaleFactor)?A.texture.descriptor.textureCoordinateScaleFactor:W.O)),m.code.add(y.H`
    void main(void) {
      vpos = position;
      ${a.hasMultipassTerrain?"depth = (view * vec4(vpos, 1.0)).z;":""}
      vTexCoord = uv0 * textureCoordinateScaleFactor;
      gl_Position = transformPosition(proj, view, vpos);
    }
  `),c.include(p.f5,a),c.include(v.l,a),P.uniforms.add([new t.A("tex",A=>A.texture),new b.p("opacity",A=>A.opacity)]),c.varyings.add("vTexCoord","vec2"),a.output===j.H.Alpha?P.code.add(y.H`
    void main() {
      discardBySlice(vpos);
      ${a.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}

      float alpha = texture2D(tex, vTexCoord).a * opacity;
      if (alpha  < ${y.H.float(S.F)}) {
        discard;
      }

      gl_FragColor = vec4(alpha);
    }
    `):(P.include(U.Y),P.code.add(y.H`
    void main() {
      discardBySlice(vpos);
      ${a.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      gl_FragColor = texture2D(tex, vTexCoord) * opacity;

      if (gl_FragColor.a < ${y.H.float(S.F)}) {
        discard;
      }

      gl_FragColor = highlightSlice(gl_FragColor, vpos);
      ${a.transparencyPassType===d.A.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
    `)),c}const f=Object.freeze(Object.defineProperty({__proto__:null,build:u},Symbol.toStringTag,{value:"Module"}))},93310:(V,R,e)=>{e.d(R,{S:()=>a,b:()=>n});var g=e(4794),W=e(81801),j=e(13934),p=e(78925),l=e(24255),v=e(10109),S=e(67022),U=e(33726),w=e(2166),_=e(97139),b=e(69960),y=e(17625),O=e(22355),t=e(44835),d=e(16396);function n(c){const m=new O.kG,P=c.hasMultipassTerrain&&(c.output===j.H.Color||c.output===j.H.Alpha);m.include(l.w,c),m.include(W.A,c),m.include(p.f5,c);const{vertex:A,fragment:x}=m;return x.include(U.Y),(0,w.Sv)(A,c),x.uniforms.add(new b.N("uColor",H=>H.color)),m.attributes.add(d.T.POSITION,"vec3"),m.varyings.add("vWorldPosition","vec3"),P&&m.varyings.add("depth","float"),c.screenSizeEnabled&&m.attributes.add(d.T.OFFSET,"vec3"),c.shadingEnabled&&((0,w._8)(A),m.attributes.add(d.T.NORMAL,"vec3"),m.varyings.add("vViewNormal","vec3")),A.code.add(y.H`
    void main(void) {
      vWorldPosition = ${c.screenSizeEnabled?"screenSizeScaling(offset, position)":"position"};
  `),c.shadingEnabled&&A.code.add(y.H`vec3 worldNormal = normal;
vViewNormal = (viewNormal * vec4(worldNormal, 1)).xyz;`),A.code.add(y.H`
    ${P?"depth = (view * vec4(vWorldPosition, 1.0)).z;":""}
    gl_Position = transformPosition(proj, view, vWorldPosition);
  }
  `),P&&m.include(v.l,c),x.code.add(y.H`
    void main() {
      discardBySlice(vWorldPosition);
      ${P?"terrainDepthTest(gl_FragCoord, depth);":""}
    `),c.shadingEnabled?(x.uniforms.add(new _.J("shadingDirection",H=>H.shadingDirection)),x.uniforms.add(new b.N("shadedColor",H=>function u(c,m){const P=1-c[3],A=c[3]+m[3]*P;return 0===A?(f[3]=A,f):(f[0]=(c[0]*c[3]+m[0]*m[3]*P)/A,f[1]=(c[1]*c[3]+m[1]*m[3]*P)/A,f[2]=(c[2]*c[3]+m[2]*m[3]*P)/A,f[3]=m[3],f)}(H.shadingTint,H.color))),x.code.add(y.H`vec3 viewNormalNorm = normalize(vViewNormal);
float shadingFactor = 1.0 - clamp(-dot(viewNormalNorm, shadingDirection), 0.0, 1.0);
vec4 finalColor = mix(uColor, shadedColor, shadingFactor);`)):x.code.add(y.H`vec4 finalColor = uColor;`),x.code.add(y.H`
      ${c.output===j.H.ObjectAndLayerIdColor?y.H`finalColor.a = 1.0;`:""}
      if (finalColor.a < ${y.H.float(S.b)}) {
        discard;
      }
      ${c.output===j.H.Alpha?y.H`gl_FragColor = vec4(finalColor.a);`:""}

      ${c.output===j.H.Color?y.H`gl_FragColor = highlightSlice(finalColor, vWorldPosition); ${c.transparencyPassType===t.A.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}`:""}
    }
    `),m}const f=(0,g.c)(),a=Object.freeze(Object.defineProperty({__proto__:null,build:n},Symbol.toStringTag,{value:"Module"}))},54865:(V,R,e)=>{e.d(R,{G:()=>p,e:()=>l});var g=e(62208),W=e(55915),j=e(53929);function p(v,S,U,w=!1){const _=(0,W.fM)(v,S);return(0,g.Wi)(_)?null:(_.hasZ&&!w||!(0,g.pC)(U)||(_.z=(0,g.Pt)((0,j.KO)(U,_),0)),_)}function l(v,S,U){U.warnOnce(`Failed to project analysis geometry (id: '${v.id}'), projection from spatial reference (wkid: '${S.wkid}') to view spatial reference is not supported. Projection may be possible after calling projection.load().`)}},45403:(V,R,e)=>{e.d(R,{Z:()=>C}),e(29132);var W=e(94573),j=e(61885),p=e(21286),l=e(62208),v=e(23841),S=e(52323),U=e(30217),w=e(550),_=e(28347),b=e(43703),y=e(67831),O=e(84161),t=e(28093),d=e(92383),n=e(55915),u=e(65401),f=e(13777),a=e(90014),c=e(70562),m=e(26242),P=e(84786),A=e(53929),x=e(26046),H=e(59598),G=e(97272),ie=e(23147),Q=e(34103),$=e(33786),q=e(72642);class C{constructor(s){var D;this.metadata=void 0,this._camera=new H.V,this._elevation={offset:0,override:null},this.collisionType={type:"point"},this.collisionPriority=0,this._renderObjects=new Array,this.autoScaleRenderObjects=!0,this._available=!0,this._noDisplayCount=0,this._radius=10,this._worldSized=!1,this.focusMultiplier=2,this.touchMultiplier=2.5,this.worldOriented=!1,this._modelTransform=(0,b.c)(),this._worldFrame=null,this._renderLocation=(0,t.c)(),this._renderLocationDirty=!0,this._location=new q.Z({x:0,y:0,z:0}),this._elevationAlignedLocation=new q.Z,this._elevationAlignedLocationDirty=!0,this.interactive=!0,this.selectable=!1,this.grabbable=!0,this.cursor=null,this.grabCursor=null,this._grabbing=!1,this.dragging=!1,this._hovering=!1,this._selected=!1,this._state=$.jg.None,this._focused=!1,this.events=new j.Z.EventEmitter,this._screenLocation={screenPointArray:(0,v.s1)(),renderScreenPointArray:(0,v.J$)(),pixelSize:0},this._screenLocationDirty=!0,this._engineResourcesAddedToStage=!1,this._attached=!1,this._location.spatialReference=s.view.spatialReference;for(const B in s)this[B]=s[B];const i=null==(D=this.view.state)?void 0:D.camera;i&&this._camera.copyFrom(i)}destroy(){this._removeResourcesFromStage(),this._engineResources=null,this.view=null,this._camera=null}get _stage(){var s;return null==(s=this.view)?void 0:s._stage}get elevationInfo(){return this._elevationInfo}set elevationInfo(s){this._elevationInfo=s,this._elevationAlignedLocationDirty=!0,this._renderLocationDirty=!0,this._updateEngineObject()}get renderObjects(){return this._renderObjects}set renderObjects(s){this._removeResourcesFromStage(),this._engineResources=null,this._renderObjects=s.slice(),this._updateEngineObject()}set available(s){s!==this._available&&(this._available=s,this._updateEngineObject())}get available(){return this._available}disableDisplay(){return this._noDisplayCount++,1===this._noDisplayCount&&this._updateEngineObject(),{remove:(0,S.IH)(()=>{this._noDisplayCount--,0===this._noDisplayCount&&this._updateEngineObject()})}}set radius(s){s!==this._radius&&(this._radius=s,this._updateEngineObject())}get radius(){return this._radius}set worldSized(s){s!==this._worldSized&&(this._worldSized=s,this._updateEngineObject())}get worldSized(){return this._worldSized}get modelTransform(){return this._modelTransform}set modelTransform(s){F(s)&&(this._screenLocationDirty=!0),(0,_.c)(this._modelTransform,s),this._updateEngineObject()}get renderLocation(){return this._renderLocationDirty&&(this._renderLocationDirty=!1,this.view.renderCoordsHelper.toRenderCoords(this.elevationAlignedLocation,this._renderLocation),this.worldOriented?(this._worldFrame||(this._worldFrame=(0,b.c)()),function k(J,s,i){switch(J.viewingMode){case"local":return(0,_.i)(i),!0;case"global":{const D=(0,d.Iu)(J.renderCoordsHelper.spatialReference);(0,n.PR)(s,0,z,0,D.radius),(0,n.yH)((0,p.Vl)(z[0]),(0,p.Vl)(z[1]),i)}}}(this.view,this._renderLocation,this._worldFrame)):this._worldFrame&&(this._worldFrame=null)),this._renderLocation}set renderLocation(s){this.view.renderCoordsHelper.fromRenderCoords(s,this._location),this.elevationAlignedLocation=this._location}get location(){return this._location}set location(s){(0,P.WG)(s,this._location),this._notifyLocationChanged()}_notifyLocationChanged(){this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!0,this._updateEngineObject(),this.events.emit("location-update",{location:this._location})}get elevationAlignedLocation(){return this._elevationAlignedLocationDirty?(this._evaluateElevationAlignment(),this._updateElevationAlignedLocation(),this._elevationAlignedLocation):this._elevationAlignedLocation}set elevationAlignedLocation(s){(0,P.WG)(s,this._location),this._evaluateElevationAlignment(),this._location.z-=this._elevation.offset,this._updateElevationAlignedLocation(),this._updateEngineObject(),this.events.emit("location-update",{location:this._location})}_updateElevationAlignedLocation(){const s=(0,l.pC)(this._elevation.override)?this._elevation.override:this.location.z||0;this._elevationAlignedLocation.x=this.location.x,this._elevationAlignedLocation.y=this.location.y,this._elevationAlignedLocation.z=s+this._elevation.offset,this._elevationAlignedLocation.spatialReference=(0,P.D)(this.location.spatialReference),this._renderLocationDirty=!0,this._screenLocationDirty=!0,this._elevationAlignedLocationDirty=!1}grabbableForEvent(){return!0}get grabbing(){return this._grabbing}set grabbing(s){s!==this._grabbing&&(this._grabbing=s,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get hovering(){return this._hovering}set hovering(s){s!==this._hovering&&(this._hovering=s,this._setFocused(this._hovering||this._grabbing),this._updateEngineObject())}get selected(){return this._selected}set selected(s){s!==this._selected&&(this._selected=s,this._updateEngineObject(),this.events.emit("select-changed",{action:s?"select":"deselect"}))}get state(){return this._state}set state(s){s!==this._state&&(this._state=s,this._updateEngineObject())}updateStateEnabled(s,i){i?this.state|=s:this.state&=~s}_setFocused(s){s!==this._focused&&(this._focused=s,this.events.emit("focus-changed",{action:!0===s?"focus":"unfocus"}))}get focused(){return this._focused}get screenLocation(){return this._ensureScreenLocation(),this._screenLocation}_ensureScreenLocation(){if(!this._screenLocationDirty)return;let s;if(this._screenLocation.pixelSize=this._camera.computeScreenPixelSizeAt(this.renderLocation),this._screenLocationDirty=!1,F(this._modelTransform)){const i=this._calculateModelTransformOffset(de);s=(0,O.a)(i,i,this.renderLocation)}else s=this.renderLocation;this._camera.projectToRenderScreen(s,this._screenLocation.renderScreenPointArray),this._camera.renderToScreen(this._screenLocation.renderScreenPointArray,this._screenLocation.screenPointArray)}get applyObjectTransform(){return this._applyObjectTransform}set applyObjectTransform(s){this._applyObjectTransform=s,this._screenLocationDirty=!0,this._updateEngineObject()}get attached(){return this._attached}intersectionDistance(s,i){var L;if(!this.available)return null;const D=(0,v.md)(s,ne),B=this._getCollisionRadius(i),N=-1*this.collisionPriority;switch(this.collisionType.type){case"point":if((0,y.k)(this.screenLocation.screenPointArray,D)<B*B)return this.screenLocation.renderScreenPointArray[2]+N;break;case"line":{const K=this.collisionType.paths,X=this._getWorldToScreenObjectScale(),Z=this._calculateObjectTransform(X,M),ee=B*this.screenLocation.pixelSize,te=(0,x.u4)(this._camera,D,E);if((0,l.Wi)(te))return null;for(const Y of K){if(0===Y.length)continue;const he=(0,O.m)(z,Y[0],Z);for(let ue=1;ue<Y.length;ue++){const le=(0,O.m)(re,Y[ue],Z),ce=(0,f.Gr)((0,f.zk)(he,le,T),te);if(null!=ce&&ce<ee*ee){const _e=(0,O.a)(m.WM.get(),he,le);(0,O.g)(_e,_e,.5);const ve=(0,v.So)(m.WM.get());return this._camera.projectToRenderScreen(_e,ve),ve[2]+N}(0,O.c)(he,le)}}break}case"disc":{const K=this.collisionType.direction,X=null!=(L=this.collisionType.offset)?L:t.Z,Z=this._getWorldToScreenObjectScale(),ee=this._calculateObjectTransform(Z,M),te=B*this.screenLocation.pixelSize,Y=(0,x.u4)(this._camera,D,E);if((0,l.Wi)(Y))return null;const he=(0,U.f)(o,ee),ue=(0,O.t)(ae,K,he),le=(0,O.m)(oe,X,ee);(0,a.Yq)(le,ue,I);const ce=se;if((0,a.BR)(I,Y,ce)&&(0,O.d)(ce,le)<te*te)return this.screenLocation.renderScreenPointArray[2]+N;break}case"ribbon":{const{paths:K,direction:X}=this.collisionType,Z=this._getWorldToScreenObjectScale(),ee=this._calculateObjectTransform(Z,M),te=B*this._camera.computeScreenPixelSizeAt(this.renderLocation),Y=(0,x.u4)(this._camera,D,E);if((0,l.Wi)(Y))return null;const he=(0,U.f)(o,ee),ue=(0,O.t)(ae,X,he),le=this._calculateModelTransformPosition(oe);(0,a.Yq)(le,ue,I);const ce=se;if(!(0,a.BR)(I,Y,ce))break;for(const _e of K){if(0===_e.length)continue;const ve=(0,O.m)(z,_e[0],ee);for(let Ee=1;Ee<_e.length;Ee++){const pe=(0,O.m)(re,_e[Ee],ee),Oe=(0,f.Jk)((0,f.zk)(ve,pe,T),ce);if(null!=Oe&&Oe<te*te){const fe=(0,O.a)(m.WM.get(),ve,pe);(0,O.g)(fe,fe,.5);const Pe=(0,v.So)(m.WM.get());return this._camera.projectToRenderScreen(fe,Pe),Pe[2]+N}(0,O.c)(ve,pe)}}break}default:(0,W.Bg)(this.collisionType)}return null}attach(s={manipulator3D:{}}){const i=this._stage;if(!i)return;const D=s.manipulator3D;if((0,l.Wi)(D.engineLayerId)){const B=new Q.F({pickable:!1,updatePolicy:ie.j.SYNC});i.add(B),D.engineLayerId=B.id,this._engineLayer=B}else null!=i&&i.getObject&&(this._engineLayer=i.getObject(D.engineLayerId));D.engineLayerReferences=(D.engineLayerReferences||0)+1,this._materialIdReferences=D.materialIdReferences,(0,l.Wi)(this._materialIdReferences)&&(this._materialIdReferences=new Map,D.materialIdReferences=this._materialIdReferences),this._camera.copyFrom(this.view.state.camera),this._attached=!0,this._updateEngineObject(),(0,n.Up)(this._location.spatialReference,this.view.spatialReference)||(this.location=new q.Z({x:0,y:0,z:0,spatialReference:this.view.spatialReference}))}detach(s={manipulator3D:{}}){const i=s.manipulator3D;i.engineLayerReferences--;const D=0===i.engineLayerReferences;D&&(i.engineLayerId=null),this._removeResourcesFromStage(D),this._engineResources=null,this._engineLayer=null,this._materialIdReferences=null,this._attached=!1}onViewChange(){this._camera.copyFrom(this.view.state.camera),this._screenLocationDirty=!0,this._updateEngineObject()}onElevationChange(s){(0,n.nF)(this.location,ge,s.spatialReference)&&(0,u.Qn)(s.extent,ge)&&this._notifyLocationChanged()}_evaluateElevationAlignment(){if((0,l.Wi)(this.elevationInfo))return;let s=null,i=0;const D=(0,l.Pt)(this.elevationInfo.offset,0);switch(this.elevationInfo.mode){case"on-the-ground":s=(0,l.Pt)((0,A.KO)(this.view.elevationProvider,this.location,"ground"),0);break;case"relative-to-ground":i=(0,l.Pt)((0,A.KO)(this.view.elevationProvider,this.location,"ground"),0)+D;break;case"relative-to-scene":i=(0,l.Pt)((0,A.KO)(this.view.elevationProvider,this.location,"scene"),0)+D;break;case"absolute-height":i=D}return i!==this._elevation.offset||s!==this._elevation.override?(this._elevation.offset=i,void(this._elevation.override=s)):void 0}_updateEngineObject(){if(!this._attached)return;if(!this.available)return void this._removeResourcesFromStage();const s=this._getWorldToScreenObjectScale(),i=M;if(!0===this.autoScaleRenderObjects){const L=this._getFocusedSize(this._radius,this.focused)*s;this._calculateObjectTransform(L,i)}else this._calculateObjectTransform(s,i);const{objectsByState:D}=this._ensureEngineResources(),B=(this.focused?$.Q9.Focused:$.Q9.Unfocused)|(this.selected?$.Q9.Selected:$.Q9.Unselected),N=this._noDisplayCount>0;for(const{stateMask:L,objects:K}of D){if(N){for(const Y of K)Y.visible=!1;continue}const te=!((L&$.jg.All)!==$.jg.None)||(this.state&L)==(L&$.jg.All);if((L&$.Q9.All)!==$.Q9.None&&(B&L)!=(L&$.Q9.All)||!te)for(const Y of K)Y.visible=!1;else for(const Y of K)Y.visible=!0,Y.transformation=i}}_ensureEngineResources(){if((0,l.Wi)(this._engineResources)){const s=(0,l.Wg)(this._engineLayer),i=[],D=new Set;this.renderObjects.forEach(({geometry:{material:L}})=>{D.has(L)||(i.push(L),D.add(L))});const B=new Map;this._renderObjects.forEach(L=>{const K=new G.T({castShadow:!1,geometries:[L.geometry]}),X=B.get(L.stateMask)||[];X.push(K),B.set(L.stateMask,X)});const N=[];B.forEach((L,K)=>N.push({stateMask:K,objects:L})),this._engineResources={objectsByState:N,layer:s,materials:i}}return this._addResourcesToStage(),this._engineResources}_addResourcesToStage(){const s=this._stage;if(this._engineResourcesAddedToStage||(0,l.Wi)(this._engineResources)||!s)return;const{objectsByState:i,layer:D,materials:B}=this._engineResources;B.forEach(N=>{const L=(0,l.Wg)(this._materialIdReferences),K=L.get(N.id)||0;0===K&&s.add(N),L.set(N.id,K+1)}),i.forEach(({objects:N})=>{D.addMany(N),s.addMany(N)}),this._engineResourcesAddedToStage=!0}_removeResourcesFromStage(s=!1){const i=this._stage;if(!this._engineResourcesAddedToStage||(0,l.Wi)(this._engineResources)||!i)return;const{objectsByState:D,layer:B,materials:N}=this._engineResources;D.forEach(({objects:L})=>{B.removeMany(L),i.removeMany(L)}),N.forEach(L=>{const K=(0,l.Wg)(this._materialIdReferences),X=K.get(L.id);1===X?(i.remove(L),K.delete(L.id)):K.set(L.id,X-1)}),s&&i.remove(B),this._engineResourcesAddedToStage=!1}_getCollisionRadius(s){return this._getFocusedSize(this.radius,!0)*("touch"===s?this.touchMultiplier:1)}_getFocusedSize(s,i){return s*(i?this.focusMultiplier:1)}_getWorldToScreenObjectScale(){return this._worldSized?1:this.screenLocation.pixelSize}_calculateModelTransformPosition(s){const i=this._getWorldToScreenObjectScale(),D=this._calculateObjectTransform(i,h);return(0,O.s)(s,D[12],D[13],D[14])}_calculateModelTransformOffset(s){const i=this._calculateModelTransformPosition(s);return(0,O.b)(s,i,this.renderLocation)}_calculateObjectTransform(s,i){return(0,_.s)(i,s,0,0,0,0,s,0,0,0,0,s,0,0,0,0,1),this._worldFrame&&(0,_.m)(i,i,this._worldFrame),(0,_.m)(i,i,this._modelTransform),i[12]+=this.renderLocation[0],i[13]+=this.renderLocation[1],i[14]+=this.renderLocation[2],i[15]=1,(0,l.pC)(this._applyObjectTransform)&&this._applyObjectTransform(i),i}get test(){let s=!1;if((0,l.pC)(this._engineResources))for(const i in this._engineResources.objectsByState){const D=this._engineResources.objectsByState[i];for(const B of D.objects)if(B.visible){s=!0;break}if(s)break}return{areAnyResourcesVisible:s}}}function F(J){return 0!==J[12]||0!==J[13]||0!==J[14]}const ne=(0,v.s1)(),T=(0,f.Ue)(),E=(0,c.Ue)(),o=(0,w.c)(),h=(0,b.c)(),M=(0,b.c)(),I=(0,a.Ue)(),z=(0,t.c)(),re=(0,t.c)(),se=(0,t.c)(),ae=(0,t.c)(),oe=(0,t.c)(),de=(0,t.c)(),ge=new q.Z({x:0,y:0,z:0,spatialReference:null})},40345:(V,R,e)=>{e.d(R,{r:()=>W});var g=e(33786);class W{constructor(p,l=g.Q9.None){this.geometry=p,this.stateMask=l}}},19142:(V,R,e)=>{e.d(R,{Aq:()=>C,Bz:()=>ie,EA:()=>A,Gd:()=>q,Ju:()=>G,X9:()=>$,aD:()=>Q,du:()=>F,qJ:()=>x,u2:()=>k});var g=e(62208),W=e(28347),j=e(84161),p=e(28093),l=e(4794),v=e(26242),S=e(84786),U=e(45403),w=e(40345),_=e(67225),b=e(94255),y=e(42743),O=e(41120),t=e(57521),d=e(40723),n=e(16396),u=e(92972),f=e(79967),a=e(49580),c=e(92222),m=e(81040),P=e(33786);function A(T,E=d.yD.OccludeAndTransparent,o=!0){const h=(0,l.f)(T[0],T[1],T[2],T.length>3?T[3]:1),M=T[3]<1;return o?new m.Q({color:h,transparent:M,writeDepth:!0,cullFace:y.Vr.Back,renderOccluded:E}):new u.E({color:h,transparent:M,writeDepth:!0,cullFace:y.Vr.Back,renderOccluded:E})}function x(T,E=d.yD.OccludeAndTransparent){const o=(0,l.f)(T[0],T[1],T[2],4===T.length?T[3]:1);return new u.E({color:o,transparent:!0,writeDepth:!0,cullFace:y.Vr.Front,renderOccluded:E})}const H=Object.freeze({calloutLength:40,calloutWidth:1,discRadius:27,focusMultiplier:1.1,calloutColor:(0,p.f)(1,.5,0)});function G(T,E){const o=new U.Z({view:T,autoScaleRenderObjects:!1,collisionPriority:1,metadata:E.metadata});return ie(o,E),o}function ie(T,E){var s,i,D,B,N,L,K,X;const o=null!=(i=E.material)?i:new f.j({transparent:!0,writeDepth:!1,textureId:null==(s=E.texture)?void 0:s.id,renderOccluded:d.yD.Opaque}),h=null!=(D=E.focusMultiplier)?D:H.focusMultiplier,M=null!=(B=E.calloutLength)?B:H.calloutLength,I=H.discRadius*(null!=(N=E.discScale)?N:1),z=I*h,re=(Z,ee)=>{const te=[0,1,2,2,3,0];return new O.Z(ee,[[n.T.POSITION,new b.a([M-Z,-Z,0,M+Z,-Z,0,M+Z,Z,0,M-Z,Z,0],3,!0)],[n.T.UV0,new b.a([0,0,1,0,1,1,0,1],2,!0)]],[[n.T.POSITION,te],[n.T.UV0,te]])},se=H.calloutColor,ae=null!=(L=E.calloutWidth)?L:H.calloutWidth,oe=new(ae>1?c.U:a.Y)({width:ae,color:(0,l.f)(se[0],se[1],se[2],null!=(K=E.calloutOpacity)?K:1),renderOccluded:d.yD.OccludeAndTransparent}),de=(0,t.rh)(oe,[[0,0,0],[M-I,0,0]]),ge=(0,t.rh)(oe,[[0,0,0],[M-z,0,0]]),J=null!=(X=E.customStateMask)?X:P.jg.None;T.collisionType={type:"disc",direction:[0,0,1],offset:[M,0,0]},T.focusMultiplier=h,T.metadata=E.metadata,T.radius=I,T.renderObjects=[new w.r(re(I,o),P.Q9.Unfocused|J),new w.r(de,P.Q9.Unfocused|J),new w.r(re(z,o),P.Q9.Focused|J),new w.r(ge,P.Q9.Focused|J)]}function Q(T,E,o=1,h=P.jg.None){const M=A((0,l.f)(E[0],E[1],E[2],null!=o?o:1)),I=[new w.r((0,t.PI)(M,1,32,32),h)];return new U.Z({view:T,renderObjects:I})}const $=Object.freeze({autoScaleRenderObjects:!1,worldSized:!0});function q(T,E,o,h){const M=(0,j.b)(v.WM.get(),T,o),I=C(M,(0,j.f)(v.WM.get(),h,M),o,v.MP.get());(0,W.a)(I,I);const z=(0,j.m)(v.WM.get(),E,I);return Math.atan2(z[1],z[0])}function C(T,E,o,h){const M=(0,j.n)(v.WM.get(),T),I=(0,j.n)(v.WM.get(),E),z=(0,j.f)(v.WM.get(),M,I);return h[0]=M[0],h[1]=M[1],h[2]=M[2],h[3]=0,h[4]=I[0],h[5]=I[1],h[6]=I[2],h[7]=0,h[8]=z[0],h[9]=z[1],h[10]=z[2],h[11]=0,h[12]=o[0],h[13]=o[1],h[14]=o[2],h[15]=1,h}function F(T,E){const o=T.getViewForGraphic(E);return(0,g.pC)(o)&&"computeAttachmentOrigin"in o?o.computeAttachmentOrigin(E,T.spatialReference):null}function k(T,E,o){const h=F(T,o);(0,g.pC)(h)?E.elevationAlignedLocation=h:function ne(T,E){if((0,g.Wi)(E))return;const o="mesh"===E.type?E.anchor:(0,_.zE)(E);(0,g.Wi)(o)||(T.location=(0,S.kB)(o))}(E,o.geometry)}},87469:(V,R,e)=>{e.d(R,{r:()=>b});var g=e(62208),W=e(28347),j=e(43703),p=e(84161),l=e(28093),v=e(4794),S=e(53928),U=e(79020),w=e(40723),_=e(92222);class b extends S._{constructor(t,d){super(t),this._hasExternalMaterial=!1,this._hasExternalMaterial=(0,g.pC)(d),this._material=(0,g.pC)(d)?d:new _.U({width:1,color:(0,v.f)(1,0,1,1),stippleOffColor:null,stipplePattern:null,stipplePreferContinuous:!0,isClosed:!1,falloff:0,innerColor:null,innerWidth:1,hasPolygonOffset:!1,renderOccluded:w.yD.OccludeAndTransparent,writeDepth:!0}),this.applyProps(t)}setGeometryFromRenderSpacePoint(t,d=1e3){this.geometry=[[[t[0]-d,t[1]+0,t[2]+0],[t[0]+d,t[1]+0,t[2]+0]],[[t[0]-0,t[1]-d,t[2]+0],[t[0]+0,t[1]+d,t[2]+0]],[[t[0]-0,t[1]+0,t[2]-d],[t[0]+0,t[1]+0,t[2]+d]]]}setGeometryFromExtent(t){const d=this.view.spatialReference,n=(0,l.c)(),u=(0,l.c)(),f=100,a=[];(0,p.s)(n,t[0],t[1],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),(0,p.s)(n,t[2],t[1],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),(0,p.s)(n,t[2],t[3],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),(0,p.s)(n,t[0],t[3],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),(0,p.s)(n,t[0],t[1],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),(0,p.s)(n,t[0],t[1],f),this.view.renderCoordsHelper.toRenderCoords(n,d,u),a.push([u[0],u[1],u[2]]),this.geometry=[a]}setGeometryFromFrustum(t){const d=[];t.lines.forEach(n=>{d.push([n.origin[0],n.origin[1],n.origin[2]]),d.push([n.endpoint[0],n.endpoint[1],n.endpoint[2]])}),this.geometry=[d]}setGeometryFromBoundedPlane(t){const d=[],n=t.origin,u=t.basis1,f=t.basis2,a=.5,c=(0,l.c)(),m=(0,l.c)(),P=(0,l.c)(),A=(0,l.c)();c[0]=n[0]-u[0]*a-f[0]*a,c[1]=n[1]-u[1]*a-f[1]*a,c[2]=n[2]-u[2]*a-f[2]*a,m[0]=n[0]-u[0]*a+f[0]*a,m[1]=n[1]-u[1]*a+f[1]*a,m[2]=n[2]-u[2]*a+f[2]*a,P[0]=n[0]+u[0]*a+f[0]*a,P[1]=n[1]+u[1]*a+f[1]*a,P[2]=n[2]+u[2]*a+f[2]*a,A[0]=n[0]+u[0]*a-f[0]*a,A[1]=n[1]+u[1]*a-f[1]*a,A[2]=n[2]+u[2]*a-f[2]*a,d.push([c[0],c[1],c[2]]),d.push([m[0],m[1],m[2]]),d.push([P[0],P[1],P[2]]),d.push([A[0],A[1],A[2]]),d.push([c[0],c[1],c[2]]),this.geometry=[d]}setGeometryFromSegment(t){const d=t.endRenderSpace;this.transform=(0,W.f)(y,d);const{points:n}=t.createRenderGeometry(d,this.view.renderCoordsHelper);this.geometry=[n]}setGeometryFromSegments(t,d=l.Z){this.transform=(0,W.f)(y,d),this.geometry=t.map(n=>n.createRenderGeometry(d,this.view.renderCoordsHelper).points)}getTransformedGeometry(){return(0,g.Wi)(this._geometry)?null:this._geometry.map(t=>t.map(d=>(0,p.m)((0,l.c)(),d,this.transform)))}get renderOccluded(){return this._material.parameters.renderOccluded}set renderOccluded(t){this._material.setParameters({renderOccluded:t})}get geometry(){return this._geometry}set geometry(t){this._geometry=t,this.recreateGeometry()}get width(){return this._material.parameters.width}set width(t){this._material.setParameters({width:t})}get color(){return this._material.parameters.color}set color(t){this._material.setParameters({color:(0,v.d)(t)})}get innerWidth(){return this._material.parameters.innerWidth}set innerWidth(t){this._material.setParameters({innerWidth:t})}get innerColor(){return this._material.parameters.innerColor}set innerColor(t){this._material.setParameters({innerColor:(0,g.pC)(t)?(0,v.d)(t):null})}get stipplePattern(){return this._material.parameters.stipplePattern}set stipplePattern(t){(0,g.pC)(this._material)&&this._material.setParameters({stipplePattern:t})}get stippleOffColor(){return this._material.parameters.stippleOffColor}set stippleOffColor(t){this._material.setParameters({stippleOffColor:(0,g.pC)(t)?(0,v.d)(t):null})}get stipplePreferContinuous(){return this._material.parameters.stipplePreferContinuous}set stipplePreferContinuous(t){this._material.setParameters({stipplePreferContinuous:t})}get writeDepthEnabled(){return this._material.parameters.writeDepth}set writeDepthEnabled(t){this._material.setParameters({writeDepth:t})}get falloff(){return this._material.parameters.falloff}set falloff(t){this._material.setParameters({falloff:t})}get polygonOffset(){return this._material.parameters.hasPolygonOffset}set polygonOffset(t){this._material.setParameters({hasPolygonOffset:t})}createExternalResources(){}destroyExternalResources(){}createGeometries(t){for(const d of(0,U.c)(this.geometry)){const n=(0,U.Y)((0,g.Wg)(this._material),d);t.addGeometry(n)}}forEachExternalMaterial(t){this._hasExternalMaterial||t((0,g.Wg)(this._material))}}const y=(0,j.c)()},53928:(V,R,e)=>{e.d(R,{_:()=>U});var g=e(62208),W=e(28347),j=e(43703),p=e(68604),l=e(97272),v=e(23147),S=e(34103);class U extends p.l{constructor(_){super(_.view),this._resources=null,this._transform=(0,j.c)()}get object(){return(0,g.pC)(this._resources)?this._resources.object:null}get transform(){return this._transform}set transform(_){(0,W.c)(this._transform,_),(0,g.pC)(this._resources)&&(this._resources.object.transformation=this._transform)}recreate(){this.attached&&this.createResources()}recreateGeometry(){if((0,g.Wi)(this._resources))return;const _=this._resources.object,b=this.view._stage;b.removeMany(_.geometries),_.removeAllGeometries(),this.createGeometries(_),_.visible=this.visible,b.addMany(_.geometries)}createResources(){this.destroyResources();const _=this.view._stage;if(!_)return;const b=new S.F({pickable:!1,updatePolicy:v.j.SYNC});_.add(b);const y=new l.T({castShadow:!1});y.transformation=this._transform,this.createExternalResources(),this.createGeometries(y),_.addMany(y.geometries),this.forEachExternalMaterial(O=>_.add(O)),_.add(y),b.add(y),y.visible=this.visible,this._resources={layer:b,object:y}}destroyResources(){const _=this.view._stage;!(0,g.Wi)(this._resources)&&_&&(_.remove(this._resources.object),_.remove(this._resources.layer),this.forEachExternalMaterial(b=>{_.remove(b),b.dispose()}),_.removeMany(this._resources.object.geometries),this._resources.object.dispose(),this.destroyExternalResources(),this._resources=null)}updateVisibility(_){(0,g.Wi)(this._resources)||(this._resources.object.visible=_)}}},68604:(V,R,e)=>{e.d(R,{l:()=>W});var g=e(32917);class W{constructor(p){this._attached=!1,this._resourcesCreated=!1,this._visible=!0,this.view=p,this._handle=(0,g.YP)(()=>this.view.ready,l=>{this._resourcesCreated&&(l?this._createResources():this._destroyResources())})}applyProps(p){let l=!1;for(const v in p)v in this?"attached"===v?l=p[v]:this[v]=p[v]:console.error("Cannot set unknown property",v);this.attached=l}destroy(){this.attached=!1,this._handle.remove()}get attached(){return this._attached}set attached(p){p!==this._attached&&this.view._stage&&(this._attached=p,this._attached&&!this._resourcesCreated?this._createResources():!this._attached&&this._resourcesCreated&&this._destroyResources(),this.onAttachedChange(p))}onAttachedChange(p){}get visible(){return this._visible}set visible(p){p!==this._visible&&(this._visible=p,this.attached&&this.updateVisibility(p))}_createResources(){this.createResources(),this._resourcesCreated=!0,this.updateVisibility(this.visible)}_destroyResources(){this.destroyResources(),this._resourcesCreated=!1}}},81801:(V,R,e)=>{e.d(R,{A:()=>p});var g=e(2166),W=e(65787),j=e(17625);function p(l,v){if(!v.screenSizeEnabled)return;const S=l.vertex;(0,g.hY)(S,v),S.uniforms.add(new W.p("perScreenPixelRatio",(U,w)=>w.camera.perScreenPixelRatio)),S.uniforms.add(new W.p("screenSizeScale",U=>U.screenSizeScale)),S.code.add(j.H`float computeRenderPixelSizeAt( vec3 pWorld ){
vec3 viewForward = - vec3(view[0][2], view[1][2], view[2][2]);
float viewDirectionDistance = abs(dot(viewForward, pWorld - cameraPosition));
return viewDirectionDistance * perScreenPixelRatio;
}
vec3 screenSizeScaling(vec3 position, vec3 anchor){
return position * screenSizeScale * computeRenderPixelSizeAt(anchor) + anchor;
}`)}},79967:(V,R,e)=>{e.d(R,{j:()=>ie});var g=e(13934),W=e(42743),j=e(33470),p=e(40723),l=e(88569),v=e(5894),S=e(2770),U=e(66131),w=e(15842),_=e(17626),y=(e(17625),e(651)),O=e(91056),t=e(87601),d=e(39114),n=e(12407),u=e(64127),f=e(44835),a=e(41528),c=e(34013),m=e(67969),P=e(2078);class x extends O.A{initializeProgram(C){return new n.$(C.rctx,x.shader.get().build(this.configuration),d.i)}_setPipelineState(C,F){const k=this.configuration,ne=C===f.A.NONE,T=C===f.A.FrontFace;return(0,P.sm)({blending:k.output!==g.H.Color&&k.output!==g.H.Alpha||!k.transparent?null:ne?H:(0,l.j7)(C),culling:(0,P.zp)(k.cullFace),depthTest:{func:(0,l.Bh)(C)},depthWrite:ne?k.writeDepth?P.LZ:null:(0,l.K5)(C),colorWrite:P.BK,stencilWrite:k.hasOccludees?u.s3:null,stencilTest:k.hasOccludees?F?u.eD:u.RY:null,polygonOffset:ne||T?null:(0,l.je)(k.enableOffset)})}initializePipeline(){return this._occludeePipelineState=this._setPipelineState(this.configuration.transparencyPassType,!0),this._setPipelineState(this.configuration.transparencyPassType,!1)}getPipelineState(C,F){return F?this._occludeePipelineState:super.getPipelineState(C,F)}}x.shader=new y.J(c.I,()=>e.e(8586).then(e.bind(e,18586)));const H=(0,P.if)(m.zi.ONE,m.zi.ONE_MINUS_SRC_ALPHA);class G extends a.W{constructor(){super(...arguments),this.output=g.H.Color,this.cullFace=W.Vr.None,this.hasSlicePlane=!1,this.transparent=!1,this.enableOffset=!0,this.writeDepth=!0,this.hasOccludees=!1,this.transparencyPassType=f.A.NONE,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,_._)([(0,t.o)({count:g.H.COUNT})],G.prototype,"output",void 0),(0,_._)([(0,t.o)({count:W.Vr.COUNT})],G.prototype,"cullFace",void 0),(0,_._)([(0,t.o)()],G.prototype,"hasSlicePlane",void 0),(0,_._)([(0,t.o)()],G.prototype,"transparent",void 0),(0,_._)([(0,t.o)()],G.prototype,"enableOffset",void 0),(0,_._)([(0,t.o)()],G.prototype,"writeDepth",void 0),(0,_._)([(0,t.o)()],G.prototype,"hasOccludees",void 0),(0,_._)([(0,t.o)({count:f.A.COUNT})],G.prototype,"transparencyPassType",void 0),(0,_._)([(0,t.o)()],G.prototype,"hasMultipassTerrain",void 0),(0,_._)([(0,t.o)()],G.prototype,"cullAboveGround",void 0);class ie extends w.c{constructor(C){super(C,new $),this.supportsEdges=!0,this._configuration=new G}getConfiguration(C,F){return this._configuration.output=C,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.hasOccludees=this.parameters.hasOccludees,this._configuration.transparencyPassType=F.transparencyPassType,this._configuration.enableOffset=F.camera.relativeElevation<l.ve,this._configuration.hasMultipassTerrain=F.multipassTerrain.enabled,this._configuration.cullAboveGround=F.multipassTerrain.cullAboveGround,this._configuration}requiresSlot(C,F){return!(F!==g.H.Color&&F!==g.H.Alpha&&F!==g.H.Highlight||C!==v.r.DRAPED_MATERIAL&&(F===g.H.Highlight?C!==v.r.OPAQUE_MATERIAL:C!==(this.parameters.transparent?this.parameters.writeDepth?v.r.TRANSPARENT_MATERIAL:v.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL:v.r.OPAQUE_MATERIAL)))}createGLMaterial(C){return new Q(C)}createBufferWriter(){return new S.G(U.W1)}}class Q extends j.F{constructor(C){super(me(me({},C),C.material.parameters))}_updateParameters(C){return this.updateTexture(this._material.parameters.textureId),this._material.setParameters(this.textureBindParameters),this.ensureTechnique(x,C)}_updateOccludeeState(C){C.hasOccludees!==this._material.parameters.hasOccludees&&(this._material.setParameters({hasOccludees:C.hasOccludees}),this._updateParameters(C))}beginSlot(C){return this._output!==g.H.Color&&this._output!==g.H.Alpha||this._updateOccludeeState(C),this._updateParameters(C)}}class $ extends p.Mt{constructor(){super(...arguments),this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=W.Vr.None,this.hasOccludees=!1,this.opacity=1,this.textureId=null,this.initTextureTransparent=!0}}},81040:(V,R,e)=>{e.d(R,{Q:()=>q});var g=e(84161),W=e(28093),j=e(4794),p=e(5548),l=e(60479),v=e(19625),S=e(13934),U=e(42743),w=e(60881),_=e(40723),b=e(5894),y=e(2282),O=e(16396),t=e(42037),d=e(57623),n=e(17626),u=e(651),f=e(91056),a=e(87601),c=e(88569),m=e(12407),P=e(44835),A=e(41528),x=e(93310),H=e(67969),G=e(2078);class ie extends f.A{initializeProgram(o){return new m.$(o.rctx,ie.shader.get().build(this.configuration),$)}_setPipelineState(o){const h=this.configuration,M=o===P.A.NONE,I=o===P.A.FrontFace;return(0,G.sm)({blending:h.output!==S.H.Color&&h.output!==S.H.Alpha||!h.transparent?null:M?c.wu:(0,c.j7)(o),culling:(0,G.zp)(h.cullFace),depthTest:{func:I?H.wb.LESS:h.shadingEnabled?H.wb.LEQUAL:H.wb.LESS},depthWrite:M?h.writeDepth?G.LZ:null:(0,c.K5)(o),colorWrite:G.BK,polygonOffset:M||I?null:c.E0})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}ie.shader=new u.J(x.S,()=>e.e(8271).then(e.bind(e,88271)));class Q extends A.W{constructor(){super(...arguments),this.output=S.H.Color,this.cullFace=U.Vr.None,this.transparencyPassType=P.A.NONE,this.hasSlicePlane=!1,this.transparent=!1,this.writeDepth=!0,this.screenSizeEnabled=!0,this.shadingEnabled=!0,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,n._)([(0,a.o)({count:S.H.COUNT})],Q.prototype,"output",void 0),(0,n._)([(0,a.o)({count:U.Vr.COUNT})],Q.prototype,"cullFace",void 0),(0,n._)([(0,a.o)({count:P.A.COUNT})],Q.prototype,"transparencyPassType",void 0),(0,n._)([(0,a.o)()],Q.prototype,"hasSlicePlane",void 0),(0,n._)([(0,a.o)()],Q.prototype,"transparent",void 0),(0,n._)([(0,a.o)()],Q.prototype,"writeDepth",void 0),(0,n._)([(0,a.o)()],Q.prototype,"screenSizeEnabled",void 0),(0,n._)([(0,a.o)()],Q.prototype,"shadingEnabled",void 0),(0,n._)([(0,a.o)()],Q.prototype,"hasMultipassTerrain",void 0),(0,n._)([(0,a.o)()],Q.prototype,"cullAboveGround",void 0);const $=new Map([[O.T.POSITION,0],[O.T.NORMAL,1],[O.T.OFFSET,2]]);class q extends _.F5{constructor(o){super(o,new F),this.supportsEdges=!0,this._configuration=new Q,this._vertexAttributeLocations=$}getConfiguration(o,h){return this._configuration.output=o,this._configuration.cullFace=this.parameters.cullFace,this._configuration.hasSlicePlane=this.parameters.hasSlicePlane,this._configuration.transparent=this.parameters.transparent,this._configuration.writeDepth=this.parameters.writeDepth,this._configuration.screenSizeEnabled=this.parameters.screenSizeEnabled,this._configuration.shadingEnabled=this.parameters.shadingEnabled,this._configuration.transparencyPassType=h.transparencyPassType,this._configuration.hasMultipassTerrain=h.multipassTerrain.enabled,this._configuration.cullAboveGround=h.multipassTerrain.cullAboveGround,this._configuration}intersect(o,h,M,I,z,re){if(this.parameters.screenSizeEnabled){const se=o.vertexAttributes.get(O.T.OFFSET),ae={applyToVertex:(oe,de,ge,J)=>{const s=(0,g.s)(ne,se.data[3*J+0],se.data[3*J+1],se.data[3*J+2]),i=(0,g.s)(T,oe,de,ge);return(0,g.g)(s,s,this.parameters.screenSizeScale*M.camera.computeRenderPixelSizeAt(s)),(0,g.a)(i,i,s),[i[0],i[1],i[2]]},applyToAabb:oe=>{const de=(0,p.be)(oe,ne);return(0,p.bA)(oe,this.parameters.screenSizeScale*M.camera.computeRenderPixelSizeAt(de))}};(0,d.Bw)(o,M,I,z,ae,re)}else(0,d.Bw)(o,M,I,z,void 0,re)}requiresSlot(o,h){if(h===S.H.Highlight)return o===b.r.OPAQUE_MATERIAL;if(h===S.H.Color||h===S.H.Alpha||h===S.H.ObjectAndLayerIdColor){let M=b.r.OPAQUE_MATERIAL;return this.parameters.transparent&&(M=this.parameters.writeDepth?b.r.TRANSPARENT_MATERIAL:b.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),o===M||o===b.r.DRAPED_MATERIAL}return!1}createGLMaterial(o){return new C(o)}createBufferWriter(){return new k(this.parameters.screenSizeEnabled)}}class C extends w.Z{beginSlot(o){return this.ensureTechnique(ie,o)}}class F extends _.Mt{constructor(){super(...arguments),this.color=(0,j.f)(1,1,1,1),this.shadingTint=(0,j.f)(0,0,0,.25),this.shadingDirection=(0,g.n)((0,W.c)(),[.5,-.5,-.5]),this.screenSizeScale=14,this.transparent=!1,this.writeDepth=!0,this.hasSlicePlane=!1,this.cullFace=U.Vr.None,this.screenSizeEnabled=!1,this.shadingEnabled=!0}}class k{constructor(o){this.screenSizeEnabled=o;const h=(0,v.U$)().vec3f(O.T.POSITION).vec3f(O.T.NORMAL);this.screenSizeEnabled&&h.vec3f(O.T.OFFSET),this.vertexBufferLayout=h}allocate(o){return this.vertexBufferLayout.createBuffer(o)}elementCount(o){return o.indices.get(O.T.POSITION).length}write(o,h,M,I,z){if((0,t.NK)(M,this.vertexBufferLayout,o,h,I,z),this.screenSizeEnabled){if(!M.vertexAttributes.has(O.T.OFFSET))throw new Error(`${O.T.OFFSET} vertex attribute required for screenSizeEnabled ShadedColorMaterial`);{const re=M.vertexAttributes.get(O.T.OFFSET),se=M.indices.get(O.T.OFFSET);(0,y.hu)(3===re.size);const ae=I.getField(O.T.OFFSET,l.ct);if(!ae)throw new Error("unable to acquire view for "+O.T.OFFSET);(0,t.ho)(se,re.data,h,ae,z)}}}}const ne=(0,W.c)(),T=(0,W.c)()}}]);
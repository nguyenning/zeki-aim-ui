"use strict";var ae=Object.defineProperty,ie=Object.defineProperties,_e=Object.getOwnPropertyDescriptors,j=Object.getOwnPropertySymbols,ne=Object.prototype.hasOwnProperty,le=Object.prototype.propertyIsEnumerable,A=(O,p,e)=>p in O?ae(O,p,{enumerable:!0,configurable:!0,writable:!0,value:e}):O[p]=e,y=(O,p)=>{for(var e in p||(p={}))ne.call(p,e)&&A(O,e,p[e]);if(j)for(var e of j(p))le.call(p,e)&&A(O,e,p[e]);return O},g=(O,p)=>ie(O,_e(p));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[7948],{48887:(O,p,e)=>{e.r(p),e.d(p,{default:()=>oe});var D=e(15861),o=e(17626),I=e(84792),u=e(97478),c=e(26584),P=e(80542),C=e(47877),x=e(62208),S=e(99959),L=e(10699),n=e(77712),B=e(90912),K=(e(85931),e(68653)),W=e(76898),b=e(99433),T=e(31283),F=e(2004),N=e(83137),Z=e(44917),J=e(50085),V=e(19027),$=e(65088),G=e(552),z=e(50107),H=e(49286),Q=e(6647),Y=e(30346),X=e(99555),w=e(66120),k=e(97941),q=e(13812),ee=e(14772),re=e(12585),te=e(39058),R=e(13410),se=e(5676),U=e(41039);let a=class extends((0,G.h)((0,k.n)((0,X.M)((0,w.x)((0,V.O)((0,$.Y)((0,H.q)((0,Q.I)((0,S.R)((0,Y.Q)((0,J.V)((0,z.N)((0,P.p)(Z.Z)))))))))))))){constructor(...r){super(...r),this.dateFieldsTimeReference=null,this.datesInUnknownTimezone=!1,this.dpi=96,this.gdbVersion=null,this.imageFormat="png24",this.imageMaxHeight=2048,this.imageMaxWidth=2048,this.imageTransparency=!0,this.isReference=null,this.labelsVisible=!1,this.operationalLayerType="ArcGISMapServiceLayer",this.preferredTimeReference=null,this.sourceJSON=null,this.sublayers=null,this.type="map-image",this.url=null}normalizeCtorArgs(r,t){return"string"==typeof r?y({url:r},t):r}load(r){const t=(0,x.pC)(r)?r.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Map Service"]},r).catch(L.r9).then(()=>this._fetchService(t))),Promise.resolve(this)}readImageFormat(r,t){const E=t.supportedImageFormatTypes;return E&&E.includes("PNG32")?"png32":"png24"}writeSublayers(r,t,E,s){var f;if(!this.loaded||!r)return;const l=r.slice().reverse().flatten(({sublayers:_})=>_&&_.toArray().reverse()).toArray();let i=!1;if(this.capabilities&&this.capabilities.operations.supportsExportMap&&(null==(f=this.capabilities.exportMap)?void 0:f.supportsDynamicLayers)){const _=(0,T.M9)(s.origin);if(_===T.s3.PORTAL_ITEM){const m=this.createSublayersForOrigin("service").sublayers;i=(0,R.QV)(l,m,T.s3.SERVICE)}else if(_>T.s3.PORTAL_ITEM){const m=this.createSublayersForOrigin("portal-item");i=(0,R.QV)(l,m.sublayers,(0,T.M9)(m.origin))}}const d=[],h=y({writeSublayerStructure:i},s);let v=i;l.forEach(_=>{const m=_.write({},h);d.push(m),v=v||"user"===_.originOf("visible")}),d.some(_=>Object.keys(_).length>1)&&(t.layers=d),v&&(t.visibleLayers=l.filter(_=>_.visible).map(_=>_.id))}createExportImageParameters(r,t,E,s){const l=s&&s.pixelRatio||1;r&&this.version>=10&&(r=r.clone().shiftCentralMeridian());const i=new ee.R({layer:this,floors:null==s?void 0:s.floors,scale:(0,N.yZ)({extent:r,width:t})*l}),d=i.toJSON();i.destroy();const h=!s||!s.rotation||this.version<10.3?{}:{rotation:-s.rotation},v=r&&r.spatialReference,f=v.wkid||JSON.stringify(v.toJSON());d.dpi*=l;const _={};if(null!=s&&s.timeExtent){const{start:m,end:M}=s.timeExtent.toJSON();_.time=m&&M&&m===M?""+m:`${null!=m?m:"null"},${null!=M?M:"null"}`}else this.timeInfo&&!this.timeInfo.hasLiveData&&(_.time="null,null");return y(y(y({bbox:r&&r.xmin+","+r.ymin+","+r.xmax+","+r.ymax,bboxSR:f,imageSR:f,size:t+","+E},d),h),_)}fetchImage(r,t,E,s){var l=this;return(0,D.Z)(function*(){const{data:i}=yield l._fetchImage("image",r,t,E,s);return i})()}fetchImageBitmap(r,t,E,s){var l=this;return(0,D.Z)(function*(){const{data:i,url:d}=yield l._fetchImage("blob",r,t,E,s);return(0,re.g)(i,d)})()}fetchRecomputedExtents(r={}){var t=this;return(0,D.Z)(function*(){const E=g(y({},r),{query:g(y({returnUpdates:!0,f:"json"},t.customParameters),{token:t.apiKey})}),{data:s}=yield(0,I.default)(t.url,E),{extent:l,fullExtent:i,timeExtent:d}=s,h=l||i;return{fullExtent:h&&F.Z.fromJSON(h),timeExtent:d&&u.Z.fromJSON({start:d[0],end:d[1]})}})()}loadAll(){return(0,C.G)(this,r=>{r(this.allSublayers)})}serviceSupportsSpatialReference(r){return(0,se.D)(this,r)}_fetchImage(r,t,E,s,l){var i=this;return(0,D.Z)(function*(){var v,f,_,m;const d={responseType:r,signal:null!=(v=null==l?void 0:l.signal)?v:null,query:g(y(y(g(y(y({},i.parsedUrl.query),i.createExportImageParameters(t,E,s,l)),{f:"image"}),i.refreshParameters),i.customParameters),{token:i.apiKey})},h=i.parsedUrl.path+"/export";if(null!=(null==(f=d.query)?void 0:f.dynamicLayers)&&(null==(m=null==(_=i.capabilities)?void 0:_.exportMap)||!m.supportsDynamicLayers))throw new c.Z("mapimagelayer:dynamiclayer-not-supported",`service ${i.url} doesn't support dynamic layers, which is required to be able to change the sublayer's order, rendering, labeling or source.`,{query:d.query});try{const{data:M}=yield(0,I.default)(h,d);return{data:M,url:h}}catch(M){throw(0,L.D_)(M)?M:new c.Z("mapimagelayer:image-fetch-error",`Unable to load image: ${h}`,{error:M})}})()}_fetchService(r){var t=this;return(0,D.Z)(function*(){if(t.sourceJSON)return void t.read(t.sourceJSON,{origin:"service",url:t.parsedUrl});const{data:E,ssl:s}=yield(0,I.default)(t.parsedUrl.path,{query:g(y(y({f:"json"},t.parsedUrl.query),t.customParameters),{token:t.apiKey}),signal:r});s&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=E,t.read(E,{origin:"service",url:t.parsedUrl})})()}};(0,o._)([(0,n.Cb)({type:U.Z})],a.prototype,"dateFieldsTimeReference",void 0),(0,o._)([(0,n.Cb)({type:Boolean})],a.prototype,"datesInUnknownTimezone",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"dpi",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"gdbVersion",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"imageFormat",void 0),(0,o._)([(0,K.r)("imageFormat",["supportedImageFormatTypes"])],a.prototype,"readImageFormat",null),(0,o._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageHeight"}}}}})],a.prototype,"imageMaxHeight",void 0),(0,o._)([(0,n.Cb)({json:{origins:{service:{read:{source:"maxImageWidth"}}}}})],a.prototype,"imageMaxWidth",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"imageTransparency",void 0),(0,o._)([(0,n.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],a.prototype,"isReference",void 0),(0,o._)([(0,n.Cb)({json:{read:!1,write:!1}})],a.prototype,"labelsVisible",void 0),(0,o._)([(0,n.Cb)({type:["ArcGISMapServiceLayer"]})],a.prototype,"operationalLayerType",void 0),(0,o._)([(0,n.Cb)({json:{read:!1,write:!1}})],a.prototype,"popupEnabled",void 0),(0,o._)([(0,n.Cb)({type:U.Z})],a.prototype,"preferredTimeReference",void 0),(0,o._)([(0,n.Cb)()],a.prototype,"sourceJSON",void 0),(0,o._)([(0,n.Cb)({json:{write:{ignoreOrigin:!0}}})],a.prototype,"sublayers",void 0),(0,o._)([(0,b.c)("sublayers",{layers:{type:[te.Z]},visibleLayers:{type:[B.z8]}})],a.prototype,"writeSublayers",null),(0,o._)([(0,n.Cb)({type:["show","hide","hide-children"]})],a.prototype,"listMode",void 0),(0,o._)([(0,n.Cb)({json:{read:!1},readOnly:!0,value:"map-image"})],a.prototype,"type",void 0),(0,o._)([(0,n.Cb)(q.HQ)],a.prototype,"url",void 0),a=(0,o._)([(0,W.j)("esri.layers.MapImageLayer")],a);const oe=a},59990:(O,p,e)=>{function D(u){var P;const c=u.layer;return"floorInfo"in c&&(null==(P=c.floorInfo)?void 0:P.floorField)&&"floors"in u.view?I(u.view.floors,c.floorInfo.floorField):null}function o(u,c){var P;return"floorInfo"in c&&(null==(P=c.floorInfo)?void 0:P.floorField)?I(u,c.floorInfo.floorField):null}function I(u,c){if(null==u||!u.length)return null;const P=u.filter(C=>""!==C).map(C=>`'${C}'`);return P.push("''"),`${c} IN (${P.join(",")}) OR ${c} IS NULL`}e.d(p,{c:()=>D,f:()=>o})}}]);
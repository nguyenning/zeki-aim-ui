"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8325],{19702:(D,h,s)=>{s.d(h,{A:()=>P});var n=s(15861),o=s(17626),M=s(54024),E=s(10699),l=s(32917),c=s(77712),_=(s(90912),s(85931),s(76898)),O=s(36947);const P=v=>{let t=class extends v{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(a){super.postscript(a),(0,O.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var a=this;return(0,n.Z)(function*(){const e=new AbortController,i=e.signal;a.handles.add((0,M.kB)(()=>e.abort())),yield(0,l.N1)(()=>{var d;return null==(d=a.view.defaultsFromMap)?void 0:d.heightModelInfoReady},i),(0,E.k_)(i);const r=(0,O.Wt)(a.layer,a.view.heightModelInfo,a.supportsHeightUnitConversion);if(r)throw r})()}canResume(){const a=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!a||!a.minScale||!a.maxScale||a.minScale>=a.maxScale)}getSuspendInfo(){const a=super.getSuspendInfo(),e=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return e&&e.minScale&&e.maxScale&&e.minScale<e.maxScale&&(a.outsideScaleRange=!0),a}};return(0,o._)([(0,c.Cb)()],t.prototype,"view",void 0),(0,o._)([(0,c.Cb)()],t.prototype,"slicePlaneEnabled",void 0),t=(0,o._)([(0,_.j)("esri.views.3d.layers.LayerView3D")],t),t}},68325:(D,h,s)=>{s.r(h),s.d(h,{default:()=>a});var n=s(15861),o=s(17626),M=s(59213),E=s(26584),l=s(62208),c=s(10699),p=s(32917),y=s(77712),_=s(76898),O=s(19702),P=s(45611);const v="analysis-view-handles";let t=class extends((0,O.A)(P.Z)){constructor(e){super(e),this.type="line-of-sight-3d",this._analysisModule=null}initialize(){this.handles.add((0,p.YP)(()=>this.layer.analysis,e=>{this._destroyAnalysisView(),(0,l.pC)(e)&&this._createAnalysisView(e)},p.tX),v)}destroy(){this.handles.remove(v),this._destroyAnalysisView()}whenAnalysisView(){var e=this;return(0,n.Z)(function*(){if((0,l.pC)(e.analysisView))return e.analysisView;if((0,l.pC)(e._createAnalysisViewTask))return e._createAnalysisViewTask.promise;throw new E.Z("layerview:no-analysisview-for-analysis","The analysis has not been set on the LineOfSightLayer of this layer view")})()}isUpdating(){return(0,l.pC)(this._createAnalysisViewTask)||(0,l.pC)(this.analysisView)&&this.analysisView.updating}_createAnalysisView(e){var i=this;const r=(0,M.vr)(function(){var d=(0,n.Z)(function*(u){return i.analysisView=yield i._createAnalysisViewPromise(e,u),i._createAnalysisViewTask===r&&(i._createAnalysisViewTask=null),i.analysisView});return function(u){return d.apply(this,arguments)}}());this._createAnalysisViewTask=r}_destroyAnalysisView(){this.analysisView=(0,l.SC)(this.analysisView),this._createAnalysisViewTask=(0,l.IM)(this._createAnalysisViewTask)}_createAnalysisViewPromise(e,i){var r=this;return(0,n.Z)(function*(){let d=r._analysisModule;if((0,l.Wi)(d)){const C=yield r._loadAnalysisModule();r._analysisModule=C,d=C}const u=new d.default({analysis:e,view:r.view,parent:r});if(yield u.when(),(0,c.Hc)(i))throw u.destroy(),new E.Z("layerview:no-analysisview-for-analysis","The analysis has not been added to the LineOfSightLayer of this layer view",{analysis:e});return u})()}_loadAnalysisModule(){return Promise.all([s.e(2540),s.e(3792),s.e(8592),s.e(1409)]).then(s.bind(s,95310))}};(0,o._)([(0,y.Cb)()],t.prototype,"type",void 0),(0,o._)([(0,y.Cb)()],t.prototype,"layer",void 0),(0,o._)([(0,y.Cb)()],t.prototype,"analysisView",void 0),(0,o._)([(0,y.Cb)()],t.prototype,"_createAnalysisViewTask",void 0),t=(0,o._)([(0,_.j)("esri.views.3d.layers.LineOfSightLayerView3D")],t);const a=t},45611:(D,h,s)=>{s.d(h,{Z:()=>a});var n=s(17626),o=s(14517),M=s(61885),E=s(80542),l=s(61996),c=s(63290),p=s(62208),y=s(60330),_=s(77712),v=(s(90912),s(85931),s(76898));let t=class extends((0,E.p)((0,l.IG)((0,y.v)(M.Z.EventedMixin(o.Z))))){constructor(e){super(e),this.layer=null,this.parent=null}initialize(){this.when().catch(e=>{if("layerview:create-error"!==e.name){const i=this.layer&&this.layer.id||"no id",r=this.layer&&this.layer.title||"no title";c.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${r}', id: '${i}')`,e)}})}get fullOpacity(){return(0,p.Pt)(this.get("layer.opacity"),1)*(0,p.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var e;return!this.suspended&&!0===(null==(e=this.layer)?void 0:e.legendEnabled)}get updating(){var e;return!!(null!=(e=this.updatingHandles)&&e.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var e;return!0===(null==(e=this.layer)?void 0:e.visible)}set visible(e){this._overrideIfSome("visible",e)}canResume(){var e,i,r;return this.visible&&(null==(e=this.layer)?void 0:e.loaded)&&!(null!=(i=this.parent)&&i.suspended)&&(null==(r=this.view)?void 0:r.ready)||!1}getSuspendInfo(){const e=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(e.viewNotReady=!0),this.layer&&this.layer.loaded||(e.layerNotLoaded=!0),this.visible||(e.layerInvisible=!0),e}isUpdating(){return!1}};(0,n._)([(0,_.Cb)()],t.prototype,"fullOpacity",null),(0,n._)([(0,_.Cb)()],t.prototype,"layer",void 0),(0,n._)([(0,_.Cb)()],t.prototype,"parent",void 0),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"suspended",null),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"suspendInfo",null),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"legendEnabled",null),(0,n._)([(0,_.Cb)({type:Boolean,readOnly:!0})],t.prototype,"updating",null),(0,n._)([(0,_.Cb)({readOnly:!0})],t.prototype,"updatingProgress",null),(0,n._)([(0,_.Cb)()],t.prototype,"visible",null),(0,n._)([(0,_.Cb)()],t.prototype,"view",void 0),t=(0,n._)([(0,v.j)("esri.views.layers.LayerView")],t);const a=t}}]);
"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[375],{17926:($,I,a)=>{var u,p,i;a.d(I,{B:()=>p,P:()=>u}),(i=u||(u={}))[i.None=0]="None",i[i.Int16=1]="Int16",i[i.Int32=2]="Int32",function(i){i[i.Replace=0]="Replace",i[i.Outside=1]="Outside",i[i.Inside=2]="Inside",i[i.Finished=3]="Finished"}(p||(p={}))},30375:($,I,a)=>{a.r(I),a.d(I,{destroyContext:()=>H,dracoDecompressPointCloudData:()=>t,filterObbsForModifications:()=>g,filterObbsForModificationsSync:()=>W,initialize:()=>x,interpretObbModificationResults:()=>oe,process:()=>B,setLegacySchema:()=>k,setModifications:()=>R,setModificationsSync:()=>z,test:()=>se});var u=a(15861),p=a(62208),i=a(17926),O=a(54346);function M(e){return(0,O.V)(`esri/libs/i3s/${e}`)}let E;var b=a(52565);function B(e){return T.apply(this,arguments)}function T(){return(T=(0,u.Z)(function*(e){yield x();const n=[e.geometryBuffer];return{result:G(e,n),transferList:n}})).apply(this,arguments)}function t(e){return h.apply(this,arguments)}function h(){return(h=(0,u.Z)(function*(e){var D;yield x();const n=[e.geometryBuffer],{geometryBuffer:r}=e,d=r.byteLength,f=o._malloc(d),L=new Uint8Array(o.HEAPU8.buffer,f,d);L.set(new Uint8Array(r));const c=o.dracoDecompressPointCloudData(f,L.byteLength);if(o._free(f),c.error.length>0)throw new Error(`i3s.wasm: ${c.error}`);const N=(null==(D=c.featureIds)?void 0:D.length)>0?c.featureIds.slice():null,F=c.positions.slice();return N&&n.push(N.buffer),n.push(F.buffer),{result:{positions:F,featureIds:N},transferList:n}})).apply(this,arguments)}function g(e){return w.apply(this,arguments)}function w(){return(w=(0,u.Z)(function*(e){yield x(),W(e);const n={buffer:e.buffer};return{result:n,transferList:[n.buffer]}})).apply(this,arguments)}function R(e){return S.apply(this,arguments)}function S(){return(S=(0,u.Z)(function*(e){yield x(),z(e)})).apply(this,arguments)}function k(e){return _.apply(this,arguments)}function _(){return(_=(0,u.Z)(function*(e){yield x(),o.setLegacySchema(e.context,e.jsonSchema)})).apply(this,arguments)}function H(e){K(e)}let P,o;function z(e){const n=e.modifications,r=o._malloc(8*n.length),d=new Float64Array(o.HEAPU8.buffer,r,n.length);for(let f=0;f<n.length;++f)d[f]=n[f];o.setModifications(e.context,r,n.length,e.isGeodetic),o._free(r)}function G(e,n){if(!o)return null;const{context:r,localOrigin:d,globalTrafo:f,mbs:L,obb:c,elevationOffset:N,geometryBuffer:F,geometryDescriptor:D,indexToVertexProjector:ie,vertexToRenderProjector:re}=e,Y=o._malloc(F.byteLength),Z=o._malloc(33*Float64Array.BYTES_PER_ELEMENT),J=new Uint8Array(o.HEAPU8.buffer,Y,F.byteLength);J.set(new Uint8Array(F));const l=new Float64Array(o.HEAPU8.buffer,Z,33);A(l,d);let m=l.byteOffset+3*l.BYTES_PER_ELEMENT,y=new Float64Array(l.buffer,m);A(y,f),m+=16*l.BYTES_PER_ELEMENT,y=new Float64Array(l.buffer,m),A(y,L),m+=4*l.BYTES_PER_ELEMENT,(0,p.pC)(c)&&(y=new Float64Array(l.buffer,m),A(y,c.center),m+=3*l.BYTES_PER_ELEMENT,y=new Float64Array(l.buffer,m),A(y,c.halfSize),m+=3*l.BYTES_PER_ELEMENT,y=new Float64Array(l.buffer,m),A(y,c.quaternion));const X=D,ae={isDraco:!1,isLegacy:!1,color:e.layouts.some(U=>U.some(v=>"color"===v.name)),normal:e.needNormals&&e.layouts.some(U=>U.some(v=>"normalCompressed"===v.name)),uv0:e.layouts.some(U=>U.some(v=>"uv0"===v.name)),uvRegion:e.layouts.some(U=>U.some(v=>"uvRegion"===v.name)),featureIndex:X.featureIndex},s=o.process(r,!!e.obb,Y,J.byteLength,X,ae,Z,N,ie,re,e.normalReferenceFrame);if(o._free(Z),o._free(Y),s.error.length>0)throw new Error(`i3s.wasm: ${s.error}`);if(s.discarded)return null;const j=s.componentOffsets.length>0?s.componentOffsets.slice():null,V=s.featureIds.length>0?s.featureIds.slice():null,q=s.interleavedVertedData.slice().buffer,ee=s.indicesType===i.P.Int16?new Uint16Array(s.indices.buffer,s.indices.byteOffset,s.indices.byteLength/2).slice():new Uint32Array(s.indices.buffer,s.indices.byteOffset,s.indices.byteLength/4).slice(),te=s.positions.slice(),ne=s.positionIndicesType===i.P.Int16?new Uint16Array(s.positionIndices.buffer,s.positionIndices.byteOffset,s.positionIndices.byteLength/2).slice():new Uint32Array(s.positionIndices.buffer,s.positionIndices.byteOffset,s.positionIndices.byteLength/4).slice(),fe={layout:e.layouts[0],interleavedVertexData:q,indices:ee,hasColors:s.hasColors,hasModifications:s.hasModifications,positionData:{data:te,indices:ne}};return V&&n.push(V.buffer),j&&n.push(j.buffer),n.push(q),n.push(ee.buffer),n.push(te.buffer),n.push(ne.buffer),{componentOffsets:j,featureIds:V,transformedGeometry:fe,obb:s.obb}}function oe(e){return 0===e?b.O4.Unmodified:1===e?b.O4.PotentiallyModified:2===e?b.O4.Culled:b.O4.Unknown}function W(e){const{context:n,buffer:r}=e,d=o._malloc(r.byteLength),f=r.byteLength/Float64Array.BYTES_PER_ELEMENT,L=new Float64Array(o.HEAPU8.buffer,d,f),c=new Float64Array(r);L.set(c),o.filterOBBs(n,d,f),c.set(L),o._free(d)}function K(e){o&&o.destroy(e)}function A(e,n){for(let r=0;r<n.length;++r)e[r]=n[r]}function x(){return o?Promise.resolve():(P||(P=function C(){return E||(E=new Promise(e=>a.e(5979).then(a.bind(a,85979)).then(n=>n.i).then(({default:n})=>{const r=n({locateFile:M,onRuntimeInitialized:()=>e(r)});delete r.then})).catch(e=>{throw e})),E}().then(e=>{o=e,P=null})),P)}const se={transform:G,destroy:K}},52565:($,I,a)=>{a.d(I,{$i:()=>p,FE:()=>b,Hw:()=>M,NB:()=>B,O4:()=>C,U_:()=>O,oQ:()=>T,rw:()=>i,w5:()=>E});var O,C,M,E,b,t,u=a(97126);class p{constructor(h,g){this.id=h,this.mbs=g,this.renderMbs=(0,u.f)(0,0,0,-1),this.elevationRange=null}}class i{constructor(){this.min=1/0,this.max=-1/0,this.valid=!1}}(t=O||(O={}))[t.Unmodified=0]="Unmodified",t[t.Culled=1]="Culled",t[t.NotChecked=2]="NotChecked",function(t){t[t.Unmodified=0]="Unmodified",t[t.PotentiallyModified=1]="PotentiallyModified",t[t.Culled=2]="Culled",t[t.Unknown=3]="Unknown",t[t.NotChecked=4]="NotChecked"}(C||(C={}));class B extends p{constructor(h,g,w,R,S,k,_,H,P,o){super(h,w),this.index=g,this.childCount=R,this.level=S,this.resources=k,this.version=_,this.lodMetric=H,this.maxError=P,this.numFeatures=o,this.failed=!1,this.cacheState=M.Unknown,this.vertexCount=0,this.memory=0,this.childrenLoaded=0,this.hasModifications=!1,this.imModificationImpact=C.NotChecked}}(function(t){t[t.Unknown=0]="Unknown",t[t.Uncached=1]="Uncached",t[t.Cached=2]="Cached"})(M||(M={})),function(t){t[t.None=0]="None",t[t.MaxScreenThreshold=1]="MaxScreenThreshold",t[t.ScreenSpaceRelative=2]="ScreenSpaceRelative",t[t.RemovedFeatureDiameter=3]="RemovedFeatureDiameter",t[t.DistanceRangeFromDefaultCamera=4]="DistanceRangeFromDefaultCamera"}(E||(E={})),function(t){t[t.Hole=0]="Hole",t[t.Leaf=1]="Leaf"}(b||(b={}));class T{constructor(h,g,w,R){this.nodeHasLOD=h,this.isChosen=g,this.lodLevel=w,this.version=R}}}}]);
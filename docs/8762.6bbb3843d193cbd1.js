"use strict";var ve=Object.defineProperty,he=Object.defineProperties,ge=Object.getOwnPropertyDescriptors,W=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,X=(u,d,t)=>d in u?ve(u,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[d]=t,O=(u,d)=>{for(var t in d||(d={}))Ce.call(d,t)&&X(u,t,d[t]);if(W)for(var t of W(d))Fe.call(d,t)&&X(u,t,d[t]);return u},T=(u,d)=>he(u,ge(d));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8762],{98762:(u,d,t)=>{t.r(d),t.d(d,{default:()=>fe});var p=t(15861),i=t(17626),M=(t(29132),t(73281)),U=(t(4832),t(49067),t(96794),t(69747),t(40425),t(69357),t(40342),t(14726),t(33474),t(32088)),b=t(62208),Q=t(99959),V=t(94113),B=t(21726),n=t(77712),G=(t(85931),t(8314)),w=t(90912),Z=t(76898),z=t(99433),F=t(71774),H=t(44917),A=t(26584),K=t(80542),$=t(47996),N=t(10699),q=t(59289),E=t(56554),h=t(83774),k=t(17253),J=t(2004);let m=class extends((0,K.p)($.Z)){constructor(){var e;super(...arguments),e=this,this.capabilities=(0,E.MS)(!1,!1),this.type="wfs",this.refresh=(0,N.Ds)(function(){var r=(0,p.Z)(function*(o){yield e.load();const{extent:a}=yield e._connection.invoke("refresh",o);return e.sourceJSON.extent=a,{dataChanged:!0,updates:{extent:e.sourceJSON.extent}}});return function(o){return r.apply(this,arguments)}}())}load(e){var o;const r=null!=(o=(0,b.pC)(e)&&e.signal)?o:null;return this.addResolvingPromise(this._startWorker({signal:r})),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null}openPorts(){var e=this;return(0,p.Z)(function*(){return yield e.load(),e._connection.openPorts()})()}queryFeatures(e,r={}){var o=this;return(0,p.Z)(function*(){yield o.load(r);const a=yield o._connection.invoke("queryFeatures",e?e.toJSON():null,r);return k.default.fromJSON(a)})()}queryFeaturesJSON(e,r={}){var o=this;return(0,p.Z)(function*(){return yield o.load(r),o._connection.invoke("queryFeatures",e?e.toJSON():null,r)})()}queryFeatureCount(e,r={}){var o=this;return(0,p.Z)(function*(){return yield o.load(r),o._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)})()}queryObjectIds(e,r={}){var o=this;return(0,p.Z)(function*(){return yield o.load(r),o._connection.invoke("queryObjectIds",e?e.toJSON():null,r)})()}queryExtent(e,r={}){var o=this;return(0,p.Z)(function*(){yield o.load(r);const a=yield o._connection.invoke("queryExtent",e?e.toJSON():null,r);return{count:a.count,extent:J.Z.fromJSON(a.extent)}})()}querySnapping(e,r={}){var o=this;return(0,p.Z)(function*(){return yield o.load(r),o._connection.invoke("querySnapping",e,r)})()}_createLoadOptions(e){var r=this;return(0,p.Z)(function*(){const{url:o,customParameters:a,name:y,namespaceUri:v,spatialReference:l,fields:C,geometryType:I,swapXY:x}=r.layer;if(!o)throw new A.Z("wfs-layer:missing-url","WFSLayer must be created with a url");r.wfsCapabilities||(r.wfsCapabilities=yield(0,h.FU)(o,O({customParameters:a},e)));const f=["fields","geometryType","name","namespaceUri","spatialReference","swapXY"].some(P=>null==r.layer[P])?yield(0,h.be)(r.wfsCapabilities,y,v,{spatialReference:l,customParameters:a,signal:null==e?void 0:e.signal}):T(O({},(0,h.eB)(C)),{geometryType:I,name:y,namespaceUri:v,spatialReference:l,swapXY:x}),me=(0,b.Wg)((0,h.ft)(r.wfsCapabilities.readFeatureTypes(),f.name,f.namespaceUri)),ce=F.Mk.toJSON(f.geometryType);return{customParameters:a,featureType:me,fields:f.fields.map(P=>P.toJSON()),geometryField:f.geometryField,geometryType:ce,getFeatureUrl:r.wfsCapabilities.operations.GetFeature.url,getFeatureOutputFormat:r.wfsCapabilities.operations.GetFeature.outputFormat,objectIdField:f.objectIdField,spatialReference:f.spatialReference.toJSON(),swapXY:f.swapXY}})()}_startWorker(e){var r=this;return(0,p.Z)(function*(){const[o,a]=yield(0,N.as)([r._createLoadOptions(e),(0,q.bA)("WFSSourceWorker",T(O({},e),{strategy:(0,G.Z)("feature-layers-workers")?"dedicated":"local"}))]),y=o.error||a.error||null,v=a.value||null;if(y)throw v&&v.close(),y;const l=o.value;r._connection=a.value;const{extent:C}=yield r._connection.invoke("load",l,e);r.sourceJSON={extent:C,fields:l.fields,geometryType:l.geometryType,objectIdField:l.objectIdField,geometryField:l.geometryField,drawingInfo:(0,E.bU)(l.geometryType),name:l.featureType.title,wfsInfo:{name:l.featureType.name,featureUrl:l.getFeatureUrl,maxFeatures:3e3,swapXY:l.swapXY,supportedSpatialReferences:l.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:l.featureType.namespaceUri}}})()}};(0,i._)([(0,n.Cb)()],m.prototype,"capabilities",void 0),(0,i._)([(0,n.Cb)({constructOnly:!0})],m.prototype,"layer",void 0),(0,i._)([(0,n.Cb)()],m.prototype,"sourceJSON",void 0),(0,i._)([(0,n.Cb)()],m.prototype,"type",void 0),(0,i._)([(0,n.Cb)()],m.prototype,"wfsCapabilities",void 0),m=(0,i._)([(0,Z.j)("esri.layers.graphics.sources.WFSSource")],m);var R,_=t(552),ee=t(50107),te=t(35126),re=t(49286),ie=t(32629),oe=t(6647),ne=t(30346),se=t(99555),ae=t(97941),c=t(13812),le=t(47717),L=t(36255),de=t(55911),S=t(36630),pe=t(170),ye=t(62667),g=t(84952),ue=t(49430),D=t(65234);const Y=(0,de.v)();let s=R=class extends((0,ie.c)((0,ee.N)((0,te.b)((0,_.h)((0,ae.n)((0,ne.Q)((0,se.M)((0,re.q)((0,oe.I)((0,Q.R)(H.Z))))))))))){constructor(e){super(e),this.capabilities=null,this.copyright=null,this.customParameters=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.featureUrl=void 0,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="WFS",this.maxFeatures=3e3,this.mode=0,this.name=null,this.namespaceUri=null,this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new m({layer:this}),this.spatialReference=D.Z.WGS84,this.spatialReferences=[4326],this.swapXY=void 0,this.title="WFS",this.type="wfs",this.url=null,this.version=void 0}static fromWFSLayerInfo(e){const{customParameters:r,fields:o,geometryField:a,geometryType:y,name:v,namespaceUri:l,objectIdField:C,spatialReference:I,swapXY:x,url:j,wfsCapabilities:f}=e;return new R({customParameters:r,fields:o,geometryField:a,geometryType:y,name:v,namespaceUri:l,objectIdField:C,spatialReference:I,swapXY:x,url:j,wfsCapabilities:f})}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},e).then(()=>this.source.load(e)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo","spatialReference","name","namespaceUri"],"service"),(0,S.YN)(this.renderer,this.fieldsIndex),(0,S.UF)(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}writeFields(e,r,o){const a=e.filter(y=>y.name!==h.M8);this.geometryField&&a.unshift(new L.Z({name:this.geometryField,alias:this.geometryField,type:"geometry"})),(0,V.RB)(o,a.map(y=>y.toJSON()),r)}get parsedUrl(){return this.url?(0,B.mN)(this.url):null}set renderer(e){(0,S.YN)(e,this.fieldsIndex),this._set("renderer",e)}createPopupTemplate(e){return(0,ue.eZ)(this,e)}createQuery(){const e=new g.Z;e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:o}=this;return e.timeExtent=null!=r&&null!=o?o.offset(-r.value,r.unit):o||null,e}getFieldDomain(e,r){var o;return null==(o=this.getField(e))?void 0:o.domain}getField(e){return this.fieldsIndex.get(e)}queryFeatures(e,r){return this.load().then(()=>this.source.queryFeatures(g.Z.from(e)||this.createQuery(),r)).then(o=>{if(null!=o&&o.features)for(const a of o.features)a.layer=a.sourceLayer=this;return o})}queryObjectIds(e,r){return this.load().then(()=>this.source.queryObjectIds(g.Z.from(e)||this.createQuery(),r))}queryFeatureCount(e,r){return this.load().then(()=>this.source.queryFeatureCount(g.Z.from(e)||this.createQuery(),r))}queryExtent(e,r){return this.load().then(()=>this.source.queryExtent(g.Z.from(e)||this.createQuery(),r))}hasDataChanged(){var e=this;return(0,p.Z)(function*(){try{const{dataChanged:r,updates:o}=yield e.source.refresh(e.customParameters);return(0,b.pC)(o)&&e.read(o,{origin:"service",url:e.parsedUrl,ignoreDefaults:!0}),r}catch(r){}return!1})()}};(0,i._)([(0,n.Cb)({readOnly:!0,aliasOf:"source.capabilities"})],s.prototype,"capabilities",void 0),(0,i._)([(0,n.Cb)({type:String})],s.prototype,"copyright",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],s.prototype,"createQueryVersion",null),(0,i._)([(0,n.Cb)({json:{name:"wfsInfo.customParameters",write:{ignoreOrigin:!0}}})],s.prototype,"customParameters",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],s.prototype,"defaultPopupTemplate",null),(0,i._)([(0,n.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],s.prototype,"definitionExpression",void 0),(0,i._)([(0,n.Cb)({type:String})],s.prototype,"displayField",void 0),(0,i._)([(0,n.Cb)(c.PV)],s.prototype,"elevationInfo",void 0),(0,i._)([(0,n.Cb)(le.d)],s.prototype,"featureReduction",void 0),(0,i._)([(0,n.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"featureUrl",void 0),(0,i._)([(0,n.Cb)({type:[L.Z],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],s.prototype,"fields",void 0),(0,i._)([(0,z.c)("fields")],s.prototype,"writeFields",null),(0,i._)([(0,n.Cb)(Y.fieldsIndex)],s.prototype,"fieldsIndex",void 0),(0,i._)([(0,n.Cb)({type:J.Z,json:{name:"extent"}})],s.prototype,"fullExtent",void 0),(0,i._)([(0,n.Cb)()],s.prototype,"geometryField",void 0),(0,i._)([(0,n.Cb)({type:String,json:{read:{source:"layerDefinition.geometryType",reader:F.Mk.read},write:{target:"layerDefinition.geometryType",writer:F.Mk.write,ignoreOrigin:!0},origins:{service:{read:F.Mk.read}}}})],s.prototype,"geometryType",void 0),(0,i._)([(0,n.Cb)({type:String})],s.prototype,"id",void 0),(0,i._)([(0,n.Cb)(c.iR)],s.prototype,"labelsVisible",void 0),(0,i._)([(0,n.Cb)({type:[pe.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:ye.r},write:!0}})],s.prototype,"labelingInfo",void 0),(0,i._)([(0,n.Cb)(c.rn)],s.prototype,"legendEnabled",void 0),(0,i._)([(0,n.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,i._)([(0,n.Cb)({type:String})],s.prototype,"objectIdField",void 0),(0,i._)([(0,n.Cb)({type:["WFS"]})],s.prototype,"operationalLayerType",void 0),(0,i._)([(0,n.Cb)({type:w.z8,json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"maxFeatures",void 0),(0,i._)([(0,n.Cb)({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],s.prototype,"mode",void 0),(0,i._)([(0,n.Cb)({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"name",void 0),(0,i._)([(0,n.Cb)({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"namespaceUri",void 0),(0,i._)([(0,n.Cb)(c.bT)],s.prototype,"opacity",void 0),(0,i._)([(0,n.Cb)(Y.outFields)],s.prototype,"outFields",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],s.prototype,"parsedUrl",null),(0,i._)([(0,n.Cb)(c.C_)],s.prototype,"popupEnabled",void 0),(0,i._)([(0,n.Cb)({type:M.Z,json:{name:"popupInfo",write:!0}})],s.prototype,"popupTemplate",void 0),(0,i._)([(0,n.Cb)({types:U.A,json:{origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:U.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],s.prototype,"renderer",null),(0,i._)([(0,n.Cb)(c.YI)],s.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,n.Cb)({readOnly:!0})],s.prototype,"source",void 0),(0,i._)([(0,n.Cb)({type:D.Z,json:{name:"layerDefinition.spatialReference",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],s.prototype,"spatialReference",void 0),(0,i._)([(0,n.Cb)({readOnly:!0,type:[w.z8],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"spatialReferences",void 0),(0,i._)([(0,n.Cb)({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"swapXY",void 0),(0,i._)([(0,n.Cb)({json:{write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"name"}}}})],s.prototype,"title",void 0),(0,i._)([(0,n.Cb)({json:{read:!1},readOnly:!0})],s.prototype,"type",void 0),(0,i._)([(0,n.Cb)(c.HQ)],s.prototype,"url",void 0),(0,i._)([(0,n.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"version",void 0),(0,i._)([(0,n.Cb)({aliasOf:"source.wfsCapabilities"})],s.prototype,"wfsCapabilities",void 0),s=R=(0,i._)([(0,Z.j)("esri.layers.WFSLayer")],s);const fe=s}}]);
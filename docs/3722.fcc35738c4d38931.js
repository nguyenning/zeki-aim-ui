"use strict";var Qt=Object.defineProperty,Ft=Object.defineProperties,zt=Object.getOwnPropertyDescriptors,ft=Object.getOwnPropertySymbols,Kt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable,_t=(V,C,p)=>C in V?Qt(V,C,{enumerable:!0,configurable:!0,writable:!0,value:p}):V[C]=p,O=(V,C)=>{for(var p in C||(C={}))Kt.call(C,p)&&_t(V,p,C[p]);if(ft)for(var p of ft(C))Wt.call(C,p)&&_t(V,p,C[p]);return V},F=(V,C)=>Ft(V,zt(C));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3722],{13160:(V,C,p)=>{var g,I,d;p.d(C,{E9:()=>L,I6:()=>k,Vl:()=>g,bN:()=>W}),(d=g||(g={}))[d.Unknown=0]="Unknown",d[d.Point=1]="Point",d[d.LineString=2]="LineString",d[d.Polygon=3]="Polygon";class L{constructor(s,r){this.x=s,this.y=r}clone(){return new L(this.x,this.y)}equals(s,r){return s===this.x&&r===this.y}isEqual(s){return s.x===this.x&&s.y===this.y}setCoords(s,r){this.x=s,this.y=r}normalize(){const s=this.x,r=this.y,l=Math.sqrt(s*s+r*r);this.x/=l,this.y/=l}rightPerpendicular(){const s=this.x;this.x=this.y,this.y=-s}move(s,r){this.x+=s,this.y+=r}assign(s){this.x=s.x,this.y=s.y}assignAdd(s,r){this.x=s.x+r.x,this.y=s.y+r.y}assignSub(s,r){this.x=s.x-r.x,this.y=s.y-r.y}rotate(s,r){const l=this.x,c=this.y;this.x=l*s-c*r,this.y=l*r+c*s}scale(s){this.x*=s,this.y*=s}length(){const s=this.x,r=this.y;return Math.sqrt(s*s+r*r)}static distance(s,r){const l=r.x-s.x,c=r.y-s.y;return Math.sqrt(l*l+c*c)}static add(s,r){return new L(s.x+r.x,s.y+r.y)}static sub(s,r){return new L(s.x-r.x,s.y-r.y)}}class D{constructor(s,r,l){this.ratio=s,this.x=r,this.y=l}}class W{constructor(s,r,l,c=8,h=8){this._lines=[],this._starts=[],this.validateTessellation=!0,this._pixelRatio=c,this._pixelMargin=h,this._tileSize=512*c,this._dz=s,this._yPos=r,this._xPos=l}setPixelMargin(s){s!==this._pixelMargin&&(this._pixelMargin=s,this.setExtent(this._extent))}setExtent(s){this._extent=s,this._finalRatio=this._tileSize/s*(1<<this._dz);let r=this._pixelRatio*this._pixelMargin;r/=this._finalRatio;const l=s>>this._dz;r>l&&(r=l),this._margin=r,this._xmin=l*this._xPos-r,this._ymin=l*this._yPos-r,this._xmax=this._xmin+l+2*r,this._ymax=this._ymin+l+2*r}reset(s){this._type=s,this._lines=[],this._starts=[],this._line=null,this._start=0}moveTo(s,r){this._pushLine(),this._prevIsIn=this._isIn(s,r),this._moveTo(s,r,this._prevIsIn),this._prevPt=new L(s,r),this._firstPt=new L(s,r),this._dist=0}lineTo(s,r){const l=this._isIn(s,r),c=new L(s,r),h=L.distance(this._prevPt,c);let u,f,x,S,Q,j,R,E;if(l)this._prevIsIn?this._lineTo(s,r,!0):(u=this._prevPt,f=c,x=this._intersect(f,u),this._start=this._dist+h*(1-this._r),this._lineTo(x.x,x.y,!0),this._lineTo(f.x,f.y,!0));else if(this._prevIsIn)f=this._prevPt,u=c,x=this._intersect(f,u),this._lineTo(x.x,x.y,!0),this._lineTo(u.x,u.y,!1);else{const m=this._prevPt,v=c;if(m.x<=this._xmin&&v.x<=this._xmin||m.x>=this._xmax&&v.x>=this._xmax||m.y<=this._ymin&&v.y<=this._ymin||m.y>=this._ymax&&v.y>=this._ymax)this._lineTo(v.x,v.y,!1);else{const M=[];if((m.x<this._xmin&&v.x>this._xmin||m.x>this._xmin&&v.x<this._xmin)&&(S=(this._xmin-m.x)/(v.x-m.x),E=m.y+S*(v.y-m.y),E<=this._ymin?j=!1:E>=this._ymax?j=!0:M.push(new D(S,this._xmin,E))),(m.x<this._xmax&&v.x>this._xmax||m.x>this._xmax&&v.x<this._xmax)&&(S=(this._xmax-m.x)/(v.x-m.x),E=m.y+S*(v.y-m.y),E<=this._ymin?j=!1:E>=this._ymax?j=!0:M.push(new D(S,this._xmax,E))),(m.y<this._ymin&&v.y>this._ymin||m.y>this._ymin&&v.y<this._ymin)&&(S=(this._ymin-m.y)/(v.y-m.y),R=m.x+S*(v.x-m.x),R<=this._xmin?Q=!1:R>=this._xmax?Q=!0:M.push(new D(S,R,this._ymin))),(m.y<this._ymax&&v.y>this._ymax||m.y>this._ymax&&v.y<this._ymax)&&(S=(this._ymax-m.y)/(v.y-m.y),R=m.x+S*(v.x-m.x),R<=this._xmin?Q=!1:R>=this._xmax?Q=!0:M.push(new D(S,R,this._ymax))),0===M.length)this._lineTo(Q?this._xmax:this._xmin,j?this._ymax:this._ymin,!0);else if(M.length>1&&M[0].ratio>M[1].ratio)this._start=this._dist+h*M[1].ratio,this._lineTo(M[1].x,M[1].y,!0),this._lineTo(M[0].x,M[0].y,!0);else{this._start=this._dist+h*M[0].ratio;for(let U=0;U<M.length;U++)this._lineTo(M[U].x,M[U].y,!0)}this._lineTo(v.x,v.y,!1)}}this._dist+=h,this._prevIsIn=l,this._prevPt=c}close(){if(this._line.length>2){const s=this._firstPt,r=this._prevPt;s.x===r.x&&s.y===r.y||this.lineTo(s.x,s.y);const l=this._line;let c=l.length;for(;c>=4&&(l[0].x===l[1].x&&l[0].x===l[c-2].x||l[0].y===l[1].y&&l[0].y===l[c-2].y);)l.pop(),l[0].x=l[c-2].x,l[0].y=l[c-2].y,--c}}result(s=!0){return this._pushLine(),0===this._lines.length?null:(this._type===g.Polygon&&s&&B.simplify(this._tileSize,this._margin*this._finalRatio,this._lines),this._lines)}resultWithStarts(){if(this._type!==g.LineString)throw new Error("Only valid for lines");this._pushLine();const s=this._lines,r=s.length;if(0===r)return null;const l=[];for(let c=0;c<r;c++)l.push({line:s[c],start:this._starts[c]||0});return l}_isIn(s,r){return s>=this._xmin&&s<=this._xmax&&r>=this._ymin&&r<=this._ymax}_intersect(s,r){let l,c,h;if(r.x>=this._xmin&&r.x<=this._xmax)c=r.y<=this._ymin?this._ymin:this._ymax,h=(c-s.y)/(r.y-s.y),l=s.x+h*(r.x-s.x);else if(r.y>=this._ymin&&r.y<=this._ymax)l=r.x<=this._xmin?this._xmin:this._xmax,h=(l-s.x)/(r.x-s.x),c=s.y+h*(r.y-s.y);else{c=r.y<=this._ymin?this._ymin:this._ymax,l=r.x<=this._xmin?this._xmin:this._xmax;const u=(l-s.x)/(r.x-s.x),f=(c-s.y)/(r.y-s.y);u<f?(h=u,c=s.y+u*(r.y-s.y)):(h=f,l=s.x+f*(r.x-s.x))}return this._r=h,new L(l,c)}_pushLine(){this._line&&(this._type===g.Point?this._line.length>0&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===g.LineString?this._line.length>1&&(this._lines.push(this._line),this._starts.push(this._start)):this._type===g.Polygon&&this._line.length>3&&(this._lines.push(this._line),this._starts.push(this._start))),this._line=[],this._start=0}_moveTo(s,r,l){this._type!==g.Polygon?l&&(s=Math.round((s-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.push(new L(s,r))):(l||(s<this._xmin&&(s=this._xmin),s>this._xmax&&(s=this._xmax),r<this._ymin&&(r=this._ymin),r>this._ymax&&(r=this._ymax)),s=Math.round((s-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.push(new L(s,r)),this._isH=!1,this._isV=!1)}_lineTo(s,r,l){let c,h;if(this._type!==g.Polygon)if(l){if(s=Math.round((s-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line.length>0&&(c=this._line[this._line.length-1],c.equals(s,r)))return;this._line.push(new L(s,r))}else this._line&&this._line.length>0&&this._pushLine();else if(l||(s<this._xmin&&(s=this._xmin),s>this._xmax&&(s=this._xmax),r<this._ymin&&(r=this._ymin),r>this._ymax&&(r=this._ymax)),s=Math.round((s-(this._xmin+this._margin))*this._finalRatio),r=Math.round((r-(this._ymin+this._margin))*this._finalRatio),this._line&&this._line.length>0){c=this._line[this._line.length-1];const u=c.x===s,f=c.y===r;if(u&&f)return;this._isH&&u||this._isV&&f?(c.x=s,c.y=r,h=this._line[this._line.length-2],h.x===s&&h.y===r?(this._line.pop(),this._line.length<=1?(this._isH=!1,this._isV=!1):(h=this._line[this._line.length-2],this._isH=h.x===s,this._isV=h.y===r)):(this._isH=h.x===s,this._isV=h.y===r)):(this._line.push(new L(s,r)),this._isH=u,this._isV=f)}else this._line.push(new L(s,r))}}class k{setExtent(s){this._ratio=4096===s?1:4096/s}get validateTessellation(){return this._ratio<1}reset(s){this._lines=[],this._line=null}moveTo(s,r){this._line&&this._lines.push(this._line),this._line=[];const l=this._ratio;this._line.push(new L(s*l,r*l))}lineTo(s,r){const l=this._ratio;this._line.push(new L(s*l,r*l))}close(){const s=this._line;s&&!s[0].isEqual(s[s.length-1])&&s.push(s[0])}result(){return this._line&&this._lines.push(this._line),0===this._lines.length?null:this._lines}}!function(d){d[d.sideLeft=0]="sideLeft",d[d.sideRight=1]="sideRight",d[d.sideTop=2]="sideTop",d[d.sideBottom=3]="sideBottom"}(I||(I={}));class B{static simplify(s,r,l){if(!l)return;const c=-r,h=s+r,u=-r,f=s+r,x=[],S=[],Q=l.length;for(let R=0;R<Q;++R){const E=l[R];if(!E||E.length<2)continue;let m,v=E[0];const M=E.length;for(let U=1;U<M;++U)m=E[U],v.x===m.x&&(v.x<=c&&(v.y>m.y?(x.push(R),x.push(U),x.push(I.sideLeft),x.push(-1)):(S.push(R),S.push(U),S.push(I.sideLeft),S.push(-1))),v.x>=h&&(v.y<m.y?(x.push(R),x.push(U),x.push(I.sideRight),x.push(-1)):(S.push(R),S.push(U),S.push(I.sideRight),S.push(-1)))),v.y===m.y&&(v.y<=u&&(v.x<m.x?(x.push(R),x.push(U),x.push(I.sideTop),x.push(-1)):(S.push(R),S.push(U),S.push(I.sideTop),S.push(-1))),v.y>=f&&(v.x>m.x?(x.push(R),x.push(U),x.push(I.sideBottom),x.push(-1)):(S.push(R),S.push(U),S.push(I.sideBottom),S.push(-1)))),v=m}if(0===x.length||0===S.length)return;B.fillParent(l,S,x),B.fillParent(l,x,S);const j=[];B.calcDeltas(j,S,x),B.calcDeltas(j,x,S),B.addDeltas(j,l)}static fillParent(s,r,l){const c=l.length,h=r.length;for(let u=0;u<h;u+=4){const f=r[u],x=r[u+1],S=r[u+2],Q=s[f][x-1],j=s[f][x];let R=8092,E=-1;for(let m=0;m<c;m+=4){if(l[m+2]!==S)continue;const v=l[m],M=l[m+1],U=s[v][M-1],G=s[v][M];switch(S){case I.sideLeft:case I.sideRight:if(N(Q.y,U.y,G.y)&&N(j.y,U.y,G.y)){const J=Math.abs(G.y-U.y);J<R&&(R=J,E=m)}break;case I.sideTop:case I.sideBottom:if(N(Q.x,U.x,G.x)&&N(j.x,U.x,G.x)){const J=Math.abs(G.x-U.x);J<R&&(R=J,E=m)}}}r[u+3]=E}}static calcDeltas(s,r,l){const c=r.length;for(let h=0;h<c;h+=4){const f=B.calcDelta(h,r,l,[]);s.push(r[h]),s.push(r[h+1]),s.push(r[h+2]),s.push(f)}}static calcDelta(s,r,l,c){const h=r[s+3];if(-1===h)return 0;const u=c.length;return u>1&&c[u-2]===h?0:(c.push(h),B.calcDelta(h,l,r,c)+1)}static addDeltas(s,r){const l=s.length;let c=0;for(let h=0;h<l;h+=4){const u=s[h+3];u>c&&(c=u)}for(let h=0;h<l;h+=4){const u=r[s[h]],f=s[h+1],x=c-s[h+3];switch(s[h+2]){case I.sideLeft:u[f-1].x-=x,u[f].x-=x,1===f&&(u[u.length-1].x-=x),f===u.length-1&&(u[0].x-=x);break;case I.sideRight:u[f-1].x+=x,u[f].x+=x,1===f&&(u[u.length-1].x+=x),f===u.length-1&&(u[0].x+=x);break;case I.sideTop:u[f-1].y-=x,u[f].y-=x,1===f&&(u[u.length-1].y-=x),f===u.length-1&&(u[0].y-=x);break;case I.sideBottom:u[f-1].y+=x,u[f].y+=x,1===f&&(u[u.length-1].y+=x),f===u.length-1&&(u[0].y+=x)}}}}const N=(d,s,r)=>d>=s&&d<=r||d>=r&&d<=s},10193:(V,C,p)=>{p.r(C),p.d(C,{default:()=>Vt});var w=p(15861),g=p(17626),I=p(84792),L=p(59213),D=p(26584),W=p(58817),k=p(62208),B=p(99959),N=p(10699),d=p(21726),s=p(77712),l=(p(90912),p(68653)),c=p(76898),h=p(99433),u=p(2004),f=p(65234),x=p(44917),S=p(50085),Q=p(5143),j=p(65088),R=p(552),E=p(50107),m=p(49286),v=p(6647),M=p(99555);let U=null;var J=p(63290),ot=p(55713);class ht{constructor(e,i){this._spriteSource=e,this._maxTextureSize=i,this.devicePixelRatio=1,this._spriteImageFormat="png",this._isRetina=!1,this._spritesData={},this.image=null,this.width=null,this.height=null,this.loadStatus="not-loaded","url"===e.type&&e.spriteFormat&&(this._spriteImageFormat=e.spriteFormat),e.pixelRatio&&(this.devicePixelRatio=e.pixelRatio),this.baseURL=e.spriteUrl}get spriteNames(){const e=[];for(const i in this._spritesData)e.push(i);return e.sort(),e}getSpriteInfo(e){return this._spritesData?this._spritesData[e]:null}load(e){var i=this;return(0,w.Z)(function*(){if(i.baseURL){i.loadStatus="loading";try{yield i._loadSprites(e),i.loadStatus="loaded"}catch(n){i.loadStatus="failed"}}else i.loadStatus="failed"})()}_loadSprites(e){var i=this;return(0,w.Z)(function*(){i._isRetina=i.devicePixelRatio>1.15;const{width:n,height:o,data:a,json:y}=yield i._getSpriteData(i._spriteSource,e),_=Object.keys(y);if(!_||0===_.length||!a)return i._spritesData=i.image=null,void(i.width=i.height=0);i._spritesData=y,i.width=n,i.height=o;const A=Math.max(i._maxTextureSize,4096);if(n>A||o>A){const T=`Sprite resource for style ${i.baseURL} is bigger than the maximum allowed of ${A} pixels}`;throw J.Z.getLogger("esri.layers.support.SpriteSource").error(T),new D.Z("SpriteSource",T)}let b;for(let T=0;T<a.length;T+=4)b=a[T+3]/255,a[T]=a[T]*b,a[T+1]=a[T+1]*b,a[T+2]=a[T+2]*b;i.image=a})()}_getSpriteData(e,i){var n=this;return(0,w.Z)(function*(){if("image"===e.type){let Z,z;if(n.devicePixelRatio<1.15){if(!e.spriteSource1x)throw new D.Z("SpriteSource","no image data provided for low resolution sprites!");Z=e.spriteSource1x.image,z=e.spriteSource1x.json}else{if(!e.spriteSource2x)throw new D.Z("SpriteSource","no image data provided for high resolution sprites!");Z=e.spriteSource2x.image,z=e.spriteSource2x.json}return"width"in Z&&"height"in Z&&"data"in Z&&((0,ot.eP)(Z.data)||(0,ot.KZ)(Z.data))?{width:Z.width,height:Z.height,data:new Uint8Array(Z.data),json:z}:F(O({},ut(Z)),{json:z})}const o=(0,d.mN)(n.baseURL),a=o.query?"?"+(0,d.B7)(o.query):"",y=n._isRetina?"@2x":"",_=`${o.path}${y}.${n._spriteImageFormat}${a}`,A=`${o.path}${y}.json${a}`,[b,T]=yield Promise.all([(0,I.default)(A,i),(0,I.default)(_,O({responseType:"image"},i))]);return F(O({},ut(T.data)),{json:b.data})})()}}function ut(t){const e=document.createElement("canvas"),i=e.getContext("2d");e.width=t.width,e.height=t.height,i.drawImage(t,0,0,t.width,t.height);const n=i.getImageData(0,0,t.width,t.height);return{width:t.width,height:t.height,data:new Uint8Array(n.data)}}var tt=p(2584),yt=p(59318),gt=p(51026),vt=p(28930),pt=p(58098);class St{constructor(e){this.url=e}fetchTileIndex(){var e=this;return(0,w.Z)(function*(){return e._tileIndexPromise||(e._tileIndexPromise=(0,I.default)(e.url).then(i=>i.data.index)),e._tileIndexPromise})()}dataKey(e,i){var n=this;return(0,w.Z)(function*(){const o=yield n.fetchTileIndex();return(0,N.k_)(i),n._getIndexedDataKey(o,e)})()}_getIndexedDataKey(e,i){const n=[i];if(i.level<0||i.row<0||i.col<0||i.row>>i.level>0||i.col>>i.level>0)return null;let o=i;for(;0!==o.level;)o=new pt.Z(o.level-1,o.row>>1,o.col>>1,o.world),n.push(o);let a,y,_=e,A=n.pop();if(1===_)return A;for(;n.length;)if(a=n.pop(),y=(1&a.col)+((1&a.row)<<1),_){if(0===_[y]){A=null;break}if(1===_[y]){A=a;break}A=a,_=_[y]}return A}}class At{constructor(e,i){this._tilemap=e,this._tileIndexUrl=i}fetchTileIndex(e){var i=this;return(0,w.Z)(function*(){return i._tileIndexPromise||(i._tileIndexPromise=(0,I.default)(i._tileIndexUrl,{query:O({},null==e?void 0:e.query)}).then(n=>n.data.index)),i._tileIndexPromise})()}dataKey(e,i){const{level:n,row:o,col:a}=e,y=new pt.Z(e);return this._tilemap.fetchAvailabilityUpsample(n,o,a,y,i).then(()=>(y.world=e.world,y)).catch(_=>{if((0,N.D_)(_))throw _;return null})}}var Tt=p(88159);class It{constructor(e){this._tileUrl=e,this._promise=null,this._abortController=null,this._abortOptions=[]}getData(e){null===this._promise&&(this._abortController=new AbortController,this._promise=this._makeRequest(this._tileUrl,this._abortController.signal));const i=this._abortOptions;return i.push(e),(0,N.fu)(e,()=>{i.every(n=>(0,N.Hc)(n))&&this._abortController.abort()}),this._promise.then(n=>(0,W.d9)(n))}_makeRequest(e,i){return(0,w.Z)(function*(){const{data:n}=yield(0,I.default)(e,{responseType:"array-buffer",signal:i});return n})()}}const et=new Map;class Pt{constructor(e,i,n){var z;this.tilemap=null,this.tileInfo=null,this.capabilities=null,this.fullExtent=null,this.name=e,this.sourceUrl=i;const o=(0,d.mN)(this.sourceUrl),a=(0,W.d9)(n),y=a.tiles;if(o)for(let K=0;K<y.length;K++){const $=(0,d.mN)(y[K]);$&&((0,d.YP)($.path)||($.path=(0,d.v_)(o.path,$.path)),y[K]=(0,d.fl)($.path,O(O({},o.query),$.query)))}this.tileServers=y;const _=n.capabilities&&n.capabilities.split(",").map(K=>K.toLowerCase().trim()),A=!0===(null==n?void 0:n.exportTilesAllowed),b=!0===(null==_?void 0:_.includes("tilemap")),T=A&&n.hasOwnProperty("maxExportTilesCount")?n.maxExportTilesCount:0;this.capabilities={operations:{supportsExportTiles:A,supportsTileMap:b},exportTiles:A?{maxExportTilesCount:+T}:null},this.tileInfo=(0,gt.d)(a.tileInfo,a,null,{ignoreMinMaxLOD:!0});const Z=n.tileMap?(0,d.fl)((0,d.v_)(o.path,n.tileMap),null!=(z=o.query)?z:{}):null;b?(this.type="vector-tile",this.tilemap=new At(new vt.y({layer:{parsedUrl:o,tileInfo:this.tileInfo,type:"vector-tile",tileServers:this.tileServers}}),Z)):Z&&(this.tilemap=new St(Z)),this.fullExtent=u.Z.fromJSON(n.fullExtent)}destroy(){}getRefKey(e,i){var n=this;return(0,w.Z)(function*(){var o,a;return null!=(a=yield null==(o=n.tilemap)?void 0:o.dataKey(e,i))?a:e})()}requestTile(e,i,n,o){return function Ut(t,e,i,n,o){return function Rt(t,e){return(0,Tt.s1)(et,t,()=>new It(t)).getData(e).then(i=>(et.delete(t),i)).catch(i=>{throw et.delete(t),i})}(t.replace(/\{z\}/gi,e.toString()).replace(/\{y\}/gi,i.toString()).replace(/\{x\}/gi,n.toString()),o)}(this.tileServers[i%this.tileServers.length],e,i,n,o)}isCompatibleWith(e){const i=this.tileInfo,n=e.tileInfo;if(!i.spatialReference.equals(n.spatialReference)||!i.origin.equals(n.origin)||Math.round(i.dpi)!==Math.round(n.dpi))return!1;const o=i.lods,a=n.lods,y=Math.min(o.length,a.length);for(let _=0;_<y;_++){const A=o[_],b=a[_];if(A.level!==b.level||Math.round(A.scale)!==Math.round(b.scale))return!1}return!0}}const st=yt.Z.defaults&&yt.Z.defaults.io.corsEnabledServers;function it(){return(it=(0,w.Z)(function*(t,e){const i={source:null,sourceBase:null,sourceUrl:null,validatedSource:null,style:null,styleBase:null,styleUrl:null,sourceNameToSource:{},primarySourceName:"",spriteFormat:"png"},[n,o]="string"==typeof t?[t,null]:[null,t.jsonUrl];yield X(i,"esri",t,o,e);const a={layerDefinition:i.validatedSource,url:n,serviceUrl:i.sourceUrl,style:i.style,styleUrl:i.styleUrl,spriteUrl:i.style.sprite&&H(i.styleBase,i.style.sprite),spriteFormat:i.spriteFormat,glyphsUrl:i.style.glyphs&&H(i.styleBase,i.style.glyphs),sourceNameToSource:i.sourceNameToSource,primarySourceName:i.primarySourceName};return Y(a.spriteUrl),Y(a.glyphsUrl),a})).apply(this,arguments)}function Y(t){if(!t)return;const e=(0,d.P$)(t);st&&!st.includes(e)&&st.push(e)}function H(...t){let e;for(const i of t)null!=i&&((0,d.oC)(i)?e&&(e=e.split("://")[0]+":"+i.trim()):e=(0,d.YP)(i)?i:(0,d.v_)(e,i));return e?(0,d.Qj)(e):void 0}function X(t,e,i,n,o){return rt.apply(this,arguments)}function rt(){return(rt=(0,w.Z)(function*(t,e,i,n,o){let a,y,_;if((0,N.k_)(o),"string"==typeof i){const b=(0,d.Fv)(i);Y(b),_=yield(0,I.default)(b,F(O({},o),{responseType:"json",query:O({f:"json"},null==o?void 0:o.query)})),_.ssl&&(a&&(a=a.replace(/^http:/i,"https:")),y&&(y=y.replace(/^http:/i,"https:"))),a=b,y=b}else null!=i&&(_={data:i},a=i.jsonUrl||null,y=n);const A=null==_?void 0:_.data;if(ct(A))return t.styleUrl=a||null,Mt(t,A,y,o);if(bt(A))return t.sourceUrl?dt(t,A,y,!1,e,o):(t.sourceUrl=a||null,dt(t,A,y,!0,e,o));throw new Error("You must specify the URL or the JSON for a service or for a style.")})).apply(this,arguments)}function ct(t){return!(null==t||!t.sources)}function bt(t){return!ct(t)}function Mt(t,e,i,n){return nt.apply(this,arguments)}function nt(){return(nt=(0,w.Z)(function*(t,e,i,n){const o=i?(0,d.Yd)(i):(0,d.L)();t.styleBase=o,t.style=e,t.styleUrl&&Y(t.styleUrl),e["sprite-format"]&&"webp"===e["sprite-format"].toLowerCase()&&(t.spriteFormat="webp");const a=[];if(e.sources&&e.sources.esri){const y=e.sources.esri;y.url?yield X(t,"esri",H(o,y.url),void 0,n):a.push(X(t,"esri",y,o,n))}for(const y of Object.keys(e.sources))"esri"!==y&&"vector"===e.sources[y].type&&(e.sources[y].url?a.push(X(t,y,H(o,e.sources[y].url),void 0,n)):e.sources[y].tiles&&a.push(X(t,y,e.sources[y],o,n)));yield Promise.all(a)})).apply(this,arguments)}function dt(t,e,i,n,o,a){return lt.apply(this,arguments)}function lt(){return(lt=(0,w.Z)(function*(t,e,i,n,o,a){var b;const y=i?(0,d.Qj)(i)+"/":(0,d.L)(),_=Lt(e,y),A=new Pt(o,(0,d.fl)(y,null!=(b=null==a?void 0:a.query)?b:{}),_);if(!n&&t.primarySourceName in t.sourceNameToSource){const T=t.sourceNameToSource[t.primarySourceName];if(!T.isCompatibleWith(A))return;null!=A.fullExtent&&(null!=T.fullExtent?T.fullExtent.union(A.fullExtent):T.fullExtent=A.fullExtent.clone()),T.tileInfo&&A.tileInfo&&T.tileInfo.lods.length<A.tileInfo.lods.length&&(T.tileInfo=A.tileInfo)}if(n?(t.sourceBase=y,t.source=e,t.validatedSource=_,t.primarySourceName=o,t.sourceUrl&&Y(t.sourceUrl)):Y(y),t.sourceNameToSource[o]=A,!t.style){if(null==e.defaultStyles)throw new Error;return"string"==typeof e.defaultStyles?X(t,"",H(y,e.defaultStyles,"root.json"),void 0,a):X(t,"",e.defaultStyles,H(y,"root.json"),a)}})).apply(this,arguments)}function Lt(t,e){var b;if(t.hasOwnProperty("tileInfo"))return t;const i={xmin:-20037507.067161843,ymin:-20037507.067161843,xmax:20037507.067161843,ymax:20037507.067161843,spatialReference:{wkid:102100}};let o=78271.51696400007,a=295828763.7957775;const y=[],_=t.hasOwnProperty("minzoom")?+t.minzoom:0,A=t.hasOwnProperty("maxzoom")?+t.maxzoom:22;for(let T=0;T<=A;T++)T>=_&&y.push({level:T,scale:a,resolution:o}),o/=2,a/=2;for(const T of null!=(b=t.tiles)?b:[])Y(H(e,T));return{capabilities:"TilesOnly",initialExtent:i,fullExtent:i,minScale:0,maxScale:0,tiles:t.tiles,tileInfo:{rows:512,cols:512,dpi:96,format:"pbf",origin:{x:-20037508.342787,y:20037508.342787},lods:y,spatialReference:{wkid:102100}}}}var Ct=p(88755),Dt=p(24433),Et=p(29840),Ot=p(72642),Zt=p(72258);const q=1e-6;function Bt(t,e){if(t===e)return!0;if(null==t&&null!=e||null!=t&&null==e||null==t||null==e||!t.spatialReference.equals(e.spatialReference)||t.dpi!==e.dpi)return!1;const i=t.origin,n=e.origin;if(Math.abs(i.x-n.x)>=q||Math.abs(i.y-n.y)>=q)return!1;let o,a;t.lods[0].scale>e.lods[0].scale?(o=t,a=e):(a=t,o=e);for(let y=o.lods[0].scale;y>=a.lods[a.lods.length-1].scale-q;y/=2)if(Math.abs(y-a.lods[0].scale)<q)return!0;return!1}function Nt(t,e){if(t===e)return t;if(null==t&&null!=e)return e;if(null!=t&&null==e)return t;if(null==t||null==e)return null;const i=t.size[0],n=t.format,o=t.dpi,a=new Ot.Z({x:t.origin.x,y:t.origin.y}),y=t.spatialReference,_=t.lods[0].scale>e.lods[0].scale?t.lods[0]:e.lods[0],Z=(t.lods[t.lods.length-1].scale<=e.lods[e.lods.length-1].scale?t.lods[t.lods.length-1]:e.lods[e.lods.length-1]).scale,z=[];let K=_.scale,$=_.resolution,mt=0;for(;K>Z;)z.push(new Zt.Z({level:mt,resolution:$,scale:K})),mt++,K/=2,$/=2;return new tt.Z({size:[i,i],dpi:o,format:n||"pbf",origin:a,lods:z,spatialReference:y})}var jt=p(78364),xt=p(31637);let P=class extends((0,R.h)((0,M.M)((0,Q.Z)((0,j.Y)((0,m.q)((0,v.I)((0,E.N)((0,S.V)((0,B.R)(x.Z)))))))))){constructor(...t){super(...t),this._spriteSourceMap=new Map,this.currentStyleInfo=null,this.style=null,this.isReference=null,this.operationalLayerType="VectorTileLayer",this.type="vector-tile",this.url=null,this.showCollisionBoxes="none",this.path=null}normalizeCtorArgs(t,e){return"string"==typeof t?O({url:t},e):t}destroy(){if(this.sourceNameToSource)for(const t of Object.values(this.sourceNameToSource))null==t||t.destroy();this._spriteSourceMap.clear()}prefetchResources(t){var e=this;return(0,w.Z)(function*(){yield e.loadSpriteSource(globalThis.devicePixelRatio||1,t)})()}load(t){var e=this;const i=this.loadFromPortal({supportedTypes:["Vector Tile Service"],supportsData:!1},t).catch(N.r9).then((0,w.Z)(function*(){if(!e.portalItem||!e.portalItem.id)return;const n=`${e.portalItem.itemUrl}/resources/styles/root.json`;(yield(0,I.default)(n,F(O({},t),{query:F(O({f:"json"},e.customParameters),{token:e.apiKey})}))).data&&e.read({url:n},(0,Ct.h)(e.portalItem))})).catch(N.r9).then(()=>this._loadStyle(t));return this.addResolvingPromise(i),Promise.resolve(this)}get attributionDataUrl(){const t=this.currentStyleInfo,e=t&&t.serviceUrl&&(0,d.mN)(t.serviceUrl);if(!e)return null;const i=this._getDefaultAttribution(e.path);return i?(0,d.fl)(i,F(O({},this.customParameters),{token:this.apiKey})):null}get capabilities(){const t=this.primarySource;return t?t.capabilities:{operations:{supportsExportTiles:!1,supportsTileMap:!1},exportTiles:null}}get fullExtent(){var t;return(null==(t=this.primarySource)?void 0:t.fullExtent)||null}get parsedUrl(){return this.serviceUrl?(0,d.mN)(this.serviceUrl):null}get serviceUrl(){return this.currentStyleInfo&&this.currentStyleInfo.serviceUrl||null}get spatialReference(){var t,e;return null!=(e=null==(t=this.tileInfo)?void 0:t.spatialReference)?e:null}get styleUrl(){return this.currentStyleInfo&&this.currentStyleInfo.styleUrl||null}writeStyleUrl(t,e){t&&(0,d.oC)(t)&&(t=`https:${t}`);const i=(0,k.Wg)((0,Dt.a)(t));e.styleUrl=(0,Et.e)(t,i)}get tileInfo(){var i;const t=[];for(const n in this.sourceNameToSource)t.push(this.sourceNameToSource[n]);let e=(null==(i=this.primarySource)?void 0:i.tileInfo)||new tt.Z;if(t.length>1)for(let n=0;n<t.length;n++)Bt(e,t[n].tileInfo)&&(e=Nt(e,t[n].tileInfo));return e}readVersion(t,e){return e.version?parseFloat(e.version):parseFloat(e.currentVersion)}loadSpriteSource(t=1,e){var i=this;return(0,w.Z)(function*(){var n,o;if(!i._spriteSourceMap.has(t)){const a=(0,xt.hc)("2d").maxTextureSize,y=null!=(n=i.currentStyleInfo)&&n.spriteUrl?(0,d.fl)(i.currentStyleInfo.spriteUrl,F(O({},i.customParameters),{token:i.apiKey})):null,_=new ht({type:"url",spriteUrl:y,pixelRatio:t,spriteFormat:null==(o=i.currentStyleInfo)?void 0:o.spriteFormat},a);yield _.load(e),i._spriteSourceMap.set(t,_)}return i._spriteSourceMap.get(t)})()}setSpriteSource(t,e){var i=this;return(0,w.Z)(function*(){if(!t)return null;const n=(0,xt.hc)("2d").maxTextureSize,o=t.spriteUrl,a=o?(0,d.fl)(o,F(O({},i.customParameters),{token:i.apiKey})):null;if(!a&&"url"===t.type)return null;const y=new ht(t,n);try{yield y.load(e);const _=t.pixelRatio||1;return i._spriteSourceMap.clear(),i._spriteSourceMap.set(_,y),a&&i.currentStyleInfo&&(i.currentStyleInfo.spriteUrl=a),i.emit("spriteSource-change",{spriteSource:y}),y}catch(_){(0,N.r9)(_)}return null})()}loadStyle(t,e){var i=this;return(0,w.Z)(function*(){var o;const n=t||i.style||i.url;return i._loadingTask&&"string"==typeof n&&i.url===n||(null==(o=i._loadingTask)||o.abort(),i._loadingTask=(0,L.vr)(a=>(i._spriteSourceMap.clear(),i._getSourceAndStyle(n,{signal:a})),e)),i._loadingTask.promise})()}getStyleLayerId(t){return this.styleRepository.getStyleLayerId(t)}getStyleLayerIndex(t){return this.styleRepository.getStyleLayerIndex(t)}getPaintProperties(t){return(0,W.d9)(this.styleRepository.getPaintProperties(t))}setPaintProperties(t,e){const i=this.styleRepository.isPainterDataDriven(t);this.styleRepository.setPaintProperties(t,e);const n=this.styleRepository.isPainterDataDriven(t);this.emit("paint-change",{layer:t,paint:e,isDataDriven:i||n})}getStyleLayer(t){return(0,W.d9)(this.styleRepository.getStyleLayer(t))}setStyleLayer(t,e){this.styleRepository.setStyleLayer(t,e),this.emit("style-layer-change",{layer:t,index:e})}deleteStyleLayer(t){this.styleRepository.deleteStyleLayer(t),this.emit("delete-style-layer",{layer:t})}getLayoutProperties(t){return(0,W.d9)(this.styleRepository.getLayoutProperties(t))}setLayoutProperties(t,e){this.styleRepository.setLayoutProperties(t,e),this.emit("layout-change",{layer:t,layout:e})}setStyleLayerVisibility(t,e){this.styleRepository.setStyleLayerVisibility(t,e),this.emit("style-layer-visibility-change",{layer:t,visibility:e})}getStyleLayerVisibility(t){return this.styleRepository.getStyleLayerVisibility(t)}write(t,e){return(null==e?void 0:e.origin)&&!this.styleUrl?(e.messages&&e.messages.push(new D.Z("vectortilelayer:unsupported",`VectorTileLayer (${this.title}, ${this.id}) with style defined by JSON only are not supported`,{layer:this})),null):super.write(t,e)}getTileUrl(t,e,i){return null}_getSourceAndStyle(t,e){var i=this;return(0,w.Z)(function*(){if(!t)throw new Error("invalid style!");const n=yield function wt(t,e){return it.apply(this,arguments)}(t,F(O({},e),{query:F(O({},i.customParameters),{token:i.apiKey})}));"webp"===n.spriteFormat&&((yield function G(t){if(U)return U;const e={lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"};return U=new Promise(i=>{const n=new Image;n.onload=()=>{n.onload=n.onerror=null,i(n.width>0&&n.height>0)},n.onerror=()=>{n.onload=n.onerror=null,i(!1)},n.src="data:image/webp;base64,"+e[t]}),U}("lossy"))||(n.spriteFormat="png")),i._set("currentStyleInfo",O({},n)),"string"==typeof t?(i.url=t,i.style=null):(i.url=null,i.style=t),i._set("sourceNameToSource",n.sourceNameToSource),i._set("primarySource",n.sourceNameToSource[n.primarySourceName]),i._set("styleRepository",new jt.Z(n.style)),i.read(n.layerDefinition,{origin:"service"}),i.emit("load-style")})()}_getDefaultAttribution(t){const e=t.match(/^https?:\/\/(?:basemaps|basemapsbeta|basemapsdev)(?:-api)?\.arcgis\.com(\/[^\/]+)?\/arcgis\/rest\/services\/([^\/]+(\/[^\/]+)*)\/vectortileserver/i),i=["OpenStreetMap_v2","OpenStreetMap_Daylight_v2","OpenStreetMap_Export_v2","OpenStreetMap_FTS_v2","OpenStreetMap_GCS_v2","World_Basemap","World_Basemap_v2","World_Basemap_Export_v2","World_Basemap_GCS_v2","World_Basemap_WGS84","World_Contours_v2"];if(!e)return;const n=e[2]&&e[2].toLowerCase();if(!n)return;const o=e[1]||"";for(const a of i)if(a.toLowerCase().includes(n))return(0,d.Fv)(`//static.arcgis.com/attribution/Vector${o}/${a}`)}_loadStyle(t){var e=this;return(0,w.Z)(function*(){var i,n;return null!=(n=null==(i=e._loadingTask)?void 0:i.promise)?n:e.loadStyle(null,t)})()}};(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"attributionDataUrl",null),(0,g._)([(0,s.Cb)({type:["show","hide"]})],P.prototype,"listMode",void 0),(0,g._)([(0,s.Cb)({json:{read:!0,write:!0}})],P.prototype,"blendMode",void 0),(0,g._)([(0,s.Cb)({readOnly:!0,json:{read:!1}})],P.prototype,"capabilities",null),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"currentStyleInfo",void 0),(0,g._)([(0,s.Cb)({json:{read:!1},readOnly:!0,type:u.Z})],P.prototype,"fullExtent",null),(0,g._)([(0,s.Cb)()],P.prototype,"style",void 0),(0,g._)([(0,s.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],P.prototype,"isReference",void 0),(0,g._)([(0,s.Cb)({type:["VectorTileLayer"]})],P.prototype,"operationalLayerType",void 0),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"parsedUrl",null),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"serviceUrl",null),(0,g._)([(0,s.Cb)({type:f.Z,readOnly:!0})],P.prototype,"spatialReference",null),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"styleRepository",void 0),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"sourceNameToSource",void 0),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"primarySource",void 0),(0,g._)([(0,s.Cb)({type:String,readOnly:!0,json:{write:{ignoreOrigin:!0},origins:{"web-document":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],P.prototype,"styleUrl",null),(0,g._)([(0,h.c)(["portal-item","web-document"],"styleUrl")],P.prototype,"writeStyleUrl",null),(0,g._)([(0,s.Cb)({json:{read:!1,origins:{service:{read:!1}}},readOnly:!0,type:tt.Z})],P.prototype,"tileInfo",null),(0,g._)([(0,s.Cb)({json:{read:!1},readOnly:!0,value:"vector-tile"})],P.prototype,"type",void 0),(0,g._)([(0,s.Cb)({json:{origins:{"web-document":{read:{source:"styleUrl"}},"portal-item":{read:{source:"url"}}},write:!1,read:!1}})],P.prototype,"url",void 0),(0,g._)([(0,s.Cb)({readOnly:!0})],P.prototype,"version",void 0),(0,g._)([(0,l.r)("version",["version","currentVersion"])],P.prototype,"readVersion",null),(0,g._)([(0,s.Cb)({type:String})],P.prototype,"showCollisionBoxes",void 0),(0,g._)([(0,s.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],P.prototype,"path",void 0),P=(0,g._)([(0,c.j)("esri.layers.VectorTileLayer")],P);const Vt=P},88755:(V,C,p)=>{p.d(C,{Y:()=>L,h:()=>I});var w=p(21726),g=p(84687);function I(D){return{origin:"portal-item",url:(0,w.mN)(D.itemUrl),portal:D.portal||g.Z.getDefault(),portalItem:D,readResourcePaths:[]}}function L(D){return{origin:"portal-item",messages:[],writtenProperties:[],url:D.itemUrl?(0,w.mN)(D.itemUrl):null,portal:D.portal||g.Z.getDefault(),portalItem:D}}},86575:(V,C,p)=>{p.d(C,{B1:()=>w,DQ:()=>B,DT:()=>W,JJ:()=>g,Or:()=>N,_U:()=>I,k3:()=>s,sX:()=>l});const w=Number.POSITIVE_INFINITY,g=Math.PI,I=2*g,L=128/g,W=g/180,k=1/Math.LN2;function B(h,u){return(h%=u)>=0?h:h+u}function N(h){return B(h*L,256)}function s(h){return Math.log(h)*k}function l(h,u,f){return h*(1-f)+u*f}}}]);
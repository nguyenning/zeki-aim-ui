"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6813],{96813:(N,z,i)=>{i.d(z,{_:()=>v});var A=i(91558),a=(i(8314),i(54024)),g=i(62208),E=i(84161),n=i(28093),M=i(95390),I=i(72392),T=i(32917),R=i(23841),h=i(67831),U=i(993),B=i(67709),j=i(53928),G=i(57521),L=i(40723),K=i(16396),w=i(92222);class S extends j._{constructor(e){super(e),this._handles=new I.Z,this._location=(0,n.c)(),this._direction=(0,n.f)(1,0,0),this._width=1,this._offset=1,this._length=18,this._color=(0,B.f)(1,0,1,1),this._renderOccluded=L.yD.OccludeAndTransparent,this.applyProps(e)}get location(){return this._location}set location(e){(0,E.k)(this._location,e)||((0,E.c)(this._location,e),this._updateGeometry())}get direction(){return this._direction}set direction(e){(0,E.k)(this._direction,e)||((0,E.c)(this._direction,e),this._updateGeometry())}setDirectionFromPoints(e,r){(0,E.n)(this._direction,(0,E.b)(this._direction,r,e)),this._updateGeometry()}get width(){return this._width}set width(e){e!==this._width&&(this._width=e,this._updateMaterial())}get offset(){return this._offset}set offset(e){e!==this._offset&&(this._offset=e,this._updateGeometry())}get length(){return this._length}set length(e){e!==this._length&&(this._length=e,this._updateGeometry())}get color(){return this._color}set color(e){(0,U.g)(e,this._color)||((0,U.c)(this._color,e),this._updateMaterial())}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}createExternalResources(){const e=new w.U(this.materialParameters);this._handles.add((0,T.YP)(()=>this.view.state.camera,()=>{this._updateGeometry()})),this._externalResources={material:e}}destroyExternalResources(){this._handles.removeAll(),this._externalResources=null}createGeometries(e){const r=G.Z.createPolylineGeometry([(0,n.c)(),(0,n.c)()]),p=G.Z.createPolylineGeometry([(0,n.c)(),(0,n.c)()]),d=(0,g.Wg)(this._externalResources).material;e.addGeometry(r,d),e.addGeometry(p,d),this._updateVertices(e)}forEachExternalMaterial(e){(0,g.pC)(this._externalResources)&&e(this._externalResources.material)}_updateMaterial(){(0,g.Wi)(this._externalResources)||this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,renderOccluded:this._renderOccluded}}_updateGeometry(){const e=this.object;(0,g.Wi)(e)||this._updateVertices(e)}_updateVertices(e){const r=this.view.state.camera;r.projectToScreen(this.location,s),(0,E.a)(c,this.location,this.direction),r.projectToScreen(c,l),(0,h.i)(l,(0,h.g)(l,l,s)),this._updateVertexAttributes(r,e,0,s,l,1),this._updateVertexAttributes(r,e,1,s,l,-1)}_updateVertexAttributes(e,r,p,d,m,x){const f=r.geometryRecords[p],y=f.geometry.getMutableAttribute(K.T.POSITION).data,W=(0,h.f)(P,(0,h.a)(P,m[1]*x,m[0]*-x),this.offset+this.width/2),H=(0,h.b)(u,(0,h.b)(u,(0,h.b)(u,d,(0,h.f)(u,m,this.length/2)),W),W),Z=(0,h.b)(V,H,(0,h.f)(V,m,-this.length));e.unprojectFromScreen(H,c),y[0]=c[0],y[1]=c[1],y[2]=c[2],e.unprojectFromScreen(Z,c),y[3]=c[0],y[4]=c[1],y[5]=c[2],r.geometryVertexAttrsUpdated(f)}}const c=(0,n.c)(),s=(0,R.s1)(),l=(0,R.s1)(),P=(0,R.s1)(),u=(0,R.s1)(),V=(0,R.s1)();var b=i(30693),D=i(77603),t=i(36460),_=i(44725),o=i(13459),O=i(25858);class v extends o.a{visualizeIntersectionPoint(e,r){const{coordinateHelper:p,view:d}=r;return(0,a.ed)(new b.L({view:d,primitive:"circle",geometry:p.vectorToPoint(e.intersectionPoint),elevationInfo:(0,g.Pt)(e.elevationInfo,r.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:A.Z.toUnitRGBA(t.c.orange),pixelSnappingEnabled:!1}))}visualizePoint(e,r){const{coordinateHelper:p,view:d}=r;return(0,a.ed)(new b.L({view:d,primitive:"circle",geometry:p.vectorToPoint(e.point),elevationInfo:(0,g.Pt)(e.elevationInfo,r.elevationInfo),size:20,outlineSize:2,color:[0,0,0,0],outlineColor:A.Z.toUnitRGBA(t.c.orange),pixelSnappingEnabled:!1}))}visualizeLine(e,r){const{coordinateHelper:p,view:d}=r;return(0,a.ed)(this._createLineSegmentHintFromMap(e.type,e.lineStart,e.lineEnd,p,(0,g.Pt)(e.elevationInfo,r.elevationInfo),d,e.fadeLeft,e.fadeRight))}visualizeParallelSign(e,r){const{coordinateHelper:p,view:d}=r,m=(0,g.Pt)(e.elevationInfo,r.elevationInfo),x=(0,O.$r)(e.lineStart,p,m,r.view),f=(0,O.$r)(e.lineEnd,p,m,r.view),y=(0,E.h)(f,x,f,.5),W=new S({view:d,attached:!1,offset:t.c.parallelLineHintOffset,length:t.c.parallelLineHintLength,width:t.c.parallelLineHintWidth,color:A.Z.toUnitRGBA(t.c.orange),location:y,renderOccluded:L.yD.Opaque});return W.setDirectionFromPoints(x,y),W.attached=!0,(0,a.ed)(W)}visualizeRightAngleQuad(e,r){const{coordinateHelper:p,view:d}=r,m=(0,g.Pt)(e.elevationInfo,r.elevationInfo);return(0,a.ed)(new D.R({view:d,attached:!0,color:A.Z.toUnitRGBA(t.c.orange),renderOccluded:L.yD.Transparent,outlineRenderOccluded:L.yD.Opaque,outlineColor:A.Z.toUnitRGBA(t.c.orange),outlineSize:t.c.rightAngleHintOutlineSize,size:t.c.rightAngleHintSize,geometry:{previous:(0,O.$r)(e.previousVertex,p,m,d),center:(0,O.$r)(e.centerVertex,p,m,d),next:(0,O.$r)(e.nextVertex,p,m,d)}}))}_createLineSegmentHintFromMap(e,r,p,d,m,x,f=!0,y=!0){const W=(0,n.c)(),H=(0,n.c)();return(0,O.By)(r,p,d,m,x,W,H),this._createLineSegmentHint(e,x,W,H,f,y)}_createLineSegmentHint(e,r,p,d,m=!0,x=!0){const f=new M.V({view:r,extensionType:M.n.FADED,start:p,end:d,color:A.Z.toUnitRGBA(t.c.orange),renderOccluded:L.yD.Opaque});switch(e){case _.ze.TARGET:f.width=t.c.lineHintWidthTarget,f.fadedExtensions={start:0,end:t.c.lineHintFadedExtensions};break;case _.ze.REFERENCE_EXTENSION:f.width=t.c.lineHintWidthReference,f.fadedExtensions={start:0,end:0};break;case _.ze.REFERENCE:f.width=t.c.lineHintWidthReference,f.fadedExtensions={start:m?t.c.lineHintFadedExtensions:0,end:x?t.c.lineHintFadedExtensions:0}}return f.attached=!0,f}}},95390:(N,z,i)=>{i.d(z,{V:()=>S,n:()=>u}),i(8314);var F=i(72392),a=i(62208),g=i(32917),E=i(84161),n=i(28093),M=i(993),I=i(67709),T=i(85072),R=i(8834),h=i(13777),U=i(70562),B=i(23018),j=i(53928),G=i(57521),L=i(40723),K=i(16396),w=i(92222);class S extends j._{constructor(t){super(t),this._ray=(0,U.Ue)(),this._externalResources=null,this._handles=new F.Z,this._isWorldDown=!1,this._start=(0,n.c)(),this._end=(0,n.f)(1,0,0),this._width=1,this._color=(0,I.f)(1,0,1,1),this._polygonOffset=!1,this._writeDepthEnabled=!0,this._innerWidth=0,this._innerColor=(0,I.f)(1,1,1,1),this._stipplePattern=null,this._stippleOffColor=null,this._stipplePreferContinuous=!0,this._falloff=0,this._extensionType=u.LINE,this._laserlineStyle=null,this._laserlineEnabled=!1,this._renderOccluded=L.yD.OccludeAndTransparent,this._fadedExtensions=b,this.applyProps(t)}createExternalResources(){const t=new w.U(this.materialParameters);this._handles.add((0,g.YP)(()=>this.view.state.camera,()=>{this._updateGeometry()}));const _=new B.W({view:this.view,attached:this._laserlineEnabled});this._externalResources={material:t,laserline:_}}destroyExternalResources(){(0,a.pC)(this._externalResources)&&this._externalResources.laserline.destroy(),this._externalResources=null,this._handles.removeAll()}forEachExternalMaterial(t){(0,a.pC)(this._externalResources)&&t(this._externalResources.material)}createGeometries(t){const _=[(0,n.c)(),(0,n.c)()],o=this.extensionType===u.FADED;o&&_.push((0,n.c)(),(0,n.c)());const O=o?new Float32Array([1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,0]):null,v=G.Z.createPolylineGeometry(_,null,O);t.addGeometry(v,(0,a.Wg)(this._externalResources).material),this._updateVertices(t)}updateVisibility(t){super.updateVisibility(t),(0,a.pC)(this._externalResources)&&(this._externalResources.laserline.visible=t)}setStartEndFromWorldDownAtLocation(t){this._isWorldDown=!0,(0,E.c)(this._start,t),this.view.renderCoordsHelper.worldUpAtPosition(t,this._end),(0,E.b)(this._end,t,this._end),(0,U.zk)(this._start,this._end,this._ray),this._updateGeometry()}get start(){return this._start}set start(t){this._isWorldDown=!1,(0,E.k)(this._start,t)||((0,E.c)(this._start,t),(0,U.zk)(this._start,this._end,this._ray),this._updateGeometry())}get end(){return this._end}set end(t){this._isWorldDown=!1,(0,E.k)(this._end,t)||((0,E.c)(this._end,t),(0,U.zk)(this._start,this._end,this._ray),this._updateGeometry())}get width(){return this._width}set width(t){t!==this._width&&(this._width=t,this._updateMaterial())}get color(){return this._color}set color(t){(0,M.g)(t,this._color)||((0,M.c)(this._color,t),this._updateMaterial())}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){t!==this._polygonOffset&&(this._polygonOffset=t,this._updateMaterial())}get writeDepthEnabled(){return this._writeDepthEnabled}set writeDepthEnabled(t){this._writeDepthEnabled!==t&&(this._writeDepthEnabled=t,this._updateMaterial())}get innerWidth(){return this._innerWidth}set innerWidth(t){t!==this._innerWidth&&(this._innerWidth=t,this._updateMaterial())}get innerColor(){return this._innerColor}set innerColor(t){(0,M.g)(t,this._innerColor)||((0,M.c)(this._innerColor,t),this._updateMaterial())}get stipplePattern(){return this._stipplePattern}set stipplePattern(t){const _=(0,a.pC)(t)!==(0,a.pC)(this._stipplePattern);this._stipplePattern=t,_?this.recreate():this._updateMaterial()}get stippleOffColor(){return this._stippleOffColor}set stippleOffColor(t){((0,a.Wi)(t)||(0,a.Wi)(this._stippleOffColor)||!(0,M.g)(t,this._stippleOffColor))&&(this._stippleOffColor=(0,a.pC)(t)?(0,I.a)(t):null,this._updateMaterial())}get stipplePreferContinuous(){return this._stipplePreferContinuous}set stipplePreferContinuous(t){t!==this._stipplePreferContinuous&&(this._stipplePreferContinuous=t,this._updateMaterial())}get falloff(){return this._falloff}set falloff(t){t!==this._falloff&&(this._falloff=t,this._updateMaterial())}get extensionType(){return this._extensionType}set extensionType(t){t!==this._extensionType&&(this._extensionType=t,this._updateGeometry())}get _laserlineAttached(){return this._laserlineEnabled&&(0,a.pC)(this._laserlineStyle)}get laserlineStyle(){return this._laserlineStyle}set laserlineStyle(t){this._laserlineStyle=t,(0,a.pC)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached,(0,a.pC)(t)&&(this._externalResources.laserline.style=t))}get laserlineEnabled(){return this._laserlineEnabled}set laserlineEnabled(t){this._laserlineEnabled!==t&&(this._laserlineEnabled=t,(0,a.pC)(this._externalResources)&&(this._externalResources.laserline.attached=this._laserlineAttached))}get renderOccluded(){return this._renderOccluded}set renderOccluded(t){t!==this._renderOccluded&&(this._renderOccluded=t,this._updateMaterial())}get fadedExtensions(){return this._fadedExtensions}set fadedExtensions(t){this._fadedExtensions=(0,a.Pt)(t,b),this.recreateGeometry()}_updateMaterial(){(0,a.Wi)(this._externalResources)||this._externalResources.material.setParameters(this.materialParameters)}get materialParameters(){return{width:this._width,color:this._color,stippleOffColor:this._stippleOffColor,stipplePattern:this._stipplePattern,stipplePreferContinuous:this._stipplePreferContinuous,innerWidth:this._innerWidth,innerColor:this._innerColor,falloff:this._falloff,hasPolygonOffset:this._polygonOffset,renderOccluded:this._renderOccluded,writeDepth:this._writeDepthEnabled}}_updateGeometry(){(0,a.pC)(this.object)&&this._updateVertices(this.object)}_updateVertices(t){const _=this._extensionType===u.FADED?this._updateLineSegmentFinite(P):this._updateLineSegmentInfinite(this._extensionType,P);this._updateVertexAttributes(t,_),(0,a.pC)(this._externalResources)&&(this._externalResources.laserline.intersectsLine=_)}_updateLineSegmentFinite(t){return(0,h.zk)(this._start,this._end,t)}_updateLineSegmentInfinite(t,_){const o=this.view.state.camera;switch((0,T.iL)(this._ray,c),t){case u.LINE:c.c0=-Number.MAX_VALUE;break;case u.RAY:case u.GROUND_RAY:{const C=this._ray.origin,e=(0,a.Pt)(this.view.elevationProvider.getElevation(C[0],C[1],C[2],this.view.renderCoordsHelper.spatialReference,"ground"),0),r=this.view.renderCoordsHelper.getAltitude(C);this._isWorldDown&&r<e&&(0,E.o)(c.ray.direction,c.ray.direction),this._extensionType===u.GROUND_RAY&&null!=e&&(c.c1=Math.abs(r-e));break}}if(!(0,R.zq)(o.frustum,c))return(0,h.zk)(this._start,this._end,_);const O=(0,T.Ws)(c,s),v=(0,T.S$)(c,l);return(0,h.zk)(O,v,_)}_updateVertexAttributes(t,_){const o=t.geometries[0].getMutableAttribute(K.T.POSITION).data;if(this.extensionType===u.FADED){const O=(0,h.KU)(_,-this.fadedExtensions.start,s);o[0]=O[0],o[1]=O[1],o[2]=O[2];const v=(0,h.KU)(_,0,s);o[3]=v[0],o[4]=v[1],o[5]=v[2];const C=(0,h.KU)(_,1,s);o[6]=C[0],o[7]=C[1],o[8]=C[2];const e=(0,h.KU)(_,1+this.fadedExtensions.end,s);o[9]=e[0],o[10]=e[1],o[11]=e[2]}else{const O=(0,h.KU)(_,0,s);o[0]=O[0],o[1]=O[1],o[2]=O[2];const v=(0,h.KU)(_,1,s);o[3]=v[0],o[4]=v[1],o[5]=v[2]}t.geometryVertexAttrsUpdated(t.geometryRecords[0])}}const c=(0,T.Ue)(),s=(0,n.c)(),l=(0,n.c)(),P=(0,h.Ue)();var u,D;(D=u||(u={}))[D.LINE=0]="LINE",D[D.RAY=1]="RAY",D[D.GROUND_RAY=2]="GROUND_RAY",D[D.FADED=3]="FADED";const V=1/3,b={start:V,end:V}},77603:(N,z,i)=>{i.d(z,{R:()=>w});var A=i(72392),F=i(62208),a=i(32917),g=i(28347),E=i(43703),n=i(84161),M=i(28093),I=i(993),T=i(67709),R=i(26242),h=i(53928),U=i(52107),B=i(57521),j=i(40723),G=i(16396),L=i(92972),K=i(92222);class w extends h._{constructor(s){super(s),this._handles=new A.Z,this._quadMaterial=null,this._outlineMaterial=null,this._maxSize=0,this._position=(0,M.c)(),this._up=(0,M.c)(),this._right=(0,M.c)(),this._renderOccluded=j.yD.OccludeAndTransparent,this._color=(0,T.f)(1,0,0,1),this._outlineColor=(0,T.f)(0,0,0,1),this._outlineSize=0,this._size=32,this._outlineRenderOccluded=j.yD.Opaque,this.applyProps(s)}get renderOccluded(){return this._renderOccluded}set renderOccluded(s){s!==this._renderOccluded&&(this._renderOccluded=s,this._updateQuadMaterial())}get color(){return this._color}set color(s){(0,I.c)(this._color,s),this._updateQuadMaterial()}get outlineColor(){return this._outlineColor}set outlineColor(s){(0,I.c)(this._outlineColor,s),this._updateOutlineMaterial()}get outlineSize(){return this._outlineSize}set outlineSize(s){const l=0===this._outlineSize!=(0===s);this._outlineSize=s,l?this.recreateGeometry():this._updateOutlineMaterial()}get size(){return this._size}set size(s){s!==this._size&&(this._size=s,this._updateTransform())}get outlineRenderOccluded(){return this._outlineRenderOccluded}set outlineRenderOccluded(s){this._outlineRenderOccluded=s,this._updateOutlineMaterial()}set geometry({previous:s,center:l,next:P}){this._maxSize=Math.min((0,n.i)(l,s),(0,n.i)(l,P))/3,(0,n.n)(this._up,(0,n.b)(this._up,s,l)),(0,n.n)(this._right,(0,n.b)(this._right,P,l)),(0,n.c)(this._position,l),this.recreateGeometry()}createExternalResources(){this._quadMaterial=new L.E(this.quadMaterialParameters),this._outlineMaterial=new K.U(this.outlineMaterialParameters),this._handles.add((0,a.YP)(()=>this.view.state.camera,()=>this._updateTransform()))}destroyExternalResources(){this._quadMaterial=null,this._outlineMaterial=null,this._handles.removeAll()}forEachExternalMaterial(s){s(this._quadMaterial),s(this._outlineMaterial)}createGeometries(s){this._createQuadGeometry(s),this._createOutlineGeometry(s),this._updateTransform(s)}_createQuadGeometry(s){const l=this._quadGeometryData(this._up,this._right);s.addGeometry(l,this._quadMaterial)}_createOutlineGeometry(s){if(0===this._outlineSize)return;const l=(0,n.a)(R.WM.get(),this._up,this._right),P=B.Z.createPolylineGeometry([this._up,l,this._right]);s.addGeometry(P,this._outlineMaterial)}_updateTransform(s=this.object){const P=this._size*this.view.state.camera.computeScreenPixelSizeAt(this._position),u=Math.min(this._maxSize,P);(0,g.f)(S,this._position),(0,g.h)(S,S,[u,u,u]),(0,F.pC)(s)&&(s.transformation=S)}_quadGeometryData(s,l){const P=(0,n.a)(R.WM.get(),s,l);return new U.Z([[G.T.POSITION,{size:3,data:[0,0,0,...l,...s,...P],exclusive:!0}]],[[G.T.POSITION,new Uint16Array([0,1,2,1,2,3])]])}get quadMaterialParameters(){return{color:this._color,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:this._renderOccluded}}_updateQuadMaterial(){this._quadMaterial&&this._quadMaterial.setParameters(this.quadMaterialParameters)}get outlineMaterialParameters(){return{color:this._outlineColor,width:this._outlineSize,renderOccluded:this._outlineRenderOccluded}}_updateOutlineMaterial(){this._outlineMaterial&&this._outlineMaterial.setParameters(this.outlineMaterialParameters)}}const S=(0,E.c)()}}]);
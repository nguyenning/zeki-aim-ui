"use strict";var Q=Object.defineProperty,G=Object.defineProperties,$=Object.getOwnPropertyDescriptors,N=Object.getOwnPropertySymbols,A=Object.prototype.hasOwnProperty,B=Object.prototype.propertyIsEnumerable,j=(d,l,i)=>l in d?Q(d,l,{enumerable:!0,configurable:!0,writable:!0,value:i}):d[l]=i,v=(d,l)=>{for(var i in l||(l={}))A.call(l,i)&&j(d,i,l[i]);if(N)for(var i of N(l))B.call(l,i)&&j(d,i,l[i]);return d},x=(d,l)=>G(d,$(l));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5625],{85625:(d,l,i)=>{i.r(l),i.d(l,{default:()=>W});var u=i(15861),o=i(17626),b=(i(29132),i(26584)),g=i(62208),O=i(10699),J=i(21726),n=i(77712),P=(i(90912),i(85931),i(68653)),F=i(76898),D=i(80415),L=i(8314),T=i(47996),w=i(59289),V=i(17253),E=i(2004);let c=class extends T.Z{constructor(t){var e;super(t),e=this,this.type="csv",this.refresh=(0,O.Ds)(function(){var r=(0,u.Z)(function*(a){yield e.load();const{extent:y,timeExtent:p}=yield e._connection.invoke("refresh",a);return y&&(e.sourceJSON.extent=y),p&&(e.sourceJSON.timeInfo.timeExtent=[p.start,p.end]),{dataChanged:!0,updates:{extent:e.sourceJSON.extent,timeInfo:e.sourceJSON.timeInfo}}});return function(a){return r.apply(this,arguments)}}())}load(t){const e=(0,g.pC)(t)?t.signal:null;return this.addResolvingPromise(this._startWorker(e)),Promise.resolve(this)}destroy(){var t;null==(t=this._connection)||t.close(),this._connection=null}openPorts(){var t=this;return(0,u.Z)(function*(){return yield t.load(),t._connection.openPorts()})()}queryFeatures(t,e={}){var r=this;return(0,u.Z)(function*(){yield r.load(e);const a=yield r._connection.invoke("queryFeatures",t?t.toJSON():null,e);return V.Z.fromJSON(a)})()}queryFeaturesJSON(t,e={}){var r=this;return(0,u.Z)(function*(){return yield r.load(e),r._connection.invoke("queryFeatures",t?t.toJSON():null,e)})()}queryFeatureCount(t,e={}){var r=this;return(0,u.Z)(function*(){return yield r.load(e),r._connection.invoke("queryFeatureCount",t?t.toJSON():null,e)})()}queryObjectIds(t,e={}){var r=this;return(0,u.Z)(function*(){return yield r.load(e),r._connection.invoke("queryObjectIds",t?t.toJSON():null,e)})()}queryExtent(t,e={}){var r=this;return(0,u.Z)(function*(){yield r.load(e);const a=yield r._connection.invoke("queryExtent",t?t.toJSON():null,e);return{count:a.count,extent:E.Z.fromJSON(a.extent)}})()}querySnapping(t,e={}){var r=this;return(0,u.Z)(function*(){return yield r.load(e),r._connection.invoke("querySnapping",t,e)})()}_startWorker(t){var e=this;return(0,u.Z)(function*(){e._connection=yield(0,w.bA)("CSVSourceWorker",{strategy:(0,L.Z)("feature-layers-workers")?"dedicated":"local",signal:t});const{url:r,delimiter:a,fields:y,latitudeField:p,longitudeField:m,spatialReference:h,timeInfo:C}=e.loadOptions,S=yield e._connection.invoke("load",{url:r,customParameters:e.customParameters,parsingOptions:{delimiter:a,fields:null==y?void 0:y.map(M=>M.toJSON()),latitudeField:p,longitudeField:m,spatialReference:null==h?void 0:h.toJSON(),timeInfo:null==C?void 0:C.toJSON()}},{signal:t});e.locationInfo=S.locationInfo,e.sourceJSON=S.layerDefinition,e.delimiter=S.delimiter})()}};(0,o._)([(0,n.Cb)()],c.prototype,"type",void 0),(0,o._)([(0,n.Cb)()],c.prototype,"loadOptions",void 0),(0,o._)([(0,n.Cb)()],c.prototype,"customParameters",void 0),(0,o._)([(0,n.Cb)()],c.prototype,"locationInfo",void 0),(0,o._)([(0,n.Cb)()],c.prototype,"sourceJSON",void 0),(0,o._)([(0,n.Cb)()],c.prototype,"delimiter",void 0),c=(0,o._)([(0,F.j)("esri.layers.graphics.sources.CSVSource")],c);var R=i(56554),f=i(96854),I=i(29840),U=i(65234);function Z(t,e){throw new b.Z(e,`CSVLayer (title: ${t.title}, id: ${t.id}) cannot be saved to a portal item`)}let s=class extends D.default{constructor(...t){super(...t),this.geometryType="point",this.capabilities=(0,R.MS)(!1,!1),this.delimiter=null,this.editingEnabled=!1,this.fields=null,this.latitudeField=null,this.locationType="coordinates",this.longitudeField=null,this.operationalLayerType="CSV",this.outFields=["*"],this.path=null,this.spatialReference=U.Z.WGS84,this.source=null,this.type="csv"}normalizeCtorArgs(t,e){return"string"==typeof t?v({url:t},e):t}load(t){var e=this;const r=(0,g.pC)(t)?t.signal:null,a=this.loadFromPortal({supportedTypes:["CSV"],supportsData:!1},t).catch(O.r9).then((0,u.Z)(function*(){return e.initLayerProperties(yield e.createGraphicsSource(r))}));return this.addResolvingPromise(a),Promise.resolve(this)}get isTable(){return this.loaded&&null==this.geometryType}readWebMapLabelsVisible(t,e){return null!=e.showLabels?e.showLabels:!!(e.layerDefinition&&e.layerDefinition.drawingInfo&&e.layerDefinition.drawingInfo.labelingInfo)}set url(t){if(!t)return void this._set("url",t);const e=(0,J.mN)(t);this._set("url",e.path),e.query&&(this.customParameters=v(v({},this.customParameters),e.query))}createGraphicsSource(t){var e=this;return(0,u.Z)(function*(){var a,y,p,m,h;const r=new c({loadOptions:{delimiter:e.delimiter,fields:e.fields,latitudeField:null!=(a=e.latitudeField)?a:void 0,longitudeField:null!=(y=e.longitudeField)?y:void 0,spatialReference:null!=(p=e.spatialReference)?p:void 0,timeInfo:null!=(m=e.timeInfo)?m:void 0,url:e.url},customParameters:null!=(h=e.customParameters)?h:void 0});return e._set("source",r),yield r.load({signal:t}),e.read({locationInfo:r.locationInfo,columnDelimiter:r.delimiter},{origin:"service",url:e.parsedUrl}),r})()}queryFeatures(t,e){return this.load().then(()=>this.source.queryFeatures(f.Z.from(t)||this.createQuery())).then(r=>{if(null!=r&&r.features)for(const a of r.features)a.layer=a.sourceLayer=this;return r})}queryObjectIds(t,e){return this.load().then(()=>this.source.queryObjectIds(f.Z.from(t)||this.createQuery()))}queryFeatureCount(t,e){return this.load().then(()=>this.source.queryFeatureCount(f.Z.from(t)||this.createQuery()))}queryExtent(t,e){return this.load().then(()=>this.source.queryExtent(f.Z.from(t)||this.createQuery()))}read(t,e){super.read(t,e),e&&"service"===e.origin&&this.revert(["latitudeField","longitudeField"],"service")}write(t,e){return super.write(t,x(v({},e),{writeLayerSchema:!0}))}clone(){throw new b.Z("csv-layer:clone",`CSVLayer (title: ${this.title}, id: ${this.id}) cannot be cloned`)}save(t){var e=this;return(0,u.Z)(function*(){return Z(e,"csv-layer:save")})()}saveAs(t,e){var r=this;return(0,u.Z)(function*(){return Z(r,"csv-layer:save-as")})()}hasDataChanged(){var t=this;return(0,u.Z)(function*(){try{const{dataChanged:e,updates:r}=yield t.source.refresh(t.customParameters);return(0,g.pC)(r)&&t.read(r,{origin:"service",url:t.parsedUrl,ignoreDefaults:!0}),e}catch(e){}return!1})()}_verifyFields(){}_verifySource(){}_hasMemorySource(){return!1}};(0,o._)([(0,n.Cb)({readOnly:!0,json:{read:!1,write:!1}})],s.prototype,"capabilities",void 0),(0,o._)([(0,n.Cb)({type:[","," ",";","|","\t"],json:{read:{source:"columnDelimiter"},write:{target:"columnDelimiter",ignoreOrigin:!0}}})],s.prototype,"delimiter",void 0),(0,o._)([(0,n.Cb)({readOnly:!0,type:Boolean,json:{origins:{"web-scene":{read:!1,write:!1}}}})],s.prototype,"editingEnabled",void 0),(0,o._)([(0,n.Cb)({json:{read:{source:"layerDefinition.fields"},write:{target:"layerDefinition.fields"}}})],s.prototype,"fields",void 0),(0,o._)([(0,n.Cb)({type:Boolean,readOnly:!0})],s.prototype,"isTable",null),(0,o._)([(0,P.r)("web-map","labelsVisible",["layerDefinition.drawingInfo.labelingInfo","showLabels"])],s.prototype,"readWebMapLabelsVisible",null),(0,o._)([(0,n.Cb)({type:String,json:{read:{source:"locationInfo.latitudeFieldName"},write:{target:"locationInfo.latitudeFieldName",ignoreOrigin:!0}}})],s.prototype,"latitudeField",void 0),(0,o._)([(0,n.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,o._)([(0,n.Cb)({type:["coordinates"],json:{read:{source:"locationInfo.locationType"},write:{target:"locationInfo.locationType",ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"locationType",void 0),(0,o._)([(0,n.Cb)({type:String,json:{read:{source:"locationInfo.longitudeFieldName"},write:{target:"locationInfo.longitudeFieldName",ignoreOrigin:!0}}})],s.prototype,"longitudeField",void 0),(0,o._)([(0,n.Cb)({type:["CSV"]})],s.prototype,"operationalLayerType",void 0),(0,o._)([(0,n.Cb)()],s.prototype,"outFields",void 0),(0,o._)([(0,n.Cb)({type:String,json:{origins:{"web-scene":{read:!1,write:!1}},read:!1,write:!1}})],s.prototype,"path",void 0),(0,o._)([(0,n.Cb)({json:{read:!1},cast:null,type:c,readOnly:!0})],s.prototype,"source",void 0),(0,o._)([(0,n.Cb)({json:{read:!1},value:"csv",readOnly:!0})],s.prototype,"type",void 0),(0,o._)([(0,n.Cb)({json:{read:I.r,write:{isRequired:!0,ignoreOrigin:!0,writer:I.w}}})],s.prototype,"url",null),s=(0,o._)([(0,F.j)("esri.layers.CSVLayer")],s);const W=s}}]);
"use strict";var Ce=Object.defineProperty,Ee=Object.defineProperties,be=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,xe=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,k=(E,f,a)=>f in E?Ce(E,f,{enumerable:!0,configurable:!0,writable:!0,value:a}):E[f]=a,S=(E,f)=>{for(var a in f||(f={}))xe.call(f,a)&&k(E,a,f[a]);if(X)for(var a of X(f))Oe.call(f,a)&&k(E,a,f[a]);return E},Q=(E,f)=>Ee(E,be(f));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[126],{50126:(E,f,a)=>{a.d(f,{Z:()=>ve});var b=a(15861),n=a(17626),O=a(26584),u=a(62208),m=a(32917),l=a(77712),x=(a(85931),a(8314),a(90912),a(76898)),D=a(84786),R=a(23010),I=a(79216),w=a(19702),G=a(54984),v=a(14517),V=a(10699),T=a(38114),K=a(20477),ee=a(88879),te=a(42930),H=a(65234),re=a(36255);class se{constructor(r){this._schedule=r,this._handle=new ie(r)}destroy(){this._handle.destroy()}invoke(r,e){return r.buffer&&0!==r.buffer.byteLength?(r.options.sourceSpatialReference&&r.options.sourceSpatialReference instanceof H.Z&&(r.options=Q(S({},r.options),{sourceSpatialReference:r.options.sourceSpatialReference.toJSON()})),this._handle.invoke(r,e).then(i=>this._schedule(()=>{if(i.spatialReference=H.Z.fromJSON(i.spatialReference),i.fields)for(let o=0;o<i.fields.length;o++)i.fields[o]=re.Z.fromJSON(i.fields[o]);const s=i.spatialReference;for(const o of i.features)o.uid=ee.Z.generateUID(),(0,u.pC)(o.geometry)&&(o.geometry.spatialReference=s);return i}))):Promise.resolve(null)}}class ie extends te.q{constructor(r){super("PBFDecoderWorker","_parseFeatureQuery",{_parseFeatureQuery:e=>[e.buffer]},r)}}let A=class extends v.Z{constructor(t){super(t)}get queryFeaturesDehydrated(){var e,i;const t=this.layer.capabilities,r=t&&t.query;if(r&&r.supportsFormatPBF){(0,u.Wi)(this._decoder)&&(this._decoder=new se(this.schedule));const s={sourceSpatialReference:null!=(i=null==(e=this.layer.spatialReference)?void 0:e.toJSON())?i:null,applyTransform:!0,maxStringAttributeLength:1024};return(o,c)=>(0,K.runQuery)(this.layer.parsedUrl,o,"pbf",this._createRequestOptions(c)).then(h=>((0,V.k_)(c),(0,u.pC)(this._decoder)?this._decoder.invoke({buffer:h.data,options:s},c.signal):Promise.reject((0,V.zE)())))}return(s,o)=>(0,K.executeQuery)(this.layer.parsedUrl,s,this.layer.spatialReference,this._createRequestOptions(o)).then(c=>(0,T.PA)(c.data))}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}destroy(){this._decoder=(0,u.SC)(this._decoder)}_createRequestOptions(t){return Q(S({},t),{query:S(Q(S({},this.layer.customParameters),{token:this.layer.apiKey}),null==t?void 0:t.query)})}};(0,n._)([(0,l.Cb)({constructOnly:!0})],A.prototype,"layer",void 0),(0,n._)([(0,l.Cb)({constructOnly:!0})],A.prototype,"schedule",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],A.prototype,"queryFeaturesDehydrated",null),A=(0,n._)([(0,x.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],A);let L=class extends v.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,n._)([(0,l.Cb)({constructOnly:!0})],L.prototype,"layer",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],L.prototype,"queryFeaturesDehydrated",null),L=(0,n._)([(0,x.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceMeshQuery3D")],L);let U=class extends v.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.layer.queryFeatures(t,r)}};(0,n._)([(0,l.Cb)({constructOnly:!0})],U.prototype,"layer",void 0),U=(0,n._)([(0,x.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileServiceQuery3D")],U);let N=class extends v.Z{constructor(t){super(t)}queryFeaturesDehydrated(t,r){return this.source.queryFeaturesJSON(t,r).then(T.PA,e=>{if(e&&"query-features-json:unsupported"===e.name)return this.layer.queryFeatures(t,r);throw e})}queryFeatureCount(t,r){return this.layer.queryFeatureCount(t,r)}};(0,n._)([(0,l.Cb)({constructOnly:!0})],N.prototype,"layer",void 0),(0,n._)([(0,l.Cb)({constructOnly:!0})],N.prototype,"source",void 0),N=(0,n._)([(0,x.j)("esri.views.3d.layers.support.featureTileQuery3D.FeatureTileClientQuery3D")],N);class oe{constructor(r){this._memoryCache=null,this._capabilities=null;const e=r.layerView.layer;this.layerView=r.layerView,this.objectIdField=e.objectIdField,this.globalIdField="globalIdField"in e?e.globalIdField:null,this.returnZ=r.returnZ,this.returnM=r.returnM;const i=this.layerView.view.resourceController;this.query=function ae(t,r){return"feature"===t.type&&"feature-layer"===t.source.type?(0,u.pC)(t.infoFor3D)?new L({layer:t}):new A({layer:t,schedule:r}):"feature"===t.type&&"memory"===t.source.type||"csv"===t.type||"geojson"===t.type||"wfs"===t.type?new N({layer:t,source:t.source}):"ogc-feature"===t.type?new U({layer:t}):null}(e,s=>i.schedule(s)),i&&this.memoryCacheEnabled&&(this._memoryCache=i.memoryController.newCache(e.uid))}get memoryCacheEnabled(){switch(this.layerView.layer.source.type){case"feature-layer":case"ogc-feature":return!0;case"csv":case"geojson":case"memory":case"wfs":return!1}}destroy(){this._memoryCache=(0,u.SC)(this._memoryCache),this.query.destroy()}createQuery(){const r=this.layerView.layer.createQuery();return r.outFields=this.layerView.availableFields,r.returnZ=this.returnZ,r.returnM=this.returnM,r.outSpatialReference=this.tilingScheme.spatialReference,r}get memoryCache(){return this._memoryCache}get viewingMode(){return this.layerView.view.state.viewingMode}get tilingScheme(){return this.layerView.view.featureTiles.tilingScheme}get scheduler(){const r=this.layerView.view.resourceController;return r?r.scheduler:null}get geometryType(){return this.layerView.layer.geometryType}get fullExtent(){return this.layerView.layer.fullExtent}get tileMaxRecordCount(){return this.layerView.layer.capabilities.query.tileMaxRecordCount}get maxRecordCount(){return this.layerView.layer.capabilities.query.maxRecordCount}get capabilities(){return(0,u.pC)(this._capabilities)||(this._capabilities=(0,G.A)(this.layerView.layer)),this._capabilities}logFetchError(r,e){r.error("#fetchTile()",this.layerView.layer,e&&e.message?e.message:e)}}var ne=a(36967),le=a(41632),B=a(42743),Y=a(55538),ue=a(63290),de=a(13812),ce=a(2319),pe=a(98624),g=a(36630),$=a(59990),ye=a(84952),he=a(46679),W=a(10023);const q=ue.Z.getLogger("esri.views.layers.FeatureLayerView"),fe=t=>{let r=class extends t{constructor(...e){super(...e),this._updatingRequiredFieldsPromise=null,this.filter=null,this.timeExtent=null,this.layer=null,this.requiredFields=[],this.view=null}initialize(){this.handles.add([(0,m.YP)(()=>{var i;const e=this.layer;return[null==(i=null==e?void 0:e.elevationInfo)?void 0:i.featureExpressionInfo,null==e?void 0:e.displayField,null==e?void 0:e.timeInfo,e&&"renderer"in e&&e.renderer,e&&"labelingInfo"in e&&e.labelingInfo,e&&"floorInfo"in e&&e.floorInfo,this.filter,this.featureEffect,this.timeExtent]},()=>this._handleRequiredFieldsChange(),m.tX),(0,m.on)(()=>{var e;return null==(e=this.view)?void 0:e.floors},"change",()=>this._handleRequiredFieldsChange()),(0,m.on)(()=>{const e=this.layer;return e&&"sublayers"in e&&e.sublayers},"change",()=>this._handleRequiredFieldsChange())])}get availableFields(){const{layer:e,layer:{fieldsIndex:i},requiredFields:s}=this;return(0,g.Q0)(i,"outFields"in e&&e.outFields?[...(0,g.Lk)(i,e.outFields),...s]:s)}set effect(e){(0,Y.Mr)(q,"effect",{replacement:"featureEffect",version:"4.22"}),this.featureEffect=e}get effect(){return(0,Y.Mr)(q,"effect",{replacement:"featureEffect",version:"4.22"}),this.featureEffect}get featureEffect(){return this.layer&&"featureEffect"in this.layer?this.layer.featureEffect:null}set featureEffect(e){void 0!==e?this._override("featureEffect",e):this._clearOverride("featureEffect")}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(e){q.error("#maximumNumberOfFeatures=","Setting maximum number of features is not supported")}get maximumNumberOfFeaturesExceeded(){return!1}highlight(e){throw new Error("missing implementation")}createQuery(){const e={outFields:["*"],returnGeometry:!0,outSpatialReference:this.view.spatialReference},i=(0,u.pC)(this.filter)?this.filter.createQuery(e):new ye.Z(e);if("feature"===this.layer.type){const s=(0,$.c)(this);(0,u.pC)(s)&&(i.where=i.where?`(${i.where}) AND (${s})`:s)}return(0,u.pC)(this.timeExtent)&&(i.timeExtent=(0,u.pC)(i.timeExtent)?i.timeExtent.intersection(this.timeExtent):this.timeExtent.clone()),i}queryFeatures(e,i){throw new Error("missing implementation")}queryObjectIds(e,i){throw new Error("missing implementation")}queryFeatureCount(e,i){throw new Error("missing implementation")}queryExtent(e,i){throw new Error("missing implementation")}fetchPopupFeatures(e,i){var s=this;return(0,b.Z)(function*(){const o=s.validateFetchPopupFeatures(i);if(o)throw o;return s.fetchClientPopupFeatures(i)})()}_loadArcadeModules(e){if(e.get("expressionInfos.length")||Array.isArray(e.content)&&e.content.some(i=>"expression"===i.type))return(0,he.LC)()}_handleRequiredFieldsChange(){const e=this._updateRequiredFields();this._set("_updatingRequiredFieldsPromise",e),e.then(()=>{this._updatingRequiredFieldsPromise===e&&this._set("_updatingRequiredFieldsPromise",null)})}_updateRequiredFields(){var e=this;return(0,b.Z)(function*(){if(!e.layer||!e.view)return;const i="3d"===e.view.type,{layer:s,layer:{fieldsIndex:o,objectIdField:c}}=e,h="renderer"in s&&s.renderer,d="orderBy"in s&&s.orderBy,y=s.featureReduction,p=new Set,_=yield(0,V.as)([h?h.collectRequiredFields(p,o):null,(0,g.Mu)(p,s),i?(0,g.vl)(p,s):null,(0,u.pC)(e.filter)?(0,g.Ll)(p,s,e.filter):null,(0,u.pC)(e.featureEffect)?(0,g.Ll)(p,s,e.featureEffect.filter):null,y?(0,g.ZV)(p,s,y):null,d?(0,g.Qj)(p,s,d):null]);if(s.timeInfo&&e.timeExtent&&(0,g.gd)(p,s.fieldsIndex,[s.timeInfo.startField,s.timeInfo.endField]),"feature"===s.type&&s.floorInfo&&(0,g.gd)(p,s.fieldsIndex,[s.floorInfo.floorField]),"subtype-group"===s.type){(0,g.AB)(p,o,s.subtypeField);const P=s.sublayers.map(z=>{var J;return Promise.all([null==(J=z.renderer)?void 0:J.collectRequiredFields(p,o),(0,g.Mu)(p,z)])});yield(0,V.as)(P)}for(const P of _)P.error&&q.error(P.error);(0,g.AB)(p,o,c),i&&"displayField"in s&&s.displayField&&(0,g.AB)(p,o,s.displayField);const Z=Array.from(p).sort();e._set("requiredFields",Z)})()}validateFetchPopupFeatures(e){if((0,u.Wi)(e))return null;for(const i of e.clientGraphics){const s=i.layer;if("popupEnabled"in s&&!s.popupEnabled)return new O.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:s});if(i.isAggregate){if(!(s.featureReduction&&"popupTemplate"in s.featureReduction&&s.featureReduction.popupEnabled&&s.featureReduction.popupTemplate))return new O.Z("featurelayerview:fetchPopupFeatures","Popups are disabled",{layer:s})}else if("popupTemplate"in s&&!(0,W.V)(s,e))return new O.Z("featurelayerview:fetchPopupFeatures","Layer does not define a popup template",{layer:s})}}fetchClientPopupFeatures(e){var i=this;return(0,b.Z)(function*(){const s=(0,u.pC)(e)?e.clientGraphics:null;if(!s||0===s.length)return[];const o=new Array(s.length),c=new Map,h=yield i.createPopupQuery(e);for(let d=0;d<s.length;d++){const y=s[d];if(y.isAggregate){o[d]=y;continue}const{layer:p}=y;if(!("popupEnabled"in p))continue;const _=(0,g.Lk)(i.layer.fieldsIndex,h.outFields),Z=(0,W.V)(p,e);if((0,u.Wi)(Z))continue;const P=yield i._loadArcadeModules(Z);P&&P.arcadeUtils.hasGeometryOperations(Z)||!(0,g.R9)(_,y)?c.set(y.getObjectId(),d):o[d]=y}if("stream"===i.layer.type||0===c.size)return o.filter(Boolean);h.objectIds=Array.from(c.keys());try{const d=yield i.layer.queryFeatures(h);for(const y of d.features)o[c.get(y.getObjectId())]=y}catch(d){}return o.filter(Boolean)})()}createPopupQuery(e){var i=this;return(0,b.Z)(function*(){const s=i.layer.createQuery(),o=new Set;let c=!1;const h=(0,u.pC)(e)&&e.clientGraphics?e.clientGraphics.map(d=>d.layer):[i.layer];for(const d of h){if(!("popupEnabled"in d))continue;const y=(0,W.V)(d,e);if((0,u.Wi)(y))continue;const p=yield i._loadArcadeModules(y),_=p&&p.arcadeUtils.hasGeometryOperations(y);c=!("point"!==i.layer.geometryType&&!_);const Z=yield(0,W.e)(i.layer,y);for(const P of Z)o.add(P)}if(s.returnGeometry=c,s.returnZ=c,s.returnM=c,s.outFields=Array.from(o),s.outSpatialReference=i.view.spatialReference,"feature"===i.layer.type){const d=(0,$.c)(i);(0,u.pC)(d)&&(s.where=s.where?`(${s.where}) AND (${d})`:d)}return s})()}canResume(){return!(!super.canResume()||(0,u.pC)(this.timeExtent)&&this.timeExtent.isEmpty)}};return(0,n._)([(0,l.Cb)()],r.prototype,"_updatingRequiredFieldsPromise",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],r.prototype,"availableFields",null),(0,n._)([(0,l.Cb)()],r.prototype,"effect",null),(0,n._)([(0,l.Cb)({type:ce.Z})],r.prototype,"featureEffect",null),(0,n._)([(0,l.Cb)({type:pe.Z})],r.prototype,"filter",void 0),(0,n._)([(0,l.Cb)(de.qG)],r.prototype,"timeExtent",void 0),(0,n._)([(0,l.Cb)()],r.prototype,"layer",void 0),(0,n._)([(0,l.Cb)({type:Number})],r.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,l.Cb)({readOnly:!0,type:Boolean})],r.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,l.Cb)({readOnly:!0})],r.prototype,"requiredFields",void 0),(0,n._)([(0,l.Cb)()],r.prototype,"suspended",void 0),(0,n._)([(0,l.Cb)()],r.prototype,"view",void 0),r=(0,n._)([(0,x.j)("esri.views.layers.FeatureLayerView")],r),r};var me=a(45611),ge=a(94421);let C=class extends((0,ge.Z)((0,I.R)(fe((0,w.A)(me.Z))))){constructor(t){super(t),this._controllerTotal=0,this._processorTotal=0,this.suspendResumeExtentMode="data"}initialize(){this.updatingHandles.add(()=>this.view.floors,()=>(0,u.pC)(this.processor.filterVisibility)&&this.processor.filterVisibility.filterChanged()),this.handles.add((0,m.YP)(()=>this._updatingRequiredFieldsPromise,t=>this.updatingHandles.addPromise(t),m.tX))}destroy(){this.updatingHandles.removeAll(),this.handles.removeAll(),this.fetcherContext=(0,u.SC)(this.fetcherContext)}get maximumNumberOfFeatures(){var t,r;return null!=(r=null==(t=this.controller)?void 0:t.maximumNumberOfFeatures)?r:this._get("maximumNumberOfFeatures")}set maximumNumberOfFeatures(t){this._set("maximumNumberOfFeatures",t),this.controller&&(this.controller.maximumNumberOfFeatures=t)}get maximumNumberOfFeaturesExceeded(){return!!this.controller&&!(this.suspended||!this.controller.maximumNumberOfFeaturesExceeded)}get updatingProgressValue(){var e,i;let t=0;if(null!=(e=this.controller)&&e.updating){const s=this.controller.updatingRemaining,o=Math.max(this.controller.updatingTotal,this._controllerTotal);o>0&&(t=(o-s)/o,this._controllerTotal=o)}let r=0;if(null!=(i=this.processor)&&i.updating){const s=this.processor.updatingRemaining,o=Math.max(s,this._processorTotal);o>0&&(r=(o-s)/o,this._processorTotal=o)}return.5*(t+r)}get updatePolicy(){if(!this.controller)return B.jq.ASYNC;switch(this.controller.mode){case"snapshot":{const t=Fe[this.layer.geometryType];return null==t||this.controller.serviceDataCount>t?B.jq.ASYNC:B.jq.SYNC}case"tiles":return B.jq.ASYNC}}get hasZ(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsZ)&&("returnZ"in t&&null!=t.returnZ?t.returnZ:r.supportsZ)}get hasM(){const t=this.layer,r=t.capabilities&&t.capabilities.data;return!(!r||!r.supportsM)&&"returnM"in t&&null!=t.returnM&&t.returnM}setVisibility(t,r){var e;null==(e=this.processor)||e.setObjectIdVisibility(t,r)}createQuery(){return super.createQuery()}queryFeatures(t,r){const e=()=>super.queryFeatures(t,r);return"mesh"===this.layer.geometryType?this._queryFeaturesMesh(this._ensureQuery(t),e):e()}beforeSetController(t){t.maximumNumberOfFeatures=this.maximumNumberOfFeatures}createController(){this.fetcherContext=new oe({layerView:this,returnZ:this.hasZ,returnM:this.hasM});const t=new R.g({layerView:this,context:this.fetcherContext,graphics:new ne.g,extent:this.clippingExtent});return this.updatingHandles.add(()=>t.serviceDataExtent,r=>{this.processor&&(this.processor.dataExtent=r)},m.nn),this.handles.add((0,m.YP)(()=>this.suspended,r=>{r?t.suspend():t.resume()},m.tX)),this.updatingHandles.add(()=>{var r;return null==(r=this.processor)?void 0:r.displayFeatureLimit},r=>t.displayFeatureLimit=r,m.nn),this.handles.add((0,m.gx)(()=>!this.updating,()=>{this._controllerTotal=0,this._processorTotal=0})),t}doRefresh(t){var r=this;return(0,b.Z)(function*(){t&&!r.suspended&&r.controller&&r.controller.refetch(),(0,u.pC)(r.processor.filterVisibility)&&(r.processor.filterVisibility.dirty=!0)})()}getUsedMemory(){var t,r,e,i;return(null!=(r=null==(t=this.processor)?void 0:t.usedMemory)?r:0)+(null!=(i=null==(e=this.controller)?void 0:e.memoryForUnusedFeatures)?i:0)}getUnloadedMemory(){var t,r,e,i;return(null!=(r=null==(t=this.processor)?void 0:t.unprocessedMemoryEstimate)?r:0)+(null==(e=this.controller)?void 0:e.expectedFeatureDiff)*(null==(i=this.processor)?void 0:i.usedMemoryPerFeature)}ignoresMemoryFactor(){var t;return null==(t=this.controller)?void 0:t.hasMaximumNumberOfFeaturesOverride}_queryFeaturesMesh(t,r){var e=this;return(0,b.Z)(function*(){yield e._validateQueryFeaturesMesh(t);const i=yield r();if(t&&t.outStatistics||(0,u.Wi)(e.graphics3DProcessor))return i;const s=e.layer.objectIdField,o=e.graphics3DProcessor.graphics3DGraphicsByObjectID,c=[];for(const h of i.features)if(h.geometry){const d=o.get(h.attributes[s]);d&&(h.geometry=(0,D.kB)(d.graphic.geometry),c.push(h))}else c.push(h);return i.features=c,i})()}_validateQueryFeaturesMesh(t){var r=this;return(0,b.Z)(function*(){if(!t)return;const e=s=>{throw new O.Z("feature-layer-view:unsupported-query",`Queries on Mesh feature collection layers do not support '${s}'`)},i=["quantizationParameters","geometryPrecision","maxAllowableOffset"];for(const s of i)null!=t[s]&&e(s);"returnM"in t&&t.returnM&&e("returnM"),"returnCentroid"in t&&t.returnCentroid&&e("returnCentroid"),(0,u.pC)(t.outSpatialReference)&&!t.outSpatialReference.equals(r.view.spatialReference)&&e("outSpatialReference")})()}get performanceInfo(){var s,o,c,h,d;const t=null==(s=this.controller)?void 0:s.displayFeatureLimit,r=(0,u.pC)(t)&&t.averageSymbolComplexity,e=(0,u.pC)(r)?`f:${r.primitivesPerFeature},v:${r.primitivesPerCoordinate}`:"n/a",i=Q(S({},this._getResourceInfo()),{storedFeatures:0,totalVertices:0,partial:this.maximumNumberOfFeaturesExceeded,mode:null!=(c=null==(o=this.controller)?void 0:o.mode)?c:"n/a",symbolComplexity:e,nodes:null!=(d=null==(h=this.controller)?void 0:h.tileDescriptors.length)?d:0});if(this.controller&&i.displayedNumberOfFeatures){const y=this.controller.debug;i.storedFeatures=y.storedFeatures,i.totalVertices=y.totalVertices}return i}get test(){var t;return{updatePolicy:this.updatePolicy,controller:this.controller,loadedGraphics:null==(t=this.controller)?void 0:t.graphics}}};(0,n._)([(0,l.Cb)()],C.prototype,"layer",void 0),(0,n._)([(0,l.Cb)()],C.prototype,"controller",void 0),(0,n._)([(0,l.Cb)()],C.prototype,"_controllerTotal",void 0),(0,n._)([(0,l.Cb)()],C.prototype,"_processorTotal",void 0),(0,n._)([(0,l.Cb)()],C.prototype,"maximumNumberOfFeatures",null),(0,n._)([(0,l.Cb)()],C.prototype,"maximumNumberOfFeaturesExceeded",null),(0,n._)([(0,l.Cb)(le.q)],C.prototype,"updatingProgress",void 0),(0,n._)([(0,l.Cb)({readOnly:!0})],C.prototype,"updatingProgressValue",null),(0,n._)([(0,l.Cb)({readOnly:!0})],C.prototype,"updatePolicy",null),(0,n._)([(0,l.Cb)({readOnly:!0})],C.prototype,"hasZ",null),(0,n._)([(0,l.Cb)({readOnly:!0})],C.prototype,"hasM",null),(0,n._)([(0,l.Cb)()],C.prototype,"suspendResumeExtentMode",void 0),C=(0,n._)([(0,x.j)("esri.views.3d.layers.FeatureLayerViewBase3D")],C);const Fe={point:5e3,polygon:500,polyline:1e3},ve=C},94421:(E,f,a)=>{a.d(f,{Z:()=>x});var b=a(17626),n=a(63290),O=a(10699),u=a(32917),m=a(77712),j=(a(85931),a(8314),a(90912),a(76898));const x=D=>{let R=class extends D{initialize(){this.handles.add((0,u.on)(()=>this.layer,"refresh",I=>{this.doRefresh(I.dataChanged).catch(w=>{(0,O.D_)(w)||n.Z.getLogger(this.declaredClass).error(w)})}),"RefreshableLayerView")}};return(0,b._)([(0,m.Cb)()],R.prototype,"layer",void 0),R=(0,b._)([(0,j.j)("esri.layers.mixins.RefreshableLayerView")],R),R}},10023:(E,f,a)=>{a.d(f,{V:()=>l,e:()=>u});var b=a(15861),n=a(62208),O=a(36630);function u(F){return m.apply(this,arguments)}function m(){return(m=(0,b.Z)(function*(F,M=F.popupTemplate){if((0,n.Wi)(M))return[];const j=yield M.getRequiredFields(F.fieldsIndex),{lastEditInfoEnabled:x}=M,{objectIdField:D,typeIdField:R,globalIdField:I,relationships:w}=F;if(j.includes("*"))return["*"];const G=x?yield(0,O.CH)(F):[],v=(0,O.Q0)(F.fieldsIndex,[...j,...G]);return R&&v.push(R),v&&D&&F.fieldsIndex.has(D)&&!v.includes(D)&&v.push(D),v&&I&&F.fieldsIndex.has(I)&&!v.includes(I)&&v.push(I),w&&w.forEach(V=>{const{keyField:T}=V;v&&T&&F.fieldsIndex.has(T)&&!v.includes(T)&&v.push(T)}),v})).apply(this,arguments)}function l(F,M){return F.popupTemplate?F.popupTemplate:(0,n.pC)(M)&&M.defaultPopupTemplateEnabled&&(0,n.pC)(F.defaultPopupTemplate)?F.defaultPopupTemplate:null}}}]);
"use strict";var Ze=Object.defineProperty,Le=Object.defineProperties,Pe=Object.getOwnPropertyDescriptors,de=Object.getOwnPropertySymbols,Re=Object.prototype.hasOwnProperty,Ne=Object.prototype.propertyIsEnumerable,ue=(p,a,r)=>a in p?Ze(p,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):p[a]=r,pe=(p,a)=>{for(var r in a||(a={}))Re.call(a,r)&&ue(p,r,a[r]);if(de)for(var r of de(a))Ne.call(a,r)&&ue(p,r,a[r]);return p},ye=(p,a)=>Le(p,Pe(a));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[676],{6189:(p,a,r)=>{r.r(a),r.d(a,{default:()=>Me});var S=r(15861),t=r(17626),b=r(46160),W=r(46882),C=r(26584),y=r(58817),u=r(47877),c=r(63290),x=r(62208),D=r(99959),B=r(10699),w=r(21726),s=r(77712),A=(r(90912),r(68653)),l=r(76898),E=r(65234),M=r(44917),Z=r(49410),h=r(20925),L=r(50085),ce=r(65088),he=r(49286),ve=r(6647),ge=r(99555),G=r(72455),f=r(86810),fe=r(35948);r(85931);let P=class extends f.wq{constructor(){super(...arguments),this.type=null}};(0,t._)([(0,s.Cb)({type:String,readOnly:!0,json:{write:!0}})],P.prototype,"type",void 0),P=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterAuthoringInfo")],P);const re=P;var H;let I=H=class extends f.wq{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new H({filterType:this.filterType,filterValues:(0,y.d9)(this.filterValues)})}};var X;(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],I.prototype,"filterType",void 0),(0,t._)([(0,s.Cb)({type:[String],json:{write:!0}})],I.prototype,"filterValues",void 0),I=H=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterAuthoringInfoType")],I);const be=b.Z.ofType(I);let R=X=class extends f.wq{clone(){return new X({filterTypes:(0,y.d9)(this.filterTypes)})}};var z;(0,t._)([(0,s.Cb)({type:be,json:{write:!0}})],R.prototype,"filterTypes",void 0),R=X=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],R);const Ce=b.Z.ofType(R);let j=z=class extends re{constructor(){super(...arguments),this.type="checkbox"}clone(){return new z({filterBlocks:(0,y.d9)(this.filterBlocks)})}};(0,t._)([(0,s.Cb)({type:["checkbox"]})],j.prototype,"type",void 0),(0,t._)([(0,s.Cb)({type:Ce,json:{write:!0}})],j.prototype,"filterBlocks",void 0),j=z=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],j);const ie=j;let N=class extends f.wq{};(0,t._)([(0,s.Cb)({readOnly:!0,json:{read:!1}})],N.prototype,"type",void 0),N=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterMode")],N);const V=N;var Q;let U=Q=class extends V{constructor(){super(...arguments),this.type="solid"}clone(){return new Q}};(0,t._)([(0,s.Cb)({type:["solid"],readOnly:!0,json:{write:!0}})],U.prototype,"type",void 0),U=Q=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterModeSolid")],U);const Y=U;var $,Be=r(55342),Fe=r(61261);let O=$=class extends V{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new $({edges:(0,y.d9)(this.edges)})}};(0,t._)([(0,Be.J)({wireFrame:"wire-frame"})],O.prototype,"type",void 0),(0,t._)([(0,s.Cb)(Fe.Z)],O.prototype,"edges",void 0),O=$=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterModeWireFrame")],O);const se=O;var k;let K=k=class extends V{constructor(){super(...arguments),this.type="x-ray"}clone(){return new k}};(0,t._)([(0,s.Cb)({type:["x-ray"],readOnly:!0,json:{write:!0}})],K.prototype,"type",void 0),K=k=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterModeXRay")],K);const le=K;var q;const xe={nonNullable:!0,types:{key:"type",base:V,typeMap:{solid:Y,"wire-frame":se,"x-ray":le}},json:{read:e=>{switch(e&&e.type){case"solid":return Y.fromJSON(e);case"wireFrame":return se.fromJSON(e);case"x-ray":return le.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}};let F=q=class extends f.wq{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new Y,this.title=""}clone(){return new q({filterExpression:this.filterExpression,filterMode:(0,y.d9)(this.filterMode),title:this.title})}};var _;(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],F.prototype,"filterExpression",void 0),(0,t._)([(0,s.Cb)(xe)],F.prototype,"filterMode",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],F.prototype,"title",void 0),F=q=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilterBlock")],F);const je=b.Z.ofType(F);let m=_=class extends f.wq{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=(0,fe.D)(),this.name=null}clone(){return new _({description:this.description,filterBlocks:(0,y.d9)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,y.d9)(this.filterAuthoringInfo)})}};(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],m.prototype,"description",void 0),(0,t._)([(0,s.Cb)({type:je,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,"filterBlocks",void 0),(0,t._)([(0,s.Cb)({types:{key:"type",base:re,typeMap:{checkbox:ie}},json:{read:e=>"checkbox"===(e&&e.type)?ie.fromJSON(e):null,write:!0}})],m.prototype,"filterAuthoringInfo",void 0),(0,t._)([(0,s.Cb)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,"id",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],m.prototype,"name",void 0),m=_=(0,t._)([(0,l.j)("esri.layers.support.BuildingFilter")],m);const Oe=m;var Te=r(84792),we=r(47996),Ae=r(60330);let v=class extends f.wq{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};(0,t._)([(0,s.Cb)({type:String})],v.prototype,"fieldName",void 0),(0,t._)([(0,s.Cb)({type:String})],v.prototype,"modelName",void 0),(0,t._)([(0,s.Cb)({type:String})],v.prototype,"label",void 0),(0,t._)([(0,s.Cb)({type:Number})],v.prototype,"min",void 0),(0,t._)([(0,s.Cb)({type:Number})],v.prototype,"max",void 0),(0,t._)([(0,s.Cb)({json:{read:e=>Array.isArray(e)&&(e.every(i=>"string"==typeof i)||e.every(i=>"number"==typeof i))?e.slice():null}})],v.prototype,"mostFrequentValues",void 0),(0,t._)([(0,s.Cb)({type:[Number]})],v.prototype,"subLayerIds",void 0),v=(0,t._)([(0,l.j)("esri.layers.support.BuildingFieldStatistics")],v);let T=class extends(we.Z.LoadableMixin((0,Ae.v)(f.wq))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(c.Z.getLogger(this.declaredClass).error("building summary statistics are not loaded"),null)}load(e){const i=(0,x.pC)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(i)),Promise.resolve(this)}_fetchService(e){var i=this;return(0,S.Z)(function*(){const o=(yield(0,Te.default)(i.url,{query:{f:"json"},responseType:"json",signal:e})).data;i.read(o,{origin:"service"})})()}};(0,t._)([(0,s.Cb)({constructOnly:!0,type:String})],T.prototype,"url",void 0),(0,t._)([(0,s.Cb)({readOnly:!0,type:[v],json:{read:{source:"summary"}}})],T.prototype,"fields",null),T=(0,t._)([(0,l.j)("esri.layers.support.BuildingSummaryStatistics")],T);const oe=T;var ee=r(13812),Ee=r(74711);const ne=b.Z.ofType(Oe),te=(0,y.d9)(h.Z.sublayersProperty);te.json.origins["web-scene"]={type:[Z.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},te.json.origins["portal-item"]={type:[Z.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}};let n=class extends((0,G.Vt)((0,ce.Y)((0,he.q)((0,ve.I)((0,ge.M)((0,D.R)((0,L.V)(M.Z)))))))){constructor(e){super(e),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new W.Z({getCollections:()=>[this.sublayers],getChildrenFunction:i=>"building-group"===i.type?i.sublayers:null}),this.sublayers=null,this._sublayerOverrides=null,this.filters=new ne,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.type="building-scene"}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:null!=e?e:{}}destroy(){this.allSublayers.destroy()}readSublayers(e,i,o){const d=h.Z.readSublayers(e,i,o);return h.Z.forEachSublayer(d,g=>g.layer=this),this._sublayerOverrides&&(this.applySublayerOverrides(d,this._sublayerOverrides),this._sublayerOverrides=null),d}applySublayerOverrides(e,{overrides:i,context:o}){h.Z.forEachSublayer(e,d=>d.read(i.get(d.id),o))}readSublayerOverrides(e,i){var d;const o=new Map;for(const g of e)null!=g&&"object"==typeof g&&"number"==typeof g.id?o.set(g.id,g):null==(d=i.messages)||d.push(new C.Z("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:g}));return{overrides:o,context:i}}writeSublayerOverrides(e,i,o){const d=[];h.Z.forEachSublayer(this.sublayers,g=>{const ae=g.write({},o);Object.keys(ae).length>1&&d.push(ae)}),d.length>0&&(i.sublayers=d)}writeUnappliedOverrides(e,i){i.sublayers=[],e.overrides.forEach(o=>{i.sublayers.push((0,y.d9)(o))})}write(e,i){return e=super.write(e,i),!i||"web-scene"!==i.origin&&"portal-item"!==i.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,i):this._sublayerOverrides&&this.writeUnappliedOverrides(this._sublayerOverrides,e)),e}read(e,i){if(super.read(e,i),i&&("web-scene"===i.origin||"portal-item"===i.origin)&&null!=e&&Array.isArray(e.sublayers)){const o=this.readSublayerOverrides(e.sublayers,i);this.sublayers?this.applySublayerOverrides(this.sublayers,o):this._sublayerOverrides=o}}readSummaryStatistics(e,i){var o;if("string"==typeof i.statisticsHRef){const d=(0,w.v_)(null==(o=this.parsedUrl)?void 0:o.path,i.statisticsHRef);return new oe({url:d})}return null}set elevationInfo(e){this._set("elevationInfo",e),this._validateElevationInfo()}load(e){const i=(0,x.pC)(e)?e.signal:null,o=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(B.r9).then(()=>this._fetchService(i)).then(()=>this._fetchAssociatedFeatureService(i));return this.addResolvingPromise(o),Promise.resolve(this)}loadAll(){return(0,u.G)(this,e=>{h.Z.forEachSublayer(this.sublayers,i=>{"building-group"!==i.type&&e(i)}),this.summaryStatistics&&e(this.summaryStatistics)})}saveAs(e,i){var o=this;return(0,S.Z)(function*(){return o._debouncedSaveOperations(G.xp.SAVE_AS,ye(pe({},i),{getTypeKeywords:()=>o._getTypeKeywords(),portalItemLayerType:"building-scene"}),e)})()}save(){var e=this;return(0,S.Z)(function*(){const i={getTypeKeywords:()=>e._getTypeKeywords(),portalItemLayerType:"building-scene"};return e._debouncedSaveOperations(G.xp.SAVE,i)})()}validateLayer(e){if(!e.layerType||"Building"!==e.layerType)throw new C.Z("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}_getTypeKeywords(){return["Building"]}_validateElevationInfo(){const e=this.elevationInfo;e&&("absolute-height"!==e.mode&&c.Z.getLogger(this.declaredClass).warn(".elevationInfo=","Building scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&c.Z.getLogger(this.declaredClass).warn(".elevationInfo=","Building scene layers do not support featureExpressionInfo"))}_fetchAssociatedFeatureService(e){var i=this;return(0,S.Z)(function*(){const o=new Ee.W(i.parsedUrl,i.portalItem,i.apiKey,e);try{i.associatedFeatureServiceItem=yield o.fetchPortalItem()}catch(d){c.Z.getLogger(i.declaredClass).warn("Associated feature service item could not be loaded",d)}})()}};(0,t._)([(0,s.Cb)({type:["BuildingSceneLayer"]})],n.prototype,"operationalLayerType",void 0),(0,t._)([(0,s.Cb)({readOnly:!0})],n.prototype,"allSublayers",void 0),(0,t._)([(0,s.Cb)(te)],n.prototype,"sublayers",void 0),(0,t._)([(0,A.r)("service","sublayers")],n.prototype,"readSublayers",null),(0,t._)([(0,s.Cb)({type:ne,nonNullable:!0,json:{write:!0}})],n.prototype,"filters",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],n.prototype,"activeFilterId",void 0),(0,t._)([(0,s.Cb)({readOnly:!0,type:oe})],n.prototype,"summaryStatistics",void 0),(0,t._)([(0,A.r)("summaryStatistics",["statisticsHRef"])],n.prototype,"readSummaryStatistics",null),(0,t._)([(0,s.Cb)({type:[String],json:{read:!1}})],n.prototype,"outFields",void 0),(0,t._)([(0,s.Cb)(ee.vg)],n.prototype,"fullExtent",void 0),(0,t._)([(0,s.Cb)({type:["show","hide","hide-children"]})],n.prototype,"listMode",void 0),(0,t._)([(0,s.Cb)((0,ee.Lx)(E.Z))],n.prototype,"spatialReference",void 0),(0,t._)([(0,s.Cb)(ee.PV)],n.prototype,"elevationInfo",null),(0,t._)([(0,s.Cb)({json:{read:!1},readOnly:!0})],n.prototype,"type",void 0),(0,t._)([(0,s.Cb)()],n.prototype,"associatedFeatureServiceItem",void 0),n=(0,t._)([(0,l.j)("esri.layers.BuildingSceneLayer")],n);const Me=n},10023:(p,a,r)=>{r.d(a,{V:()=>y,e:()=>W});var S=r(15861),t=r(62208),b=r(36630);function W(u){return C.apply(this,arguments)}function C(){return(C=(0,S.Z)(function*(u,c=u.popupTemplate){var E,M;if((0,t.Wi)(c))return[];const x=yield c.getRequiredFields(u.fieldsIndex),{lastEditInfoEnabled:D}=c,{objectIdField:B,typeIdField:w,globalIdField:s,relationships:J}=u;if(x.includes("*"))return["*"];const A=D?yield(0,b.CH)(u):[],l=(0,b.Q0)(u.fieldsIndex,[...x,...A]);return w&&l.push(w),l&&B&&(null==(E=u.fieldsIndex)?void 0:E.has(B))&&!l.includes(B)&&l.push(B),l&&s&&(null==(M=u.fieldsIndex)?void 0:M.has(s))&&!l.includes(s)&&l.push(s),J&&J.forEach(Z=>{var L;const{keyField:h}=Z;l&&h&&(null==(L=u.fieldsIndex)?void 0:L.has(h))&&!l.includes(h)&&l.push(h)}),l})).apply(this,arguments)}function y(u,c){return u.popupTemplate?u.popupTemplate:(0,t.pC)(c)&&c.defaultPopupTemplateEnabled&&(0,t.pC)(u.defaultPopupTemplate)?u.defaultPopupTemplate:null}}}]);
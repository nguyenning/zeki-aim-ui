"use strict";var zt=Object.defineProperty,He=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,It=Object.prototype.propertyIsEnumerable,Ke=(z,A,o)=>A in z?zt(z,A,{enumerable:!0,configurable:!0,writable:!0,value:o}):z[A]=o,Ne=(z,A)=>{for(var o in A||(A={}))Ut.call(A,o)&&Ke(z,o,A[o]);if(He)for(var o of He(A))It.call(A,o)&&Ke(z,o,A[o]);return z};(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[496],{8549:(z,A,o)=>{o.d(A,{C:()=>Q,b:()=>ie});var g=o(10109),U=o(33726),d=o(2166),u=o(95285),V=o(69960),j=o(17625),le=o(22355),I=o(42743),te=o(16396);function ie(D){const v=new le.kG;return v.extensions.add("GL_OES_standard_derivatives"),(0,d.S)(v,D),v.attributes.add(te.T.POSITION,"vec3"),v.attributes.add(te.T.UV0,"vec2"),v.varyings.add("vUV","vec2"),D.hasMultipassTerrain&&v.varyings.add("depth","float"),v.vertex.code.add(j.H`
    void main(void) {
      vUV = uv0;
      ${D.hasMultipassTerrain?"depth = (view * vec4(position, 1.0)).z;":""}
      gl_Position = proj * view * vec4(position, 1.0);
    }
  `),v.include(g.l,D),v.fragment.uniforms.add(new u.A("size",R=>R.size)),v.fragment.uniforms.add(new V.N("color1",R=>R.color1)),v.fragment.uniforms.add(new V.N("color2",R=>R.color2)),v.fragment.include(U.Y),v.fragment.code.add(j.H`
    void main() {
      ${D.hasMultipassTerrain?"terrainDepthTest(gl_FragCoord, depth);":""}
      vec2 uvScaled = vUV / (2.0 * size);

      vec2 uv = fract(uvScaled - 0.25);
      vec2 ab = clamp((abs(uv - 0.5) - 0.25) / fwidth(uvScaled), -0.5, 0.5);
      float fade = smoothstep(0.25, 0.5, max(fwidth(uvScaled.x), fwidth(uvScaled.y)));
      float t = mix(abs(ab.x + ab.y), 0.5, fade);

      gl_FragColor = mix(color2, color1, t);
      ${D.transparencyPassType===I.Am.Color?"gl_FragColor = premultiplyAlpha(gl_FragColor);":""}
    }
  `),v}const Q=Object.freeze(Object.defineProperty({__proto__:null,build:ie},Symbol.toStringTag,{value:"Module"}))},60496:(z,A,o)=>{o.r(A),o.d(A,{default:()=>Gt});var g=o(17626),U=o(14517),d=o(62208),u=o(77712),I=(o(85931),o(8314),o(90912),o(76898)),te=o(39691),ie=o(1437),Q=o(74554),D=o(32917),v=o(55915),R=o(12080),me=o(21286),w=o(15572),se=o(67831),ve=o(99770),c=o(84161),p=o(28093),x=o(4794),B=o(65234),J=o(78172),de=o(11519),fe=o(11544),F=o(44766),L=o(37118),k=o(10049),q=o(98943);function $e(s,e,n){const r={distance:null};return(0,k.cA)(r,[s[0],s[1]],[e[0],e[1]],n),r.distance}function Xe(s,e,n,r){const a=Je;return(0,v.ke)(s,r,$)&&(0,v.ke)(e,r,X)&&(0,v.ke)(n,r,Re)?(a.setPoint(0,0,$),a.setPoint(0,1,X),a.setPoint(0,2,Re),Math.abs((0,F.geodesicArea)(a,"square-meters"))):0}const $=(0,p.c)(),X=(0,p.c)(),Re=(0,p.c)(),Je=new L.Z({rings:[[$,X,Re]],spatialReference:B.Z.WGS84}),T=(0,p.c)();var Oe=o(495),ke=o(53929),Te=o(40686);class qe{constructor(e,n){this.positionsWorldCoords=[],this.positionsRenderCoords=[],this.positionsProjectedWorldCoords=[],this.positionsFittedRenderCoords=[],this.positionsGeographic=[],this.positionsSpherical=[],this.positionsStereographic=[],this.pathSegmentLengths=[],this.geodesicPathSegmentLengths=[],this.perimeterSegmentLengths=[],this.intersectingSegments=new Set,this.geodesicIntersectingSegments=new Set,this.areaCentroidWorldCoords=(0,p.c)(),this.areaCentroidRenderCoords=(0,p.c)(),this.geodesicAreaCentroidRenderCoords=(0,p.c)(),this._length=0,this._centroidRenderCoords=(0,p.c)(),this._planeWorldCoords=(0,x.c)(),this._worldUp=(0,p.c)(),this._worldTangent=(0,p.c)(),this._frame=[(0,p.c)(),(0,p.c)(),(0,p.c)()],this._pathVersion=-1,this._validMeasurement=!1,this._hasCursorPoint=!1,this._mode=null,this._tempU=(0,p.c)(),this._tempV=(0,p.c)(),this._tempVec3=(0,p.c)(),this._tempSphere={center:(0,p.c)(),radius:0},this._sceneView=e,this.unitNormalizer=n}update(e,n,r,a,h,l,m){const y=this.unitNormalizer,S=this._sceneView.renderSpatialReference,C=this.unitNormalizer.spatialReference,M=(0,d.pC)(n);if(this._pathVersion===e.version&&this._validMeasurement===a&&!m&&this._hasCursorPoint===M&&this._mode===l)return!e.isValidPolygon&&(this._updateCursorSegmentLength(e,n),!0);this._pathVersion=e.version,this._validMeasurement=a,this._hasCursorPoint=M,this._resize(e.numVertices);const O=(0,R.rS)(r.spatialReference),N=(0,v.Up)(r.spatialReference,O)&&(0,v.jF)(r.spatialReference),{positionsGeographic:Z,positionsWorldCoords:De,positionsRenderCoords:Y,positionsSpherical:he}=this;e.forEachVertexPosition((b,W)=>{(function et(s,e){e.hasZ||(e.z=(0,d.Pt)((0,ke.KO)(s,e,"ground"),0))})(r.elevationProvider,b),(0,v.KC)(b,De[W],C),(0,v.KC)(b,Y[W],S),N&&((0,v.UY)(b,Z[W]),(0,v.KC)(b,he[W],O),(0,c.n)(he[W],he[W]))});const Ee=this._updatePathLengths(a);if(this.pathLength=this._length>1?(0,w.yG)(y.normalizeDistance(Ee),"meters"):null,N){const b=this._updateGeodesicPathLengths(a,C);this.geodesicPathLength=this._length>1?(0,w.yG)(b,"meters"):null}else this.geodesicPathLength=null;return this._updateCursorSegmentLength(e,n),this._updateMode(e,l),a?(this._updateArea(r,y,S,C,h),N&&this._updateGeodesicArea(r),!0):(this.area=null,this.geodesicArea=null,this.perimeterLength=null,this.triangleIndices=null,this.geodesicTriangleIndices=null,this.intersectingSegments.clear(),this.geodesicIntersectingSegments.clear(),!0)}getData(){return{positionsWorldCoords:this.positionsWorldCoords,positionsRenderCoords:this.positionsRenderCoords,positionsProjectedWorldCoords:this.positionsProjectedWorldCoords,positionsFittedRenderCoords:this.positionsFittedRenderCoords,positionsGeographic:this.positionsGeographic,positionsSpherical:this.positionsSpherical,positionsStereographic:this.positionsStereographic,pathSegmentLengths:this.pathSegmentLengths,geodesicPathSegmentLengths:this.geodesicPathSegmentLengths,perimeterSegmentLengths:this.perimeterSegmentLengths,intersectingSegments:this.intersectingSegments,geodesicIntersectingSegments:this.geodesicIntersectingSegments,triangleIndices:this.triangleIndices,geodesicTriangleIndices:this.geodesicTriangleIndices,areaCentroidWorldCoords:this.areaCentroidWorldCoords,areaCentroidRenderCoords:this.areaCentroidRenderCoords,geodesicAreaCentroidRenderCoords:this.geodesicAreaCentroidRenderCoords,fittingMode:this.fittingMode,area:this.area,geodesicArea:this.geodesicArea,pathLength:this.pathLength,geodesicPathLength:this.geodesicPathLength,perimeterLength:this.perimeterLength,cursorSegmentLength:this.cursorSegmentLength,geodesicCursorSegmentLength:this.geodesicCursorSegmentLength,unitNormalizer:this.unitNormalizer,actualMeasurementMode:this.actualMeasurementMode}}_resize(e){for(e<this._length&&(this.positionsWorldCoords.length=e,this.positionsRenderCoords.length=e,this.positionsProjectedWorldCoords.length=e,this.positionsFittedRenderCoords.length=e,this.positionsGeographic.length=e,this.positionsSpherical.length=e,this.positionsStereographic.length=e,this.pathSegmentLengths.length=e,this.geodesicPathSegmentLengths.length=e,this.perimeterSegmentLengths.length=e,this._length=e);this._length<e;)this.positionsWorldCoords.push((0,p.c)()),this.positionsRenderCoords.push((0,p.c)()),this.positionsProjectedWorldCoords.push((0,ve.a)()),this.positionsFittedRenderCoords.push((0,p.c)()),this.positionsGeographic.push((0,p.c)()),this.positionsSpherical.push((0,p.c)()),this.positionsStereographic.push((0,ve.a)()),this.pathSegmentLengths.push(0),this.geodesicPathSegmentLengths.push(0),this.perimeterSegmentLengths.push(0),++this._length}_updatePathLengths(e){const n=this.positionsWorldCoords,r=this.pathSegmentLengths;let a=0;for(let h=0;h<this._length;++h){const l=r[h]=(0,c.i)(n[h],n[(h+1)%this._length]);(h<this._length-1||e)&&(a+=l)}return a}_updateGeodesicPathLengths(e,n){const r=this.positionsGeographic,a=this.geodesicPathSegmentLengths;let h=0;for(let l=0;l<this._length;++l){const m=a[l]=$e(r[l],r[(l+1)%this._length],n);(l<this._length-1||e)&&(h+=m)}return h}_updateArea(e,n,r,a,h){const l=e.renderCoordsHelper,m=this.positionsWorldCoords,y=this.positionsRenderCoords,S=this.positionsProjectedWorldCoords,C=this.positionsFittedRenderCoords,M=this._planeWorldCoords,P=this._centroidRenderCoords;(0,Oe.H)(y,P),l.worldUpAtPosition(P,this._worldUp),l.worldBasisAtPosition(P,J.R.X,this._worldTangent),(0,v.Qr)(P,this._worldUp,r,this._worldUp,a),(0,v.Qr)(P,this._worldTangent,r,this._worldTangent,a),m.length>2&&function ne(s,e){if(s.length<3)throw new Error("need at least 3 points to fit a plane");(0,q.pG)(s[0],s[1],s[2],e)}(m,M),this.fittingMode=this._selectFittingMode(M,m,this._worldUp,h);let O=0;if("horizontal"===this.fittingMode){let b=-1/0;y.forEach((W,be)=>{const Fe=l.getAltitude(y[be]);Fe>b&&(b=Fe,O=be)})}const N=m[O];let Z=M,De=this._worldTangent;"horizontal"===this.fittingMode?Z=this._worldUp:"vertical"===this.fittingMode&&(Z=this._tempVec3,De=this._worldUp,(0,q.T)(M,this._worldUp,Z)),(0,c.c)(this._frame[2],Z),(0,q.T)(De,Z,this._frame[0]),(0,c.f)(this._frame[1],this._frame[0],this._frame[2]),(0,c.o)(this._frame[1],this._frame[1]);const Y=this._tempVec3,he=this._tempU,Ee=this._tempV;for(let b=0;b<this._length;++b){const W=S[b],be=C[b];(0,c.b)(Y,m[b],N),(0,se.a)(W,(0,c.e)(this._frame[0],Y),(0,c.e)(this._frame[1],Y)),(0,c.g)(he,this._frame[0],W[0]),(0,c.g)(Ee,this._frame[1],W[1]),(0,c.a)(Y,he,Ee),(0,c.a)(Y,Y,N),(0,v.SH)(Y,a,be,r)}this.perimeterLength=this._length>0?(0,w.yG)(n.normalizeDistance(this._updatePerimeterLengths()),"meters"):null,(0,Oe.H)(C,this.areaCentroidRenderCoords),(0,v.SH)(this.areaCentroidRenderCoords,r,this.areaCentroidWorldCoords,a),this._updateIntersectingSegments(),this.area=0===this.intersectingSegments.size?(0,w.ne)(n.normalizeArea(this._computeArea()),"square-meters"):null}_updateGeodesicArea(e){const{renderCoordsHelper:n,spatialReference:r}=e,{positionsSpherical:a,positionsStereographic:h}=this,l=this._tempVec3,m=function Qe(s,e=null,n=!0){const a=(h,l)=>{if(0===l[0]&&0===l[1]&&0===l[2])return!1;for(let m=0;m<h.length;++m)if((0,c.e)(l,h[m])<-1e-6)return!1;return!0};if(0===s.length)return!1;if(1===s.length)return e&&(0,c.c)(e,s[0]),!0;(0,c.s)(T,0,0,0);for(let h=0;h<s.length;++h)(0,c.a)(T,T,s[h]);if((0,c.n)(T,T),a(s,T))return e&&(0,c.c)(e,T),!0;if(!n)return!1;for(let h=0;h<s.length;++h)for(let l=0;l<s.length;++l)if(h!==l&&((0,c.f)(T,s[h],s[l]),(0,c.n)(T,T),a(s,T)))return e&&(0,c.c)(e,T),!0;return!1}(a,l);if(!m)return void(this.geodesicArea=null);const y=this._tempU,S=this._tempV;(0,q._F)(l,y,S);for(let C=0;C<this._length;++C){const M=(0,c.e)(a[C],y),P=(0,c.e)(a[C],S),O=(0,c.e)(a[C],l);(0,se.a)(h[C],M/O,P/O)}(0,c.g)(l,l,(0,R.Iu)(r).radius),n.toRenderCoords(l,(0,R.rS)(r),this.geodesicAreaCentroidRenderCoords),this._updateGeodesicIntersectingSegments(),this.geodesicArea=m&&0===this.geodesicIntersectingSegments.size?(0,w.ne)(this._computeGeodesicArea(),"square-meters"):null}_updatePerimeterLengths(){const e=this.positionsProjectedWorldCoords,n=this.perimeterSegmentLengths;let r=0;for(let a=0;a<this._length;++a)r+=n[a]=(0,se.j)(e[a],e[(a+1)%this._length]);return r}_updateIntersectingSegments(){const e=this.positionsProjectedWorldCoords,n=this.intersectingSegments;n.clear();for(let r=0;r<this._length;++r)for(let a=r+2;a<this._length;++a)(a+1)%this._length!==r&&(0,de.UT)(e[r],e[(r+1)%this._length],e[a],e[(a+1)%this._length])&&(n.add(r),n.add(a))}_computeArea(){const e=this.positionsProjectedWorldCoords,n=this.triangleIndices=new Uint32Array((0,Te.bT)(e));let r=0;for(let a=0;a<n.length;a+=3)r+=(0,fe.wu)(e[n[a]],e[n[a+1]],e[n[a+2]]);return r}_updateGeodesicIntersectingSegments(){const e=this.positionsStereographic,n=this.geodesicIntersectingSegments;n.clear();for(let r=0;r<this._length;++r)for(let a=r+2;a<this._length;++a)(a+1)%this._length!==r&&(0,de.UT)(e[r],e[(r+1)%this._length],e[a],e[(a+1)%this._length])&&(n.add(r),n.add(a))}_computeGeodesicArea(){const e=this.positionsGeographic,r=this.geodesicTriangleIndices=new Uint32Array((0,Te.bT)(this.positionsStereographic));let a=0;for(let h=0;h<r.length;h+=3)a+=Xe(e[r[h]],e[r[h+1]],e[r[h+2]],B.Z.WGS84);return a}_selectFittingMode(e,n,r,a){const h=n.map(C=>Math.abs(function _(s,e){return(0,c.e)(s,e)+s[3]}(e,C))).reduce((C,M)=>Math.max(C,M),0);!function ye(s,e){const n=e.center;(0,c.s)(n,0,0,0);for(let a=0;a<s.length;++a)(0,c.a)(n,n,s[a]);(0,c.g)(n,n,1/s.length);let r=0;for(let a=0;a<s.length;++a)r=Math.max(r,(0,c.d)(n,s[a]));e.radius=Math.sqrt(r)}(n,this._tempSphere);const l=h/(2*this._tempSphere.radius);let S="horizontal";return l<a.maxRelativeErrorCoplanar?S="oblique":l<a.maxRelativeErrorAlmostCoplanar&&(S=Math.abs((0,c.e)(r,e))>Math.cos((0,me.Vl)(a.verticalAngleThreshold))?"horizontal":"vertical"),S}_updateCursorSegmentLength(e,n){const r=e.lastPoint;!e.isValidPolygon&&(0,d.pC)(r)&&(0,d.pC)(n)?(this.geodesicCursorSegmentLength=(0,w.yG)(function Ye(s,e){if(!(0,v.UY)(s,$)||!(0,v.UY)(e,X))return 0;const n={distance:null};return(0,k.cA)(n,[$[0],$[1]],[X[0],X[1]]),n.distance}(r,n),"meters"),this.cursorSegmentLength=(0,w.yG)(this.unitNormalizer.normalizeDistance(function Ze(s,e,n){return(0,v.KC)(s,$,n)&&(0,v.KC)(e,X,n)?(0,c.i)($,X):0}(r,n,this.unitNormalizer.spatialReference)),"meters")):(this.geodesicCursorSegmentLength=null,this.cursorSegmentLength=null)}_updateMode(e,n){if(n===Q.e.Auto){this.actualMeasurementMode="euclidean";let r=0;null!=this.geodesicPathLength&&(r+=this.geodesicPathLength.value),!e.isValidPolygon&&(0,d.pC)(this.geodesicCursorSegmentLength)&&(r+=this.geodesicCursorSegmentLength.value),r>tt&&(this.actualMeasurementMode="geodesic")}else this.actualMeasurementMode=n===Q.e.Euclidean?"euclidean":"geodesic";null==this.geodesicPathLength&&(this.actualMeasurementMode="euclidean"),this._mode=n}}const tt=1e5;var it=o(68);let re=class extends U.Z{constructor(s){super(s)}initialize(){const{spatialReference:s}=this.view,e=(0,R.rS)(s),n=e===R.GG?R.wY:e,r=!s||(0,v.Up)(s,n)?n:s,a=new it.D(r);this._measurementDataManager=new qe(this.view,a),this.own([this.analysisViewData.path.on("change",()=>this._update()),(0,D.YP)(()=>this.analysisViewData.cursorPoint,()=>this._update(),D.Z_),(0,D.YP)(()=>this.analysisViewData.mode,()=>this._update(),D.Z_)]),this._update()}_update(s=!1){const{analysisViewData:e,view:n}=this;this._measurementDataManager.update(e.path,e.cursorPoint,n,e.validMeasurement,{maxRelativeErrorCoplanar:.005,maxRelativeErrorAlmostCoplanar:.01,verticalAngleThreshold:80},e.mode,s)&&(e.measurementData=this._measurementDataManager.getData())}};(0,g._)([(0,u.Cb)({constructOnly:!0})],re.prototype,"view",void 0),(0,g._)([(0,u.Cb)({constructOnly:!0})],re.prototype,"analysis",void 0),(0,g._)([(0,u.Cb)({constructOnly:!0})],re.prototype,"analysisViewData",void 0),re=(0,g._)([(0,I.j)("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementController")],re);var st=o(61885),Ge=o(72392),nt=o(63290),rt=o(49672),Ve=o(65401),ot=o(54865),at=o(50017),ze=o(466),Ue=o(26777);const ht=nt.Z.getLogger("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper");let H=class extends st.Z.EventedAccessor{constructor(s={}){super(s),this._handles=new Ge.Z,this._version=0,this._internalGeometryChange=!1,this._extent=(0,Ve.cS)()}destroy(){this._handles=(0,d.SC)(this._handles)}set areaMeasurement(s){this._set("areaMeasurement",s),(0,d.pC)(s)&&(0,d.pC)(this.view)&&this._initialize(s,this.view)}set view(s){this._set("view",s),(0,d.pC)(s)&&(0,d.pC)(this.areaMeasurement)&&this._initialize(this.areaMeasurement,s)}get initialized(){return(0,d.pC)(this.areaMeasurement)&&(0,d.pC)(this.view)}get version(){return this._version}get isValidPolygon(){return this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].isClosed()}get extent(){if(this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].vertices.length>0){const s=(0,Ve.cS)(this._extent);return this.forEachVertex(e=>{(0,Ve.Ho)(s,e.pos)}),s}return null}get spatialReference(){return this.initialized?this.editGeometry.coordinateHelper.spatialReference:null}_initialize(s,e){this._handles.removeAll(),this._handles.add((0,D.YP)(()=>s.geometry,()=>{this._updateEditGeometryFromModelGeometry(s,e)},D.tX)),this._makeDirty(!0)}_makeDirty(s=!1){this.notifyChange("isValidPolygon"),this.notifyChange("initialized"),this.notifyChange("extent"),s&&this.notifyChange("numVertices")}_updateEditGeometryFromModelGeometry(s,e){if(this._version++,this._internalGeometryChange)return;this._handles.remove("EditGeometry");let n=s.geometry;if((0,d.pC)(n)){const r=(0,v.fM)(n,e.spatialReference);(0,d.Wi)(r)&&(0,ot.e)(s,n.spatialReference,ht),n=r}this._editGeometryOperations=(0,d.pC)(n)?Ue.c.fromGeometry(n,e.state.viewingMode):new Ue.c(new ze.XE("polygon",(0,at.Y6)(!0,!1,e.spatialReference))),this._makeDirty(!0),this.emit("change"),this._handles.add(this.editGeometry.on("change",r=>{this._makeDirty(null!=r.addedVertices||null!=r.removedVertices),this._internalGeometryChange=!0,s.geometry=this.numVertices>0?this.editGeometry.geometry:null,this._internalGeometryChange=!1}),"EditGeometry")}get editGeometry(){return this._editGeometryOperations.data}get vertices(){const s=[];return this.forEachVertex(e=>{s.push(e)}),s}get numVertices(){return this.initialized&&this.editGeometry.components.length>0?this.editGeometry.components[0].vertices.length:0}get lastPoint(){if(this.initialized&&this.editGeometry.components.length>0){const s=this.editGeometry.components[0].getLastVertex();if((0,d.pC)(s))return this.editGeometry.coordinateHelper.vectorToPoint(s.pos)}return null}getVertex(s){if(!this.initialized||0===this.editGeometry.components.length||0===this.editGeometry.components[0].vertices.length)return null;const e=this.editGeometry.components[0].vertices[0];let n=e;do{if(n.index===s)return n;n=n.rightEdge.rightVertex}while(n!==e&&null!=n);return null}getVertexPositionAsPoint(s){return this.editGeometry.coordinateHelper.vectorToPoint(s.pos)}getVertexPositionAsPointFromIndex(s){return this.editGeometry.coordinateHelper.vectorToPoint(this.getVertex(s).pos)}forEachVertex(s){this.initialized&&this.editGeometry.components.length>0&&this.editGeometry.components[0].iterateVertices(s)}forEachVertexPosition(s){const e=this.editGeometry.coordinateHelper;this.forEachVertex((n,r)=>{e.vectorToPoint(n.pos,Ie),s(Ie,r)})}clear(){(0,d.pC)(this.areaMeasurement)&&(this.areaMeasurement.geometry=null)}add(s){if(!this.initialized)return null;if(0===this.editGeometry.components.length){const n=(0,d.Wg)(this.view);this.editGeometry.components.push(new ze.wA(n.spatialReference,n.state.viewingMode))}const e=this._editGeometryOperations.appendVertex(this.editGeometry.coordinateHelper.pointToVector(s));return this.emit("change"),e}close(){if(!this.initialized||0===this.editGeometry.components.length)return null;const s=this._editGeometryOperations.closeComponent(this.editGeometry.components[0]);return this.emit("change"),s}ensureContains(s,e=""){let n=!1;if(this.editGeometry.components.forEach(r=>{r.iterateVertices(a=>{a===s&&(n=!0)})}),!n)throw new Error(`vertex doesnt exist ${e}`);return n}setVertexPosition(s,e){if(!this.initialized)return null;const n=this._editGeometryOperations.setVertexPosition(s,this.editGeometry.coordinateHelper.pointToVector(e));return this.emit("change"),n}equals(s){if(this.numVertices!==s.numVertices)return!1;let e=!0;return this.forEachVertexPosition((n,r)=>{const a=s.getVertexPositionAsPointFromIndex(r);n.equals(a)||(e=!1)}),!!e}};(0,g._)([(0,u.Cb)({value:null})],H.prototype,"areaMeasurement",null),(0,g._)([(0,u.Cb)({value:null})],H.prototype,"view",null),(0,g._)([(0,u.Cb)()],H.prototype,"isValidPolygon",null),(0,g._)([(0,u.Cb)()],H.prototype,"extent",null),(0,g._)([(0,u.Cb)()],H.prototype,"spatialReference",null),(0,g._)([(0,u.Cb)()],H.prototype,"numVertices",null),H=(0,g._)([(0,I.j)("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurement3DPathHelper")],H);const Ie=new rt.Z;var lt=o(15861),We=(o(52515),o(84600)),ce=o(16730),xe=o(28347),dt=o(43703),Le=o(67214),ge=o(87469),Ce=o(993),ct=o(53928),gt=o(52107),K=o(40723),_e=o(16396),je=o(6945),ue=o(42743),ut=o(60881),Se=o(5894),Be=o(60909),pt=o(57623),mt=o(651),vt=o(91056),ft=o(39114),we=o(88569),yt=o(12407),Lt=o(8549),Pe=o(67969),Me=o(2078);class Ae extends vt.A{initializeProgram(e){const n=Ae.shader.get().build(this.configuration);return new yt.$(e.rctx,n,ft.i)}_setPipelineState(e){const n=this.configuration,r=e===ue.Am.NONE,a=e===ue.Am.FrontFace;return(0,Me.sm)({blending:n.transparent?r?_t:(0,we.j7)(e):null,depthTest:{func:(0,we.Bh)(e)},depthWrite:r?n.writeDepth&&Me.LZ:(0,we.K5)(e),colorWrite:Me.BK,polygonOffset:r||a?n.polygonOffset&&Ct:{factor:-1,units:-25}})}initializePipeline(){return this._setPipelineState(this.configuration.transparencyPassType)}}Ae.shader=new mt.J(Lt.C,()=>o.e(2558).then(o.bind(o,2558)));const Ct={factor:0,units:-25},_t=(0,Me.wK)(Pe.zi.SRC_ALPHA,Pe.zi.ONE,Pe.zi.ONE_MINUS_SRC_ALPHA,Pe.zi.ONE_MINUS_SRC_ALPHA);var oe=o(87601),St=o(41528);class ee extends St.W{constructor(){super(...arguments),this.transparencyPassType=ue.Am.NONE,this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1,this.hasMultipassTerrain=!1,this.cullAboveGround=!1}}(0,g._)([(0,oe.o)({count:ue.Am.COUNT})],ee.prototype,"transparencyPassType",void 0),(0,g._)([(0,oe.o)()],ee.prototype,"transparent",void 0),(0,g._)([(0,oe.o)()],ee.prototype,"writeDepth",void 0),(0,g._)([(0,oe.o)()],ee.prototype,"polygonOffset",void 0),(0,g._)([(0,oe.o)()],ee.prototype,"hasMultipassTerrain",void 0),(0,g._)([(0,oe.o)()],ee.prototype,"cullAboveGround",void 0);class Pt extends K.F5{constructor(e){super(e,new At),this.techniqueConfig=new ee}dispose(){}getConfiguration(e,n){return this.techniqueConfig.transparent=this.parameters.transparent,this.techniqueConfig.writeDepth=this.parameters.writeDepth,this.techniqueConfig.polygonOffset=this.parameters.polygonOffset,this.techniqueConfig.transparencyPassType=n?n.transparencyPassType:ue.Am.NONE,this.techniqueConfig.hasMultipassTerrain=!!n&&n.multipassTerrain.enabled,this.techniqueConfig.cullAboveGround=!!n&&n.multipassTerrain.cullAboveGround,this.techniqueConfig}intersect(e,n,r,a,h,l,m){return(0,pt.Bw)(e,n,a,h,l,void 0,m)}requiresSlot(e){let n=Se.r.OPAQUE_MATERIAL;return this.parameters.transparent&&(n=this.parameters.writeDepth?Se.r.TRANSPARENT_MATERIAL:Se.r.TRANSPARENT_DEPTH_WRITE_DISABLED_MATERIAL),e===n||e===Se.r.DRAPED_MATERIAL}createGLMaterial(e){return e.output===je.H.Color||e.output===je.H.Alpha?new Mt(e):null}createBufferWriter(){return new Be.G_(Be.W1)}}class Mt extends ut.Z{beginSlot(e){return this.ensureTechnique(Ae,e)}}class At extends K.Mt{constructor(){super(...arguments),this.size=[1,1],this.color1=[.75,.75,.75,1],this.color2=[.5,.5,.5,1],this.transparent=!1,this.writeDepth=!0,this.polygonOffset=!1}}class Dt extends ct._{constructor(e){super(e),this._checkerBoardMaterial=null,this._renderOccluded=K.yD.OccludeAndTransparent,this._geometry=null,this._size=[1,1],this._color1=(0,x.f)(1,.5,0,.5),this._color2=(0,x.f)(1,1,1,.5),this.applyProps(e)}get renderOccluded(){return this._renderOccluded}set renderOccluded(e){e!==this._renderOccluded&&(this._renderOccluded=e,this._updateMaterial())}get geometry(){return this._geometry}set geometry(e){this._geometry=e,this._geometryChanged()}get size(){return this._size}set size(e){this._size=e,this._updateMaterial()}get color1(){return this._color1}set color1(e){(0,Ce.g)(e,this._color1)||((0,Ce.c)(this._color1,e),this._updateMaterial())}get color2(){return this._color2}set color2(e){(0,Ce.g)(e,this._color2)||((0,Ce.c)(this._color2,e),this._updateMaterial())}_updateMaterial(){(0,d.pC)(this._checkerBoardMaterial)&&this._checkerBoardMaterial.setParameters({size:this._size,color1:this._color1,color2:this._color2,renderOccluded:this._renderOccluded})}createExternalResources(){this._checkerBoardMaterial=new Pt({size:this._size,color1:this._color1,color2:this._color2,transparent:!0,writeDepth:!1,polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent})}destroyExternalResources(){this._checkerBoardMaterial=null}forEachExternalMaterial(e){(0,d.pC)(this._checkerBoardMaterial)&&e(this._checkerBoardMaterial)}createGeometries(e){if((0,d.Wi)(this._geometry)||(0,d.Wi)(this._checkerBoardMaterial))return;const n=Et;(0,xe.C)(n,this.transform);const r=this._geometry,a=[],h=(0,p.c)();r.position.forEach(y=>{(0,c.b)(h,y,n),a.push(h[0],h[1],h[2])});const l=[];r.uv.forEach(y=>{l.push(y[0],y[1])});const m=new gt.Z([[_e.T.POSITION,{size:3,data:a,exclusive:!0}],[_e.T.UV0,{size:2,data:l,exclusive:!0}]],[[_e.T.POSITION,r.triangleIndices],[_e.T.UV0,r.triangleIndices]]);e.addGeometry(m,this._checkerBoardMaterial)}_geometryChanged(){this.recreateGeometry()}}const Et=(0,p.c)();var pe=o(64770),bt=o(54889),Rt=o(56683),Ot=o(41840);let G=class extends U.Z{constructor(s){super(s),this._handles=new Ge.Z,this._params=Ne({},Vt),this._path=null,this._intersectedPath=null,this._perimeter=null,this._intersectedPerimeter=null,this._projectionLines=null,this._measurementArea=null,this._areaLabel=null,this._pathLengthLabel=null,this._cursorSegmentLengthLabel=null,this._perimeterLengthLabel=null,this._pathSegments=[],this._perimeterSegments=[],this._cursorSegment=null,this._origin=(0,p.c)(),this._originTransform=(0,dt.c)(),this._cursorPositionRenderSpace=(0,p.c)(),this.messages=null,this.viewData=wt,this.areaLabel=null,this.perimeterLengthLabel=null,this.loadingMessages=!0}get visible(){return this.analysisViewData.visible}get testData(){return{labels:{area:this._areaLabel,pathLength:this._pathLengthLabel,cursorSegmentLength:this._cursorSegmentLengthLabel,perimeterLength:this._perimeterLengthLabel}}}initialize(){var s=this;const{analysisViewData:e,_params:n,view:r}=this;this._path=new ge.r({view:r,attached:!0,width:n.pathLineWidth,color:n.pathLineColor,polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent}),this._intersectedPath=new ge.r({view:r,attached:!0,width:n.pathLineWidth,color:n.intersectingLineColor,polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent}),this._perimeter=new ge.r({view:r,attached:!0,width:n.perimeterLineWidth,color:n.perimeterLineColor,polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent}),this._intersectedPerimeter=new ge.r({view:r,attached:!0,width:n.perimeterLineWidth,color:n.intersectingLineColor,polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent}),this._projectionLines=new ge.r({view:r,attached:!0,width:n.projectionLineWidth,color:n.projectionLineColor,stipplePattern:(0,bt.z5)(n.projectionLineStippleSize),polygonOffset:!0,renderOccluded:K.yD.OccludeAndTransparent}),this._measurementArea=new Dt({view:r,attached:!0,color1:n.areaColor1,color2:n.areaColor2}),this._areaLabel=new Le.Kc({view:r,attached:!0,fontSize:ae.Large}),this._pathLengthLabel=new Le.Kc({view:r,attached:!0,fontSize:ae.Small}),this._cursorSegmentLengthLabel=new Le.Kc({view:r,attached:!0,fontSize:ae.Small}),this._perimeterLengthLabel=new Le.Kc({view:r,attached:!0,fontSize:ae.Small}),this._handles.add([(0,D.YP)(()=>[e.mode,this.visible,e.unit,e.measurementData,e.cursorPoint],()=>this._update(),D.tX),(0,D.YP)(()=>{var a;return null==(a=r.state)?void 0:a.camera},()=>this._updateLabels(),D.tX),(0,Rt.qe)((0,lt.Z)(function*(){return s._updateMessageBundle()}))]),this._updateMessageBundle()}destroy(){this._measurementArea=(0,d.SC)(this._measurementArea),this._path=(0,d.SC)(this._path),this._intersectedPath=(0,d.SC)(this._intersectedPath),this._perimeter=(0,d.SC)(this._perimeter),this._intersectedPerimeter=(0,d.SC)(this._intersectedPerimeter),this._areaLabel=(0,d.SC)(this._areaLabel),this._pathLengthLabel=(0,d.SC)(this._pathLengthLabel),this._cursorSegmentLengthLabel=(0,d.SC)(this._cursorSegmentLengthLabel),this._perimeterLengthLabel=(0,d.SC)(this._perimeterLengthLabel),this._projectionLines=(0,d.SC)(this._projectionLines),this._handles=(0,d.SC)(this._handles),this.set("view",null)}_update(){if(this.destroyed||!this.view.ready||!this.view.renderCoordsHelper)return;const{analysisViewData:{measurementData:s},analysisViewData:e}=this;(0,d.Wi)(s)||(this._updateViewData(s,e.path,e.cursorPoint),this._updateOrigin(),this._updatePathSegments(),this._updatePerimeterSegments(),this._updateArea(),this._updateProjectionLines(),this._updateLabels())}_updateViewData(s,e,n){const r=e.isValidPolygon,a="geodesic"===s.actualMeasurementMode,h=a?s.geodesicArea:s.area;let l=1;if(h){const y=this._toPreferredAreaUnit(h,this.analysisViewData.unit);l=(0,me.sk)(Math.sqrt(y.value)/Math.sqrt(300)),l*=Math.sqrt((0,ce.En)(1,y.unit,"square-meters")),l/=s.unitNormalizer.normalizeDistance(1)}this._set("viewData",{validMeasurement:r,path:e,pathVersion:e.version,cursorPoint:n,measurementData:s,mode:s.actualMeasurementMode,positionsGeographic:s.positionsGeographic,positionsRenderCoords:s.positionsRenderCoords,positionsProjected:s.positionsProjectedWorldCoords,positionsFittedRenderCoords:s.positionsFittedRenderCoords,intersectingSegments:a?s.geodesicIntersectingSegments:s.intersectingSegments,triangleIndices:a?s.geodesicTriangleIndices:s.triangleIndices,fittingMode:s.fittingMode,areaCentroid:a?s.geodesicAreaCentroidRenderCoords:s.areaCentroidRenderCoords,pathLengthLabelSegmentIndex:r?0:e.numVertices-2,perimeterLengthLabelSegmentIndex:0,checkerSize:l})}_updateOrigin(){(0,Oe.H)(this.viewData.positionsRenderCoords,this._origin),(0,xe.f)(this._originTransform,this._origin),this._measurementArea.transform=this._originTransform,this._projectionLines.transform=this._originTransform}_createSegments(s){const e=this.viewData,n=e.path,r=this.view.renderCoordsHelper.spatialReference,a=e.mode,h=[],l=[],m=[],y=e.validMeasurement?n.numVertices:n.numVertices-1;for(let S=0;S<y;++S){const C=e[s][S],M=e[s][(S+1)%n.numVertices];let P=null;switch(a){case"euclidean":P=new pe.y$(C,M);break;case"geodesic":P=new pe.u4(C,M,r)}e.intersectingSegments.has(S)?m.push(P):l.push(P),h.push(P)}return{all:h,nonIntersecting:l,intersecting:m}}_updatePathSegments(){const{view:{renderCoordsHelper:s},viewData:e,visible:n}=this,r=this._createSegments("positionsRenderCoords"),{cursorPoint:a,mode:h,path:l}=e,m=!l.isValidPolygon,y=s.spatialReference;if(this._cursorSegment=null,l.numVertices>0&&m&&(0,d.pC)(a)&&s.toRenderCoords(a,this._cursorPositionRenderSpace)){const S=e.positionsRenderCoords[l.numVertices-1],C=this._cursorPositionRenderSpace;let M=null;switch(h){case"euclidean":M=new pe.y$(S,C);break;case"geodesic":M=new pe.u4(S,C,y)}r.nonIntersecting.push(M),this._cursorSegment=M}this._path.setGeometryFromSegments(r.nonIntersecting,this._origin),this._path.visible=n,this._intersectedPath.setGeometryFromSegments(r.intersecting,this._origin),this._intersectedPath.visible=n,this._pathSegments=r.all}_updatePerimeterSegments(){const s=this.visible&&"euclidean"===this.viewData.mode,e=this._createSegments("positionsFittedRenderCoords");this._perimeter.setGeometryFromSegments(e.nonIntersecting,this._origin),this._perimeter.visible=s,this._intersectedPerimeter.setGeometryFromSegments(e.intersecting,this._origin),this._intersectedPerimeter.visible=s,this._perimeterSegments=e.all}_updateArea(){const s=this.viewData;switch(s.mode){case"euclidean":this._updateAreaEuclidean(s);break;case"geodesic":this._updateAreaGeodesic()}}_updateAreaEuclidean(s){const e=this.visible;s.validMeasurement&&0===s.intersectingSegments.size&&s.triangleIndices?(this._measurementArea.geometry={uv:s.positionsProjected,position:s.positionsFittedRenderCoords,triangleIndices:s.triangleIndices},this._measurementArea.size=[s.checkerSize,s.checkerSize],this._measurementArea.visible=e):this._measurementArea.visible=!1}_updateAreaGeodesic(){this._measurementArea.visible=!1}_updateProjectionLines(){const s=this.viewData,e=this.visible,n=s.path;if(n.numVertices>0&&s.validMeasurement&&"euclidean"===s.mode){const a=[];for(let h=0;h<n.numVertices;++h){const l=(0,p.c)();(0,c.b)(l,s.positionsRenderCoords[h],this._origin);const m=(0,p.c)();(0,c.b)(m,s.positionsFittedRenderCoords[h],this._origin),a.push([l,m])}this._projectionLines.geometry=a,this._projectionLines.visible=e}else this._projectionLines.geometry=null,this._projectionLines.visible=!1}_updateLabels(){if(this.destroyed)return;const{viewData:s}=this,{measurementData:e,mode:n,path:r}=s;if(!r)return;const a=!r.isValidPolygon,h=this.visible,l=this._formatAreaLabel(this.messages,"geodesic"===n?e.geodesicArea:e.area,this.analysisViewData.unit);(0,d.pC)(l)?(this._areaLabel.geometry={type:"point",point:s.areaCentroid},this._areaLabel.text=l,this._areaLabel.visible=s.validMeasurement&&0===s.intersectingSegments.size&&h):this._areaLabel.visible=!1,this._set("areaLabel",(0,d.Wg)(l));const m=this._formatLengthLabel(this.messages,"geodesic"===n?e.geodesicPathLength:e.pathLength,this.analysisViewData.unit);if((0,d.pC)(m)&&s.pathLengthLabelSegmentIndex>=0&&s.pathLengthLabelSegmentIndex<this._pathSegments.length){const P=this._pathSegments[s.pathLengthLabelSegmentIndex],O=(0,d.pC)(this._cursorSegment)?this._cursorSegment:Tt;this._pathLengthLabel.distance=this._params.labelDistance,this._pathLengthLabel.geometry={type:"corner",left:P,right:O},this._pathLengthLabel.text=m,this._pathLengthLabel.visible=a&&r.numVertices>0&&h}else this._pathLengthLabel.visible=!1;const y="geodesic"===n?s.measurementData.geodesicCursorSegmentLength:s.measurementData.cursorSegmentLength;if((0,d.pC)(y)){const P=this._formatLengthLabel(this.messages,y,this.analysisViewData.unit);this._cursorSegmentLengthLabel.distance=this._params.labelDistance,this._cursorSegmentLengthLabel.geometry=(0,d.pC)(this._cursorSegment)?{type:"segment",segment:this._cursorSegment,sampleLocation:"end"}:null,this._cursorSegmentLengthLabel.anchor="bottom",this._cursorSegmentLengthLabel.text=(0,d.Wg)(P),this._cursorSegmentLengthLabel.visible=a&&0!==y.value&&h}else this._cursorSegmentLengthLabel.visible=!1;this._cursorSegmentLengthLabel.overlaps(this._pathLengthLabel)&&(this._cursorSegmentLengthLabel.visible=!1),this._pathLengthLabel.overlaps(this._areaLabel)&&(this._pathLengthLabel.visible=!1);const S="geodesic"===s.mode,M=this._formatLengthLabel(this.messages,S?e.geodesicPathLength:e.perimeterLength,this.analysisViewData.unit);if(this._set("perimeterLengthLabel",(0,d.Wg)(M)),s.validMeasurement&&0===s.intersectingSegments.size){this._perimeterLengthLabel.distance=this._params.labelDistance,this._perimeterLengthLabel.anchor="top",this._perimeterLengthLabel.text=(0,d.Wg)(M),this._perimeterLengthLabel.visible=!0;let P=!0;for(let O=0;O<s.path.numVertices;++O){const N=(s.perimeterLengthLabelSegmentIndex+O)%s.path.numVertices;if(P=!0,this._perimeterLengthLabel.geometry={type:"segment",segment:S?this._pathSegments[N]:this._perimeterSegments[N],sampleLocation:"center"},!this._perimeterLengthLabel.overlaps(this._areaLabel))break;P=!1}this._perimeterLengthLabel.visible=P&&h}else this._perimeterLengthLabel.visible=!1}_toPreferredAreaUnit(s,e){return(0,w.nn)(s,this._preferredAreaUnit(s,e))}_preferredAreaUnit(s,e){switch(e){case"metric":return(0,ce.tQ)(s.value,s.unit);case"imperial":return(0,ce.Yl)(s.value,s.unit);default:return e}}_preferredLengthUnit(s,e){const n=this._deriveLengthUnitFromAreaUnit(e);switch(n){case"metric":return(0,ce.KU)(s.value,s.unit);case"imperial":return(0,ce.FN)(s.value,s.unit);default:return n}}_deriveLengthUnitFromAreaUnit(s){switch(s){case"metric":case"ares":case"hectares":return"metric";case"imperial":case"acres":return"imperial";case"square-inches":return"inches";case"square-feet":return"feet";case"square-yards":return"yards";case"square-miles":return"miles";case"square-us-feet":return"us-feet";case"square-millimeters":return"millimeters";case"square-centimeters":return"centimeters";case"square-decimeters":return"decimeters";case"square-meters":return"meters";case"square-kilometers":return"kilometers"}throw new Error("unhandled area unit")}_formatAreaLabel(s,e,n){return s&&e&&(0,We.VG)(s,e,this._preferredAreaUnit(e,n))}_formatLengthLabel(s,e,n){return s&&e&&(0,We.VG)(s,e,this._preferredLengthUnit(e,n))}_updateMessageBundle(){this.loadingMessages=!0,(0,Ot.ME)("esri/core/t9n/Units").then(s=>{this.messages=s,this.view&&this._update()}).finally(()=>{this.loadingMessages=!1})}};var ae,s;(0,g._)([(0,u.Cb)()],G.prototype,"view",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"messages",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"analysis",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"viewData",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"analysisViewData",void 0),(0,g._)([(0,u.Cb)({readOnly:!0})],G.prototype,"areaLabel",void 0),(0,g._)([(0,u.Cb)({readOnly:!0})],G.prototype,"perimeterLengthLabel",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"loadingMessages",void 0),(0,g._)([(0,u.Cb)()],G.prototype,"visible",null),G=(0,g._)([(0,I.j)("esri.views.3d.analysis.AreaMeasurement.support.AreaMeasurementVisualization")],G),(s=ae||(ae={}))[s.Small=12]="Small",s[s.Large=16]="Large";const Vt={laserLineGlowColor:[1,.5,0],laserLineGlowWidth:8,laserLineGlowFalloff:8,laserLineInnerColor:[1,1,1],laserLineInnerWidth:1,laserLineGlobalAlpha:.75,laserLineEnabled:!0,handleColor:[1,.5,0],handleOpacity:.5,handleRadius:5,handleRadiusHovered:10,handleRadiusMouse:10,handleRadiusTouch:25,pathLineColor:[1,.5,0,1],pathLineWidth:3,intersectingLineColor:[1,.2,0,1],perimeterLineColor:[1,.5,0,1],perimeterLineWidth:2,projectionLineColor:[1,.5,0,1],projectionLineWidth:2,projectionLineStippleSize:5,areaColor1:[1,.5,0,.5],areaColor2:[1,1,1,.5],fillColor:[1,.5,0,.5],lineSubdivisions:64,labelDistance:25},wt={validMeasurement:!1,path:null,pathVersion:-1,cursorPoint:null,measurementData:null,mode:null,positionsGeographic:null,positionsRenderCoords:null,positionsProjected:null,positionsFittedRenderCoords:null,intersectingSegments:null,triangleIndices:null,fittingMode:null,areaCentroid:null,pathLengthLabelSegmentIndex:null,perimeterLengthLabelSegmentIndex:null,checkerSize:null},Tt=new pe.y$((0,p.c)(),(0,p.c)());let E=class extends((0,ie.p)(U.Z)){constructor(s){super(s),this.type="area-measurement-view-3d",this.analysis=null,this.measurementData=null,this.lastDraggedVertex=null,this.cursorPoint=null,this.mode=Q.e.Auto}initialize(){const{analysis:s,view:e}=this;this.path=new H({view:e,areaMeasurement:s}),this.analysisVisualization=new G({view:e,analysis:s,analysisViewData:this}),this.analysisController=new re({view:e,analysis:s,analysisViewData:this})}destroy(){this.analysisController=(0,d.SC)(this.analysisController),this.analysisVisualization=(0,d.SC)(this.analysisVisualization),this.path.destroy()}get updating(){var s;return!(null==(s=this.analysisVisualization)||!s.loadingMessages)}get result(){const{measurementData:s}=this;return(0,d.Wi)(s)?{area:null,mode:null,perimeter:null}:"euclidean"===s.actualMeasurementMode?{area:s.area,perimeter:s.perimeterLength,mode:"euclidean"}:{area:s.geodesicArea,perimeter:s.pathLength,mode:"geodesic"}}get viewData(){return this.analysisVisualization.viewData}get validMeasurement(){return this.path.isValidPolygon}get unit(){return(0,d.Pt)(this.analysis.unit,this._defaultUnit)}get testData(){return{visualization:this.analysisVisualization,controller:this.analysisController}}};(0,g._)([(0,u.Cb)({readOnly:!0})],E.prototype,"type",void 0),(0,g._)([(0,u.Cb)({constructOnly:!0,nonNullable:!0})],E.prototype,"analysis",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"updating",null),(0,g._)([(0,u.Cb)()],E.prototype,"analysisVisualization",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"analysisController",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"result",null),(0,g._)([(0,u.Cb)()],E.prototype,"measurementData",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"viewData",null),(0,g._)([(0,u.Cb)()],E.prototype,"validMeasurement",null),(0,g._)([(0,u.Cb)()],E.prototype,"path",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"lastDraggedVertex",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"cursorPoint",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"mode",void 0),(0,g._)([(0,u.Cb)()],E.prototype,"unit",null),(0,g._)([(0,u.Cb)(te.Y)],E.prototype,"_defaultUnit",void 0),E=(0,g._)([(0,I.j)("esri.views.3d.analysis.AreaMeasurementAnalysisView3D")],E);const Gt=E},40686:(z,A,o)=>{o.d(A,{X:()=>v,bT:()=>se,ln:()=>w,oN:()=>D});var g=o(62208),U=o(15572),d=o(16730),u=o(11915),V=o(84161),j=o(28093),le=o(55915),I=o(90014),te=o(11544),ie=o(26242),Q=o(66601);function D(c,p={positionsWorldCoords:[]}){return R(c,p)}function v(c,p={positionsWorldCoords:[]}){return R(c,p,!1)}function R(c,p,x=c.hasZ){const B=(0,Q.m)(c.spatialReference),J=(0,d.oq)(B);if((0,g.Wi)(J))return null;const de=(F,L)=>!(L.length<2||((0,V.s)(F,L[0],L[1],x&&L[2]||0),0));let fe=0;for(const F of c.rings){if(F.length<3)continue;const{positionsWorldCoords:L}=p;for(;L.length<F.length;)L.push((0,j.c)());const k=me;for(let _=0;_<3;_++)if(!de(k,F[_])||!(0,le.SH)(k,c.spatialReference,L[_],B))return null;if((0,V.k)(L[0],L[1])||(0,V.k)(L[0],L[2])||(0,V.k)(L[1],L[2]))continue;const q=(0,I.zk)(L[0],L[1],L[2],(0,I.re)()),ye=(0,V.c)(ie.WM.get(),L[0]);for(let _=0;_<3;_++)(0,I.tx)(q,ye,L[_],L[_]);for(let _=3;_<F.length;_++){if(!de(k,F[_]))return null;(0,le.SH)(k,c.spatialReference,L[_],B),(0,I.tx)(q,ye,L[_],L[_])}const ne=se(L);for(let _=0;_<ne.length;_+=3)fe+=(0,te.wu)(L[ne[_]],L[ne[_+1]],L[ne[_+2]])}return(0,U.ne)(fe,J)}const me=(0,j.c)();function w(){return{positionsWorldCoords:[]}}function se(c){return(0,u.e)(function ve(c){const p=new Float64Array(2*c.length);for(let x=0;x<c.length;++x){const B=c[x],J=2*x;p[J+0]=B[0],p[J+1]=B[1]}return p}(c),[],2)}},66601:(z,A,o)=>{o.d(A,{m:()=>d});var g=o(55915),U=o(12080);function d(u){const V=(0,U.rS)(u),j=V===U.GG?U.wY:V;return(0,g.Up)(u,j)?j:u}}}]);
"use strict";var ne=Object.defineProperty,ae=Object.defineProperties,se=Object.getOwnPropertyDescriptors,F=Object.getOwnPropertySymbols,le=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable,w=(d,_,s)=>_ in d?ne(d,_,{enumerable:!0,configurable:!0,writable:!0,value:s}):d[_]=s,G=(d,_)=>{for(var s in _||(_={}))le.call(_,s)&&w(d,s,_[s]);if(F)for(var s of F(_))ue.call(_,s)&&w(d,s,_[s]);return d},N=(d,_)=>ae(d,se(_));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3705],{17196:(d,_,s)=>{s.d(_,{V:()=>h});var c=s(15861),m=s(45205);function h(y,g){return f.apply(this,arguments)}function f(){return(f=(0,c.Z)(function*(y,g){var I;const E=yield(0,m.T)(y,g);E.layers=E.layers.filter(p);const P={serviceJSON:E};if((null!=(I=E.currentVersion)?I:0)<10.5)return P;const T=yield(0,m.T)(y+"/layers",g);return P.layersJSON={layers:T.layers.filter(p),tables:T.tables},P})).apply(this,arguments)}function p(y){return!y.type||"Feature Layer"===y.type}},88755:(d,_,s)=>{s.d(_,{Y:()=>f,h:()=>h});var c=s(21726),m=s(84687);function h(p){return{origin:"portal-item",url:(0,c.mN)(p.itemUrl),portal:p.portal||m.Z.getDefault(),portalItem:p,readResourcePaths:[]}}function f(p){return{origin:"portal-item",messages:[],writtenProperties:[],url:p.itemUrl?(0,c.mN)(p.itemUrl):null,portal:p.portal||m.Z.getDefault(),portalItem:p}}},83705:(d,_,s)=>{s.r(_),s.d(_,{getFirstLayerOrTableId:()=>W,getNumLayersAndTables:()=>D,getSubtypeGroupLayerIds:()=>j,load:()=>J,preprocessFSItemData:()=>K});var c=s(15861),m=s(26584),h=s(44917),f=s(38305),p=s(17196),y=s(84687),g=s(55463),E=s(88755),P=s(37281),T=s(39683),I=s(45205);function J(e,r){return O.apply(this,arguments)}function O(){return(O=(0,c.Z)(function*(e,r){const t=e.instance.portalItem;if(t&&t.id)return yield t.load(r),$(e),V(e,r)})).apply(this,arguments)}function $(e){const r=e.instance.portalItem;if(null==r||!r.type||!e.supportedTypes.includes(r.type))throw new m.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}'",{type:null==r?void 0:r.type,expectedType:e.supportedTypes.join(", ")})}function V(e,r){return v.apply(this,arguments)}function v(){return(v=(0,c.Z)(function*(e,r){var i;const t=e.instance,n=t.portalItem;if(!n)return;const{url:a,title:u}=n,o=(0,E.h)(n);if("group"===t.type)return t.read({title:u},o),Y(t,e);a&&t.read({url:a},o);const l=yield B(e,r);return l&&t.read(l,o),t.resourceReferences={portalItem:n,paths:null!=(i=o.readResourcePaths)?i:[]},"subtype-group"!==t.type&&t.read({title:u},o),(0,T.y)(t,o)})).apply(this,arguments)}function Y(e,r){return M.apply(this,arguments)}function M(){return(M=(0,c.Z)(function*(e,r){var Z;let t;const{portalItem:n}=e;if(!n)return;const a=n.type,u=r.layerModuleTypeMap,o=null!=(Z=(0,P._$)(n,"Oriented Imagery Layer"))&&Z;switch(a){case"Feature Service":t=o?u.OrientedImageryLayer:u.FeatureLayer;break;case"Stream Service":t=u.StreamLayer;break;case"Scene Service":t=u.SceneLayer;break;case"Feature Collection":t=u.FeatureLayer;break;default:throw new m.Z("portal:unsupported-item-type-as-group",`The item type '${a}' is not supported as a 'IGroupLayer'`)}let[l,i]=yield Promise.all([t(),B(r)]),L=()=>l;if("Feature Service"===a){if(i=n.url?yield K(i,n.url):{},j(i).length){const ee=u.SubtypeGroupLayer,te=yield ee();L=re=>"SubtypeGroupLayer"===re.layerType?te:l}return U(e,L,i,yield q(n.url))}return D(i)>0?U(e,L,i):z(e,L)})).apply(this,arguments)}function z(e,r){return b.apply(this,arguments)}function b(){return(b=(0,c.Z)(function*(e,r){var a,u;const{portalItem:t}=e;if(null==t||!t.url)return;const n=yield(0,I.T)(t.url);n&&U(e,r,{layers:null==(a=n.layers)?void 0:a.map(R),tables:null==(u=n.tables)?void 0:u.map(R)})})).apply(this,arguments)}function R(e){return{id:e.id,name:e.name}}function U(e,r,t,n){var o;let a=t.layers||[];const u=t.tables||[];if("Feature Collection"===(null==(o=e.portalItem)?void 0:o.type)&&(a.forEach(l=>{var i;"Table"===(null==(i=null==l?void 0:l.layerDefinition)?void 0:i.type)&&u.push(l)}),a=a.filter(l=>{var i;return"Table"!==(null==(i=null==l?void 0:l.layerDefinition)?void 0:i.type)})),"coverage"in t){const l=function X(e){const{coverage:r}=e;if(!r)return null;const t=new URL(r);if(r.toLowerCase().includes("item.html")){const n=t.searchParams.get("id");return h.Z.fromPortalItem({portalItem:new g.default({id:n,url:t.origin})})}if((0,f.B5)(r))return h.Z.fromArcGISServerUrl({url:r});throw new m.Z("portal:oriented-imagery-layer-coverage","the provided coverage url couldn't be loaded as a layer")}(t);l&&e.add(l)}a.reverse().forEach(l=>{const i=A(e,r(l),t,l,null==n?void 0:n(l));e.add(i)}),u.reverse().forEach(l=>{const i=A(e,r(l),t,l,null==n?void 0:n(l));e.tables.add(i)})}function A(e,r,t,n,a){const u=e.portalItem,o=new r({portalItem:u.clone(),layerId:n.id});if("sourceJSON"in o&&(o.sourceJSON=a),"subtype-group"!==o.type&&(o.sublayerTitleMode="service-name"),"Feature Collection"===u.type){const l={origin:"portal-item",portal:u.portal||y.Z.getDefault()};o.read(n,l);const i=t.showLegend;null!=i&&o.read({showLegend:i},l)}return o}function B(e,r){return x.apply(this,arguments)}function x(){return(x=(0,c.Z)(function*(e,r){if(!1===e.supportsData)return;const t=e.instance,n=t.portalItem;if(!n)return;let a=null;try{a=yield n.fetchData("json",r)}catch(u){}if(Q(t)){let u=null,o=!0;if(a&&D(a)>0){if(null==t.layerId){const l=j(a);t.layerId="subtype-group"===t.type?null==l?void 0:l[0]:W(a)}u=H(a,t),u&&(1===D(a)&&(o=!1),null!=a.showLegend&&(u.showLegend=a.showLegend))}return o&&"service-name"!==t.sublayerTitleMode&&(t.sublayerTitleMode="item-title-and-service-name"),u}return a})).apply(this,arguments)}function K(e,r){return C.apply(this,arguments)}function C(){return(C=(0,c.Z)(function*(e,r){if(null==(null==e?void 0:e.layers)||null==(null==e?void 0:e.tables)){const t=yield(0,I.T)(r);(e=e||{}).layers=e.layers||(null==t?void 0:t.layers),e.tables=e.tables||(null==t?void 0:t.tables)}return e})).apply(this,arguments)}function W(e){const r=e.layers;if(r&&r.length)return r[0].id;const t=e.tables;return t&&t.length?t[0].id:null}function H(e,r){var a,u;const{layerId:t}=r,n=(null==(a=e.layers)?void 0:a.find(o=>o.id===t))||(null==(u=e.tables)?void 0:u.find(o=>o.id===t));return n&&function k(e,r){return!("feature"===r.type&&"layerType"in e&&"SubtypeGroupLayer"===e.layerType||"subtype-group"===r.type&&!("layerType"in e))}(n,r)?n:null}function D(e){var r,t,n,a;return(null!=(t=null==(r=null==e?void 0:e.layers)?void 0:r.length)?t:0)+(null!=(a=null==(n=null==e?void 0:e.tables)?void 0:n.length)?a:0)}function Q(e){return"stream"!==e.type&&"oriented-imagery"!==e.type&&"layerId"in e}function j(e){var t;const r=[];return null==(t=null==e?void 0:e.layers)||t.forEach(n=>{"SubtypeGroupLayer"===n.layerType&&r.push(n.id)}),r}function q(e){return S.apply(this,arguments)}function S(){return(S=(0,c.Z)(function*(e){const{layersJSON:r}=yield(0,p.V)(e);if(!r)return null;const t=[...r.layers,...r.tables];return n=>t.find(a=>a.id===n.id)})).apply(this,arguments)}},45205:(d,_,s)=>{s.d(_,{T:()=>h});var c=s(15861),m=s(84792);function h(p,y){return f.apply(this,arguments)}function f(){return(f=(0,c.Z)(function*(p,y){const{data:g}=yield(0,m.default)(p,{responseType:"json",query:N(G({f:"json"},null==y?void 0:y.customParameters),{token:null==y?void 0:y.apiKey})});return g})).apply(this,arguments)}}}]);
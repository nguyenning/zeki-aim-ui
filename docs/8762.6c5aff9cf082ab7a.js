"use strict";var ge=Object.defineProperty,Ce=Object.defineProperties,Fe=Object.getOwnPropertyDescriptors,X=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Oe=Object.prototype.propertyIsEnumerable,Q=(u,d,t)=>d in u?ge(u,d,{enumerable:!0,configurable:!0,writable:!0,value:t}):u[d]=t,b=(u,d)=>{for(var t in d||(d={}))be.call(d,t)&&Q(u,t,d[t]);if(X)for(var t of X(d))Oe.call(d,t)&&Q(u,t,d[t]);return u},T=(u,d)=>Ce(u,Fe(d));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8762],{98762:(u,d,t)=>{t.r(d),t.d(d,{default:()=>ce});var p=t(15861),i=t(17626),V=(t(29132),t(73281)),w=(t(4832),t(49067),t(96794),t(69747),t(40425),t(69357),t(40342),t(73640),t(33474),t(32088)),O=t(62208),B=t(99959),G=t(94113),z=t(21726),o=t(77712),U=t(90912),Z=(t(85931),t(76898)),H=t(99433),F=t(71774),A=t(44917),K=t(26584),$=t(80542),q=t(8314),k=t(47996),N=t(10699),_=t(59289),E=t(56554),g=t(83774),ee=t(17253),L=t(2004);let m=class extends((0,$.p)(k.Z)){constructor(){var e;super(...arguments),e=this,this._connection=null,this.capabilities=(0,E.MS)(!1,!1),this.type="wfs",this.refresh=(0,N.Ds)(function(){var r=(0,p.Z)(function*(n){yield e.load();const{extent:a}=yield e._connection.invoke("refresh",n);return a&&(e.sourceJSON.extent=a),{dataChanged:!0,updates:{extent:e.sourceJSON.extent}}});return function(n){return r.apply(this,arguments)}}())}load(e){const r=(0,O.pC)(e)?e.signal:null;return this.addResolvingPromise(this._startWorker({signal:r})),Promise.resolve(this)}destroy(){var e;null==(e=this._connection)||e.close(),this._connection=null}openPorts(){var e=this;return(0,p.Z)(function*(){return yield e.load(),e._connection.openPorts()})()}queryFeatures(e,r={}){var n=this;return(0,p.Z)(function*(){yield n.load(r);const a=yield n._connection.invoke("queryFeatures",e?e.toJSON():null,r);return ee.Z.fromJSON(a)})()}queryFeaturesJSON(e,r={}){var n=this;return(0,p.Z)(function*(){return yield n.load(r),n._connection.invoke("queryFeatures",e?e.toJSON():null,r)})()}queryFeatureCount(e,r={}){var n=this;return(0,p.Z)(function*(){return yield n.load(r),n._connection.invoke("queryFeatureCount",e?e.toJSON():null,r)})()}queryObjectIds(e,r={}){var n=this;return(0,p.Z)(function*(){return yield n.load(r),n._connection.invoke("queryObjectIds",e?e.toJSON():null,r)})()}queryExtent(e,r={}){var n=this;return(0,p.Z)(function*(){yield n.load(r);const a=yield n._connection.invoke("queryExtent",e?e.toJSON():null,r);return{count:a.count,extent:L.Z.fromJSON(a.extent)}})()}querySnapping(e,r={}){var n=this;return(0,p.Z)(function*(){return yield n.load(r),n._connection.invoke("querySnapping",e,r)})()}_createLoadOptions(e){var r=this;return(0,p.Z)(function*(){var W,M;const{url:n,customParameters:a,name:y,namespaceUri:v,spatialReference:l,fields:h,geometryType:R,swapXY:x}=r.layer;if(!n)throw new K.Z("wfs-layer:missing-url","WFSLayer must be created with a url");r.wfsCapabilities||(r.wfsCapabilities=yield(0,g.FU)(n,b({customParameters:a},e)));const f=["fields","geometryType","name","namespaceUri","spatialReference","swapXY"].some(P=>null==r.layer[P])?yield(0,g.be)(r.wfsCapabilities,y,v,{spatialReference:l,customParameters:a,signal:null==e?void 0:e.signal}):T(b({},(0,g.eB)(null!=h?h:[])),{geometryType:R,name:y,namespaceUri:v,spatialReference:l,swapXY:x}),ve=(0,O.Wg)((0,g.ft)(r.wfsCapabilities.readFeatureTypes(),f.name,f.namespaceUri)),he=F.M.toJSON(f.geometryType);return{customParameters:a,featureType:ve,fields:null!=(M=null==(W=f.fields)?void 0:W.map(P=>P.toJSON()))?M:[],geometryField:f.geometryField,geometryType:he,getFeatureUrl:r.wfsCapabilities.operations.GetFeature.url,getFeatureOutputFormat:r.wfsCapabilities.operations.GetFeature.outputFormat,objectIdField:f.objectIdField,spatialReference:f.spatialReference.toJSON(),swapXY:!!f.swapXY}})()}_startWorker(e){var r=this;return(0,p.Z)(function*(){const[n,a]=yield(0,N.as)([r._createLoadOptions(e),(0,_.bA)("WFSSourceWorker",T(b({},e),{strategy:(0,q.Z)("feature-layers-workers")?"dedicated":"local"}))]),y=n.error||a.error||null,v=a.value||null;if(y)throw v&&v.close(),y;const l=n.value;r._connection=a.value;const h=(yield r._connection.invoke("load",l,e)).extent;r.sourceJSON={extent:h,fields:l.fields,geometryType:l.geometryType,objectIdField:l.objectIdField,geometryField:l.geometryField,drawingInfo:(0,E.bU)(l.geometryType),name:l.featureType.title,wfsInfo:{name:l.featureType.name,featureUrl:l.getFeatureUrl,maxFeatures:3e3,swapXY:l.swapXY,supportedSpatialReferences:l.featureType.supportedSpatialReferences,version:"2.0.0",wfsNamespace:l.featureType.namespaceUri}}})()}};(0,i._)([(0,o.Cb)()],m.prototype,"capabilities",void 0),(0,i._)([(0,o.Cb)({constructOnly:!0})],m.prototype,"layer",void 0),(0,i._)([(0,o.Cb)()],m.prototype,"sourceJSON",void 0),(0,i._)([(0,o.Cb)()],m.prototype,"type",void 0),(0,i._)([(0,o.Cb)()],m.prototype,"wfsCapabilities",void 0),m=(0,i._)([(0,Z.j)("esri.layers.graphics.sources.WFSSource")],m);var I,te=t(552),re=t(50107),ie=t(35126),oe=t(81380),ne=t(49286),se=t(32629),ae=t(6647),le=t(30346),de=t(99555),pe=t(97941),c=t(13812),J=t(36255),ye=t(55911),S=t(36630),ue=t(170),fe=t(62667),C=t(96854),me=t(49430),D=t(65234);const Y=(0,ye.v)();let s=I=class extends((0,se.c)((0,re.N)((0,oe.M)((0,ie.b)((0,te.h)((0,pe.n)((0,le.Q)((0,de.M)((0,ne.q)((0,ae.I)((0,B.R)(A.Z)))))))))))){static fromWFSLayerInfo(e){const{customParameters:r,fields:n,geometryField:a,geometryType:y,name:v,namespaceUri:l,objectIdField:h,spatialReference:R,swapXY:x,url:j,wfsCapabilities:f}=e;return new I({customParameters:r,fields:n,geometryField:a,geometryType:y,name:v,namespaceUri:l,objectIdField:h,spatialReference:R,swapXY:x,url:j,wfsCapabilities:f})}constructor(e){super(e),this.copyright=null,this.customParameters=null,this.definitionExpression=null,this.displayField=null,this.elevationInfo=null,this.featureUrl=void 0,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.labelsVisible=!0,this.labelingInfo=null,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="WFS",this.maxFeatures=3e3,this.mode=0,this.name=null,this.namespaceUri=null,this.outFields=null,this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new m({layer:this}),this.spatialReference=D.Z.WGS84,this.spatialReferences=[4326],this.swapXY=void 0,this.title="WFS",this.type="wfs",this.url=null,this.version=void 0}destroy(){var e;null==(e=this.source)||e.destroy()}load(e){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["WFS"]},e).then(()=>this.source.load(e)).then(()=>{this.read(this.source.sourceJSON,{origin:"service",url:this.parsedUrl}),this.revert(["objectIdField","fields","timeInfo","spatialReference","name","namespaceUri"],"service"),(0,S.YN)(this.renderer,this.fieldsIndex),(0,S.UF)(this.timeInfo,this.fieldsIndex)})),Promise.resolve(this)}get capabilities(){var e;return null==(e=this.source)?void 0:e.capabilities}get createQueryVersion(){return this.commitProperty("definitionExpression"),this.commitProperty("timeExtent"),this.commitProperty("timeOffset"),this.commitProperty("geometryType"),this.commitProperty("capabilities"),(this._get("createQueryVersion")||0)+1}get defaultPopupTemplate(){return this.createPopupTemplate()}writeFields(e,r,n){const a=e.filter(y=>y.name!==g.M8);this.geometryField&&a.unshift(new J.Z({name:this.geometryField,alias:this.geometryField,type:"geometry"})),(0,G.RB)(n,a.map(y=>y.toJSON()),r)}get parsedUrl(){return(0,z.mN)(this.url)}set renderer(e){(0,S.YN)(e,this.fieldsIndex),this._set("renderer",e)}get wfsCapabilities(){var e;return null==(e=this.source)?void 0:e.wfsCapabilities}set wfsCapabilities(e){this.source&&(this.source.wfsCapabilities=e)}createPopupTemplate(e){return(0,me.eZ)(this,e)}createQuery(){const e=new C.Z;e.returnGeometry=!0,e.outFields=["*"],e.where=this.definitionExpression||"1=1";const{timeOffset:r,timeExtent:n}=this;return e.timeExtent=null!=r&&null!=n?n.offset(-r.value,r.unit):n||null,e}getFieldDomain(e,r){var n;return null==(n=this.getField(e))?void 0:n.domain}getField(e){var r;return null==(r=this.fieldsIndex)?void 0:r.get(e)}queryFeatures(e,r){return this.load().then(()=>this.source.queryFeatures(C.Z.from(e)||this.createQuery(),r)).then(n=>{if(null!=n&&n.features)for(const a of n.features)a.layer=a.sourceLayer=this;return n})}queryObjectIds(e,r){return this.load().then(()=>this.source.queryObjectIds(C.Z.from(e)||this.createQuery(),r))}queryFeatureCount(e,r){return this.load().then(()=>this.source.queryFeatureCount(C.Z.from(e)||this.createQuery(),r))}queryExtent(e,r){return this.load().then(()=>this.source.queryExtent(C.Z.from(e)||this.createQuery(),r))}hasDataChanged(){var e=this;return(0,p.Z)(function*(){try{const{dataChanged:r,updates:n}=yield e.source.refresh(e.customParameters);return(0,O.pC)(n)&&e.read(n,{origin:"service",url:e.parsedUrl,ignoreDefaults:!0}),r}catch(r){}return!1})()}};(0,i._)([(0,o.Cb)({readOnly:!0})],s.prototype,"capabilities",null),(0,i._)([(0,o.Cb)({type:String})],s.prototype,"copyright",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],s.prototype,"createQueryVersion",null),(0,i._)([(0,o.Cb)({json:{name:"wfsInfo.customParameters",write:{overridePolicy:e=>({enabled:!!(e&&Object.keys(e).length>0),ignoreOrigin:!0})}}})],s.prototype,"customParameters",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],s.prototype,"defaultPopupTemplate",null),(0,i._)([(0,o.Cb)({type:String,json:{name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],s.prototype,"definitionExpression",void 0),(0,i._)([(0,o.Cb)({type:String})],s.prototype,"displayField",void 0),(0,i._)([(0,o.Cb)(c.PV)],s.prototype,"elevationInfo",void 0),(0,i._)([(0,o.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.featureUrl",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"featureUrl",void 0),(0,i._)([(0,o.Cb)({type:[J.Z],json:{name:"layerDefinition.fields",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"fields"}}}})],s.prototype,"fields",void 0),(0,i._)([(0,H.c)("fields")],s.prototype,"writeFields",null),(0,i._)([(0,o.Cb)(Y.fieldsIndex)],s.prototype,"fieldsIndex",void 0),(0,i._)([(0,o.Cb)({type:L.Z,json:{name:"extent"}})],s.prototype,"fullExtent",void 0),(0,i._)([(0,o.Cb)()],s.prototype,"geometryField",void 0),(0,i._)([(0,o.Cb)({type:String,json:{read:{source:"layerDefinition.geometryType",reader:F.M.read},write:{target:"layerDefinition.geometryType",writer:F.M.write,ignoreOrigin:!0},origins:{service:{read:F.M.read}}}})],s.prototype,"geometryType",void 0),(0,i._)([(0,o.Cb)({type:String})],s.prototype,"id",void 0),(0,i._)([(0,o.Cb)(c.iR)],s.prototype,"labelsVisible",void 0),(0,i._)([(0,o.Cb)({type:[ue.Z],json:{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:fe.r},write:!0}})],s.prototype,"labelingInfo",void 0),(0,i._)([(0,o.Cb)(c.rn)],s.prototype,"legendEnabled",void 0),(0,i._)([(0,o.Cb)({type:["show","hide"]})],s.prototype,"listMode",void 0),(0,i._)([(0,o.Cb)({type:String})],s.prototype,"objectIdField",void 0),(0,i._)([(0,o.Cb)({type:["WFS"]})],s.prototype,"operationalLayerType",void 0),(0,i._)([(0,o.Cb)({type:U.z8,json:{name:"wfsInfo.maxFeatures",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"maxFeatures",void 0),(0,i._)([(0,o.Cb)({type:[0],readOnly:!0,json:{origins:{"web-map":{write:{ignoreOrigin:!0,isRequired:!0}}}}})],s.prototype,"mode",void 0),(0,i._)([(0,o.Cb)({type:String,json:{name:"wfsInfo.name",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"name",void 0),(0,i._)([(0,o.Cb)({type:String,json:{name:"wfsInfo.wfsNamespace",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"namespaceUri",void 0),(0,i._)([(0,o.Cb)(c.bT)],s.prototype,"opacity",void 0),(0,i._)([(0,o.Cb)(Y.outFields)],s.prototype,"outFields",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],s.prototype,"parsedUrl",null),(0,i._)([(0,o.Cb)(c.C_)],s.prototype,"popupEnabled",void 0),(0,i._)([(0,o.Cb)({type:V.Z,json:{name:"popupInfo",write:!0}})],s.prototype,"popupTemplate",void 0),(0,i._)([(0,o.Cb)({types:w.A,json:{origins:{service:{name:"drawingInfo.renderer"},"web-scene":{types:w.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:{ignoreOrigin:!0}}})],s.prototype,"renderer",null),(0,i._)([(0,o.Cb)(c.YI)],s.prototype,"screenSizePerspectiveEnabled",void 0),(0,i._)([(0,o.Cb)({readOnly:!0})],s.prototype,"source",void 0),(0,i._)([(0,o.Cb)({type:D.Z,json:{name:"layerDefinition.spatialReference",write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"extent.spatialReference"}}}})],s.prototype,"spatialReference",void 0),(0,i._)([(0,o.Cb)({readOnly:!0,type:[U.z8],json:{name:"wfsInfo.supportedSpatialReferences",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"spatialReferences",void 0),(0,i._)([(0,o.Cb)({type:Boolean,value:!1,json:{name:"wfsInfo.swapXY",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"swapXY",void 0),(0,i._)([(0,o.Cb)({json:{write:{ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"name"}}}})],s.prototype,"title",void 0),(0,i._)([(0,o.Cb)({json:{read:!1},readOnly:!0})],s.prototype,"type",void 0),(0,i._)([(0,o.Cb)(c.HQ)],s.prototype,"url",void 0),(0,i._)([(0,o.Cb)({type:String,readOnly:!0,json:{name:"wfsInfo.version",write:{ignoreOrigin:!0,isRequired:!0}}})],s.prototype,"version",void 0),(0,i._)([(0,o.Cb)()],s.prototype,"wfsCapabilities",null),s=I=(0,i._)([(0,Z.j)("esri.layers.WFSLayer")],s);const ce=s}}]);
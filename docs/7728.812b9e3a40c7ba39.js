"use strict";var $=Object.defineProperty,V=Object.defineProperties,N=Object.getOwnPropertyDescriptors,Q=Object.getOwnPropertySymbols,q=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable,z=(F,B,d)=>B in F?$(F,B,{enumerable:!0,configurable:!0,writable:!0,value:d}):F[B]=d,G=(F,B)=>{for(var d in B||(B={}))q.call(B,d)&&z(F,d,B[d]);if(Q)for(var d of Q(B))k.call(B,d)&&z(F,d,B[d]);return F},H=(F,B)=>V(F,N(B));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[7728],{36592:(F,B,d)=>{d.d(B,{Q:()=>R});var C=d(85931),A=d(62208),T=d(77029),O=d(14259);class R{constructor(e=9,t){this._compareMinX=b,this._compareMinY=p,this._toBBox=s=>s,this._maxEntries=Math.max(4,e||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),t&&("function"==typeof t?this._toBBox=t:this._initFormat(t)),this.clear()}destroy(){this.clear(),S.prune(),X.prune(),P.prune(),Z.prune()}all(e){this._all(this._data,e)}search(e,t){let s=this._data;const r=this._toBBox;if(v(e,s))for(S.clear();s;){for(let i=0,o=s.children.length;i<o;i++){const h=s.children[i],a=s.leaf?r(h):h;v(e,a)&&(s.leaf?t(h):y(e,a)?this._all(h,t):S.push(h))}s=S.pop()}}collides(e){let t=this._data;const s=this._toBBox;if(!v(e,t))return!1;for(S.clear();t;){for(let r=0,i=t.children.length;r<i;r++){const o=t.children[r],h=t.leaf?s(o):o;if(v(e,h)){if(t.leaf||y(e,h))return!0;S.push(o)}}t=S.pop()}return!1}load(e){if(!e.length)return this;if(e.length<this._minEntries){for(let s=0,r=e.length;s<r;s++)this.insert(e[s]);return this}let t=this._build(e.slice(0,e.length),0,e.length-1,0);if(this._data.children.length)if(this._data.height===t.height)this._splitRoot(this._data,t);else{if(this._data.height<t.height){const s=this._data;this._data=t,t=s}this._insert(t,this._data.height-t.height-1,!0)}else this._data=t;return this}insert(e){return e&&this._insert(e,this._data.height-1),this}clear(){return this._data=new m([]),this}remove(e){var a;if(!e)return this;let t,s=this._data,r=null,i=0,o=!1;const h=this._toBBox(e);for(P.clear(),Z.clear();s||P.length>0;){if(s||(s=(0,A.j0)(P.pop()),r=P.data[P.length-1],i=null!=(a=Z.pop())?a:0,o=!0),s.leaf&&(t=(0,C.cq)(s.children,e,s.children.length,s.indexHint),-1!==t))return s.children.splice(t,1),P.push(s),this._condense(P),this;o||s.leaf||!y(s,h)?r?(i++,s=r.children[i],o=!1):s=null:(P.push(s),Z.push(i),i=0,r=s,s=s.children[0])}return this}toJSON(){return this._data}fromJSON(e){return this._data=e,this}_all(e,t){var r;let s=e;for(X.clear();s;){if(!0===s.leaf)for(const i of s.children)t(i);else X.pushArray(s.children);s=null!=(r=X.pop())?r:null}}_build(e,t,s,r){const i=s-t+1;let o=this._maxEntries;if(i<=o){const _=new m(e.slice(t,s+1));return E(_,this._toBBox),_}r||(r=Math.ceil(Math.log(i)/Math.log(o)),o=Math.ceil(i/o**(r-1)));const h=new g([]);h.height=r;const a=Math.ceil(i/o),f=a*Math.ceil(Math.sqrt(o));j(e,t,s,f,this._compareMinX);for(let _=t;_<=s;_+=f){const u=Math.min(_+f-1,s);j(e,_,u,a,this._compareMinY);for(let U=_;U<=u;U+=a){const w=Math.min(U+a-1,u);h.children.push(this._build(e,U,w,r-1))}}return E(h,this._toBBox),h}_chooseSubtree(e,t,s,r){for(;r.push(t),!0!==t.leaf&&r.length-1!==s;){let i,o=1/0,h=1/0;for(let a=0,f=t.children.length;a<f;a++){const _=t.children[a],u=x(_),U=W(e,_)-u;U<h?(h=U,o=u<o?u:o,i=_):U===h&&u<o&&(o=u,i=_)}t=i||t.children[0]}return t}_insert(e,t,s){const i=s?e:(0,this._toBBox)(e);P.clear();const o=this._chooseSubtree(i,this._data,t,P);for(o.children.push(e),L(o,i);t>=0&&P.data[t].children.length>this._maxEntries;)this._split(P,t),t--;this._adjustParentBBoxes(i,P,t)}_split(e,t){const s=e.data[t],r=s.children.length,i=this._minEntries;this._chooseSplitAxis(s,i,r);const o=this._chooseSplitIndex(s,i,r);if(!o)return void console.log("  Error: assertion failed at PooledRBush._split: no valid split index");const h=s.children.splice(o,s.children.length-o),a=s.leaf?new m(h):new g(h);a.height=s.height,E(s,this._toBBox),E(a,this._toBBox),t?e.data[t-1].children.push(a):this._splitRoot(s,a)}_splitRoot(e,t){this._data=new g([e,t]),this._data.height=e.height+1,E(this._data,this._toBBox)}_chooseSplitIndex(e,t,s){let r,i,o;r=i=1/0;for(let h=t;h<=s-t;h++){const a=D(e,0,h,this._toBBox),f=D(e,h,s,this._toBBox),_=c(a,f),u=x(a)+x(f);_<r?(r=_,o=h,i=u<i?u:i):_===r&&u<i&&(i=u,o=h)}return o}_chooseSplitAxis(e,t,s){const r=e.leaf?this._compareMinX:b,i=e.leaf?this._compareMinY:p;this._allDistMargin(e,t,s,r)<this._allDistMargin(e,t,s,i)&&e.children.sort(r)}_allDistMargin(e,t,s,r){e.children.sort(r);const i=this._toBBox,o=D(e,0,t,i),h=D(e,s-t,s,i);let a=M(o)+M(h);for(let f=t;f<s-t;f++){const _=e.children[f];L(o,e.leaf?i(_):_),a+=M(o)}for(let f=s-t-1;f>=t;f--){const _=e.children[f];L(h,e.leaf?i(_):_),a+=M(h)}return a}_adjustParentBBoxes(e,t,s){for(let r=s;r>=0;r--)L(t.data[r],e)}_condense(e){for(let t=e.length-1;t>=0;t--){const s=e.data[t];if(0===s.children.length)if(t>0){const r=e.data[t-1],i=r.children;i.splice((0,C.cq)(i,s,i.length,r.indexHint),1)}else this.clear();else E(s,this._toBBox)}}_initFormat(e){const t=["return a"," - b",";"];this._compareMinX=new Function("a","b",t.join(e[0])),this._compareMinY=new Function("a","b",t.join(e[1])),this._toBBox=new Function("a","return {minX: a"+e[0]+", minY: a"+e[1]+", maxX: a"+e[2]+", maxY: a"+e[3]+"};")}}function E(n,e){D(n,0,n.children.length,e,n)}function D(n,e,t,s,r){r||(r=new m([])),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let i,o=e;o<t;o++)i=n.children[o],L(r,n.leaf?s(i):i);return r}function L(n,e){n.minX=Math.min(n.minX,e.minX),n.minY=Math.min(n.minY,e.minY),n.maxX=Math.max(n.maxX,e.maxX),n.maxY=Math.max(n.maxY,e.maxY)}function b(n,e){return n.minX-e.minX}function p(n,e){return n.minY-e.minY}function x(n){return(n.maxX-n.minX)*(n.maxY-n.minY)}function M(n){return n.maxX-n.minX+(n.maxY-n.minY)}function W(n,e){return(Math.max(e.maxX,n.maxX)-Math.min(e.minX,n.minX))*(Math.max(e.maxY,n.maxY)-Math.min(e.minY,n.minY))}function c(n,e){const t=Math.max(n.minX,e.minX),s=Math.max(n.minY,e.minY),r=Math.min(n.maxX,e.maxX),i=Math.min(n.maxY,e.maxY);return Math.max(0,r-t)*Math.max(0,i-s)}function y(n,e){return n.minX<=e.minX&&n.minY<=e.minY&&e.maxX<=n.maxX&&e.maxY<=n.maxY}function v(n,e){return e.minX<=n.maxX&&e.minY<=n.maxY&&e.maxX>=n.minX&&e.maxY>=n.minY}function j(n,e,t,s,r){const i=[e,t];for(;i.length;){const o=(0,A.j0)(i.pop()),h=(0,A.j0)(i.pop());if(o-h<=s)continue;const a=h+Math.ceil((o-h)/s/2)*s;(0,O.q)(n,a,h,o,r),i.push(h,a,a,o)}}const S=new T.Z,X=new T.Z,P=new T.Z,Z=new T.Z({deallocator:void 0});class l extends class Y{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}}{constructor(){super(...arguments),this.height=1,this.indexHint=new C.SO}}class m extends l{constructor(e){super(),this.children=e,this.leaf=!0}}class g extends l{constructor(e){super(),this.children=e,this.leaf=!1}}},61256:(F,B,d)=>{d.d(B,{H:()=>L});var C=d(8314),A=d(36592),T=d(65401);const R={minX:0,minY:0,maxX:0,maxY:0};class L{constructor(){this._indexInvalid=!1,this._boundsToLoad=[],this._boundsById=new Map,this._idByBounds=new Map,this._index=new A.Q(9,(0,C.Z)("esri-csp-restrictions")?p=>({minX:p[0],minY:p[1],maxX:p[2],maxY:p[3]}):["[0]","[1]","[2]","[3]"]),this._loadIndex=()=>{if(this._indexInvalid){const p=new Array(this._idByBounds.size);let x=0;this._idByBounds.forEach((M,W)=>{p[x++]=W}),this._indexInvalid=!1,this._index.clear(),this._index.load(p)}else this._boundsToLoad.length&&(this._index.load(Array.from(new Set(this._boundsToLoad.filter(p=>this._idByBounds.has(p))))),this._boundsToLoad.length=0)}}get fullBounds(){if(!this._boundsById.size)return null;const p=(0,T.cS)();for(const x of this._boundsById.values())x&&(p[0]=Math.min(x[0],p[0]),p[1]=Math.min(x[1],p[1]),p[2]=Math.max(x[2],p[2]),p[3]=Math.max(x[3],p[3]));return p}get valid(){return!this._indexInvalid}clear(){this._indexInvalid=!1,this._boundsToLoad.length=0,this._boundsById.clear(),this._idByBounds.clear(),this._index.clear()}delete(p){const x=this._boundsById.get(p);this._boundsById.delete(p),x&&(this._idByBounds.delete(x),this._indexInvalid||this._index.remove(x))}forEachInBounds(p,x){this._loadIndex(),function D(b,p,x){(function E(b){R.minX=b[0],R.minY=b[1],R.maxX=b[2],R.maxY=b[3]})(p),b.search(R,x)}(this._index,p,M=>x(this._idByBounds.get(M)))}get(p){return this._boundsById.get(p)}has(p){return this._boundsById.has(p)}invalidateIndex(){this._indexInvalid||(this._indexInvalid=!0,this._boundsToLoad.length=0)}set(p,x){if(!this._indexInvalid){const M=this._boundsById.get(p);M&&(this._index.remove(M),this._idByBounds.delete(M))}this._boundsById.set(p,x),x&&(this._idByBounds.set(x,p),this._indexInvalid||(this._boundsToLoad.push(x),this._boundsToLoad.length>5e4&&this._loadIndex()))}}},3579:(F,B,d)=>{d.d(B,{Z:()=>M});var C=d(26584),A=d(61885),T=d(63290),O=d(62208),R=d(5548),E=d(65401),D=d(82054),L=d(61256),b=d(92794),p=d(6185);const x=(0,R.Ue)();class M{constructor(c){this.geometryInfo=c,this._boundsStore=new L.H,this._featuresById=new Map,this._markedIds=new Set,this.events=new A.Z,this.featureAdapter=b.n}get geometryType(){return this.geometryInfo.geometryType}get hasM(){return this.geometryInfo.hasM}get hasZ(){return this.geometryInfo.hasZ}get numFeatures(){return this._featuresById.size}get fullBounds(){return this._boundsStore.fullBounds}get storeStatistics(){let c=0;return this._featuresById.forEach(y=>{(0,O.pC)(y.geometry)&&y.geometry.coords&&(c+=y.geometry.coords.length)}),{featureCount:this._featuresById.size,vertexCount:c/(this.hasZ?this.hasM?4:3:this.hasM?3:2)}}getFullExtent(c){if((0,O.Wi)(this.fullBounds))return null;const[y,v,j,S]=this.fullBounds;return{xmin:y,ymin:v,xmax:j,ymax:S,spatialReference:(0,p.S2)(c)}}add(c){this._add(c),this._emitChanged()}addMany(c){for(const y of c)this._add(y);this._emitChanged()}clear(){this._featuresById.clear(),this._boundsStore.clear(),this._emitChanged()}removeById(c){const y=this._featuresById.get(c);return y?(this._remove(y),this._emitChanged(),y):null}removeManyById(c){this._boundsStore.invalidateIndex();for(const y of c){const v=this._featuresById.get(y);v&&this._remove(v)}this._emitChanged()}forEachBounds(c,y){for(const v of c){const j=this._boundsStore.get(v.objectId);j&&y((0,R.JR)(x,j))}}getFeature(c){return this._featuresById.get(c)}has(c){return this._featuresById.has(c)}forEach(c){this._featuresById.forEach(y=>c(y))}forEachInBounds(c,y){this._boundsStore.forEachInBounds(c,v=>{y(this._featuresById.get(v))})}startMarkingUsedFeatures(){this._boundsStore.invalidateIndex(),this._markedIds.clear()}sweep(){let c=!1;this._featuresById.forEach((y,v)=>{this._markedIds.has(v)||(c=!0,this._remove(y))}),this._markedIds.clear(),c&&this._emitChanged()}_emitChanged(){this.events.emit("changed",void 0)}_add(c){if(!c)return;const y=c.objectId;if(null==y)return void T.Z.getLogger("esri.layers.graphics.data.FeatureStore").error(new C.Z("featurestore:invalid-feature","feature id is missing",{feature:c}));const v=this._featuresById.get(y);let j;if(this._markedIds.add(y),v?(c.displayId=v.displayId,j=this._boundsStore.get(y),this._boundsStore.delete(y)):(0,O.pC)(this.onFeatureAdd)&&this.onFeatureAdd(c),(0,O.Wi)(c.geometry)||!c.geometry.coords||!c.geometry.coords.length)return this._boundsStore.set(y,null),void this._featuresById.set(y,c);j=(0,D.$)((0,O.pC)(j)?j:(0,E.Ue)(),c.geometry,this.geometryInfo.hasZ,this.geometryInfo.hasM),(0,O.pC)(j)&&this._boundsStore.set(y,j),this._featuresById.set(y,c)}_remove(c){(0,O.pC)(this.onFeatureRemove)&&this.onFeatureRemove(c);const y=c.objectId;return this._markedIds.delete(y),this._boundsStore.delete(y),this._featuresById.delete(y),c}}},92794:(F,B,d)=>{d.d(B,{n:()=>R});var C=d(62208),A=d(77044),T=d(66385),O=d(88071);const R={getObjectId:E=>E.objectId,getAttributes:E=>E.attributes,getAttribute:(E,D)=>E.attributes[D],cloneWithGeometry:(E,D)=>new T.u_(D,E.attributes,null,E.objectId),getGeometry:E=>E.geometry,getCentroid:(E,D)=>((0,C.Wi)(E.centroid)&&(E.centroid=(0,A.Y)(new O.Z,E.geometry,D.hasZ,D.hasM)),E.centroid)}},7728:(F,B,d)=>{d.r(B),d.d(B,{default:()=>Z});var C=d(15861),A=d(26584),T=d(62208),O=d(91179),R=d(37053),E=d(82054),D=d(1476),L=d(3579),b=d(82959),p=d(58175),x=d(56554),M=d(35775),W=d(60466),c=d(85),y=d(36630);const v=R.Zn,j={xmin:-180,ymin:-90,xmax:180,ymax:90,spatialReference:R.Zn},S={hasAttachments:!1,capabilities:"query, editing, create, delete, update",useStandardizedQueries:!0,supportsCoordinatesQuantization:!0,supportsReturningQueryGeometry:!0,advancedQueryCapabilities:{supportsQueryAttachments:!1,supportsStatistics:!0,supportsPercentileStatistics:!0,supportsReturningGeometryCentroid:!0,supportsQueryWithDistance:!0,supportsDistinct:!0,supportsReturningQueryExtent:!0,supportsReturningGeometryProperties:!1,supportsHavingClause:!0,supportsOrderBy:!0,supportsPagination:!0,supportsQueryWithResultType:!1,supportsSqlExpression:!0,supportsDisjointSpatialRel:!0}};function P(Y){return(0,O.wp)(Y)?null!=Y.m:!!Y.hasM}class Z{constructor(){this._queryEngine=null,this._nextObjectId=null}destroy(){this._queryEngine&&this._queryEngine&&this._queryEngine.destroy(),this._queryEngine=this._fieldsIndex=this._createDefaultAttributes=null}load(l){var m=this;return(0,C.Z)(function*(){const g=[],{features:n}=l,e=m._inferLayerProperties(n,l.fields),t=l.fields||[],s=null!=l.hasM?l.hasM:!!e.hasM,r=null!=l.hasZ?l.hasZ:!!e.hasZ,i=!l.spatialReference&&!e.spatialReference,o=i?v:l.spatialReference||e.spatialReference,h=i?j:null,a=l.geometryType||e.geometryType;let _=l.objectIdField||e.objectIdField,u=l.timeInfo;if(a&&(i&&g.push({name:"feature-layer:spatial-reference-not-found",message:"Spatial reference not provided or found in features. Defaults to WGS84"}),!a))throw new A.Z("feature-layer:missing-property","geometryType not set and couldn't be inferred from the provided features");if(!_)throw new A.Z("feature-layer:missing-property","objectIdField not set and couldn't be found in the provided fields");if(e.objectIdField&&_!==e.objectIdField&&(g.push({name:"feature-layer:duplicated-oid-field",message:`Provided objectIdField "${_}" doesn't match the field name "${e.objectIdField}", found in the provided fields`}),_=e.objectIdField),_&&!e.objectIdField){let I=null;t.some(K=>K.name===_&&(I=K,!0))?(I.type="esriFieldTypeOID",I.editable=!1,I.nullable=!1):t.unshift({alias:_,name:_,type:"esriFieldTypeOID",editable:!1,nullable:!1})}for(const I of t){if(null==I.name&&(I.name=I.alias),null==I.alias&&(I.alias=I.name),!I.name)throw new A.Z("feature-layer:invalid-field-name","field name is missing",{field:I});if(I.name===_&&(I.type="esriFieldTypeOID"),!c.v.jsonValues.includes(I.type))throw new A.Z("feature-layer:invalid-field-type",`invalid type for field "${I.name}"`,{field:I})}const U={};for(const I of t)if("esriFieldTypeOID"!==I.type&&"esriFieldTypeGlobalID"!==I.type){const K=(0,y.os)(I);void 0!==K&&(U[I.name]=K)}if(m._fieldsIndex=new W.Z(t),m._createDefaultAttributes=(0,x.Dm)(U,_),u){if(u.startTimeField){const I=m._fieldsIndex.get(u.startTimeField);I?(u.startTimeField=I.name,I.type="esriFieldTypeDate"):u.startTimeField=null}if(u.endTimeField){const I=m._fieldsIndex.get(u.endTimeField);I?(u.endTimeField=I.name,I.type="esriFieldTypeDate"):u.endTimeField=null}if(u.trackIdField){const I=m._fieldsIndex.get(u.trackIdField);I?u.trackIdField=I.name:(u.trackIdField=null,g.push({name:"feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:u}}))}u.startTimeField||u.endTimeField||(g.push({name:"feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing or invalid",details:{timeInfo:u}}),u=null)}const w={warnings:g,featureErrors:[],layerDefinition:H(G({},S),{drawingInfo:(0,x.bU)(a),templates:(0,x.Hq)(U),extent:h,geometryType:a,objectIdField:_,fields:t,hasZ:r,hasM:s,timeInfo:u}),assignedObjectIds:{}};if(m._queryEngine=new p.q({fields:t,geometryType:a,hasM:s,hasZ:r,objectIdField:_,spatialReference:o,featureStore:new L.Z({geometryType:a,hasM:s,hasZ:r}),timeInfo:u,cacheSpatialQueries:!0}),!n||!n.length)return m._nextObjectId=D.X,w;const J=(0,D.S)(_,n);return m._nextObjectId=J+1,yield(0,b._W)(n,o),m._loadInitialFeatures(w,n)})()}applyEdits(l){var m=this;return(0,C.Z)(function*(){const{spatialReference:g,geometryType:n}=m._queryEngine;return yield Promise.all([(0,M.b)(g,n),(0,b._W)(l.adds,g),(0,b._W)(l.updates,g)]),m._applyEdits(l)})()}queryFeatures(l,m={}){return this._queryEngine.executeQuery(l,m.signal)}queryFeatureCount(l,m={}){return this._queryEngine.executeQueryForCount(l,m.signal)}queryObjectIds(l,m={}){return this._queryEngine.executeQueryForIds(l,m.signal)}queryExtent(l,m={}){return this._queryEngine.executeQueryForExtent(l,m.signal)}querySnapping(l,m={}){return this._queryEngine.executeQueryForSnapping(l,m.signal)}_inferLayerProperties(l,m){let g,n,e=null,t=null,s=null;for(const r of l){const i=r.geometry;if(!(0,T.Wi)(i)&&(e||(e=(0,O.Ji)(i)),t||(t=i.spatialReference),null==g&&(g=(0,O.wp)(Y=i)?null!=Y.z:!!Y.hasZ),null==n&&(n=P(i)),e&&t&&null!=g&&null!=n))break}var Y;if(m&&m.length){let r=null;m.some(i=>{const o="esriFieldTypeOID"===i.type,h=!i.type&&i.name&&"objectid"===i.name.toLowerCase();return r=i,o||h})&&(s=r.name)}return{geometryType:e,spatialReference:t,objectIdField:s,hasM:n,hasZ:g}}_loadInitialFeatures(l,m){var g=this;return(0,C.Z)(function*(){const{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:r,featureStore:i}=g._queryEngine,o=[];for(const f of m){if(null!=f.uid&&(l.assignedObjectIds[f.uid]=-1),f.geometry&&n!==(0,O.Ji)(f.geometry)){l.featureErrors.push((0,M.av)("Incorrect geometry type."));continue}const _=g._createDefaultAttributes(),u=(0,M.O0)(g._fieldsIndex,_,f.attributes,!0,l.warnings);u?l.featureErrors.push(u):(g._assignObjectId(_,f.attributes,!0),f.attributes=_,null!=f.uid&&(l.assignedObjectIds[f.uid]=f.attributes[s]),(0,T.pC)(f.geometry)&&(f.geometry=(0,b.iV)(f.geometry,f.geometry.spatialReference,r)),o.push(f))}i.addMany((0,E.Yn)([],o,n,t,e,s));const{fullExtent:h,timeExtent:a}=yield g._queryEngine.fetchRecomputedExtents();if(l.layerDefinition.extent=h,a){const{start:f,end:_}=a;l.layerDefinition.timeInfo.timeExtent=[f,_]}return l})()}_applyEdits(l){var m=this;return(0,C.Z)(function*(){const{adds:g,updates:n,deletes:e}=l,t={addResults:[],deleteResults:[],updateResults:[],uidToObjectId:{}};if(g&&g.length&&m._applyAddEdits(t,g),n&&n.length&&m._applyUpdateEdits(t,n),e&&e.length){for(const i of e)t.deleteResults.push((0,M.d1)(i));m._queryEngine.featureStore.removeManyById(e)}const{fullExtent:s,timeExtent:r}=yield m._queryEngine.fetchRecomputedExtents();return{extent:s,timeExtent:r,featureEditResults:t}})()}_applyAddEdits(l,m){var h;const{addResults:g}=l,{geometryType:n,hasM:e,hasZ:t,objectIdField:s,spatialReference:r,featureStore:i}=this._queryEngine,o=[];for(const a of m){if(a.geometry&&n!==(0,O.Ji)(a.geometry)){g.push((0,M.av)("Incorrect geometry type."));continue}const f=this._createDefaultAttributes(),_=(0,M.O0)(this._fieldsIndex,f,a.attributes);if(_)g.push(_);else{if(this._assignObjectId(f,a.attributes),a.attributes=f,null!=a.uid&&(l.uidToObjectId[a.uid]=a.attributes[s]),(0,T.pC)(a.geometry)){const u=null!=(h=a.geometry.spatialReference)?h:r;a.geometry=(0,b.iV)((0,M.og)(a.geometry,u),u,r)}o.push(a),g.push((0,M.d1)(a.attributes[s]))}}i.addMany((0,E.Yn)([],o,n,t,e,s))}_applyUpdateEdits({updateResults:l},m){var i;const{geometryType:g,hasM:n,hasZ:e,objectIdField:t,spatialReference:s,featureStore:r}=this._queryEngine;for(const o of m){const{attributes:h,geometry:a}=o,f=h&&h[t];if(null==f){l.push((0,M.av)(`Identifier field ${t} missing`));continue}if(!r.has(f)){l.push((0,M.av)(`Feature with object id ${f} missing`));continue}const _=(0,E.EI)(r.getFeature(f),g,e,n);if((0,T.pC)(a)){if(g!==(0,O.Ji)(a)){l.push((0,M.av)("Incorrect geometry type."));continue}const u=null!=(i=a.spatialReference)?i:s;_.geometry=(0,b.iV)((0,M.og)(a,u),u,s)}if(h){const u=(0,M.O0)(this._fieldsIndex,_.attributes,h);if(u){l.push(u);continue}}r.add((0,E.XA)(_,g,e,n,t)),l.push((0,M.d1)(f))}}_assignObjectId(l,m,g=!1){const n=this._queryEngine.objectIdField;l[n]=g&&m&&isFinite(m[n])?m[n]:this._nextObjectId++}}}}]);
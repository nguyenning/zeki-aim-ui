"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[961],{961:(P,y,s)=>{s.r(y),s.d(y,{default:()=>u});var r=s(17626),v=s(46160),d=s(89726),h=s(62208),_=s(32917),o=s(77712),a=(s(90912),s(85931),s(76898)),c=s(45611);let n=class extends c.Z{constructor(e){super(e),this.type="group",this.layerViews=new v.Z}_allLayerViewVisibility(e){this.layerViews.forEach(t=>{t.visible=e})}initialize(){this.handles.add([this.layerViews.on("change",e=>this._layerViewsChangeHandler(e)),(0,_.YP)(()=>this.layer.visibilityMode,()=>this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(null)),_.Z_),(0,_.YP)(()=>this.visible,e=>{this._applyVisibility(()=>this._allLayerViewVisibility(e),()=>{})},_.Z_)],"grouplayerview"),this._layerViewsChangeHandler({target:null,added:this.layerViews.toArray(),removed:[],moved:[]})}set layerViews(e){this._set("layerViews",(0,d.Z)(e,this._get("layerViews")))}get updatingProgress(){return 0===this.layerViews.length?1:this.layerViews.reduce((e,t)=>e+t.updatingProgress,0)/this.layerViews.length}isUpdating(){return this.layerViews.some(e=>e.updating)}_hasLayerViewVisibleOverrides(){return this.layerViews.some(e=>e._isOverridden("visible"))}_findLayerViewForLayer(e){return e&&this.layerViews.find(t=>t.layer===e)}_firstVisibleOnLayerOrder(){const e=this.layer.layers.find(t=>{var i;return!(null==(i=this._findLayerViewForLayer(t))||!i.visible)});return e&&this._findLayerViewForLayer(e)}_applyExclusiveVisibility(e){(0,h.Wi)(e)&&(e=this._firstVisibleOnLayerOrder(),(0,h.Wi)(e)&&this.layerViews.length>0&&(e=this._findLayerViewForLayer(this.layer.layers.getItemAt(0)))),this.layerViews.forEach(t=>{t.visible=t===e})}_layerViewsChangeHandler(e){this.handles.remove("grouplayerview:visible"),this.handles.add(this.layerViews.map(i=>(0,_.YP)(()=>i.visible,l=>this._applyVisibility(()=>{l!==this.visible&&(i.visible=this.visible)},()=>this._applyExclusiveVisibility(l?i:null)),_.Z_)).toArray(),"grouplayerview:visible");const t=e.added[e.added.length-1];this._applyVisibility(()=>this._allLayerViewVisibility(this.visible),()=>this._applyExclusiveVisibility(null!=t&&t.visible?t:null))}_applyVisibility(e,t){var i,l;this._hasLayerViewVisibleOverrides()&&("inherited"===(null==(i=this.layer)?void 0:i.visibilityMode)?e():"exclusive"===(null==(l=this.layer)?void 0:l.visibilityMode)&&t())}};(0,r._)([(0,o.Cb)({cast:d.R})],n.prototype,"layerViews",null),(0,r._)([(0,o.Cb)({readOnly:!0})],n.prototype,"updatingProgress",null),(0,r._)([(0,o.Cb)()],n.prototype,"view",void 0),n=(0,r._)([(0,a.j)("esri.views.layers.GroupLayerView")],n);const u=n},45611:(P,y,s)=>{s.d(y,{Z:()=>t});var r=s(17626),v=s(14517),d=s(61885),h=s(80542),_=s(61996),o=s(63290),E=s(62208),O=s(60330),a=s(77712),u=(s(90912),s(85931),s(76898));let e=class extends((0,h.p)((0,_.IG)((0,O.v)(d.Z.EventedMixin(v.Z))))){constructor(i){super(i),this.layer=null,this.parent=null}initialize(){this.when().catch(i=>{if("layerview:create-error"!==i.name){const l=this.layer&&this.layer.id||"no id",p=this.layer&&this.layer.title||"no title";o.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${p}', id: '${l}')`,i)}})}get fullOpacity(){return(0,E.Pt)(this.get("layer.opacity"),1)*(0,E.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var i;return!this.suspended&&!0===(null==(i=this.layer)?void 0:i.legendEnabled)}get updating(){var i;return!!(null!=(i=this.updatingHandles)&&i.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var i;return!0===(null==(i=this.layer)?void 0:i.visible)}set visible(i){this._overrideIfSome("visible",i)}canResume(){var i,l,p;return this.visible&&(null==(i=this.layer)?void 0:i.loaded)&&!(null!=(l=this.parent)&&l.suspended)&&(null==(p=this.view)?void 0:p.ready)||!1}getSuspendInfo(){const i=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(i.viewNotReady=!0),this.layer&&this.layer.loaded||(i.layerNotLoaded=!0),this.visible||(i.layerInvisible=!0),i}isUpdating(){return!1}};(0,r._)([(0,a.Cb)()],e.prototype,"fullOpacity",null),(0,r._)([(0,a.Cb)()],e.prototype,"layer",void 0),(0,r._)([(0,a.Cb)()],e.prototype,"parent",void 0),(0,r._)([(0,a.Cb)({readOnly:!0})],e.prototype,"suspended",null),(0,r._)([(0,a.Cb)({readOnly:!0})],e.prototype,"suspendInfo",null),(0,r._)([(0,a.Cb)({readOnly:!0})],e.prototype,"legendEnabled",null),(0,r._)([(0,a.Cb)({type:Boolean,readOnly:!0})],e.prototype,"updating",null),(0,r._)([(0,a.Cb)({readOnly:!0})],e.prototype,"updatingProgress",null),(0,r._)([(0,a.Cb)()],e.prototype,"visible",null),(0,r._)([(0,a.Cb)()],e.prototype,"view",void 0),e=(0,r._)([(0,u.j)("esri.views.layers.LayerView")],e);const t=e}}]);
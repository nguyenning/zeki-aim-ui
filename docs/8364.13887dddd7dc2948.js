"use strict";var Ne=Object.defineProperty,ye=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,fe=(J,O,R)=>O in J?Ne(J,O,{enumerable:!0,configurable:!0,writable:!0,value:R}):J[O]=R,ie=(J,O)=>{for(var R in O||(O={}))Pe.call(O,R)&&fe(J,R,O[R]);if(ye)for(var R of ye(O))Se.call(O,R)&&fe(J,R,O[R]);return J};(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8364],{36243:(J,O,R)=>{R.d(O,{Z:()=>x});class x{constructor(T){this._array=[],T<=0&&console.error("strideInBytes must be positive!"),this._stride=T}get array(){return this._array}get index(){return 4*this._array.length/this._stride}get itemSize(){return this._stride}get sizeInBytes(){return 4*this._array.length}reset(){this.array.length=0}toBuffer(){return new Uint32Array(this._array).buffer}static i1616to32(T,d){return 65535&T|d<<16}static i8888to32(T,d,a,l){return 255&T|(255&d)<<8|(255&a)<<16|l<<24}static i8816to32(T,d,a){return 255&T|(255&d)<<8|a<<16}}},1268:(J,O,R)=>{R.d(O,{EE:()=>T,R:()=>d,_5:()=>p,aF:()=>a,f2:()=>b,fD:()=>f,fR:()=>A,nR:()=>o,r1:()=>I,vL:()=>l});var A,T,d,a,l,o,p,f,I,c,x=R(7547);(c=A||(A={}))[c.BACKGROUND=0]="BACKGROUND",c[c.FILL=1]="FILL",c[c.LINE=2]="LINE",c[c.SYMBOL=3]="SYMBOL",c[c.CIRCLE=4]="CIRCLE",function(c){c[c.VISIBLE=0]="VISIBLE",c[c.NONE=1]="NONE"}(T||(T={})),function(c){c[c.POINT=0]="POINT",c[c.LINE=1]="LINE",c[c.LINE_CENTER=2]="LINE_CENTER"}(d||(d={})),function(c){c[c.MAP=0]="MAP",c[c.VIEWPORT=1]="VIEWPORT",c[c.AUTO=2]="AUTO"}(a||(a={})),function(c){c[c.AUTO=0]="AUTO",c[c.LEFT=1]="LEFT",c[c.CENTER=2]="CENTER",c[c.RIGHT=3]="RIGHT"}(l||(l={})),function(c){c[c.CENTER=0]="CENTER",c[c.LEFT=1]="LEFT",c[c.RIGHT=2]="RIGHT",c[c.TOP=3]="TOP",c[c.BOTTOM=4]="BOTTOM",c[c.TOP_LEFT=5]="TOP_LEFT",c[c.TOP_RIGHT=6]="TOP_RIGHT",c[c.BOTTOM_LEFT=7]="BOTTOM_LEFT",c[c.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(o||(o={})),function(c){c[c.NONE=0]="NONE",c[c.UPPERCASE=1]="UPPERCASE",c[c.LOWERCASE=2]="LOWERCASE"}(p||(p={})),function(c){c[c.MAP=0]="MAP",c[c.VIEWPORT=1]="VIEWPORT"}(f||(f={})),function(c){c[c.HORIZONTAL=0]="HORIZONTAL",c[c.VERTICAL=1]="VERTICAL"}(I||(I={}));class b{}b.backgroundLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:T.VISIBLE}},b.fillLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:T.VISIBLE}},b.lineLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:T.VISIBLE},"line-cap":{type:"enum",values:["butt","round","square"],default:x.RL.BUTT},"line-join":{type:"enum",values:["bevel","round","miter"],default:x.AH.MITER},"line-miter-limit":{type:"number",default:2},"line-round-limit":{type:"number",default:1.05}},b.symbolLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:T.VISIBLE},"symbol-avoid-edges":{type:"boolean",default:!1},"symbol-placement":{type:"enum",values:["point","line","line-center"],default:d.POINT},"symbol-sort-key":{type:"number",default:-1},"symbol-spacing":{type:"number",minimum:1,default:250},"icon-allow-overlap":{type:"boolean",default:!1},"icon-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:o.CENTER},"icon-ignore-placement":{type:"boolean",default:!1},"icon-image":{type:"string"},"icon-keep-upright":{type:"boolean",default:!1},"icon-offset":{type:"array",value:"number",length:2,default:[0,0]},"icon-optional":{type:"boolean",default:!1},"icon-padding":{type:"number",minimum:0,default:2},"icon-rotate":{type:"number",default:0},"icon-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:a.AUTO},"icon-size":{type:"number",minimum:0,default:1},"text-allow-overlap":{type:"boolean",default:!1},"text-anchor":{type:"enum",values:["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"],default:o.CENTER},"text-field":{type:"string"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"]},"text-ignore-placement":{type:"boolean",default:!1},"text-justify":{type:"enum",values:["auto","left","center","right"],default:l.CENTER},"text-keep-upright":{type:"boolean",default:!0},"text-letter-spacing":{type:"number",default:0},"text-line-height":{type:"number",default:1.2},"text-max-angle":{type:"number",minimum:0,default:45},"text-max-width":{type:"number",minimum:0,default:10},"text-offset":{type:"array",value:"number",length:2,default:[0,0]},"text-optional":{type:"boolean",default:!1},"text-padding":{type:"number",minimum:0,default:2},"text-rotate":{type:"number",default:0},"text-rotation-alignment":{type:"enum",values:["map","viewport","auto"],default:a.AUTO},"text-size":{type:"number",minimum:0,default:16},"text-transform":{type:"enum",values:["none","uppercase","lowercase"],default:p.NONE},"text-writing-mode":{type:"array",value:"enum",values:["horizontal","vertical"],default:[I.HORIZONTAL]}},b.circleLayoutDefinition={visibility:{type:"enum",values:["visible","none"],default:T.VISIBLE}},b.backgroundPaintDefinition={"background-color":{type:"color",default:[0,0,0,1]},"background-opacity":{type:"number",minimum:0,maximum:1,default:1},"background-pattern":{type:"string"}},b.fillPaintDefinition={"fill-antialias":{type:"boolean",default:!0},"fill-color":{type:"color",default:[0,0,0,1]},"fill-opacity":{type:"number",minimum:0,maximum:1,default:1},"fill-outline-color":{type:"color",default:[0,0,0,0]},"fill-pattern":{type:"string"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0]},"fill-translate-anchor":{type:"enum",values:["map","viewport"],default:f.MAP}},b.linePaintDefinition={"line-blur":{type:"number",minimum:0,default:0},"line-color":{type:"color",default:[0,0,0,1]},"line-dasharray":{type:"array",value:"number",default:[]},"line-gap-width":{type:"number",minimum:0,default:0},"line-offset":{type:"number",default:0},"line-opacity":{type:"number",minimum:0,maximum:1,default:1},"line-pattern":{type:"string"},"line-translate":{type:"array",value:"number",length:2,default:[0,0]},"line-translate-anchor":{type:"enum",values:["map","viewport"],default:f.MAP},"line-width":{type:"number",minimum:0,default:1}},b.symbolPaintDefinition={"icon-color":{type:"color",default:[0,0,0,1]},"icon-halo-blur":{type:"number",minimum:0,default:0},"icon-halo-color":{type:"color",default:[0,0,0,0]},"icon-halo-width":{type:"number",minimum:0,default:0},"icon-opacity":{type:"number",minimum:0,maximum:1,default:1},"icon-translate":{type:"array",value:"number",length:2,default:[0,0]},"icon-translate-anchor":{type:"enum",values:["map","viewport"],default:f.MAP},"text-color":{type:"color",default:[0,0,0,1]},"text-halo-blur":{type:"number",minimum:0,default:0},"text-halo-color":{type:"color",default:[0,0,0,0]},"text-halo-width":{type:"number",minimum:0,default:0},"text-opacity":{type:"number",minimum:0,maximum:1,default:1},"text-translate":{type:"array",value:"number",length:2,default:[0,0]},"text-translate-anchor":{type:"enum",values:["map","viewport"],default:f.MAP}},b.rasterPaintDefinition={"raster-opacity":{type:"number",minimum:0,maximum:1,default:1},"raster-hue-rotate":{type:"number",default:0},"raster-brightness-min":{type:"number",minimum:0,maximum:1,default:0},"raster-brightness-max":{type:"number",minimum:0,maximum:1,default:1},"raster-saturation":{type:"number",minimum:-1,maximum:1,default:0},"raster-contrast":{type:"number",minimum:-1,maximum:1,default:0},"raster-fade-duration":{type:"number",minimum:0,default:300}},b.circlePaintDefinition={"circle-blur":{type:"number",minimum:0,default:0},"circle-color":{type:"color",default:[0,0,0,1]},"circle-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-radius":{type:"number",minimum:0,default:5},"circle-stroke-color":{type:"color",default:[0,0,0,1]},"circle-stroke-opacity":{type:"number",minimum:0,maximum:1,default:1},"circle-stroke-width":{type:"number",minimum:0,default:0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0]},"circle-translate-anchor":{type:"enum",values:["map","viewport"],default:f.MAP}}},13295:(J,O,R)=>{R.d(O,{Et:()=>Ie,sj:()=>xe,Le:()=>Te,_L:()=>Ae,gf:()=>Re,jG:()=>De,nj:()=>Le});var a,l,s,x=R(7547),A=R(919),T=R(62208),d=R(36243);(s=a||(a={}))[s.R8_SIGNED=0]="R8_SIGNED",s[s.R8_UNSIGNED=1]="R8_UNSIGNED",s[s.R16_SIGNED=2]="R16_SIGNED",s[s.R16_UNSIGNED=3]="R16_UNSIGNED",s[s.R8G8_SIGNED=4]="R8G8_SIGNED",s[s.R8G8_UNSIGNED=5]="R8G8_UNSIGNED",s[s.R16G16_SIGNED=6]="R16G16_SIGNED",s[s.R16G16_UNSIGNED=7]="R16G16_UNSIGNED",s[s.R8G8B8A8_SIGNED=8]="R8G8B8A8_SIGNED",s[s.R8G8B8A8_UNSIGNED=9]="R8G8B8A8_UNSIGNED",s[s.R8G8B8A8_COLOR=10]="R8G8B8A8_COLOR",s[s.R16G16B16A16_DASHARRAY=11]="R16G16B16A16_DASHARRAY",s[s.R16G16B16A16_PATTERN=12]="R16G16B16A16_PATTERN",function(s){s[s.UNIFORM=0]="UNIFORM",s[s.DATA_DRIVEN=1]="DATA_DRIVEN",s[s.INTERPOLATED_DATA_DRIVEN=2]="INTERPOLATED_DATA_DRIVEN",s[s.UNUSED=3]="UNUSED"}(l||(l={}));var o=R(67969),p=R(40852);class f{constructor(t){this._locations=new Map,this._key=t}get key(){return this._key}get type(){return 7&this._key}defines(){return[]}getStride(){return this._layoutInfo||this._buildAttributesInfo(),this._stride}getAttributeLocations(){return 0===this._locations.size&&this._buildAttributesInfo(),this._locations}getLayoutInfo(){return this._layoutInfo||this._buildAttributesInfo(),this._layoutInfo}getEncodingInfos(){return this._propertyEncodingInfo||this._buildAttributesInfo(),this._propertyEncodingInfo}getUniforms(){return this._uniforms||this._buildAttributesInfo(),this._uniforms}getShaderHeader(){return this._shaderHeader||this._buildAttributesInfo(),this._shaderHeader}getShaderMain(){return this._shaderMain||this._buildAttributesInfo(),this._shaderMain}setDataUniforms(t,e,n,r,i){const y=this.getUniforms();for(const u of y){const{name:h,type:m,getValue:_}=u,g=_(n,e,r,i);if(null!==g)switch(m){case"float":t.setUniform1f(h,g);break;case"vec2":t.setUniform2fv(h,g);break;case"vec4":t.setUniform4fv(h,g)}}}encodeAttributes(t,e,n,r){var _;const i=this.attributesInfo(),y=this.getEncodingInfos(),u=[];let h=0,m=0;for(const g of Object.keys(y)){const v=y[g],{type:L,precisionFactor:w,isLayout:Y}=i[g],P=Y?n.getLayoutProperty(g):n.getPaintProperty(g),j=null==(_=P.interpolator)?void 0:_.getInterpolationRange(e);let D=0;for(const U of v){const{offset:S,bufferElementsToAdd:Z}=U;if(Z>0){for(let C=0;C<Z;C++)u.push(0);h+=m,m=U.bufferElementsToAdd}const z=null!=r?r:P.getValue(j?j[D]:e,t);switch(L){case a.R8_SIGNED:case a.R8_UNSIGNED:u[h]|=this._encodeByte(z*(w||1),8*S);break;case a.R16_SIGNED:case a.R16_UNSIGNED:u[h]|=this._encodeShort(z*(w||1),8*S);break;case a.R8G8_SIGNED:case a.R8G8_UNSIGNED:u[h]|=this._encodeByte(z*(w||1),8*S),u[h]|=this._encodeByte(z*(w||1),8*S+8);break;case a.R16G16_SIGNED:case a.R16G16_UNSIGNED:u[h]|=this._encodeShort(z*(w||1),8*S),u[h]|=this._encodeShort(z*(w||1),8*S+16);break;case a.R8G8B8A8_SIGNED:case a.R8G8B8A8_UNSIGNED:u[h]|=this._encodeByte(z*(w||1),8*S),u[h]|=this._encodeByte(z*(w||1),8*S+8),u[h]|=this._encodeByte(z*(w||1),8*S+16),u[h]|=this._encodeByte(z*(w||1),8*S+24);break;case a.R8G8B8A8_COLOR:u[h]=this._encodeColor(z);break;case a.R16G16B16A16_DASHARRAY:case a.R16G16B16A16_PATTERN:this._encodePattern(h,u,z);break;default:throw new Error("Unsupported encoding type")}D++}}return u}getAtributeState(t){let e=0;const n=3+2*t;return e|=this._bit(n),e|=this._bit(n+1)<<1,e}_buildAttributesInfo(){const t=[],e={},n={};let r=-1;const i=this.attributesInfo(),y=this.attributes();let u=-1;for(const g of y){u++;const v=this.getAtributeState(u);if(v===l.UNIFORM||v===l.UNUSED)continue;const L=i[g],w=[];e[g]=w;const Y=L.type;for(let P=0;P<v;P++){const{dataType:j,bytesPerElement:D,count:U,normalized:S}=f._encodingInfo[Y],Z=D*U,z=`${j}-${!0===S}`;let C=n[z],tt=0;if(!C||C.count+U>4)r++,C={dataIndex:r,count:0,offset:0},4!==U&&(n[z]=C),t.push({location:-1,name:"a_data_"+r,count:U,type:j,normalized:S}),tt=Math.ceil(Math.max(Z/4,1));else{const et=t[C.dataIndex];et.count+=U,tt=Math.ceil(Math.max(et.count*D/4,1))-Math.ceil(Math.max(C.offset/4,1))}w.push({dataIndex:C.dataIndex,offset:C.offset,bufferElementsToAdd:tt}),C.offset+=Z,C.count+=U}}for(const g of t)switch(g.type){case o.g.BYTE:case o.g.UNSIGNED_BYTE:g.count=4;break;case o.g.SHORT:case o.g.UNSIGNED_SHORT:g.count+=g.count%2}this._buildVertexBufferLayout(t);let h=0;const m=this._layoutInfo.geometry;for(const g of m)this._locations.set(g.name,h++);const _=this._layoutInfo.opacity;if(_)for(const g of _)this._locations.set(g.name,h++);this._buildShaderInfo(t,e),this._propertyEncodingInfo=e}_buildVertexBufferLayout(t){const e={},n=this.geometryInfo();let r=n[0].stride;if(0===t.length)e.geometry=n;else{const i=[];let y=r;for(const u of t)r+=I(u.type)*u.count;for(const u of n)i.push(new p.G(u.name,u.count,u.type,u.offset,r,u.normalized));for(const u of t)i.push(new p.G(u.name,u.count,u.type,y,r,u.normalized)),y+=I(u.type)*u.count;e.geometry=i}this.opacityInfo()&&(e.opacity=this.opacityInfo()),this._layoutInfo=e,this._stride=r}_buildShaderInfo(t,e){let n="\n",r="\n";const i=[];for(const m of t)n+=`attribute ${this._getType(m.count)} ${m.name};\n`;const y=this.attributes(),u=this.attributesInfo();let h=-1;for(const m of y){h++;const{name:_,type:g,precisionFactor:v,isLayout:L}=u[m],w=v&&1!==v?" * "+1/v:"",{bytesPerElement:Y,count:P}=f._encodingInfo[g],j=D=>`a_data_${D.dataIndex}${b(P,D.offset,Y)}`;switch(this.getAtributeState(h)){case l.UNIFORM:{const D=this._getType(P),U=`u_${_}`;i.push({name:U,type:D,getValue:(S,Z,z,C)=>{const tt=L?S.getLayoutValue(m,Z):S.getPaintValue(m,Z);if(g===a.R16G16B16A16_DASHARRAY){const et=S.getDashKey(tt,S.getLayoutValue("line-cap",Z)),Bt=C.getMosaicItemPosition(et,!1);if((0,T.Wi)(Bt))return null;const{tl:Gt,br:pe}=Bt;return[Gt[0],pe[1],pe[0],Gt[1]]}if(g===a.R16G16B16A16_PATTERN){const et=C.getMosaicItemPosition(tt,!m.includes("line-"));if((0,T.Wi)(et))return null;const{tl:Bt,br:Gt}=et;return[Bt[0],Gt[1],Gt[0],Bt[1]]}if(g===a.R8G8B8A8_COLOR){const et=tt[3];return[et*tt[0],et*tt[1],et*tt[2],et]}return tt}}),n+=`uniform ${D} ${U};\n`,r+=`${D} ${_} = ${U};\n`}break;case l.DATA_DRIVEN:{const D=j(e[m][0]);r+=`${this._getType(P)} ${_} = ${D}${w};\n`}break;case l.INTERPOLATED_DATA_DRIVEN:{const D=`u_t_${_}`;i.push({name:D,type:"float",getValue:(Z,z,C,tt)=>(L?Z.getLayoutProperty(m):Z.getPaintProperty(m)).interpolator.interpolationUniformValue(C,z)}),n+=`uniform float ${D};\n`;const U=j(e[m][0]),S=j(e[m][1]);r+=`${this._getType(P)} ${_} = mix(${U}${w}, ${S}${w}, ${D});\n`}}}this._shaderHeader=n,this._shaderMain=r,this._uniforms=i}_bit(t){return(this._key&1<<t)>>t}_getType(t){switch(t){case 1:return"float";case 2:return"vec2";case 3:return"vec3";case 4:return"vec4"}throw new Error("Invalid count")}_encodeColor(t){const e=255*t[3];return d.Z.i8888to32(t[0]*e,t[1]*e,t[2]*e,e)}_encodePattern(t,e,n){if(!n||!n.rect)return;const i=n.rect,y=n.width,u=n.height;e[t]=this._encodeShort(i.x+2,0),e[t]|=this._encodeShort(i.y+2+u,16),e[t+1]=this._encodeShort(i.x+2+y,0),e[t+1]|=this._encodeShort(i.y+2,16)}_encodeByte(t,e){return(255&t)<<e}_encodeShort(t,e){return(65535&t)<<e}}f._encodingInfo={[a.R8_SIGNED]:{dataType:o.g.BYTE,bytesPerElement:1,count:1,normalized:!1},[a.R8_UNSIGNED]:{dataType:o.g.UNSIGNED_BYTE,bytesPerElement:1,count:1,normalized:!1},[a.R16_SIGNED]:{dataType:o.g.SHORT,bytesPerElement:2,count:1,normalized:!1},[a.R16_UNSIGNED]:{dataType:o.g.UNSIGNED_SHORT,bytesPerElement:2,count:1,normalized:!1},[a.R8G8_SIGNED]:{dataType:o.g.BYTE,bytesPerElement:1,count:2,normalized:!1},[a.R8G8_UNSIGNED]:{dataType:o.g.UNSIGNED_BYTE,bytesPerElement:1,count:2,normalized:!1},[a.R16G16_SIGNED]:{dataType:o.g.SHORT,bytesPerElement:2,count:2,normalized:!1},[a.R16G16_UNSIGNED]:{dataType:o.g.UNSIGNED_SHORT,bytesPerElement:2,count:2,normalized:!1},[a.R8G8B8A8_SIGNED]:{dataType:o.g.BYTE,bytesPerElement:1,count:4,normalized:!1},[a.R8G8B8A8_UNSIGNED]:{dataType:o.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!1},[a.R8G8B8A8_COLOR]:{dataType:o.g.UNSIGNED_BYTE,bytesPerElement:1,count:4,normalized:!0},[a.R16G16B16A16_DASHARRAY]:{dataType:o.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1},[a.R16G16B16A16_PATTERN]:{dataType:o.g.UNSIGNED_SHORT,bytesPerElement:2,count:4,normalized:!1}};const I=s=>{switch(s){case o.g.FLOAT:case o.g.INT:case o.g.UNSIGNED_INT:return 4;case o.g.SHORT:case o.g.UNSIGNED_SHORT:return 2;case o.g.BYTE:case o.g.UNSIGNED_BYTE:return 1}},b=(s,t,e)=>{const n=t/e;if(1===s)switch(n){case 0:return".x";case 1:return".y";case 2:return".z";case 3:return".w"}else if(2===s)switch(n){case 0:return".xy";case 1:return".yz";case 2:return".zw"}else if(3===s)switch(n){case 0:return".xyz";case 1:return".yzw"}return""};class c extends f{constructor(t){super(t)}geometryInfo(){return c.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return c.ATTRIBUTES}attributesInfo(){return c.ATTRIBUTES_INFO}}c.ATTRIBUTES=[],c.GEOMETRY_LAYOUT=[new p.G("a_pos",2,o.g.BYTE,0,2)],c.ATTRIBUTES_INFO={};class V extends f{constructor(t){super(t)}geometryInfo(){return V.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return V.ATTRIBUTES}attributesInfo(){return V.ATTRIBUTES_INFO}}V.ATTRIBUTES=["circle-radius","circle-color","circle-opacity","circle-stroke-width","circle-stroke-color","circle-stroke-opacity","circle-blur"],V.GEOMETRY_LAYOUT=[new p.G("a_pos",2,o.g.SHORT,0,4)],V.ATTRIBUTES_INFO={"circle-radius":{name:"radius",type:a.R8_UNSIGNED},"circle-color":{name:"color",type:a.R8G8B8A8_COLOR},"circle-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100},"circle-stroke-width":{name:"stroke_width",type:a.R8_UNSIGNED,precisionFactor:4},"circle-stroke-color":{name:"stroke_color",type:a.R8G8B8A8_COLOR},"circle-stroke-opacity":{name:"stroke_opacity",type:a.R8_UNSIGNED,precisionFactor:100},"circle-blur":{name:"blur",type:a.R8_UNSIGNED,precisionFactor:32}};class H extends f{constructor(t){super(t)}geometryInfo(){return H.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return H.ATTRIBUTES}attributesInfo(){return H.ATTRIBUTES_INFO}}H.ATTRIBUTES=["fill-color","fill-opacity","fill-pattern"],H.GEOMETRY_LAYOUT=[new p.G("a_pos",2,o.g.SHORT,0,4)],H.ATTRIBUTES_INFO={"fill-color":{name:"color",type:a.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100},"fill-pattern":{name:"tlbr",type:a.R16G16B16A16_PATTERN,isOptional:!0}};class F extends f{constructor(t,e){super(t),this.usefillColor=e}geometryInfo(){return F.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return this.usefillColor?F.ATTRIBUTES_FILL:F.ATTRIBUTES_OUTLINE}attributesInfo(){return this.usefillColor?F.ATTRIBUTES_INFO_FILL:F.ATTRIBUTES_INFO_OUTLINE}}F.ATTRIBUTES_OUTLINE=["fill-outline-color","fill-opacity"],F.ATTRIBUTES_FILL=["fill-color","fill-opacity"],F.GEOMETRY_LAYOUT=[new p.G("a_pos",2,o.g.SHORT,0,8),new p.G("a_offset",2,o.g.BYTE,4,8),new p.G("a_xnormal",2,o.g.BYTE,6,8)],F.ATTRIBUTES_INFO_OUTLINE={"fill-outline-color":{name:"color",type:a.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100}},F.ATTRIBUTES_INFO_FILL={"fill-color":{name:"color",type:a.R8G8B8A8_COLOR},"fill-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100}};class rt extends f{constructor(t){super(t)}geometryInfo(){return rt.GEOMETRY_LAYOUT}opacityInfo(){return null}attributes(){return rt.ATTRIBUTES}attributesInfo(){return rt.ATTRIBUTES_INFO}}rt.ATTRIBUTES=["line-blur","line-color","line-gap-width","line-offset","line-opacity","line-width","line-pattern","line-dasharray"],rt.GEOMETRY_LAYOUT=[new p.G("a_pos",2,o.g.SHORT,0,16),new p.G("a_extrude_offset",4,o.g.BYTE,4,16),new p.G("a_dir_normal",4,o.g.BYTE,8,16),new p.G("a_accumulatedDistance",2,o.g.UNSIGNED_SHORT,12,16)],rt.ATTRIBUTES_INFO={"line-width":{name:"width",type:a.R8_UNSIGNED,precisionFactor:2},"line-gap-width":{name:"gap_width",type:a.R8_UNSIGNED,precisionFactor:2},"line-offset":{name:"offset",type:a.R8_SIGNED,precisionFactor:2},"line-color":{name:"color",type:a.R8G8B8A8_COLOR},"line-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100},"line-blur":{name:"blur",type:a.R8_UNSIGNED,precisionFactor:4},"line-pattern":{name:"tlbr",type:a.R16G16B16A16_PATTERN,isOptional:!0},"line-dasharray":{name:"tlbr",type:a.R16G16B16A16_DASHARRAY,isOptional:!0}};const Ht=[new p.G("a_pos",2,o.g.SHORT,0,16),new p.G("a_vertexOffset",2,o.g.SHORT,4,16),new p.G("a_texAngleRange",4,o.g.UNSIGNED_BYTE,8,16),new p.G("a_levelInfo",4,o.g.UNSIGNED_BYTE,12,16)],jt=[new p.G("a_opacityInfo",1,o.g.UNSIGNED_BYTE,0,1)];class st extends f{constructor(t){super(t)}geometryInfo(){return Ht}opacityInfo(){return jt}attributes(){return st.ATTRIBUTES}attributesInfo(){return st.ATTRIBUTES_INFO}}st.ATTRIBUTES=["icon-color","icon-opacity","icon-halo-blur","icon-halo-color","icon-halo-width","icon-size"],st.ATTRIBUTES_INFO={"icon-color":{name:"color",type:a.R8G8B8A8_COLOR},"icon-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100},"icon-halo-color":{name:"halo_color",type:a.R8G8B8A8_COLOR},"icon-halo-width":{name:"halo_width",type:a.R8_UNSIGNED,precisionFactor:4},"icon-halo-blur":{name:"halo_blur",type:a.R8_UNSIGNED,precisionFactor:4},"icon-size":{name:"size",type:a.R8_UNSIGNED,precisionFactor:32,isLayout:!0}};class ot extends f{constructor(t){super(t)}geometryInfo(){return Ht}opacityInfo(){return jt}attributes(){return ot.ATTRIBUTES}attributesInfo(){return ot.ATTRIBUTES_INFO}}ot.ATTRIBUTES=["text-color","text-opacity","text-halo-blur","text-halo-color","text-halo-width","text-size"],ot.ATTRIBUTES_INFO={"text-color":{name:"color",type:a.R8G8B8A8_COLOR},"text-opacity":{name:"opacity",type:a.R8_UNSIGNED,precisionFactor:100},"text-halo-color":{name:"halo_color",type:a.R8G8B8A8_COLOR},"text-halo-width":{name:"halo_width",type:a.R8_UNSIGNED,precisionFactor:4},"text-halo-blur":{name:"halo_blur",type:a.R8_UNSIGNED,precisionFactor:4},"text-size":{name:"size",type:a.R8_UNSIGNED,isLayout:!0}};var B=R(91558),ut=R(78260);function lt(s,t,e,n){const r=3*s,i=3*(e-s)-r,y=1-r-i,u=3*t,h=3*(n-t)-u,m=1-u-h;function _(w){return((y*w+i)*w+r)*w}function v(w){return(3*y*w+2*i)*w+r}return function(w,Y=1e-6){return function g(w){return((m*w+h)*w+u)*w}(function L(w,Y){let P,j,D,U,S,Z;for(D=w,Z=0;Z<8;Z++){if(U=_(D)-w,Math.abs(U)<Y)return D;if(S=v(D),Math.abs(S)<1e-6)break;D-=U/S}if(P=0,j=1,D=w,D<P)return P;if(D>j)return j;for(;P<j;){if(U=_(D),Math.abs(U-w)<Y)return D;w>U?P=D:j=D,D=.5*(j-P)+P}return D}(w,Y))}}const it={};it.ease=lt(.25,.1,.25,1),it.linear=lt(0,0,1,1),it.easeIn=it["ease-in"]=lt(.42,0,1,1),it.easeOut=it["ease-out"]=lt(0,0,.58,1),it.easeInOut=it["ease-in-out"]=lt(.42,0,.58,1);var $=R(86575);const kt={kind:"null"},N={kind:"number"},K={kind:"string"},k={kind:"boolean"},nt={kind:"color"},yt={kind:"object"},at={kind:"value"};function ft(s,t){return{kind:"array",itemType:s,n:t}}const se=[kt,N,K,k,nt,yt,ft(at)];function ct(s){if("array"===s.kind){const t=ct(s.itemType);return"number"==typeof s.n?`array<${t}, ${s.n}>`:"value"===s.itemType.kind?"array":`array<${t}>`}return s.kind}function mt(s){if(null===s)return kt;if("string"==typeof s)return K;if("boolean"==typeof s)return k;if("number"==typeof s)return N;if(s instanceof B.Z)return nt;if(Array.isArray(s)){let t;for(const e of s){const n=mt(e);if(t){if(t!==n){t=at;break}}else t=n}return ft(t||at,s.length)}return"object"==typeof s?yt:at}function Mt(s,t){if("array"===t.kind)return"array"===s.kind&&(0===s.n&&"value"===s.itemType.kind||Mt(s.itemType,t.itemType))&&("number"!=typeof t.n||t.n===s.n);if("value"===t.kind)for(const e of se)if(Mt(s,e))return!0;return t.kind===s.kind}function vt(s){if(null===s)return"";const t=typeof s;return"string"===t?s:"number"===t||"boolean"===t?String(s):s instanceof B.Z?s.toString():JSON.stringify(s)}var wt=R(97938);class Zt{constructor(t){this.parent=t,this.vars={}}add(t,e){this.vars[t]=e}get(t){return this.vars[t]?this.vars[t]:this.parent?this.parent.get(t):null}}class zt{constructor(){this.type=at}static parse(t){if(t.length>1)throw new Error('"id" does not expect arguments');return new zt}evaluate(t,e){return null==t?void 0:t.id}}class Ct{constructor(){this.type=K}static parse(t){if(t.length>1)throw new Error('"geometry-type" does not expect arguments');return new Ct}evaluate(t,e){if(!t)return null;switch(t.type){case wt.V.Point:return"Point";case wt.V.LineString:return"LineString";case wt.V.Polygon:return"Polygon";default:return null}}}class It{constructor(){this.type=yt}static parse(t){if(t.length>1)throw new Error('"properties" does not expect arguments');return new It}evaluate(t,e){return null==t?void 0:t.values}}class gt{constructor(){this.type=N}static parse(t){if(t.length>1)throw new Error('"zoom" does not expect arguments');return new gt}evaluate(t,e){return e}}class W{constructor(t,e,n){this.lhs=t,this.rhs=e,this.compare=n,this.type=k}static parse(t,e,n){if(3!==t.length&&4!==t.length)throw new Error(`"${t[0]}" expects 2 or 3 arguments`);if(4===t.length)throw new Error(`"${t[0]}" collator not supported`);return new W(E(t[1],e),E(t[2],e),n)}evaluate(t,e){return this.compare(this.lhs.evaluate(t,e),this.rhs.evaluate(t,e))}}class Tt{constructor(t){this.arg=t,this.type=k}static parse(t,e){if(2!==t.length)throw new Error('"!" expects 1 argument');return new Tt(E(t[1],e))}evaluate(t,e){return!this.arg.evaluate(t,e)}}class Vt{constructor(t){this.args=t,this.type=k}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Vt(n)}evaluate(t,e){for(const n of this.args)if(!n.evaluate(t,e))return!1;return!0}}class Rt{constructor(t){this.args=t,this.type=k}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Rt(n)}evaluate(t,e){for(const n of this.args)if(n.evaluate(t,e))return!0;return!1}}class Dt{constructor(t){this.args=t,this.type=k}static parse(t,e){const n=[];for(let r=1;r<t.length;r++)n.push(E(t[r],e));return new Dt(n)}evaluate(t,e){for(const n of this.args)if(n.evaluate(t,e))return!1;return!0}}class xt{constructor(t,e,n){this.type=t,this.args=e,this.fallback=n}static parse(t,e,n){if(t.length<4)throw new Error('"case" expects at least 3 arguments');if(t.length%2==1)throw new Error('"case" expects an odd number of arguments');let r;const i=[];for(let u=1;u<t.length-1;u+=2){const h=E(t[u],e),m=E(t[u+1],e,n);r||(r=m.type),i.push({condition:h,output:m})}const y=E(t[t.length-1],e,n);return r||(r=y.type),new xt(r,i,y)}evaluate(t,e){for(const n of this.args)if(n.condition.evaluate(t,e))return n.output.evaluate(t,e);return this.fallback.evaluate(t,e)}}class Ft{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)throw new Error('"coalesce" expects at least 1 argument');let n;const r=[];for(let i=1;i<t.length;i++){const y=E(t[i],e);n||(n=y.type),r.push(y)}return new Ft(n,r)}evaluate(t,e){for(const n of this.args){const r=n.evaluate(t,e);if(null!==r)return r}return null}}class $t{constructor(t,e,n,r,i){this.type=t,this.input=e,this.labels=n,this.outputs=r,this.fallback=i}static parse(t,e){if(t.length<3)throw new Error('"match" expects at least 3 arguments');if(t.length%2==0)throw new Error('"case" expects an even number of arguments');let n;const r=E(t[1],e),i=[],y={};let u;for(let h=2;h<t.length-1;h+=2){let m=t[h];Array.isArray(m)||(m=[m]);for(const g of m){const v=typeof g;if("string"!==v&&"number"!==v)throw new Error('"match" requires string or number literal as labels');if(u){if(v!==u)throw new Error('"match" requires labels to have the same type')}else u=v;y[g]=i.length}const _=E(t[h+1],e);n||(n=_.type),i.push(_)}return new $t(n,r,y,i,E(t[t.length-1],e))}evaluate(t,e){const n=this.input.evaluate(t,e);return(this.outputs[this.labels[n]]||this.fallback).evaluate(t,e)}}class Q{constructor(t,e,n,r,i){this.operator=t,this.type=e,this.interpolation=n,this.input=r,this.stops=i}static parse(t,e,n){const r=t[0];if(t.length<5)throw new Error(`"${r}" expects at least 4 arguments`);const i=t[1];if(!Array.isArray(i)||0===i.length)throw new Error(`"${i}" is not a valid interpolation`);switch(i[0]){case"linear":if(1!==i.length)throw new Error("Linear interpolation cannot have parameters");break;case"exponential":if(2!==i.length||"number"!=typeof i[1])throw new Error("Exponential interpolation requires one numeric argument");break;case"cubic-bezier":if(5!==i.length)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1");for(let m=1;m<5;m++){const _=i[m];if("number"!=typeof _||_<0||_>1)throw new Error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1")}break;default:throw new Error(`"${t[0]}" unknown interpolation type "${i[0]}"`)}if(t.length%2!=1)throw new Error(`"${r}" expects an even number of arguments`);const y=E(t[2],e,N);let u;"interpolate-hcl"===r||"interpolate-lab"===r?u=nt:n&&"value"!==n.kind&&(u=n);const h=[];for(let m=3;m<t.length;m+=2){const _=t[m];if("number"!=typeof _)throw new Error(`"${r}" requires stop inputs as literal numbers`);if(h.length&&h[h.length-1][0]>=_)throw new Error(`"${r}" requires strictly ascending stop inputs`);const g=E(t[m+1],e,u);u||(u=g.type),h.push([_,g])}if(u&&u!==nt&&u!==N&&("array"!==u.kind||u.itemType!==N))throw new Error(`"${r}" cannot interpolate type ${ct(u)}`);return new Q(r,u,i,y,h)}evaluate(t,e){const n=this.stops;if(1===n.length)return n[0][1].evaluate(t,e);const r=this.input.evaluate(t,e);if(r<=n[0][0])return n[0][1].evaluate(t,e);if(r>=n[n.length-1][0])return n[n.length-1][1].evaluate(t,e);let i=0;for(;++i<n.length&&!(r<n[i][0]););const h=Q.interpolationRatio(this.interpolation,r,n[i-1][0],n[i][0]),m=n[i-1][1].evaluate(t,e),_=n[i][1].evaluate(t,e);if("interpolate"===this.operator){if("array"===this.type.kind&&Array.isArray(m)&&Array.isArray(_))return m.map((g,v)=>(0,$.sX)(g,_[v],h));if("color"===this.type.kind&&m instanceof B.Z&&_ instanceof B.Z){const g=new B.Z(m),v=new B.Z(_);return new B.Z([(0,$.sX)(g.r,v.r,h),(0,$.sX)(g.g,v.g,h),(0,$.sX)(g.b,v.b,h),(0,$.sX)(g.a,v.a,h)])}if("number"===this.type.kind&&"number"==typeof m&&"number"==typeof _)return(0,$.sX)(m,_,h);throw new Error(`"${this.operator}" cannot interpolate type ${ct(this.type)}`)}if("interpolate-hcl"===this.operator){const g=(0,ut.sJ)(m),v=(0,ut.sJ)(_),L=v.h-g.h,w=(0,ut.xr)({h:g.h+h*(L>180||L<-180?L-360*Math.round(L/360):L),c:(0,$.sX)(g.c,v.c,h),l:(0,$.sX)(g.l,v.l,h)});return new B.Z(ie({a:(0,$.sX)(m.a,_.a,h)},w))}if("interpolate-lab"===this.operator){const g=(0,ut.Y3)(m),v=(0,ut.Y3)(_),L=(0,ut.xr)({l:(0,$.sX)(g.l,v.l,h),a:(0,$.sX)(g.a,v.a,h),b:(0,$.sX)(g.b,v.b,h)});return new B.Z(ie({a:(0,$.sX)(m.a,_.a,h)},L))}throw new Error(`Unexpected operator "${this.operator}"`)}interpolationUniformValue(t,e){const n=this.stops;if(1===n.length||t>=n[n.length-1][0])return 0;let r=0;for(;++r<n.length&&!(t<n[r][0]););return Q.interpolationRatio(this.interpolation,e,n[r-1][0],n[r][0])}getInterpolationRange(t){const e=this.stops;if(1===e.length){const i=e[0][0];return[i,i]}const n=e[e.length-1][0];if(t>=n)return[n,n];let r=0;for(;++r<e.length&&!(t<e[r][0]););return[e[r-1][0],e[r][0]]}static interpolationRatio(t,e,n,r){let i=0;return"linear"===t[0]?i=Q._exponentialInterpolationRatio(e,1,n,r):"exponential"===t[0]?i=Q._exponentialInterpolationRatio(e,t[1],n,r):"cubic-bezier"===t[0]&&(i=lt(t[1],t[2],t[3],t[4])(Q._exponentialInterpolationRatio(e,1,n,r),1e-5)),i<0?i=0:i>1&&(i=1),i}static _exponentialInterpolationRatio(t,e,n,r){const i=r-n;if(0===i)return 0;const y=t-n;return 1===e?y/i:(e**y-1)/(e**i-1)}}class At{constructor(t,e,n){this.type=t,this.input=e,this.stops=n}static parse(t,e){if(t.length<5)throw new Error('"step" expects at least 4 arguments');if(t.length%2!=1)throw new Error('"step" expects an even number of arguments');const n=E(t[1],e,N);let r;const i=[];i.push([-1/0,E(t[2],e)]);for(let y=3;y<t.length;y+=2){const u=t[y];if("number"!=typeof u)throw new Error('"step" requires stop inputs as literal numbers');if(i.length&&i[i.length-1][0]>=u)throw new Error('"step" requires strictly ascending stop inputs');const h=E(t[y+1],e);r||(r=h.type),i.push([u,h])}return new At(r,n,i)}evaluate(t,e){const n=this.stops;if(1===n.length)return n[0][1].evaluate(t,e);const r=this.input.evaluate(t,e);let i=0;for(;++i<n.length&&!(r<n[i][0]););return this.stops[i-1][1].evaluate(t,e)}}class Lt{constructor(t,e){this.type=t,this.output=e}static parse(t,e,n){if(t.length<4)throw new Error('"let" expects at least 3 arguments');if(t.length%2==1)throw new Error('"let" expects an odd number of arguments');const r=new Zt(e);for(let y=1;y<t.length-1;y+=2){const u=t[y];if("string"!=typeof u)throw new Error(`"let" requires a string to define variable names - found ${u}`);r.add(u,E(t[y+1],e))}const i=E(t[t.length-1],r,n);return new Lt(i.type,i)}evaluate(t,e){return this.output.evaluate(t,e)}}class Nt{constructor(t,e){this.type=t,this.output=e}static parse(t,e,n){if(2!==t.length||"string"!=typeof t[1])throw new Error('"var" requires just one literal string argument');const r=e.get(t[1]);if(!r)throw new Error(`${t[1]} must be defined before being used in a "var" expression`);return new Nt(n||at,r)}evaluate(t,e){return this.output.evaluate(t,e)}}class Pt{constructor(t,e,n){this.type=t,this.index=e,this.array=n}static parse(t,e){if(3!==t.length)throw new Error('"at" expects 2 arguments');const n=E(t[1],e,N),r=E(t[2],e);return new Pt(r.type.itemType,n,r)}evaluate(t,e){const n=this.index.evaluate(t,e),r=this.array.evaluate(t,e);if(n<0||n>=r.length)throw new Error('"at" index out of bounds');if(n!==Math.floor(n))throw new Error('"at" index must be an integer');return r[n]}}class dt{constructor(t,e){this.key=t,this.obj=e,this.type=at}static parse(t,e){let n,r;switch(t.length){case 2:return n=E(t[1],e),new dt(n);case 3:return n=E(t[1],e),r=E(t[2],e),new dt(n,r);default:throw new Error('"get" expects 1 or 2 arguments')}}evaluate(t,e){const n=this.key.evaluate(t,e);return this.obj?this.obj.evaluate(t,e)[n]:null==t?void 0:t.values[n]}}class bt{constructor(t,e){this.key=t,this.obj=e,this.type=k}static parse(t,e){let n,r;switch(t.length){case 2:return n=E(t[1],e),new bt(n);case 3:return n=E(t[1],e),r=E(t[2],e),new bt(n,r);default:throw new Error('"has" expects 1 or 2 arguments')}}evaluate(t,e){const n=this.key.evaluate(t,e);return this.obj?n in this.obj.evaluate(t,e):!(null==t||!t.values[n])}}class St{constructor(t,e){this.key=t,this.vals=e,this.type=k}static parse(t,e){if(3!==t.length)throw new Error('"in" expects 2 arguments');return new St(E(t[1],e),E(t[2],e))}evaluate(t,e){const n=this.key.evaluate(t,e);return this.vals.evaluate(t,e).includes(n)}}class Et{constructor(t,e,n){this.item=t,this.array=e,this.from=n,this.type=N}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"index-of" expects 3 or 4 arguments');const n=E(t[1],e),r=E(t[2],e);if(4===t.length){const i=E(t[3],e,N);return new Et(n,r,i)}return new Et(n,r)}evaluate(t,e){const n=this.item.evaluate(t,e),r=this.array.evaluate(t,e);if(this.from){const i=this.from.evaluate(t,e);if(i!==Math.floor(i))throw new Error('"index-of" index must be an integer');return r.indexOf(n,i)}return r.indexOf(n)}}class Ot{constructor(t){this.arg=t,this.type=N}static parse(t,e){if(2!==t.length)throw new Error('"length" expects 2 arguments');const n=E(t[1],e);return new Ot(n)}evaluate(t,e){const n=this.arg.evaluate(t,e);if("string"==typeof n||Array.isArray(n))return n.length;throw new Error('"length" expects string or array')}}class _t{constructor(t,e,n,r){this.type=t,this.array=e,this.from=n,this.to=r}static parse(t,e){if(t.length<3||t.length>4)throw new Error('"slice" expects 2 or 3 arguments');const n=E(t[1],e),r=E(t[2],e,N);if(r.type!==N)throw new Error('"slice" index must return a number');if(4===t.length){const i=E(t[3],e,N);if(i.type!==N)throw new Error('"slice" index must return a number');return new _t(n.type,n,r,i)}return new _t(n.type,n,r)}evaluate(t,e){const n=this.array.evaluate(t,e);if(!Array.isArray(n)&&"string"!=typeof n)throw new Error('"slice" input must be an array or a string');const r=this.from.evaluate(t,e);if(r<0||r>=n.length)throw new Error('"slice" index out of bounds');if(r!==Math.floor(r))throw new Error('"slice" index must be an integer');if(this.to){const i=this.to.evaluate(t,e);if(i<0||i>=n.length)throw new Error('"slice" index out of bounds');if(i!==Math.floor(i))throw new Error('"slice" index must be an integer');return n.slice(r,i)}return n.slice(r)}}class qt{constructor(){this.type=k}static parse(t){if(1!==t.length)throw new Error('"has-id" expects no arguments');return new qt}evaluate(t,e){return t&&void 0!==t.id}}class X{constructor(t,e){this.args=t,this.calculate=e,this.type=N}static parse(t,e,n){const r=t.slice(1).map(i=>E(i,e));return new X(r,n)}evaluate(t,e){let n;return this.args&&(n=this.args.map(r=>r.evaluate(t,e))),this.calculate(n)}}let M=(()=>{class s{constructor(e,n){this.args=e,this.calculate=n,this.type=N}static parse(e,n){const r=e.slice(1).map(i=>E(i,n));return new s(r,s.ops[e[0]])}evaluate(e,n){let r;return this.args&&(r=this.args.map(i=>i.evaluate(e,n))),this.calculate(r)}}return s.ops={abs:t=>Math.abs(t[0]),acos:t=>Math.acos(t[0]),asin:t=>Math.asin(t[0]),atan:t=>Math.atan(t[0]),ceil:t=>Math.ceil(t[0]),cos:t=>Math.cos(t[0]),e:()=>Math.E,floor:t=>Math.floor(t[0]),ln:t=>Math.log(t[0]),ln2:()=>Math.LN2,log10:t=>Math.log(t[0])/Math.LN10,log2:t=>Math.log(t[0])/Math.LN2,max:t=>Math.max(...t),min:t=>Math.min(...t),pi:()=>Math.PI,round:t=>Math.round(t[0]),sin:t=>Math.sin(t[0]),sqrt:t=>Math.sqrt(t[0]),tan:t=>Math.tan(t[0])},s})();class Jt{constructor(t){this.args=t,this.type=K}static parse(t,e){return new Jt(t.slice(1).map(n=>E(n,e)))}evaluate(t,e){return this.args.map(n=>n.evaluate(t,e)).join("")}}let ce=(()=>{class s{constructor(e,n){this.arg=e,this.calculate=n,this.type=K}static parse(e,n){if(2!==e.length)throw new Error(`${e[0]} expects 1 argument`);const r=E(e[1],n);return new s(r,s.ops[e[0]])}evaluate(e,n){return this.calculate(this.arg.evaluate(e,n))}}return s.ops={downcase:t=>t.toLowerCase(),upcase:t=>t.toUpperCase()},s})();class Qt{constructor(t){this.args=t,this.type=nt}static parse(t,e){if(4!==t.length)throw new Error('"rgb" expects 3 arguments');const n=t.slice(1).map(r=>E(r,e));return new Qt(n)}evaluate(t,e){const n=this._validate(this.args[0].evaluate(t,e)),r=this._validate(this.args[1].evaluate(t,e)),i=this._validate(this.args[2].evaluate(t,e));return new B.Z({r:n,g:r,b:i})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}}class te{constructor(t){this.args=t,this.type=nt}static parse(t,e){if(5!==t.length)throw new Error('"rgba" expects 4 arguments');const n=t.slice(1).map(r=>E(r,e));return new te(n)}evaluate(t,e){const n=this._validate(this.args[0].evaluate(t,e)),r=this._validate(this.args[1].evaluate(t,e)),i=this._validate(this.args[2].evaluate(t,e)),y=this._validateAlpha(this.args[3].evaluate(t,e));return new B.Z({r:n,g:r,b:i,a:y})}_validate(t){if("number"!=typeof t||t<0||t>255)throw new Error(`${t}: invalid color component`);return Math.round(t)}_validateAlpha(t){if("number"!=typeof t||t<0||t>1)throw new Error(`${t}: invalid alpha color component`);return t}}class ee{constructor(t){this.color=t,this.type=ft(N,4)}static parse(t,e){if(2!==t.length)throw new Error('"to-rgba" expects 1 argument');const n=E(t[1],e);return new ee(n)}evaluate(t,e){return new B.Z(this.color.evaluate(t,e)).toRgba()}}class ht{constructor(t,e){this.type=t,this.args=e}static parse(t,e){const n=t[0];if(t.length<2)throw new Error(`${n} expects at least one argument`);let r,i=1;if("array"===n){if(t.length>2){switch(t[1]){case"string":r=K;break;case"number":r=N;break;case"boolean":r=k;break;default:throw new Error('"array" type argument must be string, number or boolean')}i++}else r=at;let u;if(t.length>3){if(u=t[2],null!==u&&("number"!=typeof u||u<0||u!==Math.floor(u)))throw new Error('"array" length argument must be a positive integer literal');i++}r=ft(r,u)}else switch(n){case"string":r=K;break;case"number":r=N;break;case"boolean":r=k;break;case"object":r=yt}const y=[];for(;i<t.length;i++){const u=E(t[i],e);y.push(u)}return new ht(r,y)}evaluate(t,e){let n;for(const r of this.args){const i=r.evaluate(t,e);if(n=mt(i),Mt(n,this.type))return i}throw new Error(`Expected ${ct(this.type)} but got ${ct(n)}`)}}let pt=(()=>{class s{constructor(e,n){this.type=e,this.args=n}static parse(e,n){const r=e[0],i=s.types[r];if(i===k||i===K){if(2!==e.length)throw new Error(`${r} expects one argument`)}else if(e.length<2)throw new Error(`${r} expects at least one argument`);const y=[];for(let u=1;u<e.length;u++){const h=E(e[u],n);y.push(h)}return new s(i,y)}evaluate(e,n){if(this.type===k)return Boolean(this.args[0].evaluate(e,n));if(this.type===K)return vt(this.args[0].evaluate(e,n));if(this.type===N){for(const r of this.args){const i=Number(r.evaluate(e,n));if(!isNaN(i))return i}return null}if(this.type===nt){for(const r of this.args)try{const i=s.toColor(r.evaluate(e,n));if(i instanceof B.Z)return i}catch(i){}return null}}static toBoolean(e){return Boolean(e)}static toString(e){return vt(e)}static toNumber(e){const n=Number(e);if(isNaN(n))throw new Error(`"${e}" is not a number`);return n}static toColor(e){if(e instanceof B.Z)return e;if("string"==typeof e){const n=B.Z.fromString(e);if(n)return n;throw new Error(`"${e}" is not a color`)}if(Array.isArray(e))return B.Z.fromArray(e);throw new Error(`"${e}" is not a color`)}}return s.types={"to-boolean":k,"to-color":nt,"to-number":N,"to-string":K},s})();class re{constructor(t){this.val=t,this.type=mt(t)}static parse(t){if(2!==t.length)throw new Error('"literal" expects 1 argument');return new re(t[1])}evaluate(t,e){return this.val}}class ne{constructor(t){this.arg=t,this.type=K}static parse(t,e){if(2!==t.length)throw new Error('"typeof" expects 1 argument');return new ne(E(t[1],e))}evaluate(t,e){return ct(mt(this.arg.evaluate(t,e)))}}function E(s,t,e){const n=typeof s;if("string"===n||"boolean"===n||"number"===n||null===s){if(e)switch(e.kind){case"string":"string"!==n&&(s=pt.toString(s));break;case"number":"number"!==n&&(s=pt.toNumber(s));break;case"color":s=pt.toColor(s)}s=["literal",s]}if(!Array.isArray(s)||0===s.length)throw new Error("Expression must be a non empty array");const r=s[0];if("string"!=typeof r)throw new Error("First element of expression must be a string");const i=he[r];if(void 0===i)throw new Error(`Invalid expression operator "${r}"`);if(!i)throw new Error(`Unimplemented expression operator "${r}"`);return i.parse(s,t,e)}const he={array:ht,boolean:ht,collator:null,format:null,image:null,literal:re,number:ht,"number-format":null,object:ht,string:ht,"to-boolean":pt,"to-color":pt,"to-number":pt,"to-string":pt,typeof:ne,accumulated:null,"feature-state":null,"geometry-type":Ct,id:zt,"line-progress":null,properties:It,at:Pt,get:dt,has:bt,in:St,"index-of":Et,length:Ot,slice:_t,"!":Tt,"!=":class le extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n!==r)}},"<":class Kt extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n<r)}},"<=":class ue extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n<=r)}},"==":class oe extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n===r)}},">":class Wt extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n>r)}},">=":class Xt extends W{static parse(t,e){return W.parse(t,e,(n,r)=>n>=r)}},all:Vt,any:Rt,case:xt,coalesce:Ft,match:$t,within:null,interpolate:Q,"interpolate-hcl":Q,"interpolate-lab":Q,step:At,let:Lt,var:Nt,concat:Jt,downcase:ce,"is-supported-script":null,"resolved-locale":null,upcase:ce,rgb:Qt,rgba:te,"to-rgba":ee,"-":class ge extends X{static parse(t,e){switch(t.length){case 2:return X.parse(t,e,n=>-n[0]);case 3:return X.parse(t,e,n=>n[0]-n[1]);default:throw new Error('"-" expects 1 or 2 arguments')}}},"*":class de extends X{static parse(t,e){return X.parse(t,e,n=>{let r=1;for(const i of n)r*=i;return r})}},"/":class be extends X{static parse(t,e){if(3===t.length)return X.parse(t,e,n=>n[0]/n[1]);throw new Error('"/" expects 2 arguments')}},"%":class Ee extends X{static parse(t,e){if(3===t.length)return X.parse(t,e,n=>n[0]%n[1]);throw new Error('"%" expects 2 arguments')}},"^":class _e extends X{static parse(t,e){if(3===t.length)return X.parse(t,e,n=>n[0]**n[1]);throw new Error('"^" expects 1 or 2 arguments')}},"+":class ve extends X{static parse(t,e){return X.parse(t,e,n=>{let r=0;for(const i of n)r+=i;return r})}},abs:M,acos:M,asin:M,atan:M,ceil:M,cos:M,e:M,floor:M,ln:M,ln2:M,log10:M,log2:M,max:M,min:M,pi:M,round:M,sin:M,sqrt:M,tan:M,zoom:gt,"heatmap-density":null,"has-id":qt,none:Dt};class q{constructor(t){this._expression=t}filter(t,e){if(!this._expression)return!0;try{return this._expression.evaluate(t,e)}catch(n){return console.log(n.message),!0}}static createFilter(t){if(!t)return null;this.isLegacyFilter(t)&&(t=this.convertLegacyFilter(t));try{const e=E(t,null,k);return new q(e)}catch(e){return console.log(e.message),null}}static isLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;switch(t[0]){case"==":case"!=":case">":case"<":case">=":case"<=":return 3===t.length&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"in":return t.length>=3&&"string"==typeof t[1]&&!Array.isArray(t[2]);case"!in":case"none":case"!has":return!0;case"any":case"all":for(let e=1;e<t.length;e++)if(this.isLegacyFilter(t[e]))return!0;return!1;case"has":return 2===t.length&&("$id"===t[1]||"$type"===t[1]);default:return!1}}static convertLegacyFilter(t){if(!Array.isArray(t)||0===t.length)return!0;const e=t[0];if(1===t.length)return"any"!==e;switch(e){case"==":return q.convertComparison("==",t[1],t[2]);case"!=":return q.negate(q.convertComparison("==",t[1],t[2]));case">":case"<":case">=":case"<=":return q.convertComparison(e,t[1],t[2]);case"in":return q.convertIn(t[1],t.slice(2));case"!in":return q.negate(q.convertIn(t[1],t.slice(2)));case"any":case"all":case"none":return q.convertCombining(e,t.slice(1));case"has":return q.convertHas(t[1]);case"!has":return q.negate(q.convertHas(t[1]));default:throw new Error("Unexpected legacy filter.")}}static convertComparison(t,e,n){switch(e){case"$type":return[t,["geometry-type"],n];case"$id":return[t,["id"],n];default:return[t,["get",e],n]}}static convertIn(t,e){switch(t){case"$type":return["in",["geometry-type"],["literal",e]];case"$id":return["in",["id"],["literal",e]];default:return["in",["get",t],["literal",e]]}}static convertHas(t){switch(t){case"$type":return!0;case"$id":return["has-id"];default:return["has",t]}}static convertCombining(t,e){return[t].concat(e.map(this.convertLegacyFilter))}static negate(t){return["!",t]}}var G=R(1268);class Yt{constructor(t,e){let n;switch(this.isDataDriven=!1,this.interpolator=null,t.type){case"number":case"color":n=!0;break;case"array":n="number"===t.value;break;default:n=!1}if(null==e&&(e=t.default),Array.isArray(e)&&e.length>0&&he[e[0]]){const i={number:N,color:nt,string:K,boolean:k,enum:K};try{const u=E(e,null,"array"===t.type?ft(i[t.value]||at,t.length):i[t.type]);this.getValue=this._buildExpression(u,t),this.isDataDriven=!0,u instanceof Q&&u.input instanceof gt&&(this.interpolator=u)}catch(y){console.log(y.message),this.getValue=this._buildSimple(t.default)}return}n&&"interval"===e.type&&(n=!1);const r=e&&e.stops&&e.stops.length>0;if(r)for(const i of e.stops)i[1]=this._validate(i[1],t);if(this.isDataDriven=!!e&&!!e.property,this.isDataDriven)if(void 0!==e.default&&(e.default=this._validate(e.default,t)),r)switch(e.type){case"identity":this.getValue=this._buildIdentity(e,t);break;case"categorical":this.getValue=this._buildCategorical(e,t);break;default:this.getValue=n?this._buildInterpolate(e,t):this._buildInterval(e,t)}else this.getValue=this._buildIdentity(e,t);else r?this.getValue=n?this._buildZoomInterpolate(e):this._buildZoomInterval(e):(e=this._validate(e,t),this.getValue=this._buildSimple(e))}_validate(t,e){if("number"===e.type){if(t<e.minimum)return e.minimum;if(t>e.maximum)return e.maximum}else"color"===e.type?t=Yt._parseColor(t):"enum"===e.type?"string"==typeof t&&(t=e.values.indexOf(t)):"array"===e.type&&"enum"===e.value?t=t.map(n=>"string"==typeof n?e.values.indexOf(n):n):"string"===e.type&&(t=vt(t));return t}_buildSimple(t){return()=>t}_buildExpression(t,e){return(n,r)=>{try{const i=t.evaluate(r,n);return void 0===i?e.default:this._validate(i,e)}catch(i){return console.log(i.message),e.default}}}_buildIdentity(t,e){return(n,r)=>{let i;return r&&(i=r.values[t.property]),void 0!==i&&(i=this._validate(i,e)),null!=i?i:void 0!==t.default?t.default:e.default}}_buildCategorical(t,e){return(n,r)=>{let i;return r&&(i=r.values[t.property]),i=this._categorical(i,t.stops),void 0!==i?i:void 0!==t.default?t.default:e.default}}_buildInterval(t,e){return(n,r)=>{let i;return r&&(i=r.values[t.property]),"number"==typeof i?this._interval(i,t.stops):void 0!==t.default?t.default:e.default}}_buildInterpolate(t,e){return(n,r)=>{let i;return r&&(i=r.values[t.property]),"number"==typeof i?this._interpolate(i,t.stops,t.base||1):void 0!==t.default?t.default:e.default}}_buildZoomInterpolate(t){return e=>this._interpolate(e,t.stops,t.base||1)}_buildZoomInterval(t){return e=>this._interval(e,t.stops)}_categorical(t,e){const n=e.length;for(let r=0;r<n;r++)if(e[r][0]===t)return e[r][1]}_interval(t,e){const n=e.length;let r=0;for(let i=0;i<n&&e[i][0]<=t;i++)r=i;return e[r][1]}_interpolate(t,e,n){let r,i;const y=e.length;for(let u=0;u<y;u++){const h=e[u];if(!(h[0]<=t)){i=h;break}r=h}if(r&&i){const u=i[0]-r[0],h=t-r[0],m=1===n?h/u:(n**h-1)/(n**u-1);if(Array.isArray(r[1])){const _=r[1],g=i[1],v=[];for(let L=0;L<_.length;L++)v.push((0,$.sX)(_[L],g[L],m));return v}return(0,$.sX)(r[1],i[1],m)}return r?r[1]:i?i[1]:void 0}static _isEmpty(t){for(const e in t)if(t.hasOwnProperty(e))return!1;return!0}static _parseColor(t){return Array.isArray(t)?t:("string"==typeof t&&(t=new B.Z(t)),t instanceof B.Z&&!this._isEmpty(t)?B.Z.toUnitRGBA(t):void 0)}}var we=R(39351);class Ut{constructor(t,e,n,r){switch(this.type=t,this.typeName=e.type,this.id=e.id,this.source=e.source,this.sourceLayer=e["source-layer"],this.minzoom=e.minzoom,this.maxzoom=e.maxzoom,this.filter=e.filter,this.layout=e.layout,this.paint=e.paint,this.z=n,this.uid=r,t){case G.fR.BACKGROUND:this._layoutDefinition=G.f2.backgroundLayoutDefinition,this._paintDefinition=G.f2.backgroundPaintDefinition;break;case G.fR.FILL:this._layoutDefinition=G.f2.fillLayoutDefinition,this._paintDefinition=G.f2.fillPaintDefinition;break;case G.fR.LINE:this._layoutDefinition=G.f2.lineLayoutDefinition,this._paintDefinition=G.f2.linePaintDefinition;break;case G.fR.SYMBOL:this._layoutDefinition=G.f2.symbolLayoutDefinition,this._paintDefinition=G.f2.symbolPaintDefinition;break;case G.fR.CIRCLE:this._layoutDefinition=G.f2.circleLayoutDefinition,this._paintDefinition=G.f2.circlePaintDefinition}this._layoutProperties=this._parseLayout(this.layout),this._paintProperties=this._parsePaint(this.paint)}getFeatureFilter(){return void 0!==this._featureFilter?this._featureFilter:this._featureFilter=q.createFilter(this.filter)}getLayoutProperty(t){return this._layoutProperties[t]}getPaintProperty(t){return this._paintProperties[t]}getLayoutValue(t,e,n){let r;const i=this._layoutProperties[t];return i&&(r=i.getValue(e,n)),void 0===r&&(r=this._layoutDefinition[t].default),r}getPaintValue(t,e,n){let r;const i=this._paintProperties[t];return i&&(r=i.getValue(e,n)),void 0===r&&(r=this._paintDefinition[t].default),r}isPainterDataDriven(){const t=this._paintProperties;if(t)for(const e in t)if(t[e].isDataDriven)return!0;return!1}_parseLayout(t){const e={};for(const n in t){const r=this._layoutDefinition[n];r&&(e[n]=new Yt(r,t[n]))}return e}_parsePaint(t){const e={};for(const n in t){const r=this._paintDefinition[n];r&&(e[n]=new Yt(r,t[n]))}return e}computeAttributesKey(t,e,n,r){let i=0,y=0;for(const u of e){let h=3;if(!u||u!==r){const m=n[u],{isLayout:_,isOptional:g}=m,v=_?this.getLayoutProperty(u):this.getPaintProperty(u);h=null!=v&&v.interpolator?2:null!=v&&v.isDataDriven?1:g&&!v?3:0}y|=h<<i,i+=2}return y<<3|t}}class Ie extends Ut{constructor(t,e,n,r){super(t,e,n,r),this.backgroundMaterial=new c(this.computeAttributesKey(A._K.BACKGROUND,c.ATTRIBUTES,c.ATTRIBUTES_INFO))}}class Te extends Ut{constructor(t,e,n,r){super(t,e,n,r);const i=this.getPaintProperty("fill-color"),y=this.getPaintProperty("fill-opacity"),u=this.getPaintProperty("fill-pattern");this.hasDataDrivenColor=null==i?void 0:i.isDataDriven,this.hasDataDrivenOpacity=null==y?void 0:y.isDataDriven,this.hasDataDrivenFill=this.hasDataDrivenColor||this.hasDataDrivenOpacity||(null==u?void 0:u.isDataDriven);const h=this.getPaintProperty("fill-outline-color");this.outlineUsesFillColor=!h,this.hasDataDrivenOutlineColor=null==h?void 0:h.isDataDriven,this.hasDataDrivenOutline=h?h.isDataDriven:!!i&&i.isDataDriven,this.hasDataDrivenOutline=(h?this.hasDataDrivenOutlineColor:this.hasDataDrivenColor)||this.hasDataDrivenOpacity,this.fillMaterial=new H(this.computeAttributesKey(A._K.FILL,H.ATTRIBUTES,H.ATTRIBUTES_INFO)),this.outlineMaterial=new F(this.computeAttributesKey(A._K.OUTLINE,this.outlineUsesFillColor?F.ATTRIBUTES_FILL:F.ATTRIBUTES_OUTLINE,this.outlineUsesFillColor?F.ATTRIBUTES_INFO_FILL:F.ATTRIBUTES_INFO_OUTLINE),this.outlineUsesFillColor)}}class Re extends Ut{constructor(t,e,n,r){var y,u,h,m,_,g,v,L,w;super(t,e,n,r);const i=this.getPaintProperty("line-pattern");if(this.lineMaterial=new rt(this.computeAttributesKey(A._K.LINE,rt.ATTRIBUTES,rt.ATTRIBUTES_INFO,i?"line-dasharray":"")),this.hasDataDrivenLine=(null==(y=this.getPaintProperty("line-blur"))?void 0:y.isDataDriven)||(null==(u=this.getPaintProperty("line-color"))?void 0:u.isDataDriven)||(null==(h=this.getPaintProperty("line-gap-width"))?void 0:h.isDataDriven)||(null==(m=this.getPaintProperty("line-offset"))?void 0:m.isDataDriven)||(null==(_=this.getPaintProperty("line-opacity"))?void 0:_.isDataDriven)||(null==(g=this.getPaintProperty("line-pattern"))?void 0:g.isDataDriven)||(null==(v=this.getPaintProperty("line-dasharray"))?void 0:v.isDataDriven)||(null==(L=this.getLayoutProperty("line-cap"))?void 0:L.isDataDriven)||(null==(w=this.getPaintProperty("line-width"))?void 0:w.isDataDriven),this.canUseThinTessellation=!1,!this.hasDataDrivenLine){const Y=this.getPaintProperty("line-width");if(!Y||"number"==typeof Y&&.5*Y<we.tQ){const P=this.getPaintProperty("line-offset");(!P||"number"==typeof P&&0===P)&&(this.canUseThinTessellation=!0)}}}getDashKey(t,e){let n;switch(e){case x.RL.BUTT:n="Butt";break;case x.RL.ROUND:n="Round";break;case x.RL.SQUARE:n="Square";break;default:n="Butt"}return`dasharray-[${t.toString()}]-${n}`}}class De extends Ut{constructor(t,e,n,r){var i,y,u,h,m,_,g,v,L,w,Y,P;super(t,e,n,r),this.iconMaterial=new st(this.computeAttributesKey(A._K.ICON,st.ATTRIBUTES,st.ATTRIBUTES_INFO)),this.textMaterial=new ot(this.computeAttributesKey(A._K.TEXT,ot.ATTRIBUTES,ot.ATTRIBUTES_INFO)),this.hasDataDrivenIcon=(null==(i=this.getPaintProperty("icon-color"))?void 0:i.isDataDriven)||(null==(y=this.getPaintProperty("icon-halo-blur"))?void 0:y.isDataDriven)||(null==(u=this.getPaintProperty("icon-halo-color"))?void 0:u.isDataDriven)||(null==(h=this.getPaintProperty("icon-halo-width"))?void 0:h.isDataDriven)||(null==(m=this.getPaintProperty("icon-opacity"))?void 0:m.isDataDriven)||(null==(_=this.getLayoutProperty("icon-size"))?void 0:_.isDataDriven),this.hasDataDrivenText=(null==(g=this.getPaintProperty("text-color"))?void 0:g.isDataDriven)||(null==(v=this.getPaintProperty("text-halo-blur"))?void 0:v.isDataDriven)||(null==(L=this.getPaintProperty("text-halo-color"))?void 0:L.isDataDriven)||(null==(w=this.getPaintProperty("text-halo-width"))?void 0:w.isDataDriven)||(null==(Y=this.getPaintProperty("text-opacity"))?void 0:Y.isDataDriven)||(null==(P=this.getLayoutProperty("text-size"))?void 0:P.isDataDriven)}}class xe extends Ut{constructor(t,e,n,r){super(t,e,n,r),this.circleMaterial=new V(this.computeAttributesKey(A._K.CIRCLE,V.ATTRIBUTES,V.ATTRIBUTES_INFO))}}class Ae{constructor(t,e,n){let r;this.allowOverlap=t.getLayoutValue("icon-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("icon-ignore-placement",e),this.keepUpright=t.getLayoutValue("icon-keep-upright",e),this.optional=t.getLayoutValue("icon-optional",e),this.rotationAlignment=t.getLayoutValue("icon-rotation-alignment",e),this.rotationAlignment===G.aF.AUTO&&(this.rotationAlignment=n?G.aF.MAP:G.aF.VIEWPORT),r=t.getLayoutProperty("icon-anchor"),null!=r&&r.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("icon-anchor",e),r=t.getLayoutProperty("icon-offset"),null!=r&&r.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("icon-offset",e),r=t.getLayoutProperty("icon-padding"),null!=r&&r.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("icon-padding",e),r=t.getLayoutProperty("icon-rotate"),null!=r&&r.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("icon-rotate",e),r=t.getLayoutProperty("icon-size"),null!=r&&r.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("icon-size",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e))}}class Le{constructor(t,e,n){let r;this.allowOverlap=t.getLayoutValue("text-allow-overlap",e),this.ignorePlacement=t.getLayoutValue("text-ignore-placement",e),this.keepUpright=t.getLayoutValue("text-keep-upright",e),this.optional=t.getLayoutValue("text-optional",e),this.rotationAlignment=t.getLayoutValue("text-rotation-alignment",e),this.rotationAlignment===G.aF.AUTO&&(this.rotationAlignment=n?G.aF.MAP:G.aF.VIEWPORT),r=t.getLayoutProperty("text-anchor"),null!=r&&r.isDataDriven?this._anchorProp=r:this.anchor=t.getLayoutValue("text-anchor",e),r=t.getLayoutProperty("text-justify"),null!=r&&r.isDataDriven?this._justifyProp=r:this.justify=t.getLayoutValue("text-justify",e),r=t.getLayoutProperty("text-letter-spacing"),null!=r&&r.isDataDriven?this._letterSpacingProp=r:this.letterSpacing=t.getLayoutValue("text-letter-spacing",e),r=t.getLayoutProperty("text-line-height"),null!=r&&r.isDataDriven?this._lineHeightProp=r:this.lineHeight=t.getLayoutValue("text-line-height",e),r=t.getLayoutProperty("text-max-angle"),null!=r&&r.isDataDriven?this._maxAngleProp=r:this.maxAngle=t.getLayoutValue("text-max-angle",e),r=t.getLayoutProperty("text-max-width"),null!=r&&r.isDataDriven?this._maxWidthProp=r:this.maxWidth=t.getLayoutValue("text-max-width",e),r=t.getLayoutProperty("text-offset"),null!=r&&r.isDataDriven?this._offsetProp=r:this.offset=t.getLayoutValue("text-offset",e),r=t.getLayoutProperty("text-padding"),null!=r&&r.isDataDriven?this._paddingProp=r:this.padding=t.getLayoutValue("text-padding",e),r=t.getLayoutProperty("text-rotate"),null!=r&&r.isDataDriven?this._rotateProp=r:this.rotate=t.getLayoutValue("text-rotate",e),r=t.getLayoutProperty("text-size"),null!=r&&r.isDataDriven?this._sizeProp=r:this.size=t.getLayoutValue("text-size",e),r=t.getLayoutProperty("text-writing-mode"),null!=r&&r.isDataDriven?this._writingModeProp=r:this.writingMode=t.getLayoutValue("text-writing-mode",e)}update(t,e){this._anchorProp&&(this.anchor=this._anchorProp.getValue(t,e)),this._justifyProp&&(this.justify=this._justifyProp.getValue(t,e)),this._letterSpacingProp&&(this.letterSpacing=this._letterSpacingProp.getValue(t,e)),this._lineHeightProp&&(this.lineHeight=this._lineHeightProp.getValue(t,e)),this._maxAngleProp&&(this.maxAngle=this._maxAngleProp.getValue(t,e)),this._maxWidthProp&&(this.maxWidth=this._maxWidthProp.getValue(t,e)),this._offsetProp&&(this.offset=this._offsetProp.getValue(t,e)),this._paddingProp&&(this.padding=this._paddingProp.getValue(t,e)),this._rotateProp&&(this.rotate=this._rotateProp.getValue(t,e)),this._sizeProp&&(this.size=this._sizeProp.getValue(t,e)),this._writingModeProp&&(this.writingMode=this._writingModeProp.getValue(t,e))}}},78364:(J,O,R)=>{R.d(O,{Z:()=>T});var x=R(1268),A=R(13295);class T{constructor(a){if(this._style=a,this.backgroundBucketIds=[],this._uidToLayer=new Map,this._layerByName={},this._runningId=0,a.layers||(a.layers=[]),this.version=parseFloat(a.version),this.layers=a.layers.map((l,o,p)=>this._create(l,o,p)).filter(l=>!!l),this.layers){let l;for(let o=0;o<this.layers.length;o++)l=this.layers[o],this._layerByName[l.id]=l,this._uidToLayer.set(l.uid,l),l.type===x.fR.BACKGROUND&&this.backgroundBucketIds.push(l.id)}this._identifyRefLayers()}isPainterDataDriven(a){const l=this._layerByName[a];return!!l&&l.isPainterDataDriven()}getStyleLayerId(a){return a>=this.layers.length?null:this.layers[a].id}getStyleLayerByUID(a){var l;return null!=(l=this._uidToLayer.get(a))?l:null}getStyleLayerIndex(a){const l=this._layerByName[a];return l?this.layers.indexOf(l):-1}setStyleLayer(a,l){if(!a||!a.id)return;const o=this._style;null!=l&&l>=this.layers.length&&(l=this.layers.length-1);let p,f=!0;const I=this._layerByName[a.id];if(I){const b=this.layers.indexOf(I);l||(l=b),l===b?(f=!1,p=T._recreateLayer(a,I),this.layers[l]=p,o.layers[l]=a):(this.layers.splice(b,1),o.layers.splice(b,1),p=this._create(a,l,this.layers),this.layers.splice(l,0,p),o.layers.splice(l,0,a))}else p=this._create(a,l,this.layers),!l||l>=this.layers.length?(this.layers.push(p),o.layers.push(a)):(this.layers.splice(l,0,p),o.layers.splice(l,0,a));this._layerByName[a.id]=p,this._uidToLayer.set(p.uid,p),f&&this._recomputeZValues(),this._identifyRefLayers()}getStyleLayer(a){const l=this._layerByName[a];return l?{type:l.typeName,id:l.id,source:l.source,"source-layer":l.sourceLayer,minzoom:l.minzoom,maxzoom:l.maxzoom,filter:l.filter,layout:l.layout,paint:l.paint}:null}deleteStyleLayer(a){const l=this._layerByName[a];if(l){delete this._layerByName[a],this._uidToLayer.delete(l.uid);const o=this.layers.indexOf(l);this.layers.splice(o,1),this._style.layers.splice(o,1),this._recomputeZValues(),this._identifyRefLayers()}}getLayerById(a){return this._layerByName[a]}getLayoutProperties(a){const l=this._layerByName[a];return l?l.layout:null}getPaintProperties(a){const l=this._layerByName[a];return l?l.paint:null}setPaintProperties(a,l){const o=this._layerByName[a];if(!o)return;const f=T._recreateLayer({type:o.typeName,id:o.id,source:o.source,"source-layer":o.sourceLayer,minzoom:o.minzoom,maxzoom:o.maxzoom,filter:o.filter,layout:o.layout,paint:l},o),I=this.layers.indexOf(o);this.layers[I]=f,this._style.layers[I].paint=l,this._layerByName[o.id]=f,this._uidToLayer.set(o.uid,f)}setLayoutProperties(a,l){const o=this._layerByName[a];if(!o)return;const f=T._recreateLayer({type:o.typeName,id:o.id,source:o.source,"source-layer":o.sourceLayer,minzoom:o.minzoom,maxzoom:o.maxzoom,filter:o.filter,layout:l,paint:o.paint},o),I=this.layers.indexOf(o);this.layers[I]=f,this._style.layers[I].layout=l,this._layerByName[o.id]=f,this._uidToLayer.set(o.uid,f)}setStyleLayerVisibility(a,l){const o=this._layerByName[a];if(!o)return;const p=o.layout||{};p.visibility=l;const I=T._recreateLayer({type:o.typeName,id:o.id,source:o.source,"source-layer":o.sourceLayer,minzoom:o.minzoom,maxzoom:o.maxzoom,filter:o.filter,layout:p,paint:o.paint},o),b=this.layers.indexOf(o);this.layers[b]=I,this._style.layers[b].layout=p,this._layerByName[o.id]=I,this._uidToLayer.set(o.uid,I)}getStyleLayerVisibility(a){var o,p;const l=this._layerByName[a];return l?null!=(p=null==(o=l.layout)?void 0:o.visibility)?p:"visible":"none"}_recomputeZValues(){const a=this.layers,l=1/(a.length+1);for(let o=0;o<a.length;o++)a[o].z=1-(1+o)*l}_identifyRefLayers(){const a=[],l=[];let o=0;for(const p of this.layers){const f=p.layout;if(p.type===x.fR.FILL){const I=p;let b=p.source+"|"+p.sourceLayer;b+="|"+(null==f?void 0:f.visibility),b+="|"+p.minzoom,b+="|"+p.maxzoom,b+="|"+JSON.stringify(p.filter),(I.hasDataDrivenFill||I.hasDataDrivenOutline)&&(b+="|"+o),a.push({key:b,layer:p})}else if(p.type===x.fR.LINE){const I=p;let b=p.source+"|"+p.sourceLayer;b+="|"+(null==f?void 0:f.visibility),b+="|"+p.minzoom,b+="|"+p.maxzoom,b+="|"+JSON.stringify(p.filter),b+="|"+(void 0!==f?f["line-cap"]:""),b+="|"+(void 0!==f?f["line-join"]:""),I.hasDataDrivenLine&&(b+="|"+o),l.push({key:b,layer:p})}++o}this._assignRefLayers(a),this._assignRefLayers(l)}_assignRefLayers(a){let l,o;a.sort((f,I)=>f.key<I.key?-1:f.key>I.key?1:0);const p=a.length;for(let f=0;f<p;f++){const I=a[f];if(I.key===l)I.layer.refLayerId=o;else if(l=I.key,o=I.layer.id,I.layer.type===x.fR.FILL){if(!I.layer.getPaintProperty("fill-outline-color"))for(let b=f+1;b<p;b++){const c=a[b];if(c.key!==l)break;if(c.layer.getPaintProperty("fill-outline-color")){a[f]=c,a[b]=I,o=c.layer.id;break}}}else if(I.layer.type===x.fR.LINE){let b=I.layer;for(let c=f+1;c<p;c++){const V=a[c];if(V.key!==l)break;const H=V.layer;(b.canUseThinTessellation&&!H.canUseThinTessellation||!b.canUseThinTessellation&&(H.getPaintProperty("line-pattern")||H.getPaintProperty("line-dasharray")))&&(b=H,a[f]=V,a[c]=I,o=V.layer.id)}}}}_create(a,l,o){const p=1-(1+l)*(1/(o.length+1)),f=this._runningId++;switch(a.type){case"background":return new A.Et(x.fR.BACKGROUND,a,p,f);case"fill":return new A.Le(x.fR.FILL,a,p,f);case"line":return new A.gf(x.fR.LINE,a,p,f);case"symbol":return new A.jG(x.fR.SYMBOL,a,p,f);case"raster":console.warn(`Unsupported vector tile raster layer ${a.id}`);case"circle":return new A.sj(x.fR.CIRCLE,a,p,f)}}static _recreateLayer(a,l){switch(a.type){case"background":return new A.Et(x.fR.BACKGROUND,a,l.z,l.uid);case"fill":return new A.Le(x.fR.FILL,a,l.z,l.uid);case"line":return new A.gf(x.fR.LINE,a,l.z,l.uid);case"symbol":return new A.jG(x.fR.SYMBOL,a,l.z,l.uid);case"raster":console.warn(`Unsupported vector tile raster layer ${a.id}`);case"circle":return new A.sj(x.fR.CIRCLE,a,l.z,l.uid)}}}},97938:(J,O,R)=>{R.d(O,{E:()=>x,V:()=>A});class x{constructor(d,a){this.x=d,this.y=a}clone(){return new x(this.x,this.y)}equals(d,a){return d===this.x&&a===this.y}isEqual(d){return d.x===this.x&&d.y===this.y}setCoords(d,a){this.x=d,this.y=a}normalize(){const d=this.x,a=this.y,l=Math.sqrt(d*d+a*a);this.x/=l,this.y/=l}rightPerpendicular(){const d=this.x;this.x=this.y,this.y=-d}move(d,a){this.x+=d,this.y+=a}assign(d){this.x=d.x,this.y=d.y}assignAdd(d,a){this.x=d.x+a.x,this.y=d.y+a.y}assignSub(d,a){this.x=d.x-a.x,this.y=d.y-a.y}rotate(d,a){const l=this.x,o=this.y;this.x=l*d-o*a,this.y=l*a+o*d}scale(d){this.x*=d,this.y*=d}length(){const d=this.x,a=this.y;return Math.sqrt(d*d+a*a)}static distance(d,a){const l=a.x-d.x,o=a.y-d.y;return Math.sqrt(l*l+o*o)}static add(d,a){return new x(d.x+a.x,d.y+a.y)}static sub(d,a){return new x(d.x-a.x,d.y-a.y)}}var A,T;(T=A||(A={}))[T.Unknown=0]="Unknown",T[T.Point=1]="Point",T[T.LineString=2]="LineString",T[T.Polygon=3]="Polygon"},39351:(J,O,R)=>{R.d(O,{$0:()=>b,AI:()=>T,By:()=>nt,C1:()=>At,CQ:()=>Nt,CU:()=>Xt,Ex:()=>B,I_:()=>l,Ic:()=>$,Ij:()=>K,Ip:()=>xt,Iv:()=>St,Iw:()=>ut,MI:()=>Q,SD:()=>Ot,Tz:()=>Pt,Uh:()=>Lt,V4:()=>Wt,XJ:()=>Dt,_6:()=>Et,a:()=>Tt,aK:()=>Zt,e0:()=>bt,eV:()=>c,f2:()=>k,fL:()=>Rt,iJ:()=>kt,jk:()=>_t,kF:()=>ct,m4:()=>It,mx:()=>yt,nM:()=>N,oK:()=>dt,pU:()=>wt,ru:()=>a,tQ:()=>Kt,uG:()=>gt,xl:()=>vt,xm:()=>V,yP:()=>mt});const T=1e-30,a=4294967295,l=512,b=8,c=10,V=29,B=24,ut=8,$=0,kt=1,N=2,K=3,k=4,nt=5,yt=6,ct=5,mt=6,vt=1,wt=2,Zt=3,It=2,gt=1,Kt=1.05,Wt=5,Xt=6,Tt=1.15,Rt=2,Dt=8,xt=500,Q=10,At=1024,Lt=2,Nt=0,Pt=1,dt=4,bt=8,St=16,Et=4,Ot=1,_t=4}}]);
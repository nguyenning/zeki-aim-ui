"use strict";var Me=Object.defineProperty,Be=Object.defineProperties,Ze=Object.getOwnPropertyDescriptors,Ie=Object.getOwnPropertySymbols,Ue=Object.prototype.hasOwnProperty,je=Object.prototype.propertyIsEnumerable,Ee=(V,j,v)=>j in V?Me(V,j,{enumerable:!0,configurable:!0,writable:!0,value:v}):V[j]=v,ee=(V,j)=>{for(var v in j||(j={}))Ue.call(j,v)&&Ee(V,v,j[v]);if(Ie)for(var v of Ie(j))je.call(j,v)&&Ee(V,v,j[v]);return V},te=(V,j)=>Be(V,Ze(j));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3482],{3482:(V,j,v)=>{v.d(j,{Z:()=>A});var T=v(15861),x=v(62074),K=v(47982),S=v(49086),W=v(91510),P=v(77132),J=v(87215);class A extends S.Z{constructor(I){super(I),this._relation="",this._relationGeom=null,this._relationString="",this.declaredClass="esri.arcade.featureset.actions.SpatialFilter",this._relationString=I.relationString,this._parent=I.parentfeatureset,this._maxProcessing=40,this._relation=I.relation,this._relationGeom=I.relationGeom}_getSet(I){var w=this;return(0,T.Z)(function*(){if(null===w._wset){yield w._ensureLoaded();const B=yield w._parent._getFilteredSet("esriSpatialRelRelation"!==w._relation?w._relation:w._relation+":"+w._relationString,w._relationGeom,null,null,I);return w._checkCancelled(I),w._wset=new W.Z(B._candidates.slice(0),B._known.slice(0),B._ordered,w._clonePageDefinition(B.pagesDefinition)),w._wset}return w._wset})()}_isInFeatureSet(I){let w=this._parent._isInFeatureSet(I);return w===P.dj.NotInFeatureSet?w:(w=this._idstates[I],void 0===w?P.dj.Unknown:w)}_getFeature(I,w,B){return this._parent._getFeature(I,w,B)}_getFeatures(I,w,B,m){return this._parent._getFeatures(I,w,B,m)}_featureFromCache(I){return this._parent._featureFromCache(I)}executeSpatialRelationTest(I){var w=this;return(0,T.Z)(function*(){var B;if(null===I.geometry)return!1;switch(w._relation){case"esriSpatialRelEnvelopeIntersects":{const m=(0,P.SV)(w._relationGeom),k=(0,P.SV)(I.geometry);return(0,J.kK)(m,k)}case"esriSpatialRelIntersects":return(0,J.kK)(w._relationGeom,I.geometry);case"esriSpatialRelContains":return(0,J.r3)(w._relationGeom,I.geometry);case"esriSpatialRelOverlaps":return(0,J.Nm)(w._relationGeom,I.geometry);case"esriSpatialRelWithin":return(0,J.uh)(w._relationGeom,I.geometry);case"esriSpatialRelTouches":return(0,J.W4)(w._relationGeom,I.geometry);case"esriSpatialRelCrosses":return(0,J.jU)(w._relationGeom,I.geometry);case"esriSpatialRelRelation":return(0,J.LV)(w._relationGeom,I.geometry,null!=(B=w._relationString)?B:"")}})()}_fetchAndRefineFeatures(I,w,B){var m=this;return(0,T.Z)(function*(){var E;const k=new W.Z([],I,!1,null),Z=Math.min(w,I.length);yield null==(E=m._parent)?void 0:E._getFeatures(k,-1,Z,B),m._checkCancelled(B);const R=[];for(let e=0;e<Z;e++){const a=m._parent._featureFromCache(I[e]);R.push(yield m.executeSpatialRelationTest(a))}for(let e=0;e<w;e++)m._idstates[I[e]]=!0===R[e]?P.dj.InFeatureSet:P.dj.NotInFeatureSet;return"success"})()}_getFilteredSet(I,w,B,m,k){var Z=this;return(0,T.Z)(function*(){yield Z._ensureLoaded();const R=yield Z._parent._getFilteredSet("esriSpatialRelRelation"!==Z._relation?Z._relation:Z._relation+":"+Z._relationString,Z._relationGeom,B,m,k);let E;return Z._checkCancelled(k),E=null!==w?new W.Z(R._candidates.slice(0).concat(R._known.slice(0)),[],R._ordered,Z._clonePageDefinition(R.pagesDefinition)):new W.Z(R._candidates.slice(0),R._known.slice(0),R._ordered,Z._clonePageDefinition(R.pagesDefinition)),E})()}_stat(I,w,B,m,k,Z,R){var E=this;return(0,T.Z)(function*(){if(""!==B)return{calculated:!1};const e=yield E._parent._stat(I,w,"esriSpatialRelRelation"!==E._relation?E._relation:E._relation+":"+E._relationString,E._relationGeom,k,Z,R);return!1===e.calculated?null===k&&""===B&&null===m?E._manualStat(I,w,Z,R):{calculated:!1}:e})()}_canDoAggregates(I,w,B,m,k){var Z=this;return(0,T.Z)(function*(){return""===B&&null===m&&null!==Z._parent&&Z._parent._canDoAggregates(I,w,"esriSpatialRelRelation"!==Z._relation?Z._relation:Z._relation+":"+Z._relationString,Z._relationGeom,k)})()}_getAggregatePagesDataSourceDefinition(I,w,B,m,k,Z,R){var E=this;return(0,T.Z)(function*(){if(null===E._parent)throw new K.EN(K.H9.NeverReach);return E._parent._getAggregatePagesDataSourceDefinition(I,w,"esriSpatialRelRelation"!==E._relation?E._relation:E._relation+":"+E._relationString,E._relationGeom,k,Z,R)})()}static registerAction(){S.Z._featuresetFunctions.intersects=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelIntersects",relationGeom:I})},S.Z._featuresetFunctions.envelopeIntersects=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelEnvelopeIntersects",relationGeom:I})},S.Z._featuresetFunctions.contains=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelContains",relationGeom:I})},S.Z._featuresetFunctions.overlaps=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelOverlaps",relationGeom:I})},S.Z._featuresetFunctions.within=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelWithin",relationGeom:I})},S.Z._featuresetFunctions.touches=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelTouches",relationGeom:I})},S.Z._featuresetFunctions.crosses=function(I){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelCrosses",relationGeom:I})},S.Z._featuresetFunctions.relate=function(I,w){return null==I?new x.Z({parentfeatureset:this}):new A({parentfeatureset:this,relation:"esriSpatialRelRelation",relationGeom:I,relationString:w})}}}},62074:(V,j,v)=>{v.d(j,{Z:()=>P});var T=v(15861),x=v(47982),K=v(49086),S=v(91510),W=v(77132);class P extends K.Z{constructor(A){super(A),this.declaredClass="esri.layers.featureset.sources.Empty",this._maxProcessing=1e3,this._wset=new S.Z([],[],!1,null),this._parent=A.parentfeatureset,this._databaseType=W.Bj.Standardised}_getSet(){var A=this;return(0,T.Z)(function*(){return A._wset})()}optimisePagingFeatureQueries(){}_isInFeatureSet(){return W.dj.NotInFeatureSet}_getFeature(){return(0,T.Z)(function*(){throw new x.EN(x.H9.NeverReach)})()}queryAttachments(){return(0,T.Z)(function*(){return[]})()}_getFeatures(){return(0,T.Z)(function*(){return"success"})()}_featureFromCache(){return null}_fetchAndRefineFeatures(){return(0,T.Z)(function*(){throw new x.EN(x.H9.NeverReach)})()}_getFilteredSet(){return(0,T.Z)(function*(){return new S.Z([],[],!1,null)})()}_stat(A,Q,I,w,B,m,k){return this._manualStat(A,Q,m,k)}_canDoAggregates(){return(0,T.Z)(function*(){return!1})()}}},49086:(V,j,v)=>{v.d(j,{Z:()=>Z});var T=v(15861),x=v(29050),K=v(53791),S=v(47982),W=v(62208);class P{constructor(E,e){this._lastId=-1,this._progress=e,this._parent=E}reset(){this._lastId=-1}nextBatch(E){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(l=>this.nextBatch(E),l=>this.nextBatch(E));const e={returnpromise:null,hasset:!1},a=[];return e.returnpromise=new Promise((l,s)=>{this._parent._getSet(this._progress).then(_=>{const d=(0,W.s3)(_._known,"known");let D=d.length-1;if("GETPAGES"===d[d.length-1]&&(D-=1),this._lastId+E>D&&d.length>0&&"GETPAGES"===d[d.length-1])return void this._parent._expandPagedSet(_,this._parent._maxQueryRate(),0,0,this._progress).then(M=>{e.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(E).then(l,s)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)});const O=(0,W.s3)(_._candidates,"candidates");if(D>=this._lastId+E||0===O.length){for(let M=0;M<E;M++){const h=M+this._lastId+1;if(h>=d.length)break;a[M]=d[h]}return this._lastId+=a.length,0===a.length&&(e.hasset=!0,this._parent._mainSetInUse=null,l([])),void this._parent._getFeatureBatch(a,this._progress).then(M=>{e.hasset=!0,this._parent._mainSetInUse=null,l(M)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)})}this._parent._refineSetBlock(_,this._parent._maxProcessingRate(),this._progress).then(()=>{e.hasset=!0,this._parent._mainSetInUse=null,this.nextBatch(E).then(l,s)},M=>{e.hasset=!0,this._parent._mainSetInUse=null,s(M)})},_=>{e.hasset=!0,this._parent._mainSetInUse=null,s(_)})}),!1===e.hasset&&(this._parent._mainSetInUse=e.returnpromise,e.hasset=!0),e.returnpromise}next(){if(null!==this._parent._mainSetInUse)return this._parent._mainSetInUse.then(e=>this.next(),e=>this.next());const E={returnpromise:null,hasset:!1};return E.returnpromise=new Promise((e,a)=>{this._parent._getSet(this._progress).then(l=>{const s=(0,W.s3)(l._known,"known");this._lastId<s.length-1?"GETPAGES"===s[this._lastId+1]?this._parent._expandPagedSet(l,this._parent._maxQueryRate(),0,0,this._progress).then(_=>(E.hasset=!0,this._parent._mainSetInUse=null,this.next())).then(e,a):(this._lastId+=1,this._parent._getFeature(l,s[this._lastId],this._progress).then(_=>{E.hasset=!0,this._parent._mainSetInUse=null,e(_)},_=>{E.hasset=!0,this._parent._mainSetInUse=null,a(_)})):(0,W.s3)(l._candidates,"candidates").length>0?this._parent._refineSetBlock(l,this._parent._maxProcessingRate(),this._progress).then(()=>{E.hasset=!0,this._parent._mainSetInUse=null,this.next().then(e,a)},_=>{E.hasset=!0,this._parent._mainSetInUse=null,a(_)}):(E.hasset=!0,this._parent._mainSetInUse=null,e(null))},l=>{E.hasset=!0,this._parent._mainSetInUse=null,a(l)})}),!1===E.hasset&&(this._parent._mainSetInUse=E.returnpromise,E.hasset=!0),E.returnpromise}count(){var E=this;return(0,T.Z)(function*(){if(-1!==E._parent._totalCount)return E._parent._totalCount;const e=yield E._parent._getSet(E._progress),a=yield E._refineAllSets(e);return E._parent._totalCount=a._known.length,E._parent._totalCount})()}_refineAllSets(E){var e=this;return(0,T.Z)(function*(){if(E._known.length>0&&"GETPAGES"===E._known[E._known.length-1])return yield e._parent._expandPagedSet(E,e._parent._maxQueryRate(),0,1,e._progress),e._refineAllSets(E);if(E._candidates.length>0){if("GETPAGES"===E._known[E._candidates.length-1])return yield e._parent._expandPagedSet(E,e._parent._maxQueryRate(),0,2,e._progress),e._refineAllSets(E);const a=yield e._parent._refineSetBlock(E,e._parent._maxProcessingRate(),e._progress);return a._candidates.length>0?e._refineAllSets(a):a}return E})()}}var J=v(91510),A=v(77132),Q=v(45333),I=v(10699),w=v(10410),B=v(87215),m=v(65234),k=v(60466);let Z=(()=>{class R{constructor(e){this.recentlyUsedQueries=null,this.featureSetQueryInterceptor=null,this._idstates=[],this._parent=null,this._wset=null,this._mainSetInUse=null,this._maxProcessing=200,this._maxQuery=500,this._totalCount=-1,this._databaseType=A.Bj.NotEvaluated,this._databaseTypeProbed=null,this.declaredRootClass="esri.arcade.featureset.support.FeatureSet",this._featureCache=[],this.typeIdField=null,this.types=null,this.fields=null,this.geometryType="",this.objectIdField="",this.globalIdField="",this.spatialReference=null,this.hasM=!1,this.hasZ=!1,this._transparent=!1,this.loaded=!1,this._loadPromise=null,this._fieldsIndex=null,this._dateFieldIndex=null,e&&e.lrucache&&(this.recentlyUsedQueries=e.lrucache),e&&e.interceptor&&(this.featureSetQueryInterceptor=e.interceptor)}optimisePagingFeatureQueries(e){this._parent&&this._parent.optimisePagingFeatureQueries(e)}_hasMemorySource(){return!0}prop(e,a){return void 0===a?this[e]:(void 0!==this[e]&&(this[e]=a),this)}end(){return null!==this._parent&&!0===this._parent._transparent?this._parent.end():this._parent}_ensureLoaded(){return this.load()}load(){return null===this._loadPromise&&(this._loadPromise=this.loadImpl()),this._loadPromise}loadImpl(){var e=this;return(0,T.Z)(function*(){var a,l;return!0===(null==(a=e._parent)?void 0:a.loaded)?(e._initialiseFeatureSet(),e):(yield null==(l=e._parent)?void 0:l.load(),e._initialiseFeatureSet(),e)})()}_initialiseFeatureSet(){null!==this._parent?(this.fields=this._parent.fields.slice(0),this.geometryType=this._parent.geometryType,this.objectIdField=this._parent.objectIdField,this.globalIdField=this._parent.globalIdField,this.spatialReference=this._parent.spatialReference,this.hasM=this._parent.hasM,this.hasZ=this._parent.hasZ,this.typeIdField=this._parent.typeIdField,this.types=this._parent.types):(this.fields=[],this.typeIdField="",this.objectIdField="",this.globalIdField="",this.spatialReference=new m.Z({wkid:4326}),this.geometryType=A.Qk.point)}getField(e,a){let l;return(a=a||this.fields)&&(e=e.toLowerCase(),a.some(s=>(s&&s.name.toLowerCase()===e&&(l=s),!!l))),l}getFieldsIndex(){return null===this._fieldsIndex&&(this._fieldsIndex=new k.Z(this.fields)),this._fieldsIndex}_maxProcessingRate(){return null!==this._parent?Math.min(this._maxProcessing,this._parent._maxProcessingRate()):Math.min(this._maxProcessing,this._maxQueryRate())}_maxQueryRate(){return null!==this._parent?Math.max(this._maxQuery,this._parent._maxQueryRate()):this._maxQuery}_checkCancelled(e){if(null!=e&&e.aborted)throw new S.EN(S.H9.Cancelled)}nativeCapabilities(){return this._parent.nativeCapabilities()}_canDoAggregates(e,a,l,s,_){var d=this;return(0,T.Z)(function*(){return null!==d._parent&&d._parent._canDoAggregates(e,a,l,s,_)})()}_getAggregatePagesDataSourceDefinition(e,a,l,s,_,d,D){var O=this;return(0,T.Z)(function*(){if(null===O._parent)throw new S.EN(S.H9.NeverReach);return O._parent._getAggregatePagesDataSourceDefinition(e,a,l,s,_,d,D)})()}_getAgregagtePhysicalPage(e,a,l){var s=this;return(0,T.Z)(function*(){if(null===s._parent)throw new S.EN(S.H9.NeverReach);return s._parent._getAgregagtePhysicalPage(e,a,l)})()}databaseType(){var e=this;return(0,T.Z)(function*(){if(e._databaseType===A.Bj.NotEvaluated){if(null!==K.Z.applicationCache){const a=K.Z.applicationCache.getDatabaseType(e._cacheableFeatureSetSourceKey());if(null!==a)return a}if(null!==e._databaseTypeProbed)return e._databaseTypeProbed;try{e._databaseTypeProbed=e._getDatabaseTypeImpl(),null!==K.Z.applicationCache&&K.Z.applicationCache.setDatabaseType(e._cacheableFeatureSetSourceKey(),e._databaseTypeProbed)}catch(a){throw null!==K.Z.applicationCache&&K.Z.applicationCache.clearDatabaseType(e._cacheableFeatureSetSourceKey()),a}return e._databaseTypeProbed}return e._databaseType})()}_getDatabaseTypeImpl(){var e=this;return(0,T.Z)(function*(){const a=[{thetype:A.Bj.SqlServer,testwhere:"(CAST( '2015-01-01' as DATETIME) = CAST( '2015-01-01' as DATETIME)) AND OBJECTID<0"},{thetype:A.Bj.Oracle,testwhere:"(TO_DATE('2003-11-18','YYYY-MM-DD') = TO_DATE('2003-11-18','YYYY-MM-DD')) AND OBJECTID<0"},{thetype:A.Bj.StandardisedNoInterval,testwhere:"(date '2015-01-01 10:10:10' = date '2015-01-01 10:10:10') AND OBJECTID<0"}];for(const l of a)if(!0===(yield e._runDatabaseProbe(l.testwhere)))return l.thetype;return A.Bj.StandardisedNoInterval})()}_cacheableFeatureSetSourceKey(){return"MUSTBESET"}_runDatabaseProbe(e){var a=this;return(0,T.Z)(function*(){if(null!==a._parent)return a._parent._runDatabaseProbe(e);throw new S.EN(S.H9.NotImplemented)})()}isTable(){var e,a;return null!=(a=null==(e=this._parent)?void 0:e.isTable())&&a}_featureFromCache(e){if(void 0!==this._featureCache[e])return this._featureCache[e]}_isInFeatureSet(e){return A.dj.Unknown}_getSet(e){throw new S.EN(S.H9.NotImplemented)}_getFeature(e,a,l){var s=this;return(0,T.Z)(function*(){if(s._checkCancelled(l),void 0!==s._featureFromCache(a)||(yield s._getFeatures(e,a,s._maxProcessingRate(),l),s._checkCancelled(l),void 0!==s._featureFromCache(a)))return s._featureFromCache(a);throw new S.EN(S.H9.MissingFeatures)})()}_getFeatureBatch(e,a){var l=this;return(0,T.Z)(function*(){l._checkCancelled(a);const s=new J.Z([],e,!1,null),_=[];yield l._getFeatures(s,-1,e.length,a),l._checkCancelled(a);for(const d of e)void 0!==l._featureFromCache(d)&&_.push(l._featureFromCache(d));return _})()}_getFeatures(e,a,l,s){return(0,T.Z)(function*(){return"success"})()}_getFilteredSet(e,a,l,s,_){throw new S.EN(S.H9.NotImplemented)}_refineSetBlock(e,a,l){var s=this;return(0,T.Z)(function*(){if(!0===s._checkIfNeedToExpandCandidatePage(e,s._maxQueryRate()))return yield s._expandPagedSet(e,s._maxQueryRate(),0,0,l),s._refineSetBlock(e,a,l);s._checkCancelled(l);const _=e._candidates.length;s._refineKnowns(e,a);let d=_-e._candidates.length;if(0===e._candidates.length||d>=a)return e;if(yield s._refineIfParentKnown(e,a-d,l),s._checkCancelled(l),s._refineKnowns(e,a-d),d=_-e._candidates.length,d<a&&e._candidates.length>0){const D=a-d,O=s._prepareFetchAndRefineSet(e._candidates);return yield s._fetchAndRefineFeatures(O,O.length>D?D:e._candidates.length,l),s._checkCancelled(l),s._refineKnowns(e,a-d),e}return e})()}_fetchAndRefineFeatures(e,a,l){return null}_prepareFetchAndRefineSet(e){const a=[];for(let l=0;l<e.length;l++)this._isPhysicalFeature(e[l])&&a.push(e[l]);return a}_isPhysicalFeature(e){return null===this._parent||this._parent._isPhysicalFeature(e)}_refineKnowns(e,a){let l=0,s=null;const _=[];a=this._maxQueryRate();for(let d=0;d<e._candidates.length&&"GETPAGES"!==e._candidates[d];d++){let D=!1;const O=this._candidateIdTransform(e._candidates[d]);O!==e._candidates[d]&&(D=!0);const M=this._isInFeatureSet(O);if(M===A.dj.InFeatureSet)!0===D?e._known.includes(O)||(e._known.push(O),l+=1):(e._known.push(e._candidates[d]),l+=1),null===s?s={start:d,end:d}:s.end===d-1?s.end=d:(_.push(s),s={start:d,end:d});else if(M===A.dj.NotInFeatureSet)null===s?s={start:d,end:d}:s.end===d-1?s.end=d:(_.push(s),s={start:d,end:d}),l+=1;else if(M===A.dj.Unknown&&(l+=1,!0===e._ordered))break;if(l>=a)break}null!==s&&_.push(s);for(let d=_.length-1;d>=0;d--)e._candidates.splice(_[d].start,_[d].end-_[d].start+1)}_refineIfParentKnown(e,a,l){const s=new J.Z([],[],e._ordered,null);return s._candidates=e._candidates.slice(0),this._parent._refineSetBlock(s,a,l)}_candidateIdTransform(e){return this._parent._candidateIdTransform(e)}_checkIfNeedToExpandKnownPage(e,a){if(null===e.pagesDefinition)return!1;let l=0;for(let s=e._lastFetchedIndex;s<e._known.length;s++){if("GETPAGES"===e._known[s])return!0;if(void 0===this._featureCache[e._known[s]]&&(l+=1,l>=a))break}return!1}_checkIfNeedToExpandCandidatePage(e,a){if(null===e.pagesDefinition)return!1;let l=0;for(let s=0;s<e._candidates.length;s++){if("GETPAGES"===e._candidates[s])return!0;if(l+=1,l>=a)break}return!1}_expandPagedSet(e,a,l,s,_){var d=this;return(0,T.Z)(function*(){if(null===d._parent)throw new S.EN(S.H9.NotImplemented);return d._parent._expandPagedSet(e,a,l,s,_)})()}_expandPagedSetFeatureSet(e,a,l,s,_){var d=this;return(0,T.Z)(function*(){if(e._known.length>0&&"GETPAGES"===e._known[e._known.length-1]&&(s=1),0===s&&e._candidates.length>0&&"GETPAGES"===e._candidates[e._candidates.length-1]&&(s=2),0===s)return"finished";const D=yield d._getPage(e,s,_);return l+D<a?d._expandPagedSet(e,a,l+D,0,_):"success"})()}_getPage(e,a,l){var s=this;return(0,T.Z)(function*(){const _=1===a?e._known:e._candidates;if(e.pagesDefinition.internal.set.length>e.pagesDefinition.resultOffset||!0===e.pagesDefinition.internal.fullyResolved){_.length=_.length-1;let d=0;for(let O=0;O<e.pagesDefinition.resultRecordCount&&!(e.pagesDefinition.resultOffset+O>=e.pagesDefinition.internal.set.length);O++)_[_.length]=e.pagesDefinition.internal.set[e.pagesDefinition.resultOffset+O],d++;e.pagesDefinition.resultOffset+=d;let D=!1;return!0===e.pagesDefinition.internal.fullyResolved&&e.pagesDefinition.internal.set.length<=e.pagesDefinition.resultOffset&&(D=!0),!1===D&&_.push("GETPAGES"),d}return yield s._getPhysicalPage(e,a,l),s._getPage(e,a,l)})()}_getPhysicalPage(e,a,l){return null}_clonePageDefinition(e){return null===this._parent?null:this._parent._clonePageDefinition(e)}_first(e){return this.iterator(e).next()}first(e){return this._first(e)}calculateStatistic(e,a,l,s){var _=this;return(0,T.Z)(function*(){yield _._ensureLoaded();let d=yield _._stat(e,a,"",null,null,l,s);return!1===d.calculated&&(d=yield _._manualStat(e,a,l,s)),d.result})()}_manualStat(e,a,l,s){var _=this;return(0,T.Z)(function*(){let d=null;switch(e.toLowerCase()){case"count":return d=yield(0,Q.QX)(_,s),{calculated:!0,result:d};case"distinct":return d=yield(0,Q.EB)(_,a,l,s),{calculated:!0,result:d};case"avg":case"mean":return d=yield(0,Q.J6)(_,a,s),{calculated:!0,result:d};case"stdev":return d=yield(0,Q.m)(_,a,s),{calculated:!0,result:d};case"variance":return d=yield(0,Q.CA)(_,a,s),{calculated:!0,result:d};case"sum":return d=yield(0,Q.Sm)(_,a,s),{calculated:!0,result:d};case"min":return d=yield(0,Q.VV)(_,a,s),{calculated:!0,result:d};case"max":return d=yield(0,Q.Fp)(_,a,s),{calculated:!0,result:d};default:return{calculated:!0,result:0}}})()}_stat(e,a,l,s,_,d,D){var O=this;return(0,T.Z)(function*(){const M=yield O._parent._stat(e,a,l,s,_,d,D);return!1===M.calculated?null===_&&""===l&&null===s?O._manualStat(e,a,d,D):{calculated:!1}:M})()}_unionAllGeomSelf(e){const a=this.iterator(this._defaultTracker(e)),l=[];return new Promise((s,_)=>{this._unionShapeInBatches(l,a,s,_)})}_unionAllGeom(e){return new Promise((a,l)=>{const s=this.iterator(this._defaultTracker(e));this._unionShapeInBatches([],s,a,l)})}_unionShapeInBatches(e,a,l,s){a.next().then(_=>{try{null!==_&&null!==_.geometry&&e.push(_.geometry),e.length>30||null===_&&e.length>1?(0,B.G0)(e).then(d=>{try{null===_?l(d):this._unionShapeInBatches(e=[d],a,l,s)}catch(D){s(D)}},s):null===_?l(1===e.length?e[0]:null):this._unionShapeInBatches(e,a,l,s)}catch(d){s(d)}},s)}iterator(e){return new P(this,e)}intersection(e,a=!1){return R._featuresetFunctions.intersection.bind(this)(e,a)}difference(e,a=!1,l=!0){return R._featuresetFunctions.difference.bind(this)(e,a,l)}symmetricDifference(e,a=!1,l=!0){return R._featuresetFunctions.symmetricDifference.bind(this)(e,a,l)}morphShape(e,a,l="unknown",s=null){return R._featuresetFunctions.morphShape.bind(this)(e,a,l,s)}morphShapeAndAttributes(e,a,l="unknown"){return R._featuresetFunctions.morphShapeAndAttributes.bind(this)(e,a,l)}union(e,a=!1){return R._featuresetFunctions.union.bind(this)(e,a)}intersects(e){return R._featuresetFunctions.intersects.bind(this)(e)}envelopeIntersects(e){return R._featuresetFunctions.envelopeIntersects.bind(this)(e)}contains(e){return R._featuresetFunctions.contains.bind(this)(e)}overlaps(e){return R._featuresetFunctions.overlaps.bind(this)(e)}relate(e,a){return R._featuresetFunctions.relate.bind(this)(e,a)}within(e){return R._featuresetFunctions.within.bind(this)(e)}touches(e){return R._featuresetFunctions.touches.bind(this)(e)}top(e){return R._featuresetFunctions.top.bind(this)(e)}crosses(e){return R._featuresetFunctions.crosses.bind(this)(e)}buffer(e,a,l,s=!0){return R._featuresetFunctions.buffer.bind(this)(e,a,l,s)}filter(e,a=null){return R._featuresetFunctions.filter.bind(this)(e,a)}orderBy(e){return R._featuresetFunctions.orderBy.bind(this)(e)}dissolve(e,a){return R._featuresetFunctions.dissolve.bind(this)(e,a)}groupby(e,a){return R._featuresetFunctions.groupby.bind(this)(e,a)}reduce(e,a=null,l){return new Promise((s,_)=>{this._reduceImpl(this.iterator(this._defaultTracker(l)),e,a,0,s,_,0)})}_reduceImpl(e,a,l,s,_,d,D){try{if(++D>1e3)return void setTimeout(()=>{this._reduceImpl(e,a,l,s,_,d,D=0)});e.next().then(O=>{try{if(null===O)_(l);else{const M=a(l,O,s,this);(0,I.y8)(M)?M.then(h=>{this._reduceImpl(e,a,h,s+1,_,d,D)},d):this._reduceImpl(e,a,M,s+1,_,d,D)}}catch(M){d(M)}},d)}catch(O){d(O)}}removeField(e){return R._featuresetFunctions.removeField.bind(this)(e)}addField(e,a,l=null){return R._featuresetFunctions.addField.bind(this)(e,a,l)}sumArea(e,a=!1,l){const s=(0,A.EI)(e);return this.reduce((_,d)=>null===d.geometry?0:a?(0,B.Y4)(d.geometry,s).then(D=>_+D):(0,B.CJ)(d.geometry,s).then(D=>_+D),0,l)}sumLength(e,a=!1,l){const s=(0,A.Lz)(e);return this.reduce((_,d)=>null===d.geometry?0:a?(0,B.kQ)(d.geometry,s).then(D=>_+D):(0,B.sz)(d.geometry,s).then(D=>_+D),0,l)}_substituteVars(e,a){if(null!==a){const l={};for(const s in a)l[s.toLowerCase()]=a[s];e.parameters=l}}distinct(e,a=1e3,l=null,s){var _=this;return(0,T.Z)(function*(){yield _.load();const d=w.WhereClause.create(e,_.getFieldsIndex());return _._substituteVars(d,l),_.calculateStatistic("distinct",d,a,_._defaultTracker(s))})()}min(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("min",_,-1,s._defaultTracker(l))})()}max(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("max",_,-1,s._defaultTracker(l))})()}avg(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("avg",_,-1,s._defaultTracker(l))})()}sum(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("sum",_,-1,s._defaultTracker(l))})()}stdev(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("stdev",_,-1,s._defaultTracker(l))})()}variance(e,a=null,l){var s=this;return(0,T.Z)(function*(){yield s.load();const _=w.WhereClause.create(e,s.getFieldsIndex());return s._substituteVars(_,a),s.calculateStatistic("variance",_,-1,s._defaultTracker(l))})()}count(e){var a=this;return(0,T.Z)(function*(){return yield a.load(),a.calculateStatistic("count",w.WhereClause.create("1",a.getFieldsIndex()),-1,a._defaultTracker(e))})()}_defaultTracker(e){return e||{aborted:!1}}forEach(e,a){return new Promise((l,s)=>{this._forEachImpl(this.iterator(this._defaultTracker(a)),e,this,l,s,0)})}_forEachImpl(e,a,l,s,_,d){try{if(++d>1e3)return void setTimeout(()=>{this._forEachImpl(e,a,l,s,_,d=0)},0);e.next().then(D=>{try{if(null===D)s(l);else{const O=a(D);null==O?this._forEachImpl(e,a,l,s,_,d):(0,I.y8)(O)?O.then(()=>{try{this._forEachImpl(e,a,l,s,_,d)}catch(M){_(M)}},_):this._forEachImpl(e,a,l,s,_,d)}}catch(O){_(O)}},_)}catch(D){_(D)}}convertToJSON(e){const a={layerDefinition:{geometryType:this.geometryType,fields:[]},featureSet:{features:[],geometryType:this.geometryType}};for(let l=0;l<this.fields.length;l++)a.layerDefinition.fields.push((0,A.Sh)(this.fields[l]));return this.reduce((l,s)=>{const _={geometry:s.geometry&&s.geometry.toJSON(),attributes:{}};for(const d in s.attributes)_.attributes[d]=s.attributes[d];return a.featureSet.features.push(_),1},0,e).then(()=>a)}castToText(e=!1){return"object, FeatureSet"}queryAttachments(e,a,l,s,_){return this._parent.queryAttachments(e,a,l,s,_)}serviceUrl(){return this._parent.serviceUrl()}subtypes(){return this.typeIdField?{subtypeField:this.typeIdField,subtypes:this.types?this.types.map(e=>({name:e.name,code:e.id})):[]}:null}relationshipMetaData(){return this._parent.relationshipMetaData()}get gdbVersion(){return this._parent?this._parent.gdbVersion:""}schema(){const e=[];for(const a of this.fields)e.push((0,A.Sh)(a));return{objectIdField:this.objectIdField,globalIdField:this.globalIdField,geometryType:void 0===A.q2[this.geometryType]?"esriGeometryNull":A.q2[this.geometryType],fields:e}}convertToText(e,a){var l=this;return(0,T.Z)(function*(){if("schema"===e)return yield l._ensureLoaded(),JSON.stringify(l.schema());if("featureset"===e){yield l._ensureLoaded();const s=[];yield l.reduce((d,D)=>{const O={geometry:D.geometry?D.geometry.toJSON():null,attributes:D.attributes};return null!==O.geometry&&O.geometry.spatialReference&&delete O.geometry.spatialReference,s.push(O),1},0,a);const _=l.schema();return _.features=s,_.spatialReference=l.spatialReference.toJSON(),JSON.stringify(_)}return l.castToText()})()}getFeatureByObjectId(e,a){return this._parent.getFeatureByObjectId(e,a)}getOwningSystemUrl(){return this._parent.getOwningSystemUrl()}getIdentityUser(){return this._parent.getIdentityUser()}getRootFeatureSet(){return null!==this._parent?this._parent.getRootFeatureSet():this}getDataSourceFeatureSet(){return null!==this._parent?this._parent.getDataSourceFeatureSet():this}castAsJson(e=null){return"keeptype"===(null==e?void 0:e.featureset)?this:"none"===(null==e?void 0:e.featureset)?null:{type:"FeatureSet"}}castAsJsonAsync(e=null,a=null){var l=this;return(0,T.Z)(function*(){var d;if("keeptype"===(null==a?void 0:a.featureset))return l;if("schema"===(null==a?void 0:a.featureset))return yield l._ensureLoaded(),JSON.parse(JSON.stringify(l.schema()));if("none"===(null==a?void 0:a.featureset))return null;yield l._ensureLoaded();const s=[];yield l.reduce((D,O)=>{const M={geometry:O.geometry?!0===(null==a?void 0:a.keepGeometryType)?O.geometry:O.geometry.toJSON():null,attributes:O.attributes};return null!==M.geometry&&M.geometry.spatialReference&&!0!==(null==a?void 0:a.keepGeometryType)&&delete M.geometry.spatialReference,s.push(M),1},0,e);const _=l.schema();return _.features=s,_.spatialReference=!0===(null==a?void 0:a.keepGeometryType)?l.spatialReference:null==(d=l.spatialReference)?void 0:d.toJSON(),_})()}get dateTimeReferenceFieldIndex(){return null===this._dateFieldIndex&&(this._dateFieldIndex=x.nu.create(this.getFieldsIndex(),this)),this._dateFieldIndex}fieldTimeZone(e){return this.dateTimeReferenceFieldIndex.fieldTimeZone(e)}get preferredTimeReference(){var e,a;return null!=(a=null==(e=this._parent)?void 0:e.preferredTimeReference)?a:null}get dateFieldsTimeReference(){var e,a;return null!=(a=null==(e=this._parent)?void 0:e.dateFieldsTimeReference)?a:null}get datesInUnknownTimezone(){return this._parent.datesInUnknownTimezone}get editFieldsInfo(){var e,a;return null!=(a=null==(e=this._parent)?void 0:e.editFieldsInfo)?a:null}get timeInfo(){var e,a;return null!=(a=null==(e=this._parent)?void 0:e.timeInfo)?a:null}}return R._featuresetFunctions={},R})()},91510:(V,j,v)=>{v.d(j,{Z:()=>T});class T{constructor(K,S,W,P){this._lastFetchedIndex=0,this._ordered=!1,this.pagesDefinition=null,this._candidates=K,this._known=S,this._ordered=W,this.pagesDefinition=P}}},53791:(V,j,v)=>{v.d(j,{Z:()=>T});let T=(()=>{class x{constructor(){this._databaseTypeMetaData={},this._layerInfo={}}clearDatabaseType(S){void 0===this._databaseTypeMetaData[S]&&delete this._databaseTypeMetaData[S]}getDatabaseType(S){return"MUSTBESET"===S||void 0===this._databaseTypeMetaData[S]?null:this._databaseTypeMetaData[S]}setDatabaseType(S,W){this._databaseTypeMetaData[S]=W}getLayerInfo(S){return void 0===this._layerInfo[S]?null:this._layerInfo[S]}setLayerInfo(S,W){this._layerInfo[S]=W}clearLayerInfo(S){void 0!==this._layerInfo[S]&&delete this._layerInfo[S]}}return x.applicationCache=null,x})()},83947:(V,j,v)=>{v.d(j,{$e:()=>B,DT:()=>e,TE:()=>M,XF:()=>I,bB:()=>w,fz:()=>k,hq:()=>_,mA:()=>Z,oX:()=>R,vR:()=>E,y5:()=>d,zR:()=>J});var T=v(91365),x=v(77132),K=v(10410),S=v(47982),P=(v(29050),v(21837));function J(h,i){return m(null==h?void 0:h.parseTree,i,null==h?void 0:h.parameters)}function I(h,i,y){return m(h,i,y)}function w(h,i,y,p){return K.WhereClause.create(m(h.parseTree,x.Bj.Standardised,h.parameters,i,y),p)}function B(h,i,y="AND"){return K.WhereClause.create("(("+J(h,x.Bj.Standardised)+")"+y+"("+J(i,x.Bj.Standardised)+"))",h.fieldsIndex)}function m(h,i,y,p=null,c=null,f=null){let F,L,U,C;switch(h.type){case"interval":return M(m(h.value,i,y,p,c,f),h.qualifier,h.op);case"case-expression":{let N=" CASE ";"simple"===h.format&&(N+=m(h.operand,i,y,p,c,f));for(let H=0;H<h.clauses.length;H++)N+=" WHEN "+m(h.clauses[H].operand,i,y,p,c,f)+" THEN "+m(h.clauses[H].value,i,y,p,c,f);return null!==h.else&&(N+=" ELSE "+m(h.else,i,y,p,c,f)),N+=" END ",N}case"parameter":{const N=y[h.value.toLowerCase()];if("string"==typeof N)return"'"+y[h.value.toLowerCase()].toString().replace(/'/g,"''")+"'";if((0,x.J_)(N))return R(N,i,f);if((0,x.NP)(N))return Z(N,i,f);if(N instanceof Array){const H=[];for(let $=0;$<N.length;$++)"string"==typeof N[$]?H.push("'"+N[$].toString().replace(/'/g,"''")+"'"):(0,x.J_)(N[$])?H.push(R(N[$],i,f)):(0,x.NP)(N[$])?H.push(Z(N[$],i,f)):H.push(N[$].toString());return H}return N.toString()}case"expression-list":L=[];for(const N of h.value)L.push(m(N,i,y,p,c,f));return L;case"unary-expression":return" ( NOT "+m(h.expr,i,y,p,c,f)+" ) ";case"binary-expression":switch(h.operator){case"AND":return" ("+m(h.left,i,y,p,c,f)+" AND "+m(h.right,i,y,p,c,f)+") ";case"OR":return" ("+m(h.left,i,y,p,c,f)+" OR "+m(h.right,i,y,p,c,f)+") ";case"IS":if("null"!==h.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return" ("+m(h.left,i,y,p,c,f)+" IS NULL )";case"ISNOT":if("null"!==h.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return" ("+m(h.left,i,y,p,c,f)+" IS NOT NULL )";case"IN":return F=[],"expression-list"===h.right.type?(F=m(h.right,i,y,p,c)," ("+m(h.left,i,y,p,c,f)+" IN ("+F.join(",")+")) "):(C=m(h.right,i,y,p,c,f),C instanceof Array?" ("+m(h.left,i,y,p,c,f)+" IN ("+C.join(",")+")) ":" ("+m(h.left,i,y,p,c,f)+" IN ("+C+")) ");case"NOT IN":return F=[],"expression-list"===h.right.type?(F=m(h.right,i,y,p,c)," ("+m(h.left,i,y,p,c,f)+" NOT IN ("+F.join(",")+")) "):(C=m(h.right,i,y,p,c,f),C instanceof Array?" ("+m(h.left,i,y,p,c,f)+" NOT IN ("+C.join(",")+")) ":" ("+m(h.left,i,y,p,c,f)+" NOT IN ("+C+")) ");case"BETWEEN":return U=m(h.right,i,y,p,c,f)," ("+m(h.left,i,y,p,c,f)+" BETWEEN "+U[0]+" AND "+U[1]+" ) ";case"NOTBETWEEN":return U=m(h.right,i,y,p,c,f)," ("+m(h.left,i,y,p,c,f)+" NOT BETWEEN "+U[0]+" AND "+U[1]+" ) ";case"LIKE":return""!==h.escape?" ("+m(h.left,i,y,p,c,f)+" LIKE "+m(h.right,i,y,p,c,f)+" ESCAPE '"+h.escape+"') ":" ("+m(h.left,i,y,p,c,f)+" LIKE "+m(h.right,i,y,p,c,f)+") ";case"NOT LIKE":return""!==h.escape?" ("+m(h.left,i,y,p,c,f)+" NOT LIKE "+m(h.right,i,y,p,c,f)+" ESCAPE '"+h.escape+"') ":" ("+m(h.left,i,y,p,c,f)+" NOT LIKE "+m(h.right,i,y,p,c,f)+") ";case"<>":case"<":case">":case">=":case"<=":case"=":case"*":case"-":case"+":case"/":return" ("+m(h.left,i,y,p,c,f)+" "+h.operator+" "+m(h.right,i,y,p,c,f)+") ";case"||":return" ("+m(h.left,i,y,p,c,f)+" "+(i===x.Bj.SqlServer?"+":h.operator)+" "+m(h.right,i,y,p,c,f)+") "}throw new S.eS(S.f.UnsupportedOperator,{operator:h.operator});case"null":return"null";case"boolean":return!0===h.value?"1":"0";case"string":return"'"+h.value.toString().replace(/'/g,"''")+"'";case"timestamp":case"date":return R(h.value,i,f);case"number":return h.value.toString();case"current-time":return E("date"===h.mode,i);case"column-reference":return p&&p.toLowerCase()===h.column.toLowerCase()?"("+c+")":h.column;case"data-type":return h.value;case"function":{const N=m(h.args,i,y,p,c,f);return k(h.name,N,i)}}throw new S.eS(S.f.UnsupportedSyntax,{node:h.type})}function k(h,i,y){switch(h.toLowerCase().trim()){case"cos":case"sin":case"tan":case"cosh":case"tanh":case"sinh":case"acos":case"asin":case"atan":case"floor":case"log10":case"log":case"abs":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase().trim()});return`${h.toUpperCase().trim()}(${i[0]})`;case"ceiling":case"ceil":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"ceiling"});return"CEILING("+i[0]+")";case"mod":case"power":case"nullif":if(2!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase().trim()});return`${h.toUpperCase().trim()}(${i[0]},${i[1]})`;case"round":if(2===i.length)return"ROUND("+i[0]+","+i[1]+")";if(1===i.length)return"ROUND("+i[0]+")";throw new S.eS(S.f.InvalidFunctionParameters,{function:"round"});case"truncate":if(i.length<1||i.length>2)throw new S.eS(S.f.InvalidFunctionParameters,{function:"truncate"});return y===x.Bj.SqlServer?"ROUND("+i[0]+(1===i.length?"0":","+i[1])+",1)":"TRUNCATE("+i[0]+(1===i.length?")":","+i[1]+")");case"char_length":case"len":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"char_length"});switch(y){case x.Bj.SqlServer:return"LEN("+i[0]+")";case x.Bj.Oracle:return"LENGTH("+i[0]+")";default:return"CHAR_LENGTH("+i[0]+")"}case"coalesce":case"concat":{if(i.length<1)throw new S.eS(S.f.InvalidFunctionParameters,{function:h.toLowerCase()});let p=h.toUpperCase().trim()+"(";for(let c=0;c<i.length;c++)0!==c&&(p+=","),p+=i[c];return p+=")",p}case"lower":case"lcase":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"lower"});return"LOWER("+i[0]+")";case"upper":case"ucase":if(1!==i.length)throw new S.eS(S.f.InvalidFunctionParameters,{function:"upper"});return"UPPER("+i[0]+")";case"substring":{let p="";switch(y){case x.Bj.Oracle:return p="SUBSTR("+i[0]+","+i[1],3===i.length&&(p+=","+i[2]),p+=")",p;case x.Bj.SqlServer:return p=3===i.length?"SUBSTRING("+i[0]+","+i[1]+","+i[2]+")":"SUBSTRING("+i[0]+",  "+i[1]+", LEN("+i[0]+") - "+i[1]+")",p;default:return p="SUBSTRING("+i[0]+" FROM "+i[1],3===i.length&&(p+=" FOR "+i[2]),p+=")",p}}case"extract":return"EXTRACT("+i[0].replace(/\'/g,"")+" FROM "+i[1]+")";case"cast":{let p="";switch(y){case x.Bj.Oracle:switch(i[1].type){case"date":p="DATE";break;case"float":p="DOUBLE";break;case"integer":p="INTEGER";break;case"real":p="REAL";break;case"smallint":p="SMALLINT";break;case"timestamp":p="TIMESTAMP";break;case"varchar":p="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${p})`;case x.Bj.Postgres:switch(i[1].type){case"date":p="DATE";break;case"float":p="DOUBLE PRECISION";break;case"integer":p="INT";break;case"real":p="REAL";break;case"smallint":p="SMALLINT";break;case"timestamp":p="TIMESTAMP";break;case"varchar":p="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${p})`;case x.Bj.SqlServer:switch(i[1].type){case"date":p="DATE";break;case"float":p="FLOAT";break;case"integer":p="INT";break;case"real":p="REAL";break;case"smallint":p="SMALLINT";break;case"timestamp":p="DATETIME";break;case"varchar":p="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${p})`;default:switch(i[1].type){case"date":p="DATE";break;case"float":p="FLOAT";break;case"integer":p="INTEGER";break;case"real":p="REAL";break;case"smallint":p="SMALLINT";break;case"timestamp":p="TIMESTAMP";break;case"varchar":p="VARCHAR("+i[1].size.toString()+")"}return`CAST(${i[0]} AS ${p})`}}}throw new S.eS(S.f.InvalidFunctionParameters,{function:h})}function Z(h,i,y,p){null!=y&&y.outputTimeReference&&(h=T.iG.arcadeDateAndZoneToArcadeDate(h,null==y?void 0:y.outputTimeReference));const c=h.toDateTime(),f=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(i){case x.Bj.FILEGDB:case x.Bj.Standardised:case x.Bj.StandardisedNoInterval:return f?`date '${c.toFormat("yyyy-LL-dd")}'`:`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`;case x.Bj.Oracle:return f?`TO_DATE('${c.toFormat("yyyy-LL-dd")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat("yyyy-LL-dd HH:mm:ss")}','YYYY-MM-DD HH24:MI:SS')`;case x.Bj.SqlServer:return`'${c.toFormat(f?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;case x.Bj.PGDB:return`#${c.toFormat(f?"LL-dd-yyyy":"LL-dd-yyyy HH:mm:ss")}#`;case x.Bj.Postgres:return`TIMESTAMP '${c.toFormat(f?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;default:return`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`}}function R(h,i,y,p){let c=(0,x.J_)(h)?P.ou.fromJSDate(h):P.ou.fromSQL(h);const f=0===c.hour&&0===c.minute&&0===c.second&&0===c.millisecond;switch(null!=y&&y.inputTimeReference&&(c=P.ou.fromObject({day:c.day,year:c.year,month:c.month,hour:c.hour,minute:c.minute,second:c.second,millisecond:c.millisecond},{zone:y.inputTimeReference})),null!=y&&y.outputTimeReference&&(c=c.setZone(y.outputTimeReference)),i){case x.Bj.FILEGDB:case x.Bj.Standardised:case x.Bj.StandardisedNoInterval:return f?`date '${c.toFormat("yyyy-LL-dd")}'`:`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`;case x.Bj.Oracle:return f?`TO_DATE('${c.toFormat("yyyy-LL-dd")}','YYYY-MM-DD')`:`TO_DATE('${c.toFormat("yyyy-LL-dd HH:mm:ss")}','YYYY-MM-DD HH24:MI:SS')`;case x.Bj.SqlServer:return`'${c.toFormat(f?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;case x.Bj.PGDB:return`#${c.toFormat(f?"LL-dd-yyyy":"LL-dd-yyyy HH:mm:ss")}#`;case x.Bj.Postgres:return`TIMESTAMP '${c.toFormat(f?"yyyy-LL-dd":"yyyy-LL-dd HH:mm:ss")}'`;default:return`date '${c.toFormat("yyyy-LL-dd HH:mm:ss")}'`}}function E(h,i){switch(i){case x.Bj.FILEGDB:case x.Bj.Standardised:case x.Bj.StandardisedNoInterval:case x.Bj.Oracle:return h?"CURRENT_DATE":"CURRENT_TIMESTAMP";case x.Bj.SqlServer:return h?"CAST(GETDATE() AS DATE)":"GETDATE()";default:return h?"CURRENT_DATE":"CURRENT_TIMESTAMP"}}function e(h,i,y={}){const p={},c={},f={esriFieldTypeSmallInteger:"integer",esriFieldTypeInteger:"integer",esriFieldTypeSingle:"double",esriFieldTypeDouble:"double",esriFieldTypeString:"string",esriFieldTypeDate:"date",esriFieldTypeOID:"integer",esriFieldTypeGUID:"guid",esriFieldTypeGlobalID:"guid",oid:"integer",long:"integer","small-integer":"integer",integer:"integer",single:"double",double:"double",date:"date",guid:"guid",globalid:"guid",string:"string"};for(const F of i){const L=F.type?f[F.type]:void 0;p[F.name.toLowerCase()]=void 0===L?"":L}for(const F in y){const L=f[y[F]];c[F.toLowerCase()]=void 0===L?"":L}switch(a(p,h.parseTree,h.parameters,c)){case"double":return"double";case"integer":return"integer";case"date":return"date";case"string":return"string";case"global-id":case"guid":return"guid"}return""}function a(h,i,y,p){var f,F,L;let c;switch(i.type){case"interval":return"integer";case"case-expression":{const U=[];if("simple"===i.format){for(let C=0;C<i.clauses.length;C++)U.push(a(h,i.clauses[C].value,y,p));null!==i.else&&U.push(a(h,i.else,y,p))}else{for(let C=0;C<i.clauses.length;C++)U.push(a(h,i.else,y,p));null!==i.else&&U.push(a(h,i.else,y,p))}return s(U)}case"parameter":{const U=p[i.value.toLowerCase()];if(void 0===U&&y){const C=y[i.value.toLowerCase()];if(null==C)return"";if("string"==typeof C||C instanceof String)return"string";if("boolean"==typeof C)return"boolean";if((0,x.J_)(C)||(0,x.NP)(C))return"date";if("number"==typeof C)return C%1==0?"integer":"double"}return void 0===U?"":U}case"expression-list":{const U=[];for(const C of i.value)U.push(a(h,C,y,p));return U}case"unary-expression":return"boolean";case"binary-expression":switch(i.operator){case"AND":case"OR":case"IN":case"NOT IN":case"BETWEEN":case"NOTBETWEEN":case"LIKE":case"NOT LIKE":case"<>":case"<":case">":case">=":case"<=":case"=":return"boolean";case"IS":case"ISNOT":if("null"!==i.right.type)throw new S.eS(S.f.UnsupportedIsRhs);return"boolean";case"*":case"-":case"+":case"/":return s([a(h,i.left,y,p),a(h,i.right,y,p)]);case"||":return"string";default:throw new S.eS(S.f.UnsupportedOperator,{operator:i.operator})}case"null":return"";case"boolean":return"boolean";case"string":return"string";case"number":return null===i.value?"":i.value%1==0?"integer":"double";case"date":case"timestamp":case"current-time":return"date";case"column-reference":{const U=h[i.column.toLowerCase()];return void 0===U?"":U}case"function":switch(i.name.toLowerCase()){case"cast":switch(null!=(L=null==(F=null==(f=i.args)?void 0:f.value[1])?void 0:F.value.type)?L:""){case"integer":case"smallint":return"integer";case"real":case"float":return"double";case"date":case"timestamp":return"date";case"varchar":return"string";default:return""}case"position":case"extract":case"char_length":case"mod":return"integer";case"round":if(c=a(h,i.args,y,p),c instanceof Array){if(c.length<=0)return"double";c=c[0]}return c;case"sign":return"integer";case"ceiling":case"floor":case"abs":return c=a(h,i.args,y,p),c instanceof Array&&(c=s(c)),"integer"===c||"double"===c?c:"double";case"area":case"length":case"log":case"log10":case"sin":case"cos":case"tan":case"asin":case"acos":case"atan":case"cosh":case"sinh":case"tanh":case"power":return"double";case"substring":case"trim":case"concat":case"lower":case"upper":return"string";case"truncate":return"double";case"nullif":case"coalesce":return c=a(h,i.args,y,p),c instanceof Array?c.length>0?c[0]:"":c}return""}throw new S.eS(S.f.UnsupportedSyntax,{node:i.type})}const l={boolean:1,string:2,integer:3,double:4,date:5};function s(h){if(h){let i="";for(const y of h)""!==y&&(i=""===i||l[i]<l[y]?y:i);return i}return""}function _(h,i){return D(h.parseTree,i)}function d(h){return"column-reference"===(null==h?void 0:h.parseTree.type)}function D(h,i){if(null==h)return!1;switch(h.type){case"when-clause":return D(h.operand,i)||D(h.value,i);case"case-expression":for(const y of h.clauses)if(D(y,i))return!0;return!("simple"!==h.format||!D(h.operand,i))||!(null===h.else||!D(h.else,i));case"parameter":case"null":case"boolean":case"date":case"timestamp":case"string":case"number":return!1;case"expression-list":for(const y of h.value)if(D(y,i))return!0;return!1;case"unary-expression":return D(h.expr,i);case"binary-expression":return D(h.left,i)||D(h.right,i);case"column-reference":return i.toLowerCase()===h.column.toLowerCase();case"function":return D(h.args,i)}return!1}function O(h){let i="";return i+=h.period.toUpperCase(),i}function M(h,i,y){let p="";return p="interval-period"===i.type?O(i):O(i.start)+" TO "+O(i.end),"INTERVAL "+y+" "+h+" "+p}},45333:(V,j,v)=>{v.d(j,{CA:()=>a,EB:()=>y,Fp:()=>Z,J6:()=>E,QX:()=>O,Sm:()=>d,VV:()=>m,g3:()=>w,m:()=>s,tj:()=>B});var T=v(15861),x=v(47982),K=v(77132),S=v(83947);function W(c){return c=+c,isFinite(c)?c-c%1||(c<0?-0:0===c?c:0):c}function P(c){let f=0;for(let F=0;F<c.length;F++)f+=c[F];return f/c.length}function J(c){const f=P(c);let F=0;for(let L=0;L<c.length;L++)F+=(f-c[L])**2;return F/c.length}function A(c){const f=P(c);let F=0;for(let L=0;L<c.length;L++)F+=(f-c[L])**2;return F/(c.length-1)}function Q(c){let f=0;for(let F=0;F<c.length;F++)f+=c[F];return f}function w(c){switch(c.toLowerCase()){case"distinct":return"distinct";case"avg":case"mean":return"avg";case"min":return"min";case"sum":return"sum";case"max":return"max";case"stdev":case"stddev":return"stddev";case"var":case"variance":return"var";case"count":return"count"}return""}function B(c,f,F=1e3){switch(c.toLowerCase()){case"distinct":return function I(c,f){const F=[],L={},U=[];for(let C=0;C<c.length;C++){if(null!=c[C]){const N=c[C];if((0,K.hj)(N)||(0,K.HD)(N))void 0===L[N]&&(F.push(N),L[N]=1);else{let H=!1;for(let $=0;$<U.length;$++)!0===(0,K.tt)(U[$],N)&&(H=!0);!1===H&&(U.push(N),F.push(N))}}if(F.length>=f&&-1!==f)return F}return F}(f,F);case"avg":case"mean":return P(f);case"min":return Math.min.apply(Math,f);case"sum":return Q(f);case"max":return Math.max.apply(Math,f);case"stdev":case"stddev":return Math.sqrt(J(f));case"var":case"variance":return J(f);case"count":return f.length}return 0}function m(c,f,F){return k.apply(this,arguments)}function k(){return(k=(0,T.Z)(function*(c,f,F){const L=yield h(c,f,F,!0);return 0===L.length?null:Math.min.apply(Math,L)})).apply(this,arguments)}function Z(c,f,F){return R.apply(this,arguments)}function R(){return(R=(0,T.Z)(function*(c,f,F){const L=yield h(c,f,F,!0);return 0===L.length?null:Math.max.apply(Math,L)})).apply(this,arguments)}function E(c,f,F){return e.apply(this,arguments)}function e(){return(e=(0,T.Z)(function*(c,f,F){let L="";f&&!(0,S.y5)(f)&&(L=(0,S.DT)(f,c.fields));const U=yield h(c,f,F,!0);if(0===U.length)return null;const C=P(U);return null===C?C:"integer"===L?W(C):C})).apply(this,arguments)}function a(c,f,F){return l.apply(this,arguments)}function l(){return(l=(0,T.Z)(function*(c,f,F){const L=yield h(c,f,F,!0);return 0===L.length?null:A(L)})).apply(this,arguments)}function s(c,f,F){return _.apply(this,arguments)}function _(){return(_=(0,T.Z)(function*(c,f,F){const L=yield h(c,f,F,!0);return 0===L.length?null:Math.sqrt(A(L))})).apply(this,arguments)}function d(c,f,F){return D.apply(this,arguments)}function D(){return(D=(0,T.Z)(function*(c,f,F){const L=yield h(c,f,F,!0);return 0===L.length?null:Q(L)})).apply(this,arguments)}function O(c,f){return M.apply(this,arguments)}function M(){return(M=(0,T.Z)(function*(c,f){return c.iterator(f).count()})).apply(this,arguments)}function h(c,f,F){return i.apply(this,arguments)}function i(){return(i=(0,T.Z)(function*(c,f,F,L=!1){const U=c.iterator(F),C=[],N={ticker:0};let H=yield U.next();for(;null!==H;){if(N.ticker++,F.aborted)throw new x.EN(x.H9.Cancelled);N.ticker%100==0&&(N.ticker=0,yield new Promise(z=>{setTimeout(z,0)}));const $=null==f?void 0:f.calculateValue(H);null===$?!1===L&&(C[C.length]=$):C[C.length]=$,H=yield U.next()}return C})).apply(this,arguments)}function y(c,f){return p.apply(this,arguments)}function p(){return(p=(0,T.Z)(function*(c,f,F=1e3,L=null){const U=c.iterator(L),C=[],N={},H={ticker:0};let $=yield U.next();for(;null!==$;){if(H.ticker++,L&&L.aborted)throw new x.EN(x.H9.Cancelled);H.ticker%100==0&&(H.ticker=0,yield new Promise(re=>{setTimeout(re,0)}));const z=null==f?void 0:f.calculateValue($);if(null!=z&&void 0===N[z]&&(C.push(z),N[z]=1),C.length>=F&&-1!==F)return C;$=yield U.next()}return C})).apply(this,arguments)}},87215:(V,j,v)=>{v.d(j,{CJ:()=>Ae,Cz:()=>Re,D$:()=>be,ED:()=>y,G0:()=>xe,Gg:()=>f,JI:()=>U,LV:()=>c,Nm:()=>p,Sp:()=>$,TE:()=>D,U1:()=>De,W4:()=>h,Y4:()=>Le,cv:()=>ve,e5:()=>N,f3:()=>we,fS:()=>O,j2:()=>Pe,jU:()=>d,kK:()=>M,kQ:()=>Oe,og:()=>F,oq:()=>e,r3:()=>_,rd:()=>Fe,sz:()=>Ce,uh:()=>i,wf:()=>re,z7:()=>l});var T=v(15861),K=(v(29132),v(59289)),W=(v(72642),v(91179));function P(u){var g;return Array.isArray(u)?null==(g=u[0])?void 0:g.spatialReference:null==u?void 0:u.spatialReference}function J(u){return u&&(Array.isArray(u)?u.map(J):u.toJSON?u.toJSON():u)}function A(u){return Array.isArray(u)?u.map(g=>(0,W.im)(g)):(0,W.im)(u)}function Q(u,g){let b;return Array.isArray(u)?b=u:(b=[],b.push(u),null!=g&&b.push(g)),b}let I;function w(){return B.apply(this,arguments)}function B(){return(B=(0,T.Z)(function*(){return I||(I=(0,K.bA)("geometryEngineWorker",{strategy:"distributed"})),I})).apply(this,arguments)}function m(u,g){return k.apply(this,arguments)}function k(){return(k=(0,T.Z)(function*(u,g){return(yield w()).invoke("executeGEOperation",{operation:u,parameters:J(g)})})).apply(this,arguments)}function e(u,g){return a.apply(this,arguments)}function a(){return(a=(0,T.Z)(function*(u,g){return A(yield m("clip",[P(u),u,g]))})).apply(this,arguments)}function l(u,g){return s.apply(this,arguments)}function s(){return(s=(0,T.Z)(function*(u,g){return A(yield m("cut",[P(u),u,g]))})).apply(this,arguments)}function _(u,g){return m("contains",[P(u),u,g])}function d(u,g){return m("crosses",[P(u),u,g])}function D(u,g,b){return m("distance",[P(u),u,g,b])}function O(u,g){return m("equals",[P(u),u,g])}function M(u,g){return m("intersects",[P(u),u,g])}function h(u,g){return m("touches",[P(u),u,g])}function i(u,g){return m("within",[P(u),u,g])}function y(u,g){return m("disjoint",[P(u),u,g])}function p(u,g){return m("overlaps",[P(u),u,g])}function c(u,g,b){return m("relate",[P(u),u,g,b])}function f(u){return m("isSimple",[P(u),u])}function F(u){return L.apply(this,arguments)}function L(){return(L=(0,T.Z)(function*(u){return A(yield m("simplify",[P(u),u]))})).apply(this,arguments)}function U(u){return C.apply(this,arguments)}function C(){return(C=(0,T.Z)(function*(u,g=!1){return A(yield m("convexHull",[P(u),u,g]))})).apply(this,arguments)}function N(u,g){return H.apply(this,arguments)}function H(){return(H=(0,T.Z)(function*(u,g){return A(yield m("difference",[P(u),u,g]))})).apply(this,arguments)}function $(u,g){return z.apply(this,arguments)}function z(){return(z=(0,T.Z)(function*(u,g){return A(yield m("symmetricDifference",[P(u),u,g]))})).apply(this,arguments)}function re(u,g){return ne.apply(this,arguments)}function ne(){return(ne=(0,T.Z)(function*(u,g){return A(yield m("intersect",[P(u),u,g]))})).apply(this,arguments)}function xe(u){return ae.apply(this,arguments)}function ae(){return(ae=(0,T.Z)(function*(u,g=null){const b=Q(u,g);return A(yield m("union",[P(b),b]))})).apply(this,arguments)}function ve(u,g,b,G,Y,q){return se.apply(this,arguments)}function se(){return(se=(0,T.Z)(function*(u,g,b,G,Y,q){return A(yield m("offset",[P(u),u,g,b,G,Y,q]))})).apply(this,arguments)}function we(u,g,b){return ie.apply(this,arguments)}function ie(){return(ie=(0,T.Z)(function*(u,g,b,G=!1){const Y=[P(u),u,g,b,G];return A(yield m("buffer",Y))})).apply(this,arguments)}function Fe(u,g,b,G,Y,q){return ue.apply(this,arguments)}function ue(){return(ue=(0,T.Z)(function*(u,g,b,G,Y,q){const Ne=[P(u),u,g,b,G,Y,q];return A(yield m("geodesicBuffer",Ne))})).apply(this,arguments)}function he(u){var g;return"xmin"in u?u.center:"x"in u?u:null==(g=u.extent)?void 0:g.center}function De(u,g,b){return _e.apply(this,arguments)}function _e(){return(_e=(0,T.Z)(function*(u,g,b){if(null==u)throw new X;const G=u.spatialReference;if(null==(b=null!=b?b:he(u)))throw new X;const Y=u.constructor.fromJSON(yield m("rotate",[G,u,g,b]));return Y.spatialReference=G,Y})).apply(this,arguments)}function be(u,g,b,G){return fe.apply(this,arguments)}function fe(){return(fe=(0,T.Z)(function*(u,g,b,G){return A(yield m("generalize",[P(u),u,g,b,G]))})).apply(this,arguments)}function Re(u,g,b){return ge.apply(this,arguments)}function ge(){return(ge=(0,T.Z)(function*(u,g,b){return A(yield m("densify",[P(u),u,g,b]))})).apply(this,arguments)}function Pe(u,g,b){return me.apply(this,arguments)}function me(){return(me=(0,T.Z)(function*(u,g,b,G=0){return A(yield m("geodesicDensify",[P(u),u,g,b,G]))})).apply(this,arguments)}function Ae(u,g){return m("planarArea",[P(u),u,g])}function Ce(u,g){return m("planarLength",[P(u),u,g])}function Le(u,g,b){return m("geodesicArea",[P(u),u,g,b])}function Oe(u,g,b){return m("geodesicLength",[P(u),u,g,b])}class X extends Error{constructor(){super("Illegal Argument Exception")}}}}]);
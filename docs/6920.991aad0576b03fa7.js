"use strict";var Ge=Object.defineProperty,_e=Object.defineProperties,Be=Object.getOwnPropertyDescriptors,ye=Object.getOwnPropertySymbols,Je=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable,fe=(T,I,r)=>I in T?Ge(T,I,{enumerable:!0,configurable:!0,writable:!0,value:r}):T[I]=r,K=(T,I)=>{for(var r in I||(I={}))Je.call(I,r)&&fe(T,r,I[r]);if(ye)for(var r of ye(I))We.call(I,r)&&fe(T,r,I[r]);return T},ne=(T,I)=>_e(T,Be(I));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6920],{59990:(T,I,r)=>{function O(F){var y;const C=F.layer;return"floorInfo"in C&&(null==(y=C.floorInfo)?void 0:y.floorField)&&"floors"in F.view?U(F.view.floors,C.floorInfo.floorField):null}function l(F,C){var y;return"floorInfo"in C&&(null==(y=C.floorInfo)?void 0:y.floorField)?U(F,C.floorInfo.floorField):null}function U(F,C){if(null==F||!F.length)return null;const y=F.filter(i=>""!==i).map(i=>`'${i}'`);return y.push("''"),`${C} IN (${y.join(",")}) OR ${C} IS NULL`}r.d(I,{c:()=>O,f:()=>l})},13410:(T,I,r)=>{r.d(I,{FN:()=>F,QV:()=>U,ac:()=>y});var O=r(62208),l=r(31283);function U(i,g,u){return g.flatten(({sublayers:p})=>p).length!==i.length||!!i.some(p=>p.originIdOf("minScale")>u||p.originIdOf("maxScale")>u||p.originIdOf("renderer")>u||p.originIdOf("labelingInfo")>u||p.originIdOf("opacity")>u||p.originIdOf("labelsVisible")>u||p.originIdOf("source")>u)||!C(i,g)}function F(i,g,u){return!!i.some(v=>{const p=v.source;return!(!p||"map-layer"===p.type&&p.mapLayerId===v.id&&((0,O.Wi)(p.gdbVersion)||p.gdbVersion===u))||v.originIdOf("renderer")>l.s3.SERVICE||v.originIdOf("labelingInfo")>l.s3.SERVICE||v.originIdOf("opacity")>l.s3.SERVICE||v.originIdOf("labelsVisible")>l.s3.SERVICE})||!C(i,g)}function C(i,g){if(!i||!i.length||(0,O.Wi)(g))return!0;const u=g.slice().reverse().flatten(({sublayers:m})=>m&&m.toArray().reverse()).map(m=>m.id).toArray();if(i.length>u.length)return!1;let v=0;const p=u.length;for(const{id:m}of i){for(;v<p&&u[v]!==m;)v++;if(v>=p)return!1}return!0}function y(i){return!!i&&i.some(g=>null!=g.minScale||g.layerDefinition&&null!=g.layerDefinition.minScale)}},22264:(T,I,r)=>{function O(y,i){return i?"xoffset"in i&&i.xoffset?Math.max(y,Math.abs(i.xoffset)):"yoffset"in i&&i.yoffset?Math.max(y,Math.abs(i.yoffset||0)):y:y}function U(y,i){return"number"==typeof y?y:y&&y.stops&&y.stops.length?function l(y){let i=0,g=0;for(let u=0;u<y.length;u++){const v=y[u].size;"number"==typeof v&&(i+=v,g++)}return i/g}(y.stops):i}function C(y){var v;const i=y&&y.renderer,g="touch"===(y&&y.event&&y.event.pointerType)?9:6;if(!i)return g;const u="visualVariables"in i?function F(y,i){if(!i)return y;const g=i.filter(m=>"size"===m.type).map(m=>{const{maxSize:f,minSize:G}=m;return(U(f,y)+U(G,y))/2});let u=0;const v=g.length;if(0===v)return y;for(let m=0;m<v;m++)u+=g[m];const p=Math.floor(u/v);return Math.max(p,y)}(g,i.visualVariables):g;if("simple"===i.type)return O(u,i.symbol);if("unique-value"===i.type){let p=u;return null==(v=i.uniqueValueInfos)||v.forEach(m=>{p=O(p,m.symbol)}),p}if("class-breaks"===i.type){let p=u;return i.classBreakInfos.forEach(m=>{p=O(p,m.symbol)}),p}return u}r.d(I,{k:()=>C})},81243:(T,I,r)=>{r.d(I,{VF:()=>Q,Uf:()=>we});var O=r(15861),l=r(17626),U=r(88879),F=r(14517),C=r(46160),y=r(26584),i=r(8314),g=r(88159),u=r(62208),v=r(10699),p=r(32917),m=r(16730),f=r(77712),G=r(90912),w=(r(85931),r(76898)),J=r(2004),z=r(83137),W=r(59990),_=r(22264),$=r(84792),ce=r(93555),Y=r(2618),de=r(95737),ie=r(91179),he=r(13410);const se=t=>t.spatialReference.wkid||JSON.stringify(t.spatialReference);function me(t,e){const{dpi:n,gdbVersion:o,geometry:s,geometryPrecision:a,height:d,layerOption:R,mapExtent:c,maxAllowableOffset:h,returnFieldName:x,returnGeometry:b,returnUnformattedValues:E,returnZ:M,spatialReference:D,timeExtent:Z,tolerance:P,width:L}=t.toJSON(),{dynamicLayers:V,layerDefs:j,layerIds:N}=function ge(t){var D,Z;const{mapExtent:e,floors:n,width:o,sublayers:s,layerIds:a,layerOption:d,gdbVersion:R}=t,c=null==(Z=null==(D=null==s?void 0:s.find(P=>null!=P.layer))?void 0:D.layer)?void 0:Z.serviceSublayers,h="popup"===d,x={},b=(0,z.yZ)({extent:e,width:o,spatialReference:null==e?void 0:e.spatialReference}),E=[],M=P=>{if(P.visible&&(0===b||(0===P.minScale||b<=P.minScale)&&(0===P.maxScale||b>=P.maxScale)))if(P.sublayers)P.sublayers.forEach(M);else{if(!1===(null==a?void 0:a.includes(P.id))||h&&(!P.popupTemplate||!P.popupEnabled))return;E.unshift(P)}};if(null==s||s.forEach(M),s&&!E.length)x.layerIds=[];else{const P=(0,he.FN)(E,c,R),L=E.map(V=>{const j=(0,W.f)(n,V);return V.toExportImageJSON(j)});if(P)x.dynamicLayers=JSON.stringify(L);else{if(s){let j=E.map(({id:N})=>N);a&&(j=j.filter(N=>a.includes(N))),x.layerIds=j}else null!=a&&a.length&&(x.layerIds=a);const V=function ve(t,e){const n=!(null==t||!t.length),o=e.filter(s=>null!=s.definitionExpression||n&&null!=s.floorInfo);return o.length?o.map(s=>{const a=(0,W.f)(t,s),d=(0,de._)(a,s.definitionExpression);return{id:s.id,definitionExpression:(0,u.Pt)(d,void 0)}}):null}(n,E);if((0,u.pC)(V)&&V.length){const j={};for(const N of V)N.definitionExpression&&(j[N.id]=N.definitionExpression);Object.keys(j).length&&(x.layerDefs=JSON.stringify(j))}}}return x}(t),pe=e&&(0,u.pC)(e.geometry)?e.geometry:null,A={geometryPrecision:a,maxAllowableOffset:h,returnFieldName:x,returnGeometry:b,returnUnformattedValues:E,returnZ:M,tolerance:P},H=pe&&pe.toJSON()||s;if(A.imageDisplay=`${L},${d},${n}`,o&&(A.gdbVersion=o),H&&(delete H.spatialReference,A.geometry=JSON.stringify(H),A.geometryType=(0,ie.Ji)(H)),D?A.sr=D.wkid||JSON.stringify(D):H&&H.spatialReference?A.sr=se(H):c&&c.spatialReference&&(A.sr=se(c)),A.time=Z?[Z.start,Z.end].join(","):null,c){const{xmin:Ae,ymin:Ze,xmax:De,ymax:Le}=c;A.mapExtent=`${Ae},${Ze},${De},${Le}`}return j&&(A.layerDefs=j),V&&!j&&(A.dynamicLayers=V),A.layers="popup"===R?"visible":R,N&&!V&&(A.layers+=`:${N.join(",")}`),A}var k,be=r(29132),xe=r(97478),oe=r(86810),Ee=r(65234);let S=k=class extends oe.wq{static from(t){return(0,G.TJ)(k,t)}constructor(t){super(t),this.dpi=96,this.floors=null,this.gdbVersion=null,this.geometry=null,this.geometryPrecision=null,this.height=400,this.layerIds=null,this.layerOption="top",this.mapExtent=null,this.maxAllowableOffset=null,this.returnFieldName=!0,this.returnGeometry=!1,this.returnM=!1,this.returnUnformattedValues=!0,this.returnZ=!1,this.spatialReference=null,this.sublayers=null,this.timeExtent=null,this.tolerance=null,this.width=400}};(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"dpi",void 0),(0,l._)([(0,f.Cb)()],S.prototype,"floors",void 0),(0,l._)([(0,f.Cb)({type:String,json:{write:!0}})],S.prototype,"gdbVersion",void 0),(0,l._)([(0,f.Cb)({types:be.qM,json:{read:ie.im,write:!0}})],S.prototype,"geometry",void 0),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"geometryPrecision",void 0),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"height",void 0),(0,l._)([(0,f.Cb)({type:[Number],json:{write:!0}})],S.prototype,"layerIds",void 0),(0,l._)([(0,f.Cb)({type:["top","visible","all","popup"],json:{write:!0}})],S.prototype,"layerOption",void 0),(0,l._)([(0,f.Cb)({type:J.Z,json:{write:!0}})],S.prototype,"mapExtent",void 0),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"maxAllowableOffset",void 0),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"returnFieldName",void 0),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"returnGeometry",void 0),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"returnM",void 0),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"returnUnformattedValues",void 0),(0,l._)([(0,f.Cb)({type:Boolean,json:{write:!0}})],S.prototype,"returnZ",void 0),(0,l._)([(0,f.Cb)({type:Ee.Z,json:{write:!0}})],S.prototype,"spatialReference",void 0),(0,l._)([(0,f.Cb)()],S.prototype,"sublayers",void 0),(0,l._)([(0,f.Cb)({type:xe.Z,json:{write:!0}})],S.prototype,"timeExtent",void 0),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"tolerance",void 0),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],S.prototype,"width",void 0),S=k=(0,l._)([(0,w.j)("esri.rest.support.IdentifyParameters")],S);const le=S;var Ie=r(68653),Oe=r(99433),Ce=r(71774);let B=class extends oe.wq{constructor(t){super(t),this.displayFieldName=null,this.feature=null,this.layerId=null,this.layerName=null}readFeature(t,e){return U.Z.fromJSON({attributes:K({},e.attributes),geometry:K({},e.geometry)})}writeFeature(t,e){if(!t)return;const{attributes:n,geometry:o}=t;n&&(e.attributes=K({},n)),(0,u.pC)(o)&&(e.geometry=o.toJSON(),e.geometryType=Ce.P.toJSON(o.type))}};(0,l._)([(0,f.Cb)({type:String,json:{write:!0}})],B.prototype,"displayFieldName",void 0),(0,l._)([(0,f.Cb)({type:U.Z})],B.prototype,"feature",void 0),(0,l._)([(0,Ie.r)("feature",["attributes","geometry"])],B.prototype,"readFeature",null),(0,l._)([(0,Oe.c)("feature")],B.prototype,"writeFeature",null),(0,l._)([(0,f.Cb)({type:Number,json:{write:!0}})],B.prototype,"layerId",void 0),(0,l._)([(0,f.Cb)({type:String,json:{write:!0}})],B.prototype,"layerName",void 0),B=(0,l._)([(0,w.j)("esri.rest.support.IdentifyResult")],B);const Se=B;function q(){return(q=(0,O.Z)(function*(t,e,n){const o=(e=Fe(e)).geometry?[e.geometry]:[],s=(0,Y.en)(t);return s.path+="/identify",(0,ce.aX)(o).then(a=>{const d=me(e,{geometry:a&&a[0]}),R=(0,Y.cv)(K(ne(K({},s.query),{f:"json"}),d)),c=(0,Y.lA)(R,n);return(0,$.default)(s.path,c).then(Re).then(h=>Me(h,e.sublayers))})})).apply(this,arguments)}function Re(t){const e=t.data;return e.results=e.results||[],e.exceededTransferLimit=Boolean(e.exceededTransferLimit),e.results=e.results.map(n=>Se.fromJSON(n)),e}function Fe(t){return le.from(t)}function Me(t,e){if(null==e||!e.length)return t;const n=new Map;e.forEach(function o(s){n.set(s.id,s),s.sublayers&&s.sublayers.forEach(o)});for(const s of t.results)s.feature.sourceLayer=n.get(s.layerId);return t}var je=r(46679),ae=r(57213),ue=r(10023);let ee=null;function we(t,e){return"tile"===e.type||"map-image"===e.type}let Q=class extends F.Z{constructor(t){var e;super(t),e=this,this._featuresResolutions=new WeakMap,this.highlightGraphics=null,this.highlightGraphicUpdated=null,this.updateHighlightedFeatures=(0,v.Ds)(function(){var n=(0,O.Z)(function*(o){e.destroyed||e.updatingHandles.addPromise(e._updateHighlightedFeaturesGeometries(o).catch(()=>{}))});return function(o){return n.apply(this,arguments)}}())}initialize(){const t=e=>{this.updatingHandles.addPromise(this._updateHighlightedFeaturesSymbols(e).catch(()=>{})),this.updateHighlightedFeatures(this._highlightGeometriesResolution)};this.addHandles([(0,p.on)(()=>this.highlightGraphics,"change",e=>t(e.added),{onListenerAdd:e=>t(e)})])}fetchPopupFeatures(t,e){var n=this;return(0,O.Z)(function*(){var R,c,h;const{layerView:{layer:o,view:{scale:s}}}=n;if(!t)throw new y.Z("fetchPopupFeatures:invalid-area","Nothing to fetch without area",{layer:o});const a=function Ue(t,e,n){var a;const o=[],s=d=>{if(d.visible&&(0===d.minScale||e<=d.minScale)&&(0===d.maxScale||e>=d.maxScale))if(d.sublayers)d.sublayers.forEach(s);else if(d.popupEnabled){const h=(0,ue.V)(d,ne(K({},n),{defaultPopupTemplateEnabled:!1}));(0,u.pC)(h)&&o.unshift({sublayer:d,popupTemplate:h})}};return(null!=(a=null==t?void 0:t.toArray())?a:[]).reverse().map(s),o}(o.sublayers,s,e);if(!a.length)return[];const d=yield function Ve(t,e){return te.apply(this,arguments)}(o,a);if(!((null==(h=null==(c=null==(R=o.capabilities)?void 0:R.operations)?void 0:c.supportsIdentify)||h)&&o.version>=10.5||d))throw new y.Z("fetchPopupFeatures:not-supported","query operation is disabled for this service",{layer:o});return d?n._fetchPopupFeaturesUsingQueries(t,a,e):n._fetchPopupFeaturesUsingIdentify(t,a,e)})()}clearHighlights(){var t;null==(t=this.highlightGraphics)||t.removeAll()}highlight(t){const e=this.highlightGraphics;if(!e)return{remove(){}};let n=null;if(t instanceof U.Z?n=[t]:C.Z.isCollection(t)&&t.length>0?n=t.toArray():Array.isArray(t)&&t.length>0&&(n=t),n=null==n?void 0:n.filter(u.pC),!n||!n.length)return{remove:()=>{}};for(const o of n){const s=o.sourceLayer;null!=s&&"geometryType"in s&&"point"===s.geometryType&&(o.visible=!1)}return e.addMany(n),{remove:()=>{e.removeMany(null!=n?n:[])}}}_updateHighlightedFeaturesSymbols(t){var e=this;return(0,O.Z)(function*(){const{layerView:{view:n},highlightGraphics:o,highlightGraphicUpdated:s}=e;if(o&&s)for(const a of t){const d=a.sourceLayer&&"renderer"in a.sourceLayer&&a.sourceLayer.renderer;a.sourceLayer&&"geometryType"in a.sourceLayer&&"point"===a.sourceLayer.geometryType&&d&&"getSymbolAsync"in d&&d.getSymbolAsync(a).then(function(){var R=(0,O.Z)(function*(c){var b;c||(c=new ae.Z);let h=null;const x="visualVariables"in d?null==(b=d.visualVariables)?void 0:b.find(E=>"size"===E.type):void 0;x&&(ee||(ee=(yield Promise.resolve().then(r.bind(r,81808))).getSize),h=ee(x,a,{view:n.type,scale:n.scale,shape:"simple-marker"===c.type?c.style:null})),h||(h="width"in c&&"height"in c&&null!=c.width&&null!=c.height?Math.max(c.width,c.height):"size"in c?c.size:16),o.includes(a)&&(a.symbol=new ae.Z({style:"square",size:h,xoffset:"xoffset"in c?c.xoffset:0,yoffset:"yoffset"in c?c.yoffset:0}),s(a,"symbol"),a.visible=!0)});return function(c){return R.apply(this,arguments)}}())}})()}_updateHighlightedFeaturesGeometries(t){var e=this;return(0,O.Z)(function*(){const{layerView:{layer:n,view:o},highlightGraphics:s,highlightGraphicUpdated:a}=e;if(e._highlightGeometriesResolution=t,!a||null==s||!s.length||!n.capabilities.operations.supportsQuery)return;const d=e._getTargetResolution(t),R=new Map;for(const x of s)(!e._featuresResolutions.has(x)||e._featuresResolutions.get(x)>d)&&(0,g.s1)(R,x.sourceLayer,()=>new Map).set(x.getObjectId(),x);const c=Array.from(R,([x,b])=>{const E=x.createQuery();return E.objectIds=[...b.keys()],E.outFields=[x.objectIdField],E.returnGeometry=!0,E.maxAllowableOffset=d,E.outSpatialReference=o.spatialReference,x.queryFeatures(E)}),h=yield Promise.all(c);if(!e.destroyed)for(const{features:x}of h)for(const b of x){const M=R.get(b.sourceLayer).get(b.getObjectId());M&&s.includes(M)&&(M.geometry=b.geometry,a(M,"geometry"),e._featuresResolutions.set(M,d))}})()}_getTargetResolution(t){const e=t*(0,m.c9)(this.layerView.view.spatialReference),n=e/16;return n<=10?0:t/e*n}_fetchPopupFeaturesUsingIdentify(t,e,n){var o=this;return(0,O.Z)(function*(){const s=yield o._createIdentifyParameters(t,e,n);if((0,u.Wi)(s))return[];const{results:a}=yield function Pe(t,e,n){return q.apply(this,arguments)}(o.layerView.layer.parsedUrl,s);return a.map(d=>d.feature)})()}_createIdentifyParameters(t,e,n){var o=this;return(0,O.Z)(function*(){const{floors:s,layer:a,timeExtent:d,view:{spatialReference:R,scale:c}}=o.layerView,h=(0,u.pC)(n)?n.event:null;if(!e.length)return null;yield Promise.all(e.map(({sublayer:Z})=>Z.load().catch(()=>{})));const x=Math.min((0,i.Z)("mapservice-popup-identify-max-tolerance"),a.allSublayers.reduce((Z,P)=>P.renderer?(0,_.k)({renderer:P.renderer,event:h}):Z,2)),b=o.createFetchPopupFeaturesQueryGeometry(t,x),E=(0,z.dp)(c,R),M=Math.round(b.width/E),D=new J.Z({xmin:b.center.x-E*M,ymin:b.center.y-E*M,xmax:b.center.x+E*M,ymax:b.center.y+E*M,spatialReference:b.spatialReference});return new le({floors:s,gdbVersion:"gdbVersion"in a?a.gdbVersion:void 0,geometry:t,height:M,layerOption:"popup",mapExtent:D,returnGeometry:!0,spatialReference:R,sublayers:a.sublayers,timeExtent:d,tolerance:x,width:M})})()}_fetchPopupFeaturesUsingQueries(t,e,n){var o=this;return(0,O.Z)(function*(){const{layerView:{floors:s,timeExtent:a}}=o,d=(0,u.pC)(n)?n.event:null,R=e.map(function(){var c=(0,O.Z)(function*({sublayer:h,popupTemplate:x}){if(yield h.load().catch(()=>{}),h.capabilities&&!h.capabilities.operations.supportsQuery)return[];const b=h.createQuery(),E=(0,_.k)({renderer:h.renderer,event:d}),M=o.createFetchPopupFeaturesQueryGeometry(t,E);if(b.geometry=M,b.outFields=yield(0,ue.e)(h,x),b.timeExtent=a,s){const j=s.clone(),N=(0,W.f)(j,h);(0,u.pC)(N)&&(b.where=b.where?`(${b.where}) AND (${N})`:N)}const D=o._getTargetResolution(M.width/E),Z=yield function Te(t){var e;return(null==(e=t.expressionInfos)?void 0:e.length)||Array.isArray(t.content)&&t.content.some(n=>"expression"===n.type)?(0,je.LC)():Promise.resolve()}(x),P="point"===h.geometryType||Z&&Z.arcadeUtils.hasGeometryOperations(x);P||(b.maxAllowableOffset=D);let{features:L}=yield h.queryFeatures(b);const V=P?0:D;L=yield function Ne(t,e){return re.apply(this,arguments)}(h,L);for(const j of L)o._featuresResolutions.set(j,V);return L});return function(h){return c.apply(this,arguments)}}());return(yield(0,v.as)(R)).reverse().reduce((c,h)=>h.value?[...c,...h.value]:c,[]).filter(c=>null!=c)})()}};function te(){return(te=(0,O.Z)(function*(t,e){var n,o;if(null!=(o=null==(n=t.capabilities)?void 0:n.operations)&&o.supportsQuery)return!0;try{return yield Promise.any(e.map(({sublayer:s})=>s.load().then(()=>s.capabilities.operations.supportsQuery)))}catch(s){return!1}})).apply(this,arguments)}function re(){return(re=(0,O.Z)(function*(t,e){const n=t.renderer;return n&&"defaultSymbol"in n&&!n.defaultSymbol&&(e=n.valueExpression?yield Promise.all(e.map(o=>n.getSymbolAsync(o).then(s=>s?o:null))).then(o=>o.filter(s=>null!=s)):e.filter(o=>null!=n.getSymbol(o))),e})).apply(this,arguments)}(0,l._)([(0,f.Cb)({constructOnly:!0})],Q.prototype,"createFetchPopupFeaturesQueryGeometry",void 0),(0,l._)([(0,f.Cb)({constructOnly:!0})],Q.prototype,"layerView",void 0),(0,l._)([(0,f.Cb)({constructOnly:!0})],Q.prototype,"highlightGraphics",void 0),(0,l._)([(0,f.Cb)({constructOnly:!0})],Q.prototype,"highlightGraphicUpdated",void 0),(0,l._)([(0,f.Cb)({constructOnly:!0})],Q.prototype,"updatingHandles",void 0),Q=(0,l._)([(0,w.j)("esri.views.layers.support.MapService")],Q)},10023:(T,I,r)=>{r.d(I,{V:()=>y,e:()=>F});var O=r(15861),l=r(62208),U=r(36630);function F(i){return C.apply(this,arguments)}function C(){return(C=(0,O.Z)(function*(i,g=i.popupTemplate){var J,z;if((0,l.Wi)(g))return[];const u=yield g.getRequiredFields(i.fieldsIndex),{lastEditInfoEnabled:v}=g,{objectIdField:p,typeIdField:m,globalIdField:f,relationships:G}=i;if(u.includes("*"))return["*"];const X=v?yield(0,U.CH)(i):[],w=(0,U.Q0)(i.fieldsIndex,[...u,...X]);return m&&w.push(m),w&&p&&(null==(J=i.fieldsIndex)?void 0:J.has(p))&&!w.includes(p)&&w.push(p),w&&f&&(null==(z=i.fieldsIndex)?void 0:z.has(f))&&!w.includes(f)&&w.push(f),G&&G.forEach(W=>{var $;const{keyField:_}=W;w&&_&&(null==($=i.fieldsIndex)?void 0:$.has(_))&&!w.includes(_)&&w.push(_)}),w})).apply(this,arguments)}function y(i,g){return i.popupTemplate?i.popupTemplate:(0,l.pC)(g)&&g.defaultPopupTemplateEnabled&&(0,l.pC)(i.defaultPopupTemplate)?i.defaultPopupTemplate:null}},94672:(T,I,r)=>{r.d(I,{D:()=>i,K:()=>y}),r(29132);var l=r(62208),U=r(16730),F=r(22264),C=r(2004);function y(u,v,p,m=new C.Z){var W;let f=0;if("2d"===p.type)f=v*(null!=(W=p.resolution)?W:0);else if("3d"===p.type){const _=p.overlayPixelSizeInMapUnits(u),$=p.basemapSpatialReference;f=(0,l.pC)($)&&!$.equals(p.spatialReference)?(0,U.c9)($)/(0,U.c9)(p.spatialReference):v*_}const G=u.x-f,X=u.y-f,w=u.x+f,J=u.y+f,{spatialReference:z}=p;return m.xmin=Math.min(G,w),m.ymin=Math.min(X,J),m.xmax=Math.max(G,w),m.ymax=Math.max(X,J),m.spatialReference=z,m}function i(u,v,p){const m=p.toMap(u);return!(0,l.Wi)(m)&&y(m,(0,F.k)(),p,g).intersects(v)}const g=new C.Z}}]);
"use strict";var Re=Object.defineProperty,Ee=Object.defineProperties,Ne=Object.getOwnPropertyDescriptors,te=Object.getOwnPropertySymbols,Pe=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,re=(u,a,i)=>a in u?Re(u,a,{enumerable:!0,configurable:!0,writable:!0,value:i}):u[a]=i,ie=(u,a)=>{for(var i in a||(a={}))Pe.call(a,i)&&re(u,i,a[i]);if(te)for(var i of te(a))Ve.call(a,i)&&re(u,i,a[i]);return u},se=(u,a)=>Ee(u,Ne(a));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6189],{6189:(u,a,i)=>{i.r(a),i.d(a,{default:()=>Le});var B=i(15861),t=i(17626),C=i(46160),oe=i(46882),W=i(26584),p=i(58817),le=i(47877),X=i(63290),H=i(62208),ne=i(99959),ae=i(10699),de=i(21726),s=i(77712),z=(i(90912),i(68653)),d=i(76898),ue=i(65234),ye=i(44917),D=i(49410),h=i(20925),pe=i(50085),ce=i(65088),ve=i(49286),he=i(6647),ge=i(99555),T=i(10157),c=i(86810),fe=i(35948);i(85931),i(8314);let F=class extends c.wq{constructor(){super(...arguments),this.type=null}};(0,t._)([(0,s.Cb)({type:String,readOnly:!0,json:{write:!0}})],F.prototype,"type",void 0),F=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterAuthoringInfo")],F);const Y=F;var A;let f=A=class extends c.wq{constructor(){super(...arguments),this.filterType=null,this.filterValues=null}clone(){return new A({filterType:this.filterType,filterValues:(0,p.d9)(this.filterValues)})}};var M;(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],f.prototype,"filterType",void 0),(0,t._)([(0,s.Cb)({type:[String],json:{write:!0}})],f.prototype,"filterValues",void 0),f=A=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterAuthoringInfoType")],f);const be=C.Z.ofType(f);let x=M=class extends c.wq{clone(){return new M({filterTypes:(0,p.d9)(this.filterTypes)})}};var Z;(0,t._)([(0,s.Cb)({type:be,json:{write:!0}})],x.prototype,"filterTypes",void 0),x=M=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterAuthoringInfoBlock")],x);const Be=C.Z.ofType(x);let m=Z=class extends Y{constructor(){super(...arguments),this.type="checkbox"}clone(){return new Z({filterBlocks:(0,p.d9)(this.filterBlocks)})}};(0,t._)([(0,s.Cb)({type:["checkbox"]})],m.prototype,"type",void 0),(0,t._)([(0,s.Cb)({type:Be,json:{write:!0}})],m.prototype,"filterBlocks",void 0),m=Z=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterAuthoringInfoCheckbox")],m);const Q=m;let j=class extends c.wq{};(0,t._)([(0,s.Cb)({readOnly:!0,json:{read:!1}})],j.prototype,"type",void 0),j=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterMode")],j);const I=j;var L;let O=L=class extends I{constructor(){super(...arguments),this.type="solid"}clone(){return new L}};(0,t._)([(0,s.Cb)({type:["solid"],readOnly:!0,json:{write:!0}})],O.prototype,"type",void 0),O=L=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterModeSolid")],O);const R=O;var E,Ce=i(55342),Fe=i(61261);let b=E=class extends I{constructor(){super(...arguments),this.type="wire-frame",this.edges=null}clone(){return new E({edges:(0,p.d9)(this.edges)})}};(0,t._)([(0,Ce.J)({wireFrame:"wire-frame"})],b.prototype,"type",void 0),(0,t._)([(0,s.Cb)(Fe.Z)],b.prototype,"edges",void 0),b=E=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterModeWireFrame")],b);const $=b;var N;let w=N=class extends I{constructor(){super(...arguments),this.type="x-ray"}clone(){return new N}};(0,t._)([(0,s.Cb)({type:["x-ray"],readOnly:!0,json:{write:!0}})],w.prototype,"type",void 0),w=N=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterModeXRay")],w);const k=w;var P;const xe={nonNullable:!0,types:{key:"type",base:I,typeMap:{solid:R,"wire-frame":$,"x-ray":k}},json:{read:e=>{switch(e&&e.type){case"solid":return R.fromJSON(e);case"wireFrame":return $.fromJSON(e);case"x-ray":return k.fromJSON(e);default:return}},write:{enabled:!0,isRequired:!0}}};let g=P=class extends c.wq{constructor(){super(...arguments),this.filterExpression=null,this.filterMode=new R,this.title=""}clone(){return new P({filterExpression:this.filterExpression,filterMode:(0,p.d9)(this.filterMode),title:this.title})}};var V;(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],g.prototype,"filterExpression",void 0),(0,t._)([(0,s.Cb)(xe)],g.prototype,"filterMode",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],g.prototype,"title",void 0),g=P=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilterBlock")],g);const Ie=C.Z.ofType(g);let v=V=class extends c.wq{constructor(){super(...arguments),this.description=null,this.filterBlocks=null,this.id=(0,fe.D)(),this.name=null}clone(){return new V({description:this.description,filterBlocks:(0,p.d9)(this.filterBlocks),id:this.id,name:this.name,filterAuthoringInfo:(0,p.d9)(this.filterAuthoringInfo)})}};(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],v.prototype,"description",void 0),(0,t._)([(0,s.Cb)({type:Ie,json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"filterBlocks",void 0),(0,t._)([(0,s.Cb)({types:{key:"type",base:Y,typeMap:{checkbox:Q}},json:{read:e=>"checkbox"===(e&&e.type)?Q.fromJSON(e):null,write:!0}})],v.prototype,"filterAuthoringInfo",void 0),(0,t._)([(0,s.Cb)({type:String,constructOnly:!0,json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"id",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:{enabled:!0,isRequired:!0}}})],v.prototype,"name",void 0),v=V=(0,t._)([(0,d.j)("esri.layers.support.BuildingFilter")],v);const Oe=v;var we=i(84792),Te=i(47996),Ae=i(60330);const Me=X.Z.getLogger("esri.layers.support.BuildingSummaryStatistics");let y=class extends c.wq{constructor(){super(...arguments),this.fieldName=null,this.modelName=null,this.label=null,this.min=null,this.max=null,this.mostFrequentValues=null,this.subLayerIds=null}};(0,t._)([(0,s.Cb)({type:String})],y.prototype,"fieldName",void 0),(0,t._)([(0,s.Cb)({type:String})],y.prototype,"modelName",void 0),(0,t._)([(0,s.Cb)({type:String})],y.prototype,"label",void 0),(0,t._)([(0,s.Cb)({type:Number})],y.prototype,"min",void 0),(0,t._)([(0,s.Cb)({type:Number})],y.prototype,"max",void 0),(0,t._)([(0,s.Cb)({json:{read:e=>Array.isArray(e)&&(e.every(r=>"string"==typeof r)||e.every(r=>"number"==typeof r))?e.slice():null}})],y.prototype,"mostFrequentValues",void 0),(0,t._)([(0,s.Cb)({type:[Number]})],y.prototype,"subLayerIds",void 0),y=(0,t._)([(0,d.j)("esri.layers.support.BuildingFieldStatistics")],y);let S=class extends(Te.Z.LoadableMixin((0,Ae.v)(c.wq))){constructor(){super(...arguments),this.url=null}get fields(){return this.loaded||"loading"===this.loadStatus?this._get("fields"):(Me.error("building summary statistics are not loaded"),null)}load(e){const r=(0,H.pC)(e)?e.signal:null;return this.addResolvingPromise(this._fetchService(r)),Promise.resolve(this)}_fetchService(e){var r=this;return(0,B.Z)(function*(){const o=(yield(0,we.default)(r.url,{query:{f:"json"},responseType:"json",signal:e})).data;r.read(o,{origin:"service"})})()}};(0,t._)([(0,s.Cb)({constructOnly:!0,type:String})],S.prototype,"url",void 0),(0,t._)([(0,s.Cb)({readOnly:!0,type:[y],json:{read:{source:"summary"}}})],S.prototype,"fields",null),S=(0,t._)([(0,d.j)("esri.layers.support.BuildingSummaryStatistics")],S);const q=S;var K=i(13812),Ze=i(74711);const J=X.Z.getLogger("esri.layers.BuildingSceneLayer"),_=C.Z.ofType(Oe),U=(0,p.d9)(h.Z.sublayersProperty);U.json.origins["web-scene"]={type:[D.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}},U.json.origins["portal-item"]={type:[D.Z],write:{enabled:!0,overridePolicy:()=>({enabled:!1})}};let n=class extends((0,T.Vt)((0,ce.Y)((0,ve.q)((0,he.I)((0,ge.M)((0,ne.R)((0,pe.V)(ye.Z)))))))){constructor(e){super(e),this.operationalLayerType="BuildingSceneLayer",this.allSublayers=new oe.Z({getCollections:()=>[this.sublayers],getChildrenFunction:r=>"building-group"===r.type?r.sublayers:null}),this.sublayers=null,this.sublayerOverrides=null,this.filters=new _,this.activeFilterId=null,this.summaryStatistics=null,this.outFields=null,this.type="building-scene"}normalizeCtorArgs(e){return"string"==typeof e?{url:e}:e}destroy(){this.allSublayers.destroy()}readSublayers(e,r,o){const l=h.Z.readSublayers(e,r,o);return h.Z.forEachSublayer(l,G=>G.layer=this),this.sublayerOverrides&&(this.applySublayerOverrides(l,this.sublayerOverrides),this.sublayerOverrides=null),l}applySublayerOverrides(e,{overrides:r,context:o}){h.Z.forEachSublayer(e,l=>l.read(r.get(l.id),o))}readSublayerOverrides(e,r){const o=new Map;for(const l of e)null!=l&&"object"==typeof l&&"number"==typeof l.id?o.set(l.id,l):r.messages.push(new W.Z("building-scene-layer:invalid-sublayer-override","Invalid value for sublayer override. Not an object or no id specified.",{value:l}));return{overrides:o,context:r}}writeSublayerOverrides(e,r,o){const l=[];h.Z.forEachSublayer(this.sublayers,G=>{const ee=G.write({},o);Object.keys(ee).length>1&&l.push(ee)}),l.length>0&&(r.sublayers=l)}writeUnappliedOverrides(e,r){r.sublayers=[],e.overrides.forEach(o=>{r.sublayers.push((0,p.d9)(o))})}write(e,r){return e=super.write(e,r),!r||"web-scene"!==r.origin&&"portal-item"!==r.origin||(this.sublayers?this.writeSublayerOverrides(this.sublayers,e,r):this.sublayerOverrides&&this.writeUnappliedOverrides(this.sublayerOverrides,e)),e}read(e,r){if(super.read(e,r),r&&("web-scene"===r.origin||"portal-item"===r.origin)&&null!=e&&Array.isArray(e.sublayers)){const o=this.readSublayerOverrides(e.sublayers,r);this.sublayers?this.applySublayerOverrides(this.sublayers,o):this.sublayerOverrides=o}}readSummaryStatistics(e,r){if("string"==typeof r.statisticsHRef){const o=(0,de.v_)(this.parsedUrl.path,r.statisticsHRef);return new q({url:o})}return null}set elevationInfo(e){this._set("elevationInfo",e),this._validateElevationInfo()}load(e){const r=(0,H.pC)(e)?e.signal:null,o=this.loadFromPortal({supportedTypes:["Scene Service"]},e).catch(ae.r9).then(()=>this._fetchService(r)).then(()=>this._fetchAssociatedFeatureService(r));return this.addResolvingPromise(o),Promise.resolve(this)}loadAll(){return(0,le.G)(this,e=>{h.Z.forEachSublayer(this.sublayers,r=>{"building-group"!==r.type&&e(r)}),this.summaryStatistics&&e(this.summaryStatistics)})}saveAs(e,r){var o=this;return(0,B.Z)(function*(){return o._debouncedSaveOperations(T.xp.SAVE_AS,se(ie({},r),{getTypeKeywords:()=>o._getTypeKeywords(),portalItemLayerType:"building-scene"}),e)})()}save(){var e=this;return(0,B.Z)(function*(){const r={getTypeKeywords:()=>e._getTypeKeywords(),portalItemLayerType:"building-scene"};return e._debouncedSaveOperations(T.xp.SAVE,r)})()}validateLayer(e){if(!e.layerType||"Building"!==e.layerType)throw new W.Z("buildingscenelayer:layer-type-not-supported","BuildingSceneLayer does not support this layer type",{layerType:e.layerType})}_getTypeKeywords(){return["Building"]}_validateElevationInfo(){const e=this.elevationInfo;e&&("absolute-height"!==e.mode&&J.warn(".elevationInfo=","Building scene layers only support absolute-height elevation mode"),e.featureExpressionInfo&&"0"!==e.featureExpressionInfo.expression&&J.warn(".elevationInfo=","Building scene layers do not support featureExpressionInfo"))}_fetchAssociatedFeatureService(e){var r=this;return(0,B.Z)(function*(){const o=new Ze.W(r.parsedUrl,r.portalItem,r.apiKey,e);try{r.associatedFeatureServiceItem=yield o.fetchPortalItem()}catch(l){J.warn("Associated feature service item could not be loaded",l)}})()}};(0,t._)([(0,s.Cb)({type:["BuildingSceneLayer"]})],n.prototype,"operationalLayerType",void 0),(0,t._)([(0,s.Cb)({readOnly:!0})],n.prototype,"allSublayers",void 0),(0,t._)([(0,s.Cb)(U)],n.prototype,"sublayers",void 0),(0,t._)([(0,z.r)("service","sublayers")],n.prototype,"readSublayers",null),(0,t._)([(0,s.Cb)({type:_,nonNullable:!0,json:{write:!0}})],n.prototype,"filters",void 0),(0,t._)([(0,s.Cb)({type:String,json:{write:!0}})],n.prototype,"activeFilterId",void 0),(0,t._)([(0,s.Cb)({readOnly:!0,type:q})],n.prototype,"summaryStatistics",void 0),(0,t._)([(0,z.r)("summaryStatistics",["statisticsHRef"])],n.prototype,"readSummaryStatistics",null),(0,t._)([(0,s.Cb)({type:[String],json:{read:!1}})],n.prototype,"outFields",void 0),(0,t._)([(0,s.Cb)(K.vg)],n.prototype,"fullExtent",void 0),(0,t._)([(0,s.Cb)({type:["show","hide","hide-children"]})],n.prototype,"listMode",void 0),(0,t._)([(0,s.Cb)((0,K.Lx)(ue.Z))],n.prototype,"spatialReference",void 0),(0,t._)([(0,s.Cb)(K.PV)],n.prototype,"elevationInfo",null),(0,t._)([(0,s.Cb)({json:{read:!1},readOnly:!0})],n.prototype,"type",void 0),(0,t._)([(0,s.Cb)()],n.prototype,"associatedFeatureServiceItem",void 0),n=(0,t._)([(0,d.j)("esri.layers.BuildingSceneLayer")],n);const Le=n}}]);
"use strict";var V=Object.defineProperty,Z=Object.defineProperties,$=Object.getOwnPropertyDescriptors,D=Object.getOwnPropertySymbols,J=Object.prototype.hasOwnProperty,N=Object.prototype.propertyIsEnumerable,O=(_,i,e)=>i in _?V(_,i,{enumerable:!0,configurable:!0,writable:!0,value:e}):_[i]=e,p=(_,i)=>{for(var e in i||(i={}))J.call(i,e)&&O(_,e,i[e]);if(D)for(var e of D(i))N.call(i,e)&&O(_,e,i[e]);return _},m=(_,i)=>Z(_,$(i));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[5810],{75810:(_,i,e)=>{e.r(i),e.d(i,{default:()=>K});var h=e(15861),l=e(17626),v=e(84792),P=e(26584),M=e(63290),E=e(62208),C=e(99959),y=e(10699),T=e(21726),n=e(77712),g=(e(85931),e(8314),e(90912),e(68653)),I=e(76898),L=e(79334),S=e(44917),U=e(5143),j=e(65088),A=e(49286),f=e(6647),R=e(13812),B=e(36596);const u=M.Z.getLogger("esri.layers.ElevationLayer");let a=class extends((0,U.Z)((0,j.Y)((0,A.q)((0,f.I)((0,C.R)(S.Z)))))){constructor(...r){super(...r),this.copyright=null,this.heightModelInfo=null,this.path=null,this.opacity=1,this.operationalLayerType="ArcGISTiledElevationServiceLayer",this.sourceJSON=null,this.type="elevation",this.url=null,this.version=null,this._lercDecoder=(0,B.w)()}normalizeCtorArgs(r,t){return"string"==typeof r?p({url:r},t):r}destroy(){this._lercDecoder=(0,E.RY)(this._lercDecoder)}set minScale(r){this.constructed&&u.warn(`${this.declaredClass}.minScale support has been removed (since 4.5)`)}get minScale(){}set maxScale(r){this.constructed&&u.warn(`${this.declaredClass}.maxScale support has been removed (since 4.5)`)}get maxScale(){}readVersion(r,t){let s=t.currentVersion;return s||(s=9.3),s}load(r){const t=(0,E.pC)(r)?r.signal:null;return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["Image Service"],supportsData:!1,validateItem:s=>{for(let o=0;o<s.typeKeywords.length;o++)if("elevation 3d layer"===s.typeKeywords[o].toLowerCase())return!0;throw new P.Z("portal:invalid-layer-item-type","Invalid layer item type '${type}', expected '${expectedType}' ",{type:"Image Service",expectedType:"Image Service Elevation 3D Layer"})}},r).catch(y.r9).then(()=>this._fetchImageService(t))),Promise.resolve(this)}fetchTile(r,t,s,o){const c=(0,E.pC)((o=o||{signal:null}).signal)?o.signal:o.signal=(new AbortController).signal,W={responseType:"array-buffer",signal:c},x={noDataValue:o.noDataValue,returnFileInfo:!0};return this.load().then(()=>this._fetchTileAvailability(r,t,s,o)).then(()=>(0,v.default)(this.getTileUrl(r,t,s),W)).then(d=>this._lercDecoder.decode(d.data,x,c)).then(d=>({values:d.pixelData,width:d.width,height:d.height,maxZError:d.fileInfo.maxZError,noDataValue:d.noDataValue,minValue:d.minValue,maxValue:d.maxValue}))}getTileUrl(r,t,s){const o=!this.tilemapCache&&this.supportsBlankTile,c=(0,T.B7)(m(p({},this.parsedUrl.query),{blankTile:!o&&null}));return`${this.parsedUrl.path}/tile/${r}/${t}/${s}${c?"?"+c:""}`}queryElevation(r,t){var s=this;return(0,h.Z)(function*(){const{ElevationQuery:o}=yield e.e(2493).then(e.bind(e,42493));return(0,y.k_)(t),(new o).query(s,r,t)})()}createElevationSampler(r,t){var s=this;return(0,h.Z)(function*(){const{ElevationQuery:o}=yield e.e(2493).then(e.bind(e,42493));return(0,y.k_)(t),(new o).createSampler(s,r,t)})()}_fetchTileAvailability(r,t,s,o){return this.tilemapCache?this.tilemapCache.fetchAvailability(r,t,s,o):Promise.resolve("unknown")}_fetchImageService(r){var t=this;return(0,h.Z)(function*(){if(t.sourceJSON)return t.sourceJSON;const s={query:p({f:"json"},t.parsedUrl.query),responseType:"json",signal:r},o=yield(0,v.default)(t.parsedUrl.path,s);o.ssl&&(t.url=t.url.replace(/^http:/i,"https:")),t.sourceJSON=o.data,t.read(o.data,{origin:"service",url:t.parsedUrl})})()}get hasOverriddenFetchTile(){return!this.fetchTile.__isDefault__}};(0,l._)([(0,n.Cb)({json:{read:{source:"copyrightText"}}})],a.prototype,"copyright",void 0),(0,l._)([(0,n.Cb)({readOnly:!0,type:L.Z})],a.prototype,"heightModelInfo",void 0),(0,l._)([(0,n.Cb)({type:String,json:{origins:{"web-scene":{read:!0,write:!0}},read:!1}})],a.prototype,"path",void 0),(0,l._)([(0,n.Cb)({type:["show","hide"]})],a.prototype,"listMode",void 0),(0,l._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],a.prototype,"minScale",null),(0,l._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{service:{read:!1,write:!1},"portal-item":{read:!1,write:!1},"web-document":{read:!1,write:!1}}}})],a.prototype,"maxScale",null),(0,l._)([(0,n.Cb)({json:{read:!1,write:!1,origins:{"web-document":{read:!1,write:!1}}}})],a.prototype,"opacity",void 0),(0,l._)([(0,n.Cb)({type:["ArcGISTiledElevationServiceLayer"]})],a.prototype,"operationalLayerType",void 0),(0,l._)([(0,n.Cb)()],a.prototype,"sourceJSON",void 0),(0,l._)([(0,n.Cb)({json:{read:!1},value:"elevation",readOnly:!0})],a.prototype,"type",void 0),(0,l._)([(0,n.Cb)(R.HQ)],a.prototype,"url",void 0),(0,l._)([(0,n.Cb)()],a.prototype,"version",void 0),(0,l._)([(0,g.r)("version",["currentVersion"])],a.prototype,"readVersion",null),a=(0,l._)([(0,I.j)("esri.layers.ElevationLayer")],a),a.prototype.fetchTile.__isDefault__=!0;const K=a}}]);
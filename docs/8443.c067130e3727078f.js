"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8443],{36554:(Se,z,o)=>{o.r(z),o.d(z,{default:()=>Pe});var L=o(15861),l=o(17626),X=(o(29132),o(73281)),Q=(o(4832),o(49067),o(96794),o(69747),o(40425),o(69357),o(40342),o(14726),o(33474),o(32088)),_=o(99959),p=o(77712),K=(o(85931),o(8314),o(90912),o(76898)),J=o(71774),V=o(44917),H=o(26584),x=o(47996),D=o(62208),g=o(89628),ee=o(17253),G=o(65234);let R=class extends x.Z{constructor(){super(...arguments),this.featureDefinition=null,this.type="ogc-feature"}load(r){return this.addResolvingPromise(this._loadOGCServices(this.layer,r)),this.when()}getFeatureDefinition(){const{featureDefinition:{collection:r,layerDefinition:i,spatialReference:n,supportedCrs:d},layer:{apiKey:c,capabilities:S,customParameters:v}}=this;return{capabilities:S,collection:r,layerDefinition:i,queryParameters:{apiKey:c,customParameters:v},spatialReference:n,supportedCrs:d}}queryExtent(r,i={}){return null}queryFeatureCount(r,i={}){return null}queryFeatures(r,i={}){return this.queryFeaturesJSON(r,i).then(n=>ee.default.fromJSON(n))}queryFeaturesJSON(r,i={}){const n=this.getFeatureDefinition();return this.load(i).then(()=>(0,g.yN)(n,r,i))}queryObjectIds(r,i={}){return null}serviceSupportsSpatialReference(r){return!(!r.isWGS84&&!r.isWebMercator&&!this.featureDefinition.supportedCrs[r.wkid])}_conformsToType(r,i){var d;const n=new RegExp(`^${i}$`,"i");return null!=(d=r.conformsTo.some(c=>n.test(c)))&&d}_getCapabilities(r,i){var d,c,S,v,h,M,Y;const n=(0,D.pC)(i)?null==(d=i.components)?void 0:d.parameters:null;return{analytics:{supportsCacheHint:!1},attachment:null,data:{isVersioned:!1,supportsAttachment:!1,supportsM:!1,supportsZ:r},metadata:{supportsAdvancedFieldProperties:!1},operations:{supportsCalculate:!1,supportsTruncate:!1,supportsValidateSql:!1,supportsAdd:!1,supportsDelete:!1,supportsEditing:!1,supportsChangeTracking:!1,supportsQuery:!1,supportsQueryAnalytics:!1,supportsQueryAttachments:!1,supportsQueryTopFeatures:!1,supportsResizeAttachments:!1,supportsSync:!1,supportsUpdate:!1,supportsExceedsLimitStatistics:!1},query:{maxRecordCount:null!=(Y=null!=(M=null==(S=null==(c=null==n?void 0:n.limit)?void 0:c.schema)?void 0:S.maximum)?M:null==(h=null==(v=null==n?void 0:n.limitFeatures)?void 0:v.schema)?void 0:h.maximum)?Y:5e3,maxRecordCountFactor:void 0,standardMaxRecordCount:void 0,supportsCacheHint:!1,supportsCentroid:!1,supportsDisjointSpatialRelationship:!1,supportsDistance:!1,supportsDistinct:!1,supportsExtent:!1,supportsFormatPBF:!1,supportsGeometryProperties:!1,supportsHavingClause:!1,supportsHistoricMoment:!1,supportsMaxRecordCountFactor:!1,supportsOrderBy:!1,supportsPagination:!1,supportsPercentileStatistics:!1,supportsQuantization:!1,supportsQuantizationEditMode:!1,supportsQueryByOthers:!1,supportsQueryGeometry:!1,supportsResultType:!1,supportsStandardizedQueriesOnly:!1,supportsTopFeaturesQuery:!1,supportsStatistics:!1,supportsSpatialAggregationStatistics:!1,supportedSpatialAggregationStatistics:{envelope:!1,centroid:!1,convexHull:!1},supportsDefaultSpatialReference:!1,supportsCompactGeometry:!1,supportsSqlExpression:!1,tileMaxRecordCount:void 0},queryRelated:{supportsCount:!1,supportsOrderBy:!1,supportsPagination:!1,supportsCacheHint:!1},queryTopFeatures:{supportsCacheHint:!1},editing:{supportsDeleteByAnonymous:!1,supportsDeleteByOthers:!1,supportsGeometryUpdate:!1,supportsGlobalId:!1,supportsReturnServiceEditsInSourceSpatialReference:!1,supportsRollbackOnFailure:!1,supportsUpdateByAnonymous:!1,supportsUpdateByOthers:!1,supportsUploadWithItemId:!1,supportsUpdateWithoutM:!1}}}_getExtent(r){var h;const i=null==(h=r.extent)?void 0:h.spatial;if(!i)return null;const n=i.bbox[0],d=4===n.length;return{xmin:n[0],ymin:n[1],xmax:d?n[2]:n[3],ymax:d?n[3]:n[4],zmin:d?void 0:n[2],zmax:d?void 0:n[5],spatialReference:G.Z.WGS84.toJSON()}}_getStorageSpatialReference(r){var d;const i=null!=(d=r.storageCrs)?d:g.$9,n=(0,g.d)(i);return(0,D.Wi)(n)?G.Z.WGS84:new G.Z({wkid:n})}_getSupportedSpatialReferences(r,i){var v;const n="#/crs",d=null!=(v=r.crs)?v:[g.$9],c=d.includes(n)?d.filter(h=>h!==n).concat(i.crs):d,S=/^http:\/\/www\.opengis.net\/def\/crs\/epsg\/.*\/3785$/i;return c.filter(h=>!S.test(h))}_loadOGCServices(r,i){var n=this;return(0,L.Z)(function*(){const d=(0,D.pC)(i)?i.signal:null,{apiKey:c,collectionId:S,customParameters:v,fields:h,geometryType:M,hasZ:Y,objectIdField:Fe,timeInfo:oe,url:Oe}=r,Re={fields:null==h?void 0:h.map(B=>B.toJSON()),geometryType:J.P$.toJSON(M),hasZ:Y,objectIdField:Fe,timeInfo:null==oe?void 0:oe.toJSON()},W={apiKey:c,customParameters:v,signal:d},re=yield(0,g.gp)(Oe,W),[me,ve]=yield Promise.all([(0,g.G4)(re,W),(0,g.j)(re,W)]);if(!n._conformsToType(me,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/geojson"))throw new H.Z("ogc-feature-layer:no-geojson-support","Server does not support geojson");const A=ve.collections.find(B=>B.id===S);if(!A)throw new H.Z("ogc-feature-layer:collection-not-found","Server does not contain the named collection");const Ie=n._conformsToType(me,"http://www.opengis.net/spec/ogcapi-features-1/1.0/conf/oas30")?yield(0,g.eS)(re,W):null,ne=yield(0,g.w9)(A,Re,W),Te=n._getCapabilities(ne.hasZ,Ie),be=n._getExtent(A),xe=n._getStorageSpatialReference(A).toJSON(),De=n._getSupportedSpatialReferences(A,ve),je=new RegExp(`^${g.Lu}`,"i"),se={};for(const B of De){const ie=(0,g.d)(B);(0,D.pC)(ie)&&(se[ie]||(se[ie]=B.replace(je,"")))}ne.extent=be,n.featureDefinition={capabilities:Te,collection:A,layerDefinition:ne,queryParameters:{},spatialReference:xe,supportedCrs:se}})()}};(0,l._)([(0,p.Cb)()],R.prototype,"featureDefinition",void 0),(0,l._)([(0,p.Cb)({constructOnly:!0})],R.prototype,"layer",void 0),(0,l._)([(0,p.Cb)()],R.prototype,"type",void 0),R=(0,l._)([(0,K.j)("esri.layers.graphics.sources.OGCFeatureSource")],R);var te=o(50085),e=o(552),t=o(50107),s=o(35126),a=o(49286),y=o(32629),I=o(6647),F=o(30346),m=o(99555),O=o(97941),f=o(13812),j=o(47717),Z=o(41638),E=o(36255),U=o(55911),C=o(36630),T=o(170),b=o(62667),P=o(84952),$=o(49430),w=o(2004);const Ce=(0,U.v)();let u=class extends((0,te.V)((0,t.N)((0,s.b)((0,e.h)((0,y.c)((0,O.n)((0,m.M)((0,a.q)((0,I.I)((0,F.Q)((0,_.R)(V.Z)))))))))))){constructor(r){super(r),this.collectionId=null,this.copyright=null,this.definitionExpression=null,this.description=null,this.displayField=null,this.elevationInfo=null,this.featureReduction=null,this.fields=null,this.fieldsIndex=null,this.fullExtent=null,this.geometryType=null,this.hasZ=void 0,this.labelingInfo=null,this.labelsVisible=!0,this.legendEnabled=!0,this.objectIdField=null,this.operationalLayerType="OGCFeatureLayer",this.popupEnabled=!0,this.popupTemplate=null,this.screenSizePerspectiveEnabled=!0,this.source=new R({layer:this}),this.spatialReference=null,this.title=null,this.type="ogc-feature",this.typeIdField=null,this.types=null,this.url=null}destroy(){var r;null==(r=this.source)||r.destroy()}load(r){return this.addResolvingPromise(this.loadFromPortal({supportedTypes:["OGCFeatureServer"]},r).then(()=>this._fetchService(r))),this.when()}get defaultPopupTemplate(){return this.createPopupTemplate()}get isTable(){return this.loaded&&null==this.geometryType}set renderer(r){(0,C.YN)(r,this.fieldsIndex),this._set("renderer",r)}on(r,i){return super.on(r,i)}createPopupTemplate(r){return(0,$.eZ)(this,r)}createQuery(){return new P.Z}getField(r){return this.fieldsIndex.get(r)}getFieldDomain(r,i){var v;let n,d=!1;const c=null==(v=null==i?void 0:i.feature)?void 0:v.attributes,S=this.typeIdField&&(null==c?void 0:c[this.typeIdField]);return null!=S&&this.types&&(d=this.types.some(h=>{var M;return h.id==S&&(n=null==(M=h.domains)?void 0:M[r],"inherited"===(null==n?void 0:n.type)&&(n=this._getLayerDomain(r)),!0)})),d||n||(n=this._getLayerDomain(r)),n}queryFeatures(r,i){return this.load().then(()=>this.source.queryFeatures(P.Z.from(r)||this.createQuery(),i)).then(n=>{var d;return null==(d=null==n?void 0:n.features)||d.forEach(c=>{c.layer=c.sourceLayer=this}),n})}serviceSupportsSpatialReference(r){var i,n;return null!=(n=null==(i=this.source)?void 0:i.serviceSupportsSpatialReference(r))&&n}_fetchService(r){var i=this;return(0,L.Z)(function*(){yield i.source.load(r),i.read(i.source.featureDefinition,{origin:"service"}),(0,C.YN)(i.renderer,i.fieldsIndex),(0,C.UF)(i.timeInfo,i.fieldsIndex)})()}_getLayerDomain(r){if(!this.fields)return null;for(const i of this.fields)if(i.name===r&&i.domain)return i.domain;return null}};(0,l._)([(0,p.Cb)({readOnly:!0,json:{origins:{service:{read:!0}}}})],u.prototype,"capabilities",void 0),(0,l._)([(0,p.Cb)({type:String,json:{write:!0}})],u.prototype,"collectionId",void 0),(0,l._)([(0,p.Cb)({type:String})],u.prototype,"copyright",void 0),(0,l._)([(0,p.Cb)({readOnly:!0})],u.prototype,"defaultPopupTemplate",null),(0,l._)([(0,p.Cb)({type:String})],u.prototype,"definitionExpression",void 0),(0,l._)([(0,p.Cb)({readOnly:!0,type:String,json:{origins:{service:{name:"collection.description"}}}})],u.prototype,"description",void 0),(0,l._)([(0,p.Cb)({type:String})],u.prototype,"displayField",void 0),(0,l._)([(0,p.Cb)(f.PV)],u.prototype,"elevationInfo",void 0),(0,l._)([(0,p.Cb)(j.d)],u.prototype,"featureReduction",void 0),(0,l._)([(0,p.Cb)({type:[E.Z],json:{origins:{service:{name:"layerDefinition.fields"}}}})],u.prototype,"fields",void 0),(0,l._)([(0,p.Cb)(Ce.fieldsIndex)],u.prototype,"fieldsIndex",void 0),(0,l._)([(0,p.Cb)({readOnly:!0,type:w.Z,json:{origins:{service:{name:"layerDefinition.extent"}}}})],u.prototype,"fullExtent",void 0),(0,l._)([(0,p.Cb)({type:J.Mk.apiValues,json:{origins:{service:{name:"layerDefinition.geometryType",read:{reader:J.Mk.read}}}}})],u.prototype,"geometryType",void 0),(0,l._)([(0,p.Cb)({type:Boolean,json:{origins:{service:{name:"layerDefinition.hasZ"}}}})],u.prototype,"hasZ",void 0),(0,l._)([(0,p.Cb)({type:Boolean,readOnly:!0})],u.prototype,"isTable",null),(0,l._)([(0,p.Cb)({type:[T.Z],json:{origins:{"web-document":{name:"layerDefinition.drawingInfo.labelingInfo",read:{reader:b.r},write:!0}}}})],u.prototype,"labelingInfo",void 0),(0,l._)([(0,p.Cb)(f.iR)],u.prototype,"labelsVisible",void 0),(0,l._)([(0,p.Cb)(f.rn)],u.prototype,"legendEnabled",void 0),(0,l._)([(0,p.Cb)({type:String,json:{origins:{service:{name:"layerDefinition.objectIdField"}}}})],u.prototype,"objectIdField",void 0),(0,l._)([(0,p.Cb)({type:["OGCFeatureLayer"]})],u.prototype,"operationalLayerType",void 0),(0,l._)([(0,p.Cb)(f.C_)],u.prototype,"popupEnabled",void 0),(0,l._)([(0,p.Cb)({type:X.Z,json:{name:"popupInfo",write:!0}})],u.prototype,"popupTemplate",void 0),(0,l._)([(0,p.Cb)({types:Q.A,json:{origins:{service:{name:"layerDefinition.drawingInfo.renderer",write:!1},"web-scene":{types:Q.o,name:"layerDefinition.drawingInfo.renderer",write:!0}},name:"layerDefinition.drawingInfo.renderer",write:!0}})],u.prototype,"renderer",null),(0,l._)([(0,p.Cb)(f.YI)],u.prototype,"screenSizePerspectiveEnabled",void 0),(0,l._)([(0,p.Cb)({readOnly:!0})],u.prototype,"source",void 0),(0,l._)([(0,p.Cb)({readOnly:!0,type:G.Z,json:{origins:{service:{read:!0}}}})],u.prototype,"spatialReference",void 0),(0,l._)([(0,p.Cb)({type:String,json:{write:{enabled:!0,ignoreOrigin:!0,isRequired:!0},origins:{service:{name:"collection.title"}}}})],u.prototype,"title",void 0),(0,l._)([(0,p.Cb)({readOnly:!0,json:{read:!1}})],u.prototype,"type",void 0),(0,l._)([(0,p.Cb)({type:String,readOnly:!0})],u.prototype,"typeIdField",void 0),(0,l._)([(0,p.Cb)({type:[Z.Z]})],u.prototype,"types",void 0),(0,l._)([(0,p.Cb)(f.HQ)],u.prototype,"url",void 0),u=(0,l._)([(0,K.j)("esri.layers.OGCFeatureLayer")],u);const Pe=u},58775:(Se,z,o)=>{o.d(z,{O3:()=>G,lG:()=>te,my:()=>R,q9:()=>N});var L=o(26584),l=o(66385),ae=o(88071),X=o(36630);const le={LineString:"esriGeometryPolyline",MultiLineString:"esriGeometryPolyline",MultiPoint:"esriGeometryMultipoint",Point:"esriGeometryPoint",Polygon:"esriGeometryPolygon",MultiPolygon:"esriGeometryPolygon"};function N(e){return le[e]}function*k(e){switch(e.type){case"Feature":yield e;break;case"FeatureCollection":for(const t of e.features)t&&(yield t)}}function*pe(e){if(!e)return null;switch(e.type){case"Point":yield e.coordinates;break;case"LineString":case"MultiPoint":yield*e.coordinates;break;case"MultiLineString":case"Polygon":for(const t of e.coordinates)yield*t;break;case"MultiPolygon":for(const t of e.coordinates)for(const s of t)yield*s}}function de(e){for(const t of e)if(t.length>2)return!0;return!1}function q(e){let t=0;for(let s=0;s<e.length;s++){const a=e[s],y=e[(s+1)%e.length];t+=a[0]*y[1]-y[0]*a[1]}return t<=0}function Q(e){const t=e[0],s=e[e.length-1];return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]||e.push(t),e}function _(e,t,s){switch(t.type){case"LineString":return function p(e,t,s){return x(e,t.coordinates,s),e}(e,t,s);case"MultiLineString":return function fe(e,t,s){for(const a of t.coordinates)x(e,a,s);return e}(e,t,s);case"MultiPoint":return function he(e,t,s){return x(e,t.coordinates,s),e}(e,t,s);case"MultiPolygon":return function ge(e,t,s){for(const a of t.coordinates){V(e,a[0],s);for(let y=1;y<a.length;y++)H(e,a[y],s)}return e}(e,t,s);case"Point":return function K(e,t,s){return g(e,t.coordinates,s),e}(e,t,s);case"Polygon":return function J(e,t,s){const a=t.coordinates;V(e,a[0],s);for(let y=1;y<a.length;y++)H(e,a[y],s);return e}(e,t,s)}}function V(e,t,s){const a=Q(t);!function ye(e){return!q(e)}(a)?x(e,a,s):D(e,a,s)}function H(e,t,s){const a=Q(t);!function ce(e){return q(e)}(a)?x(e,a,s):D(e,a,s)}function x(e,t,s){for(const a of t)g(e,a,s);e.lengths.push(t.length)}function D(e,t,s){for(let a=t.length-1;a>=0;a--)g(e,t[a],s);e.lengths.push(t.length)}function g(e,t,s){const[a,y,I]=t;e.coords.push(a,y),s.hasZ&&e.coords.push(I||0)}function ee(e){switch(typeof e){case"string":return"esriFieldTypeString";case"number":return"esriFieldTypeDouble";default:return"unknown"}}function G(e){if(!e)throw new L.Z("geojson-layer:empty","GeoJSON data is empty");if("Feature"!==e.type&&"FeatureCollection"!==e.type)throw new L.Z("geojson-layer:unsupported-geojson-object","missing or not supported GeoJSON object type",{data:e});const{crs:t}=e;if(!t)return;const s="string"==typeof t?t:"name"===t.type?t.properties.name:"EPSG"===t.type?t.properties.code:null,a=new RegExp(".*(CRS84H?|4326)$","i");if(!s||!a.test(s))throw new L.Z("geojson-layer:unsupported-crs","unsupported GeoJSON 'crs' member",{crs:t})}function R(e,t={}){const s=[],a=new Set,y=new Set;let I,F=!1,m=null,O=!1,{geometryType:f=null}=t,j=!1;for(const E of k(e)){const{geometry:U,properties:C,id:T}=E;if((!U||(f||(f=N(U.type)),N(U.type)===f))&&(F||(F=de(pe(U))),O||(O=null!=T,O&&(I=typeof T,m=Object.keys(C).filter(b=>C[b]===T))),O&&null!=T&&(m.length>1?m=m.filter(b=>C[b]===T):1===m.length&&(m=C[m[0]]===T?m:[])),!j&&C)){let b=!0;for(const P in C){if(a.has(P))continue;const $=C[P];if(null==$){b=!1,y.add(P);continue}const w=ee($);"unknown"!==w?(y.delete(P),a.add(P),s.push({name:P,alias:P,type:w})):y.add(P)}j=b}}const Z=m&&1===m.length&&m[0]||null;if(Z)for(const E of s)if(E.name===Z&&(0,X.H7)(E)){E.type="esriFieldTypeOID";break}return{fields:s,geometryType:f,hasZ:F,objectIdFieldName:Z,objectIdFieldType:I,unknownFields:Array.from(y)}}function te(e,t){return Array.from(function*ue(e,t={}){var y;const{geometryType:s,objectIdField:a}=t;for(const I of e){const{geometry:F,properties:m,id:O}=I;if(F&&N(F.type)!==s)continue;const f=m||{};let j=null!=(y=f[a])?y:null;a&&null!=O&&!f[a]&&(f[a]=j=O),yield new l.u_(F?_(new ae.Z,F,t):null,f,null,j)}}(k(e),t))}}}]);
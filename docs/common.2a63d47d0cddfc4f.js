"use strict";var lt=Object.defineProperty,_t=Object.defineProperties,ct=Object.getOwnPropertyDescriptors,et=Object.getOwnPropertySymbols,ut=Object.prototype.hasOwnProperty,pt=Object.prototype.propertyIsEnumerable,tt=(ae,q,t)=>q in ae?lt(ae,q,{enumerable:!0,configurable:!0,writable:!0,value:t}):ae[q]=t,pe=(ae,q)=>{for(var t in q||(q={}))ut.call(q,t)&&tt(ae,t,q[t]);if(et)for(var t of et(q))pt.call(q,t)&&tt(ae,t,q[t]);return ae},ye=(ae,q)=>_t(ae,ct(q));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[8592],{61642:(ae,q,t)=>{t.d(q,{Z:()=>b});var a=t(17626),T=t(8425),A=t(14517),W=t(79608),G=t(86810),x=t(62208),J=t(77712),S=(t(85931),t(8314),t(90912),t(76898)),L=t(40405),z=t(49672),R=t(82706);let U=class extends((0,G.eC)((0,W.J)(A.Z))){constructor(Z){super(Z),this.position=null,this.elevationInfo=null,this.feature=null}equals(Z){return(0,x._W)(this.position,Z.position)&&(0,x._W)(this.elevationInfo,Z.elevationInfo)&&(0,T.kk)(this.feature,Z.feature)}};(0,a._)([(0,J.Cb)({type:z.Z}),(0,L.B)()],U.prototype,"position",void 0),(0,a._)([(0,J.Cb)({type:R.ZP}),(0,L.B)()],U.prototype,"elevationInfo",void 0),(0,a._)([(0,J.Cb)(T.rX)],U.prototype,"feature",void 0),U=(0,a._)([(0,S.j)("esri.analysis.LineOfSightAnalysisObserver")],U);const b=U},57574:(ae,q,t)=>{t.d(q,{Z:()=>U});var a=t(17626),T=t(8425),A=t(79608),W=t(86810),G=t(62208),x=t(77712),$=(t(85931),t(8314),t(90912),t(76898)),S=t(40405),L=t(49672),z=t(82706);let R=class extends((0,W.eC)(A.j)){constructor(b){super(b),this.position=null,this.elevationInfo=null,this.feature=null}equals(b){return(0,G._W)(this.position,b.position)&&(0,G._W)(this.elevationInfo,b.elevationInfo)&&(0,T.kk)(this.feature,b.feature)}};(0,a._)([(0,x.Cb)({type:L.Z}),(0,S.B)()],R.prototype,"position",void 0),(0,a._)([(0,x.Cb)({type:z.ZP}),(0,S.B)()],R.prototype,"elevationInfo",void 0),(0,a._)([(0,x.Cb)(T.rX)],R.prototype,"feature",void 0),R=(0,a._)([(0,$.j)("esri.analysis.LineOfSightAnalysisTarget")],R);const U=R},8425:(ae,q,t)=>{t.d(q,{kk:()=>T,pD:()=>A,rX:()=>W});var a=t(62208);function T(J,X){return A(J)===A(X)}function A(J){if((0,a.Wi)(J))return null;let P=null;return P=null!=J.objectId?J.objectId:null!=J.layer&&"objectIdField"in J.layer&&null!=J.layer.objectIdField&&null!=J.attributes?J.attributes[J.layer.objectIdField]:J.uid,null==P?null:`o-${null!=J.layer?J.layer.id:""}-${P}`}const W={json:{write:{writer:function G(J,X){var P;(0,a.Wi)(J)||null==(null==(P=J.layer)?void 0:P.objectIdField)||null==J.attributes||(X.feature={layerId:J.layer.id,objectId:J.attributes[J.layer.objectIdField]})},target:{"feature.layerId":{type:[Number,String]},"feature.objectId":{type:[Number,String]}}},origins:{"web-scene":{read:function x(J){if(null!=J.layerId&&null!=J.objectId)return{uid:null,layer:{id:J.layerId,objectIdField:"ObjectId"},attributes:{ObjectId:J.objectId}}}}}}}},7006:(ae,q,t)=>{t.d(q,{A:()=>C,B:()=>B,C:()=>O,D:()=>N,E:()=>k,F:()=>re,G:()=>oe,H:()=>Y,I:()=>Q,J:()=>se,K:()=>ne,a:()=>G,b:()=>x,c:()=>W,d:()=>J,e:()=>A,f:()=>X,g:()=>ee,h:()=>P,i:()=>$,j:()=>z,k:()=>b,l:()=>V,m:()=>M,n:()=>w,o:()=>R,p:()=>h,q:()=>_,r:()=>U,s:()=>Z,t:()=>S,u:()=>m,v:()=>v,w:()=>L,x:()=>j,y:()=>H,z:()=>D});var a=t(4918),T=t(15994);function A(E){return a.G.extendedSpatialReferenceInfo(E)}function W(E,c,F){return a.G.clip(T.N,E,c,F)}function G(E,c,F){return a.G.cut(T.N,E,c,F)}function x(E,c,F){return a.G.contains(T.N,E,c,F)}function J(E,c,F){return a.G.crosses(T.N,E,c,F)}function X(E,c,F,te){return a.G.distance(T.N,E,c,F,te)}function P(E,c,F){return a.G.equals(T.N,E,c,F)}function $(E,c,F){return a.G.intersects(T.N,E,c,F)}function S(E,c,F){return a.G.touches(T.N,E,c,F)}function L(E,c,F){return a.G.within(T.N,E,c,F)}function z(E,c,F){return a.G.disjoint(T.N,E,c,F)}function R(E,c,F){return a.G.overlaps(T.N,E,c,F)}function U(E,c,F,te){return a.G.relate(T.N,E,c,F,te)}function b(E,c){return a.G.isSimple(T.N,E,c)}function Z(E,c){return a.G.simplify(T.N,E,c)}function V(E,c,F=!1){return a.G.convexHull(T.N,E,c,F)}function M(E,c,F){return a.G.difference(T.N,E,c,F)}function w(E,c,F){return a.G.symmetricDifference(T.N,E,c,F)}function h(E,c,F){return a.G.intersect(T.N,E,c,F)}function m(E,c,F=null){return a.G.union(T.N,E,c,F)}function _(E,c,F,te,ie,_e,de){return a.G.offset(T.N,E,c,F,te,ie,_e,de)}function v(E,c,F,te,ie=!1){return a.G.buffer(T.N,E,c,F,te,ie)}function j(E,c,F,te,ie,_e,de){return a.G.geodesicBuffer(T.N,E,c,F,te,ie,_e,de)}function H(E,c,F,te=!0){return a.G.nearestCoordinate(T.N,E,c,F,te)}function D(E,c,F){return a.G.nearestVertex(T.N,E,c,F)}function C(E,c,F,te,ie){return a.G.nearestVertices(T.N,E,c,F,te,ie)}function B(E,c,F,te){if(null==c||null==te)throw new Error("Illegal Argument Exception");const ie=a.G.rotate(c,F,te);return ie.spatialReference=E,ie}function O(E,c,F){if(null==c||null==F)throw new Error("Illegal Argument Exception");const te=a.G.flipHorizontal(c,F);return te.spatialReference=E,te}function N(E,c,F){if(null==c||null==F)throw new Error("Illegal Argument Exception");const te=a.G.flipVertical(c,F);return te.spatialReference=E,te}function k(E,c,F,te,ie){return a.G.generalize(T.N,E,c,F,te,ie)}function re(E,c,F,te){return a.G.densify(T.N,E,c,F,te)}function oe(E,c,F,te,ie=0){return a.G.geodesicDensify(T.N,E,c,F,te,ie)}function Y(E,c,F){return a.G.planarArea(T.N,E,c,F)}function Q(E,c,F){return a.G.planarLength(T.N,E,c,F)}function se(E,c,F,te){return a.G.geodesicArea(T.N,E,c,F,te)}function ne(E,c,F,te){return a.G.geodesicLength(T.N,E,c,F,te)}const ee=Object.freeze(Object.defineProperty({__proto__:null,extendedSpatialReferenceInfo:A,clip:W,cut:G,contains:x,crosses:J,distance:X,equals:P,intersects:$,touches:S,within:L,disjoint:z,overlaps:R,relate:U,isSimple:b,simplify:Z,convexHull:V,difference:M,symmetricDifference:w,intersect:h,union:m,offset:_,buffer:v,geodesicBuffer:j,nearestCoordinate:H,nearestVertex:D,nearestVertices:C,rotate:B,flipHorizontal:O,flipVertical:N,generalize:k,densify:re,geodesicDensify:oe,planarArea:Y,planarLength:Q,geodesicArea:se,geodesicLength:ne},Symbol.toStringTag,{value:"Module"}))},99746:(ae,q,t)=>{t.d(q,{Z:()=>m});var w,a=t(17626),T=t(86810),A=t(62208),W=t(77712),X=(t(85931),t(8314),t(90912),t(76898)),P=t(28347),$=t(43703),S=t(84161),L=t(28093),z=t(49672),R=t(55915),U=t(12080),b=t(89586),Z=t(60479),V=t(79800),M=t(9554);let h=w=class extends T.wq{constructor(_){super(_),this.origin=(0,L.c)(),this.translation=(0,L.c)(),this.rotation=(0,b.Ue)(),this.scale=(0,L.f)(1,1,1),this.geographic=!0}get localMatrix(){const _=(0,$.c)();return(0,P.u)(_,this.scale),(0,P.e)(_,_,(0,b.WH)(this.rotation),(0,b.ZZ)(this.rotation)),(0,P.j)(_,_,this.translation),_}get localMatrixInverse(){return(0,P.a)((0,$.c)(),this.localMatrix)}applyLocal(_,v){return(0,S.m)(v,_,this.localMatrix)}applyLocalInverse(_,v){return(0,S.m)(v,_,this.localMatrixInverse)}project(_,v){const j=new Float64Array(_.length),H=Z.fP.fromTypedArray(j),D=Z.fP.fromTypedArray(_);if(this.geographic){const O=(0,U.rS)(v),N=(0,$.c)();return(0,R.Bm)(v,this.origin,N,O),(0,P.m)(N,N,this.localMatrix),(0,V.t)(H,D,N),(0,R.CM)(j,O,0,j,v,0,j.length/3),j}const{localMatrix:C,origin:B}=this;(0,P.v)(C,$.I)?(0,M.c)(H,D):(0,V.t)(H,D,C);for(let O=0;O<j.length;O+=3)j[O+0]+=B[0],j[O+1]+=B[1],j[O+2]+=B[2];return j}getOriginPoint(_){const[v,j,H]=this.origin;return new z.Z({x:v,y:j,z:H,spatialReference:_})}equals(_){return(0,A.pC)(_)&&this.geographic===_.geographic&&(0,S.k)(this.origin,_.origin)&&(0,P.w)(this.localMatrix,_.localMatrix)}clone(){const _={origin:(0,L.a)(this.origin),translation:(0,L.a)(this.translation),rotation:(0,b.Ue)(this.rotation),scale:(0,L.a)(this.scale),geographic:this.geographic};return new w(_)}};(0,a._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"origin",void 0),(0,a._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"translation",void 0),(0,a._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"rotation",void 0),(0,a._)([(0,W.Cb)({type:[Number],nonNullable:!0,json:{write:!0}})],h.prototype,"scale",void 0),(0,a._)([(0,W.Cb)({type:Boolean,nonNullable:!0,json:{write:!0}})],h.prototype,"geographic",void 0),(0,a._)([(0,W.Cb)()],h.prototype,"localMatrix",null),(0,a._)([(0,W.Cb)()],h.prototype,"localMatrixInverse",null),h=w=(0,a._)([(0,X.j)("esri.geometry.support.MeshTransform")],h);const m=h},89586:(ae,q,t)=>{t.d(q,{EU:()=>R,Ue:()=>G,WH:()=>U,ZZ:()=>z,qC:()=>L,uT:()=>$});var a=t(21286),T=t(48977),A=t(78451),W=t(84161);function G(h=Z){return[h[0],h[1],h[2],h[3]]}function $(h,m,_=G()){return(0,W.c)(_,h),_[3]=m,_}function L(h,m,_=G()){return(0,T.s)(V,h,U(h)),(0,T.s)(M,m,U(m)),(0,T.m)(V,M,V),function b(h,m){return h[3]=m,h}(_,(0,a.BV)((0,T.g)(_,V)))}function z(h){return h}function R(h){return h[3]}function U(h){return(0,a.Vl)(h[3])}const Z=[0,0,1,0],V=(0,A.a)(),M=(0,A.a)();G()},92545:(ae,q,t)=>{function a(T,A){var W;return T.isGeographic||T.isWebMercator&&(null==(W=null==A?void 0:A.geographic)||W)}t.d(q,{h:()=>a})},60853:(ae,q,t)=>{t.d(q,{FF:()=>Z,I5:()=>U,Yq:()=>V,iv:()=>R,w1:()=>b});var a=t(62208),T=t(16730),A=t(550),W=t(28347),G=t(43703),x=t(30217),J=t(55915),X=t(12080),P=t(99746),$=t(60479),S=t(79800),L=t(92545),z=t(65231);function R(Y,Q,se){return(0,L.h)(Q.spatialReference,se)?function w(Y,Q,se){const ne=Q.spatialReference,ee=H(Q,se,N),E=new Float64Array(Y.position.length),c=function h(Y,Q,se,ne){(0,S.t)($.fP.fromTypedArray(ne),$.fP.fromTypedArray(Y),Q);const ee=new Float64Array(Y.length);return(0,z.To)(ne,ee,se)}(Y.position,ee,ne,E),F=(0,x.a)(re,ee);return{position:c,normal:m(c,E,Y.normal,F,ne),tangent:_(c,E,Y.tangent,F,ne)}}(Y,Q,se):function M(Y,Q,se){const ne=new Float64Array(Y.position.length),ee=Y.position,E=Q.x,c=Q.y,F=Q.z||0,{horizontal:te,vertical:ie}=O(se?se.unit:null,Q.spatialReference);for(let _e=0;_e<ee.length;_e+=3)ne[_e+0]=ee[_e+0]*te+E,ne[_e+1]=ee[_e+1]*te+c,ne[_e+2]=ee[_e+2]*ie+F;return{position:ne,normal:Y.normal,tangent:Y.tangent}}(Y,Q,se)}function U(Y,Q,se){const{position:ne,normal:ee,tangent:E}=Y;if((0,a.Wi)(Q))return{position:ne,normal:ee,tangent:E};const c=Q.localMatrix;return R({position:(0,z.zZ)(ne,new Float64Array(ne.length),c),normal:(0,a.pC)(ee)?(0,z.w9)(ee,new Float32Array(ee.length),c):null,tangent:(0,a.pC)(E)?(0,z.VS)(E,new Float32Array(E.length),c):null},Q.getOriginPoint(se),{geographic:Q.geographic})}function b(Y,Q,se){var ne;if(null!=se&&se.useTransform){const{position:ee,normal:E,tangent:c}=Y;return{vertexAttributes:{position:ee,normal:E,tangent:c},transform:new P.Z({origin:[Q.x,Q.y,null!=(ne=Q.z)?ne:0],geographic:(0,L.h)(Q.spatialReference,se)})}}return{vertexAttributes:R(Y,Q,se),transform:null}}function Z(Y,Q,se){return(0,L.h)(Q.spatialReference,se)?j(Y,Q,se):v(Y,Q,se)}function V(Y,Q,se,ne){if((0,a.Wi)(Q))return Z(Y,se,ne);const ee=U(Y,Q,se.spatialReference);return se.equals(Q.getOriginPoint(se.spatialReference))?v(ee,se,ne):(0,L.h)(se.spatialReference,ne)?j(ee,se,ne):v(ee,se,ne)}function m(Y,Q,se,ne,ee){if((0,a.Wi)(se))return null;const E=new Float32Array(se.length);return(0,S.a)($.ct.fromTypedArray(E),$.ct.fromTypedArray(se),ne),(0,z.Yk)(E,Y,Q,ee,E),E}function _(Y,Q,se,ne,ee){if((0,a.Wi)(se))return null;const E=new Float32Array(se.length);(0,S.a)($.ct.fromTypedArray(E,4*Float32Array.BYTES_PER_ELEMENT),$.ct.fromTypedArray(se,4*Float32Array.BYTES_PER_ELEMENT),ne);for(let c=3;c<E.length;c+=4)E[c]=se[c];return(0,z.M2)(E,Y,Q,ee,E),E}function v(Y,Q,se){const ne=new Float64Array(Y.position.length),ee=Y.position,E=Q.x,c=Q.y,F=Q.z||0,{horizontal:te,vertical:ie}=O(se?se.unit:null,Q.spatialReference);for(let _e=0;_e<ee.length;_e+=3)ne[_e+0]=(ee[_e+0]-E)/te,ne[_e+1]=(ee[_e+1]-c)/te,ne[_e+2]=(ee[_e+2]-F)/ie;return{position:ne,normal:Y.normal,tangent:Y.tangent}}function j(Y,Q,se){const ne=Q.spatialReference;H(Q,se,N);const ee=(0,W.a)(k,N),E=new Float64Array(Y.position.length),c=function D(Y,Q,se,ne){const ee=(0,z.XO)(Y,Q,ne),E=$.fP.fromTypedArray(ee),c=new Float64Array(ee.length),F=$.fP.fromTypedArray(c);return(0,S.t)(F,E,se),c}(Y.position,ne,ee,E),F=(0,x.a)(re,ee);return{position:c,normal:C(Y.normal,Y.position,E,ne,F),tangent:B(Y.tangent,Y.position,E,ne,F)}}function H(Y,Q,se){(0,J.Bm)(Y.spatialReference,[Y.x,Y.y,Y.z||0],se,(0,X.rS)(Y.spatialReference));const{horizontal:ne,vertical:ee}=O(Q?Q.unit:null,Y.spatialReference);return(0,W.h)(se,se,[ne,ne,ee]),se}function C(Y,Q,se,ne,ee){if((0,a.Wi)(Y))return null;const E=(0,z.Iz)(Y,Q,se,ne,new Float32Array(Y.length)),c=$.ct.fromTypedArray(E);return(0,S.a)(c,c,ee),E}function B(Y,Q,se,ne,ee){if((0,a.Wi)(Y))return null;const E=(0,z.wi)(Y,Q,se,ne,new Float32Array(Y.length)),c=$.ct.fromTypedArray(E,4*Float32Array.BYTES_PER_ELEMENT);return(0,S.a)(c,c,ee),E}function O(Y,Q){if((0,a.Wi)(Y))return oe;const se=Q.isGeographic?1:(0,T.c9)(Q),ne=Q.isGeographic?1:(0,T._R)(Q),ee=(0,T.En)(1,Y,"meters");return{horizontal:ee*se,vertical:ee*ne}}const N=(0,G.c)(),k=(0,G.c)(),re=(0,A.c)(),oe={horizontal:1,vertical:1}},65629:(ae,q,t)=>{t.d(q,{SR:()=>P,Ui:()=>X});var a=t(62208),T=t(65401),A=t(32442),W=t(25748),G=t(91179),x=t(74618),J=t(37053);function X(h){return $(h,!0)}function P(h){return $(h,!1)}function $(h,m){if((0,a.Wi)(h))return null;const _=h.spatialReference,v=(0,J.C5)(_),j="toJSON"in h?h.toJSON():h;if(!v)return j;const H=(0,J.sS)(_)?102100:4326,D=x.UZ[H].maxX,C=x.UZ[H].minX;if((0,G.wp)(j))return L(j,D,C);if((0,G.aW)(j))return j.points=j.points.map(B=>L(B,D,C)),j;if((0,G.YX)(j))return function S(h,m){if(!m)return h;const _=function z(h,m){const _=[],{ymin:v,ymax:j,xmin:H,xmax:D}=h,C=h.xmax-h.xmin,[B,O]=m.valid,{x:N,frameId:k}=R(h.xmin,m),{x:re,frameId:oe}=R(h.xmax,m),Y=N===re&&C>0;if(C>2*O){const Q={xmin:H<D?N:re,ymin:v,xmax:O,ymax:j},se={xmin:B,ymin:v,xmax:H<D?re:N,ymax:j},ne={xmin:0,ymin:v,xmax:O,ymax:j},ee={xmin:B,ymin:v,xmax:0,ymax:j},E=[],c=[];U(Q,ne)&&E.push(k),U(Q,ee)&&c.push(k),U(se,ne)&&E.push(oe),U(se,ee)&&c.push(oe);for(let F=k+1;F<oe;F++)E.push(F),c.push(F);_.push(new V(Q,[k]),new V(se,[oe]),new V(ne,E),new V(ee,c))}else N>re||Y?_.push(new V({xmin:N,ymin:v,xmax:O,ymax:j},[k]),new V({xmin:B,ymin:v,xmax:re,ymax:j},[oe])):_.push(new V({xmin:N,ymin:v,xmax:re,ymax:j},[k]));return _}(h,m).map(v=>v.extent);return _.length<2?_[0]||h:_.length>2?(h.xmin=m.valid[0],h.xmax=m.valid[1],h):{rings:_.map(v=>[[v.xmin,v.ymin],[v.xmin,v.ymax],[v.xmax,v.ymax],[v.xmax,v.ymin],[v.xmin,v.ymin]])}}(j,v);if((0,G.oU)(j)||(0,G.l9)(j)){const B=(0,A.$P)(M,j),O={xmin:B[0],ymin:B[1],xmax:B[2],ymax:B[3]},N=(0,x.XZ)(O.xmin,C)*(2*D),k=0===N?j:(0,x.Sy)(j,N);return O.xmin+=N,O.xmax+=N,O.xmax>D?Z(k,D,m):O.xmin<C?Z(k,C,m):k}return j}function L(h,m,_){if(Array.isArray(h)){const v=h[0];if(v>m){const j=(0,x.XZ)(v,m);h[0]=v+j*(-2*m)}else if(v<_){const j=(0,x.XZ)(v,_);h[0]=v+j*(-2*_)}}else{const v=h.x;if(v>m){const j=(0,x.XZ)(v,m);h.x+=j*(-2*m)}else if(v<_){const j=(0,x.XZ)(v,_);h.x+=j*(-2*_)}}return h}function R(h,m){const[_,v]=m.valid,j=2*v;let H,D=0;return h>v?(H=Math.ceil(Math.abs(h-v)/j),h-=H*j,D=H):h<_&&(H=Math.ceil(Math.abs(h-_)/j),h+=H*j,D=-H),{x:h,frameId:D}}function U(h,m){const{xmin:_,ymin:v,xmax:j,ymax:H}=m;return b(h,_,v)&&b(h,_,H)&&b(h,j,H)&&b(h,j,v)}function b(h,m,_){return m>=h.xmin&&m<=h.xmax&&_>=h.ymin&&_<=h.ymax}function Z(h,m,_=!0){const v=!(0,G.l9)(h);if(v&&(0,W.Zy)(h),_)return(new w).cut(h,m);const j=v?h.rings:h.paths,H=v?4:2,D=j.length,C=-2*m;for(let B=0;B<D;B++){const O=j[B];if(O&&O.length>=H){const N=[];for(const k of O)N.push([k[0]+C,k[1]]);j.push(N)}}return v?h.rings=j:h.paths=j,h}class V{constructor(m,_){this.extent=m,this.frameIds=_}}const M=(0,T.Ue)();class w{constructor(){this.linesIn=[],this.linesOut=[]}cut(m,_){let v;if(this.xCut=_,m.rings)this.closed=!0,v=m.rings,this.minPts=4;else{if(!m.paths)return null;this.closed=!1,v=m.paths,this.minPts=2}for(const H of v){if(!H||H.length<this.minPts)continue;let D=!0;for(const C of H)D?(this.moveTo(C),D=!1):this.lineTo(C);this.closed&&this.close()}this._pushLineIn(),this._pushLineOut(),v=[];for(const H of this.linesIn)H&&H.length>=this.minPts&&v.push(H);const j=-2*this.xCut;for(const H of this.linesOut)if(H&&H.length>=this.minPts){for(const D of H)D[0]+=j;v.push(H)}return this.closed?m.rings=v:m.paths=v,m}moveTo(m){this._pushLineIn(),this._pushLineOut(),this._prevSide=this._side(m[0]),this._moveTo(m[0],m[1],this._prevSide),this._prevPt=m,this._firstPt=m}lineTo(m){const _=this._side(m[0]);if(_*this._prevSide==-1){const v=this._intersect(this._prevPt,m);this._lineTo(this.xCut,v,0),this._prevSide=0,this._lineTo(m[0],m[1],_)}else this._lineTo(m[0],m[1],_);this._prevSide=_,this._prevPt=m}close(){const m=this._firstPt,_=this._prevPt;m[0]===_[0]&&m[1]===_[1]||this.lineTo(m),this._checkClosingPt(this.lineIn),this._checkClosingPt(this.lineOut)}_moveTo(m,_,v){this.closed?(this.lineIn.push([v<=0?m:this.xCut,_]),this.lineOut.push([v>=0?m:this.xCut,_])):(v<=0&&this.lineIn.push([m,_]),v>=0&&this.lineOut.push([m,_]))}_lineTo(m,_,v){this.closed?(this._addPolyVertex(this.lineIn,v<=0?m:this.xCut,_),this._addPolyVertex(this.lineOut,v>=0?m:this.xCut,_)):v<0?(0===this._prevSide&&this._pushLineOut(),this.lineIn.push([m,_])):v>0?(0===this._prevSide&&this._pushLineIn(),this.lineOut.push([m,_])):this._prevSide<0?(this.lineIn.push([m,_]),this.lineOut.push([m,_])):this._prevSide>0&&(this.lineOut.push([m,_]),this.lineIn.push([m,_]))}_addPolyVertex(m,_,v){const j=m.length;j>1&&m[j-1][0]===_&&m[j-2][0]===_?m[j-1][1]=v:m.push([_,v])}_checkClosingPt(m){const _=m.length;_>3&&m[0][0]===this.xCut&&m[_-2][0]===this.xCut&&m[1][0]===this.xCut&&(m[0][1]=m[_-2][1],m.pop())}_side(m){return m<this.xCut?-1:m>this.xCut?1:0}_intersect(m,_){return m[1]+(this.xCut-m[0])/(_[0]-m[0])*(_[1]-m[1])}_pushLineIn(){this.lineIn&&this.lineIn.length>=this.minPts&&this.linesIn.push(this.lineIn),this.lineIn=[]}_pushLineOut(){this.lineOut&&this.lineOut.length>=this.minPts&&this.linesOut.push(this.lineOut),this.lineOut=[]}}},28678:(ae,q,t)=>{t.r(q),t.d(q,{default:()=>C});var a=t(17626),A=(t(29132),t(84792)),W=t(26584),G=t(99959),x=t(77275),J=t(21726),X=t(77712),L=(t(85931),t(8314),t(90912),t(68653)),z=t(76898),R=t(99433),U=t(44917),b=t(552),Z=t(49286),V=t(6647),M=t(30346),w=t(99555),h=t(72258),m=t(2584),_=t(91309),v=t(2004),j=t(65234),H=t(49672);let D=class extends((0,b.h)((0,M.Q)((0,w.M)((0,Z.q)((0,V.I)((0,G.R)(U.Z))))))){constructor(...B){super(...B),this.copyright="",this.fullExtent=new v.Z(-20037508.342787,-20037508.34278,20037508.34278,20037508.342787,j.Z.WebMercator),this.legendEnabled=!1,this.isReference=null,this.popupEnabled=!1,this.spatialReference=j.Z.WebMercator,this.subDomains=null,this.tileInfo=new m.Z({size:[256,256],dpi:96,format:"png8",compressionQuality:0,origin:new H.Z({x:-20037508.342787,y:20037508.342787,spatialReference:j.Z.WebMercator}),spatialReference:j.Z.WebMercator,lods:[new h.Z({level:0,scale:591657527.591555,resolution:156543.033928}),new h.Z({level:1,scale:295828763.795777,resolution:78271.5169639999}),new h.Z({level:2,scale:147914381.897889,resolution:39135.7584820001}),new h.Z({level:3,scale:73957190.948944,resolution:19567.8792409999}),new h.Z({level:4,scale:36978595.474472,resolution:9783.93962049996}),new h.Z({level:5,scale:18489297.737236,resolution:4891.96981024998}),new h.Z({level:6,scale:9244648.868618,resolution:2445.98490512499}),new h.Z({level:7,scale:4622324.434309,resolution:1222.99245256249}),new h.Z({level:8,scale:2311162.217155,resolution:611.49622628138}),new h.Z({level:9,scale:1155581.108577,resolution:305.748113140558}),new h.Z({level:10,scale:577790.554289,resolution:152.874056570411}),new h.Z({level:11,scale:288895.277144,resolution:76.4370282850732}),new h.Z({level:12,scale:144447.638572,resolution:38.2185141425366}),new h.Z({level:13,scale:72223.819286,resolution:19.1092570712683}),new h.Z({level:14,scale:36111.909643,resolution:9.55462853563415}),new h.Z({level:15,scale:18055.954822,resolution:4.77731426794937}),new h.Z({level:16,scale:9027.977411,resolution:2.38865713397468}),new h.Z({level:17,scale:4513.988705,resolution:1.19432856685505}),new h.Z({level:18,scale:2256.994353,resolution:.597164283559817}),new h.Z({level:19,scale:1128.497176,resolution:.298582141647617}),new h.Z({level:20,scale:564.248588,resolution:.14929107082380833}),new h.Z({level:21,scale:282.124294,resolution:.07464553541190416}),new h.Z({level:22,scale:141.062147,resolution:.03732276770595208}),new h.Z({level:23,scale:70.5310735,resolution:.01866138385297604})]}),this.type="web-tile",this.urlTemplate=null,this.wmtsInfo=null}normalizeCtorArgs(B,O){return"string"==typeof B?pe({urlTemplate:B},O):B}load(B){const O=this.loadFromPortal({supportedTypes:["WMTS"]},B).then(()=>{let N="";if(this.urlTemplate)if(this.spatialReference.equals(this.tileInfo.spatialReference)){const k=new J.R9(this.urlTemplate);!(this.subDomains&&this.subDomains.length>0)&&k.authority.includes("{subDomain}")&&(N="is missing 'subDomains' property")}else N="spatialReference must match tileInfo.spatialReference";else N="is missing the required 'urlTemplate' property value";if(N)throw new W.Z("web-tile-layer:load",`WebTileLayer (title: '${this.title}', id: '${this.id}') ${N}`)});return this.addResolvingPromise(O),Promise.resolve(this)}get levelValues(){const B=[];if(!this.tileInfo)return null;for(const O of this.tileInfo.lods)B[O.level]=O.levelValue||O.level;return B}readSpatialReference(B,O){return B||O.fullExtent&&O.fullExtent.spatialReference&&j.Z.fromJSON(O.fullExtent.spatialReference)}get tileServers(){if(!this.urlTemplate)return null;const B=[],{urlTemplate:O,subDomains:N}=this,k=new J.R9(O),re=k.scheme?k.scheme+"://":"//",oe=re+k.authority+"/";if(k.authority.includes("{subDomain}")){if(N&&N.length>0&&k.authority.split(".").length>1)for(const Y of N)B.push(re+k.authority.replace(/\{subDomain\}/gi,Y)+"/")}else B.push(oe);return B.map(Y=>("/"!==Y.charAt(Y.length-1)&&(Y+="/"),Y))}get urlPath(){if(!this.urlTemplate)return null;const B=this.urlTemplate,O=new J.R9(B);return B.substring(((O.scheme?O.scheme+"://":"//")+O.authority+"/").length)}readUrlTemplate(B,O){return B||O.templateUrl}writeUrlTemplate(B,O){B&&(0,J.oC)(B)&&(B="https:"+B),B&&(B=B.replace(/\{z\}/gi,"{level}").replace(/\{x\}/gi,"{col}").replace(/\{y\}/gi,"{row}"),B=(0,J.Fv)(B)),O.templateUrl=B}fetchTile(B,O,N,k={}){const{signal:re}=k,oe=this.getTileUrl(B,O,N),Y={responseType:"image",signal:re,query:pe({},this.refreshParameters)};return(0,A.default)(oe,Y).then(Q=>Q.data)}getTileUrl(B,O,N){const k=this.levelValues[B];return this.tileServers[O%this.tileServers.length]+(0,x.gx)(this.urlPath,{level:k,z:k,col:N,x:N,row:O,y:O})}};(0,a._)([(0,X.Cb)({type:String,value:"",json:{write:!0}})],D.prototype,"copyright",void 0),(0,a._)([(0,X.Cb)({type:v.Z,json:{write:!0},nonNullable:!0})],D.prototype,"fullExtent",void 0),(0,a._)([(0,X.Cb)({readOnly:!0,json:{read:!1,write:!1}})],D.prototype,"legendEnabled",void 0),(0,a._)([(0,X.Cb)({type:["show","hide"]})],D.prototype,"listMode",void 0),(0,a._)([(0,X.Cb)({json:{read:!0,write:!0}})],D.prototype,"blendMode",void 0),(0,a._)([(0,X.Cb)()],D.prototype,"levelValues",null),(0,a._)([(0,X.Cb)({type:Boolean,json:{read:!1,write:{enabled:!0,overridePolicy:()=>({enabled:!1})}}})],D.prototype,"isReference",void 0),(0,a._)([(0,X.Cb)({type:["WebTiledLayer"],value:"WebTiledLayer"})],D.prototype,"operationalLayerType",void 0),(0,a._)([(0,X.Cb)({readOnly:!0,json:{read:!1,write:!1}})],D.prototype,"popupEnabled",void 0),(0,a._)([(0,X.Cb)({type:j.Z})],D.prototype,"spatialReference",void 0),(0,a._)([(0,L.r)("spatialReference",["spatialReference","fullExtent.spatialReference"])],D.prototype,"readSpatialReference",null),(0,a._)([(0,X.Cb)({type:[String],json:{write:!0}})],D.prototype,"subDomains",void 0),(0,a._)([(0,X.Cb)({type:m.Z,json:{write:!0}})],D.prototype,"tileInfo",void 0),(0,a._)([(0,X.Cb)({readOnly:!0})],D.prototype,"tileServers",null),(0,a._)([(0,X.Cb)({json:{read:!1}})],D.prototype,"type",void 0),(0,a._)([(0,X.Cb)()],D.prototype,"urlPath",null),(0,a._)([(0,X.Cb)({type:String,json:{origins:{"portal-item":{read:{source:"url"}}}}})],D.prototype,"urlTemplate",void 0),(0,a._)([(0,L.r)("urlTemplate",["urlTemplate","templateUrl"])],D.prototype,"readUrlTemplate",null),(0,a._)([(0,R.c)("urlTemplate",{templateUrl:{type:String}})],D.prototype,"writeUrlTemplate",null),(0,a._)([(0,X.Cb)({type:_.B,json:{write:!0}})],D.prototype,"wmtsInfo",void 0),D=(0,a._)([(0,z.j)("esri.layers.WebTileLayer")],D);const C=D},20925:(ae,q,t)=>{t.d(q,{Z:()=>Z});var L,a=t(17626),T=t(46160),A=t(47877),W=t(14889),G=t(77712),P=(t(85931),t(8314),t(90912),t(76898)),$=t(49410),S=t(11136);const z={type:T.Z,readOnly:!0,json:{origins:{service:{read:{source:"sublayers",reader:R}}},read:!1}};function R(V,M,w){if(V&&Array.isArray(V))return new T.Z(V.map(h=>{const m=function b(V){return"group"===V.layerType?U:$.Z}(h);if(m){const _=new m;return _.read(h,w),_}w&&w.messages&&h&&w.messages.push(new W.Z("building-scene-layer:unsupported-sublayer-type","Building scene sublayer of type '"+(h.type||"unknown")+"' are not supported",{definition:h,context:w}))}))}let U=L=class extends S.Z{constructor(V){super(V),this.type="building-group",this.listMode="show",this.sublayers=null}loadAll(){return(0,A.w)(this,V=>L.forEachSublayer(this.sublayers,M=>{"building-group"!==M.type&&V(M)}))}};var V;(0,a._)([(0,G.Cb)({type:["hide","show","hide-children"],json:{write:!0}})],U.prototype,"listMode",void 0),(0,a._)([(0,G.Cb)(z)],U.prototype,"sublayers",void 0),U=L=(0,a._)([(0,P.j)("esri.layers.buildingSublayers.BuildingGroupSublayer")],U),(V=U||(U={})).sublayersProperty=z,V.readSublayers=R,V.forEachSublayer=function M(w,h){w.forEach(m=>{h(m),"building-group"===m.type&&M(m.sublayers,h)})};const Z=U},1476:(ae,q,t)=>{t.d(q,{S:()=>T,X:()=>a});const a=1;function T(A,W){var x;let G=0;for(const J of W){const X=null==(x=J.attributes)?void 0:x[A];"number"==typeof X&&isFinite(X)&&(G=Math.max(G,X))}return G}},35775:(ae,q,t)=>{t.d(q,{O0:()=>S,av:()=>J,b:()=>Z,d1:()=>P,og:()=>R});var a=t(15861),T=t(62208),A=t(37053),W=t(36630);class G{constructor(){this.code=null,this.description=null}}class x{constructor(w){this.error=new G,this.globalId=null,this.objectId=null,this.success=!1,this.uniqueId=null,this.error.description=w}}function J(M){return new x(M)}class X{constructor(w){this.globalId=null,this.success=!0,this.objectId=this.uniqueId=w}}function P(M){return new X(M)}const $=new Set;function S(M,w,h,m=!1,_){$.clear();for(const v in h){const j=M.get(v);if(!j)continue;const H=h[v],D=L(j,H);if(D!==H&&_&&_.push({name:"invalid-value-type",message:"attribute value was converted to match the field type",details:{field:j,originalValue:H,sanitizedValue:D}}),$.add(j.name),j&&(m||j.editable)){const C=(0,W.Qc)(j,D);if(C)return J((0,W.vP)(C,j,D));w[j.name]=D}}for(const v of M.requiredFields)if(!$.has(v.name))return J(`missing required field "${v.name}"`);return null}function L(M,w){let h=w;return"string"==typeof w&&(0,W.H7)(M)?h=parseFloat(w):null!=w&&(0,W.qN)(M)&&"string"!=typeof w&&(h=String(w)),(0,W.Pz)(h)}let z;function R(M,w){if(!M||!(0,A.JY)(w))return M;if("rings"in M||"paths"in M){if((0,T.Wi)(z))throw new TypeError("geometry engine not loaded");return z.simplify(w,M)}return M}function U(){return b.apply(this,arguments)}function b(){return(b=(0,a.Z)(function*(){return(0,T.Wi)(z)&&(z=yield Promise.all([t.e(4918),t.e(8592),t.e(2825)]).then(t.bind(t,32825))),z})).apply(this,arguments)}function Z(M,w){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(function*(M,w){!(0,A.JY)(M)||"esriGeometryPolygon"!==w&&"esriGeometryPolyline"!==w||(yield U())})).apply(this,arguments)}},5143:(ae,q,t)=>{t.d(q,{Z:()=>L});var a=t(17626),A=(t(29132),t(77712)),J=(t(85931),t(8314),t(90912),t(68653)),X=t(76898),P=t(51026),$=t(28930),S=t(65234);const L=z=>{let R=class extends z{constructor(){super(...arguments),this.copyright=null,this.minScale=0,this.maxScale=0,this.spatialReference=null,this.tileInfo=null,this.tilemapCache=null}readMinScale(U,b){return null!=b.minLOD&&null!=b.maxLOD?U:0}readMaxScale(U,b){return null!=b.minLOD&&null!=b.maxLOD?U:0}get supportsBlankTile(){return this.version>=10.2}readTilemapCache(U,b){return b.capabilities&&b.capabilities.includes("Tilemap")?new $.y({layer:this}):null}};return(0,a._)([(0,A.Cb)({json:{read:{source:"copyrightText"}}})],R.prototype,"copyright",void 0),(0,a._)([(0,A.Cb)()],R.prototype,"minScale",void 0),(0,a._)([(0,J.r)("service","minScale")],R.prototype,"readMinScale",null),(0,a._)([(0,A.Cb)()],R.prototype,"maxScale",void 0),(0,a._)([(0,J.r)("service","maxScale")],R.prototype,"readMaxScale",null),(0,a._)([(0,A.Cb)({type:S.Z})],R.prototype,"spatialReference",void 0),(0,a._)([(0,A.Cb)({readOnly:!0})],R.prototype,"supportsBlankTile",null),(0,a._)([(0,A.Cb)(P.h)],R.prototype,"tileInfo",void 0),(0,a._)([(0,A.Cb)()],R.prototype,"tilemapCache",void 0),(0,a._)([(0,J.r)("service","tilemapCache",["capabilities"])],R.prototype,"readTilemapCache",null),(0,a._)([(0,A.Cb)()],R.prototype,"version",void 0),R=(0,a._)([(0,X.j)("esri.layers.mixins.ArcGISCachedService")],R),R}},22825:(ae,q,t)=>{t.d(q,{A:()=>T});const a=[[3819,3819],[3821,3824],[3889,3889],[3906,3906],[4001,4025],[4027,4036],[4039,4047],[4052,4055],[4074,4075],[4080,4081],[4120,4176],[4178,4185],[4188,4216],[4218,4289],[4291,4304],[4306,4319],[4322,4326],[4463,4463],[4470,4470],[4475,4475],[4483,4483],[4490,4490],[4555,4558],[4600,4646],[4657,4765],[4801,4811],[4813,4821],[4823,4824],[4901,4904],[5013,5013],[5132,5132],[5228,5229],[5233,5233],[5246,5246],[5252,5252],[5264,5264],[5324,5340],[5354,5354],[5360,5360],[5365,5365],[5370,5373],[5381,5381],[5393,5393],[5451,5451],[5464,5464],[5467,5467],[5489,5489],[5524,5524],[5527,5527],[5546,5546],[2044,2045],[2081,2083],[2085,2086],[2093,2093],[2096,2098],[2105,2132],[2169,2170],[2176,2180],[2193,2193],[2200,2200],[2206,2212],[2319,2319],[2320,2462],[2523,2549],[2551,2735],[2738,2758],[2935,2941],[2953,2953],[3006,3030],[3034,3035],[3038,3051],[3058,3059],[3068,3068],[3114,3118],[3126,3138],[3150,3151],[3300,3301],[3328,3335],[3346,3346],[3350,3352],[3366,3366],[3389,3390],[3416,3417],[3833,3841],[3844,3850],[3854,3854],[3873,3885],[3907,3910],[4026,4026],[4037,4038],[4417,4417],[4434,4434],[4491,4554],[4839,4839],[5048,5048],[5105,5130],[5253,5259],[5269,5275],[5343,5349],[5479,5482],[5518,5519],[5520,5520],[20004,20032],[20064,20092],[21413,21423],[21473,21483],[21896,21899],[22171,22177],[22181,22187],[22191,22197],[25884,25884],[27205,27232],[27391,27398],[27492,27492],[28402,28432],[28462,28492],[30161,30179],[30800,30800],[31251,31259],[31275,31279],[31281,31290],[31466,31700]];function T(A){return a.some(([W,G])=>A>=W&&A<=G)}},89628:(ae,q,t)=>{t.d(q,{$9:()=>V,G4:()=>_,Lu:()=>Z,WW:()=>k,d:()=>B,eS:()=>D,gp:()=>j,j:()=>h,w9:()=>M,yN:()=>O});var a=t(15861),A=(t(29132),t(84792)),W=t(26584),G=t(63290),x=t(62208),J=t(37053),X=t(46367),P=t(82054),$=t(95786),S=t(58775),L=t(56554),z=t(60466),R=t(85),U=t(65234);const b=G.Z.getLogger("esri.layers.graphics.sources.ogcfeature"),Z="http://www.opengis.net/def/crs/",V=`${Z}OGC/1.3/CRS84`;function M(c,F){return w.apply(this,arguments)}function w(){return(w=(0,a.Z)(function*(c,F,te={},ie=5){const{links:_e}=c,de=E(_e,"items","application/geo+json")||E(_e,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,x.Wi)(de))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{data:ve}=yield(0,A.default)(de.href,{signal:te.signal,query:ye(pe({limit:ie},te.customParameters),{token:te.apiKey}),headers:{accept:"application/geo+json"}});yield(0,S.O3)(ve);const me=(0,S.my)(ve,{geometryType:F.geometryType}),Me=F.fields||me.fields||[],Be=null!=F.hasZ?F.hasZ:me.hasZ,Ue=me.geometryType,Ie=F.objectIdField||me.objectIdFieldName||"OBJECTID";let fe=F.timeInfo;const Te=Me.find(ue=>ue.name===Ie);if(Te)Te.type="esriFieldTypeOID",Te.editable=!1,Te.nullable=!1;else{if(!me.objectIdFieldType)throw new W.Z("ogc-feature-layer:missing-feature-id","Collection geojson require a feature id as a unique identifier");Me.unshift({name:Ie,alias:Ie,type:"esriFieldTypeOID",editable:!1,nullable:!1})}if(Ie!==me.objectIdFieldName){const ue=Me.find(Oe=>Oe.name===me.objectIdFieldName);ue&&(ue.type="esriFieldTypeInteger")}Me===me.fields&&me.unknownFields.length>0&&b.warn({name:"ogc-feature-layer:unknown-field-types",message:"Some fields types couldn't be inferred from the features and were dropped",details:{unknownFields:me.unknownFields}});for(const ue of Me){if(null==ue.name&&(ue.name=ue.alias),null==ue.alias&&(ue.alias=ue.name),"esriFieldTypeOID"!==ue.type&&"esriFieldTypeGlobalID"!==ue.type&&(ue.editable=null==ue.editable||!!ue.editable,ue.nullable=null==ue.nullable||!!ue.nullable),!ue.name)throw new W.Z("ogc-feature-layer:invalid-field-name","field name is missing",{field:ue});if(!R.v.jsonValues.includes(ue.type))throw new W.Z("ogc-feature-layer:invalid-field-type",`invalid type for field "${ue.name}"`,{field:ue})}if(fe){const ue=new z.Z(Me);if(fe.startTimeField){const Oe=ue.get(fe.startTimeField);Oe?(fe.startTimeField=Oe.name,Oe.type="esriFieldTypeDate"):fe.startTimeField=null}if(fe.endTimeField){const Oe=ue.get(fe.endTimeField);Oe?(fe.endTimeField=Oe.name,Oe.type="esriFieldTypeDate"):fe.endTimeField=null}if(fe.trackIdField){const Oe=ue.get(fe.trackIdField);Oe?fe.trackIdField=Oe.name:(fe.trackIdField=null,b.warn({name:"ogc-feature-layer:invalid-timeInfo-trackIdField",message:"trackIdField is missing",details:{timeInfo:fe}}))}fe.startTimeField||fe.endTimeField||(b.warn({name:"ogc-feature-layer:invalid-timeInfo",message:"startTimeField and endTimeField are missing",details:{timeInfo:fe}}),fe=null)}return{drawingInfo:Ue?(0,L.bU)(Ue):null,geometryType:Ue,fields:Me,hasZ:!!Be,objectIdField:Ie,timeInfo:fe}})).apply(this,arguments)}function h(c){return m.apply(this,arguments)}function m(){return(m=(0,a.Z)(function*(c,F={}){const{links:te}=c,ie=E(te,"data","application/json")||E(te,"http://www.opengis.net/def/rel/ogc/1.0/data","application/json");if((0,x.Wi)(ie))throw new W.Z("ogc-feature-layer:missing-collections-page","Missing collections url");const{apiKey:_e,customParameters:de,signal:ve}=F,{data:me}=yield(0,A.default)(ie.href,{signal:ve,headers:{accept:"application/json"},query:ye(pe({},de),{token:_e})});return me})).apply(this,arguments)}function _(c){return v.apply(this,arguments)}function v(){return(v=(0,a.Z)(function*(c,F={}){const{links:te}=c,ie=E(te,"conformance","application/json")||E(te,"http://www.opengis.net/def/rel/ogc/1.0/conformance","application/json");if((0,x.Wi)(ie))throw new W.Z("ogc-feature-layer:missing-conformance-page","Missing conformance url");const{apiKey:_e,customParameters:de,signal:ve}=F,{data:me}=yield(0,A.default)(ie.href,{signal:ve,headers:{accept:"application/json"},query:ye(pe({},de),{token:_e})});return me})).apply(this,arguments)}function j(c){return H.apply(this,arguments)}function H(){return(H=(0,a.Z)(function*(c,F={}){const{apiKey:te,customParameters:ie,signal:_e}=F,{data:de}=yield(0,A.default)(c,{signal:_e,headers:{accept:"application/json"},query:ye(pe({},ie),{token:te})});return de})).apply(this,arguments)}function D(c){return C.apply(this,arguments)}function C(){return(C=(0,a.Z)(function*(c,F={}){const te="application/vnd.oai.openapi+json;version=3.0",ie=E(c.links,"service-desc",te);if((0,x.Wi)(ie))return b.warn("ogc-feature-layer:missing-openapi-page","The OGC API-Features server does not have an OpenAPI page."),null;const{apiKey:_e,customParameters:de,signal:ve}=F,{data:me}=yield(0,A.default)(ie.href,{signal:ve,headers:{accept:te},query:ye(pe({},de),{token:_e})});return me})).apply(this,arguments)}function B(c){var _e;const F=null==(_e=new RegExp("^http:\\/\\/www\\.opengis.net\\/def\\/crs\\/(?<authority>.*)\\/(?<version>.*)\\/(?<code>.*)$","i").exec(c))?void 0:_e.groups;if(!F)return null;const{authority:te,code:ie}=F;switch(te.toLowerCase()){case"ogc":switch(ie.toLowerCase()){case"crs27":return U.Z.GCS_NAD_1927.wkid;case"crs83":return 4269;case"crs84":case"crs84h":return U.Z.WGS84.wkid;default:return null}case"esri":case"epsg":{const de=Number.parseInt(ie,10);return Number.isNaN(de)?null:de}default:return null}}function O(c,F,te){return N.apply(this,arguments)}function N(){return(N=(0,a.Z)(function*(c,F,te){const ie=yield k(c,F,te);return(0,P.cn)(ie)})).apply(this,arguments)}function k(c,F,te){return re.apply(this,arguments)}function re(){return(re=(0,a.Z)(function*(c,F,te){const{capabilities:{query:{maxRecordCount:ie}},collection:_e,layerDefinition:de,queryParameters:{apiKey:ve,customParameters:me},spatialReference:Me,supportedCrs:Be}=c,{links:Ue}=_e,Ie=E(Ue,"items","application/geo+json")||E(Ue,"http://www.opengis.net/def/rel/ogc/1.0/items","application/geo+json");if((0,x.Wi)(Ie))throw new W.Z("ogc-feature-layer:missing-items-page","Missing items url");const{geometry:fe,num:Te,start:ue,timeExtent:Oe,where:Ge}=F;if(F.objectIds)throw new W.Z("ogc-feature-layer:query-by-objectids-not-supported","Queries with objectids are not supported");const $e=U.Z.fromJSON(Me),Le=(0,x.Pt)(F.outSpatialReference,$e),Re=Le.isWGS84?null:Y(Le,Be),We=ee(fe,Be),Xe=se(Oe),Ye=ne(Ge),Qe=null!=Te?Te:null!=ue&&void 0!==ue?10:ie,{data:Ce}=yield(0,A.default)(Ie.href,ye(pe({},te),{query:ye(pe(pe({},me),We),{crs:Re,datetime:Xe,query:Ye,limit:Qe,startindex:ue,token:ve}),headers:{accept:"application/geo+json"}}));let xe=!1;Ce.links&&(xe=!!Ce.links.find(je=>"next"===je.rel)),!xe&&Number.isInteger(Ce.numberMatched)&&Number.isInteger(Ce.numberReturned)&&(xe=Ce.numberReturned<Ce.numberMatched);const{fields:Ke,globalIdField:ke,hasM:Fe,hasZ:Ne,objectIdField:we}=de,Ze=de.geometryType,Ve=(0,S.lG)(Ce,{geometryType:Ze,hasZ:Ne,objectIdField:we});if(!Re&&Le.isWebMercator)for(const Se of Ve)if((0,x.pC)(Se.geometry)){const je=(0,P.di)(Se.geometry,Ze,Ne,!1);je.spatialReference=U.Z.WGS84,Se.geometry=(0,P.GH)((0,X.iV)(je,Le))}for(const Se of Ve)Se.objectId=Se.attributes[we];const qe=Re||!Re&&Le.isWebMercator?Le.toJSON():J.Zn,Pe=new $.Z;return Pe.exceededTransferLimit=xe,Pe.features=Ve,Pe.fields=Ke,Pe.geometryType=Ze,Pe.globalIdFieldName=ke,Pe.hasM=Fe,Pe.hasZ=Ne,Pe.objectIdFieldName=we,Pe.spatialReference=qe,Pe})).apply(this,arguments)}function Y(c,F){var de,ve,me;const{isWebMercator:te,wkid:ie}=c;if(!ie)return null;const _e=te?null!=(me=null!=(ve=null!=(de=F[3857])?de:F[102100])?ve:F[102113])?me:F[900913]:F[c.wkid];return _e?`${Z}${_e}`:null}function Q(c){if((0,x.Wi)(c))return"";const{xmin:F,ymin:te,xmax:ie,ymax:_e}=c;return`${F},${te},${ie},${_e}`}function se(c){if((0,x.Wi)(c))return null;const{start:F,end:te}=c;return`${(0,x.pC)(F)?F.toISOString():".."}/${(0,x.pC)(te)?te.toISOString():".."}`}function ne(c){return(0,x.Wi)(c)||!c||"1=1"===c?null:c}function ee(c,F){if(!function oe(c){return(0,x.pC)(c)&&"extent"===c.type}(c))return null;const{spatialReference:te}=c;if(!te||te.isWGS84)return{bbox:Q(c)};const ie=Y(te,F);return(0,x.pC)(ie)?{bbox:Q(c),"bbox-crs":ie}:te.isWebMercator?{bbox:Q((0,X.iV)(c,U.Z.WGS84))}:null}function E(c,F,te){return c.find(ie=>ie.rel===F&&ie.type===te)||c.find(ie=>ie.rel===F&&!ie.type)}},14772:(ae,q,t)=>{t.d(q,{R:()=>U});var a=t(17626),T=t(14517),A=t(80542),W=t(62208),G=t(95737),x=t(77712),$=(t(85931),t(8314),t(90912),t(76898)),S=t(13812),L=t(59990),z=t(13410);const R={visible:"visibleSublayers",definitionExpression:"layerDefs",labelingInfo:"hasDynamicLayers",labelsVisible:"hasDynamicLayers",opacity:"hasDynamicLayers",minScale:"visibleSublayers",maxScale:"visibleSublayers",renderer:"hasDynamicLayers",source:"hasDynamicLayers"};let U=class extends((0,A.p)(T.Z)){constructor(b){super(b),this.floors=null,this.scale=0}destroy(){this.layer=null}get dynamicLayers(){if(!this.hasDynamicLayers)return null;const b=this.visibleSublayers.map(Z=>{const V=(0,L.f)(this.floors,Z);return Z.toExportImageJSON(V)});return b.length?JSON.stringify(b):null}get hasDynamicLayers(){return this.layer&&(0,z.FN)(this.visibleSublayers,this.layer.serviceSublayers,this.layer.gdbVersion)}set layer(b){this._get("layer")!==b&&(this._set("layer",b),this.handles.remove("layer"),b&&this.handles.add([b.allSublayers.on("change",()=>this.notifyChange("visibleSublayers")),b.on("sublayer-update",Z=>this.notifyChange(R[Z.propertyName]))],"layer"))}get layers(){const b=this.visibleSublayers;return b?b.length?"show:"+b.map(Z=>Z.id).join(","):"show:-1":null}get layerDefs(){var V;const b=!(null==(V=this.floors)||!V.length),Z=this.visibleSublayers.filter(M=>null!=M.definitionExpression||b&&null!=M.floorInfo);return Z.length?JSON.stringify(Z.reduce((M,w)=>{const h=(0,L.f)(this.floors,w),m=(0,G._)(h,w.definitionExpression);return(0,W.pC)(m)&&(M[w.id]=m),M},{})):null}get version(){this.commitProperty("layers"),this.commitProperty("layerDefs"),this.commitProperty("dynamicLayers"),this.commitProperty("timeExtent");const b=this.layer;return b&&(b.commitProperty("dpi"),b.commitProperty("imageFormat"),b.commitProperty("imageTransparency"),b.commitProperty("gdbVersion")),(this._get("version")||0)+1}get visibleSublayers(){const b=[];if(!this.layer)return b;const Z=this.layer.sublayers,V=w=>{const h=this.scale;w.visible&&(0===h||(0===w.minScale||h<=w.minScale)&&(0===w.maxScale||h>=w.maxScale))&&(w.sublayers?w.sublayers.forEach(V):b.unshift(w))};Z&&Z.forEach(V);const M=this._get("visibleSublayers");return!M||M.length!==b.length||M.some((w,h)=>b[h]!==w)?b:M}toJSON(){const b=this.layer;let Z={dpi:b.dpi,format:b.imageFormat,transparent:b.imageTransparency,gdbVersion:b.gdbVersion||null};return this.hasDynamicLayers&&this.dynamicLayers?Z.dynamicLayers=this.dynamicLayers:Z=ye(pe({},Z),{layers:this.layers,layerDefs:this.layerDefs}),Z}};(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"dynamicLayers",null),(0,a._)([(0,x.Cb)()],U.prototype,"floors",void 0),(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"hasDynamicLayers",null),(0,a._)([(0,x.Cb)()],U.prototype,"layer",null),(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"layers",null),(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"layerDefs",null),(0,a._)([(0,x.Cb)({type:Number})],U.prototype,"scale",void 0),(0,a._)([(0,x.Cb)(S.qG)],U.prototype,"timeExtent",void 0),(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"version",null),(0,a._)([(0,x.Cb)({readOnly:!0})],U.prototype,"visibleSublayers",null),U=(0,a._)([(0,$.j)("esri.layers.mixins.ExportImageParameters")],U)},51920:(ae,q,t)=>{t.d(q,{j:()=>$});var a=t(17626),T=t(14517),A=t(80542),W=t(77712),X=(t(85931),t(8314),t(90912),t(76898));const P={visible:"visibleSublayers"};let $=class extends((0,A.p)(T.Z)){constructor(S){super(S),this.scale=0}set layer(S){this._get("layer")!==S&&(this._set("layer",S),this.handles.remove("layer"),S&&this.handles.add([S.sublayers.on("change",()=>this.notifyChange("visibleSublayers")),S.on("wms-sublayer-update",L=>this.notifyChange(P[L.propertyName]))],"layer"))}get layers(){const{visibleSublayers:S}=this;return S.filter(L=>L.name).map(L=>L.name).join(",")}get version(){this.commitProperty("layers");const S=this.layer;return S&&S.commitProperty("imageTransparency"),(this._get("version")||0)+1}get visibleSublayers(){const{layer:S,scale:L}=this,z=null==S?void 0:S.sublayers,R=[],U=b=>{const{minScale:Z,maxScale:V,sublayers:M,visible:w}=b;w&&(0===L||(0===Z||L<=Z)&&(0===V||L>=V))&&(M?M.forEach(U):R.unshift(b))};return null==z||z.forEach(U),R}toJSON(){const{layer:S,layers:L}=this,{imageFormat:z,imageTransparency:R,version:U}=S;return{format:z,request:"GetMap",service:"WMS",styles:"",transparent:R?"TRUE":"FALSE",version:U,layers:L}}};(0,a._)([(0,W.Cb)()],$.prototype,"layer",null),(0,a._)([(0,W.Cb)({readOnly:!0})],$.prototype,"layers",null),(0,a._)([(0,W.Cb)({type:Number})],$.prototype,"scale",void 0),(0,a._)([(0,W.Cb)({readOnly:!0})],$.prototype,"version",null),(0,a._)([(0,W.Cb)({readOnly:!0})],$.prototype,"visibleSublayers",null),$=(0,a._)([(0,X.j)("esri.layers.support.ExportWMSImageParameters")],$)},74711:(ae,q,t)=>{t.d(q,{W:()=>P});var a=t(15861),T=t(24263),A=t(84792),W=t(62208),G=t(10699),x=t(32258),J=t(84687),X=t(55463);class P{constructor(S,L,z,R){this.parsedUrl=S,this.portalItem=L,this.apiKey=z,this.signal=R,this.rootDocument=null;const U=this.parsedUrl.path.match(/^(.*)\/SceneServer\/layers\/([\d]*)\/?$/i);U&&(this.urlParts={root:U[1],layerId:parseInt(U[2],10)})}fetch(){var S=this;return(0,a.Z)(function*(){var R;if(!S.urlParts)return null;const L=null!=(R=S.portalItem)?R:yield S._portalItemFromServiceItemId();if((0,W.Wi)(L))return S._loadFromUrl();const z=yield S._findAndLoadRelatedPortalItem(L);return(0,W.Wi)(z)?null:S._loadFeatureLayerFromPortalItem(z)})()}fetchPortalItem(){var S=this;return(0,a.Z)(function*(){var z;if(!S.urlParts)return null;const L=null!=(z=S.portalItem)?z:yield S._portalItemFromServiceItemId();return(0,W.Wi)(L)?null:S._findAndLoadRelatedPortalItem(L)})()}_fetchRootDocument(){var S=this;return(0,a.Z)(function*(){if((0,W.pC)(S.rootDocument))return S.rootDocument;if((0,W.Wi)(S.urlParts))return S.rootDocument={},{};const L={query:{f:"json",token:S.apiKey},responseType:"json",signal:S.signal},z=`${S.urlParts.root}/SceneServer`;try{const R=yield(0,A.default)(z,L);S.rootDocument=R.data}catch(R){S.rootDocument={}}return S.rootDocument})()}_fetchServiceOwningPortalUrl(){var S=this;return(0,a.Z)(function*(){var R;const L=null==(R=T.id)?void 0:R.findServerInfo(S.parsedUrl.path);if(null!=L&&L.owningSystemUrl)return L.owningSystemUrl;const z=S.parsedUrl.path.replace(/(.*\/rest)\/.*/i,"$1")+"/info";try{const U=(yield(0,A.default)(z,{query:{f:"json"},responseType:"json",signal:S.signal})).data.owningSystemUrl;if(U)return U}catch(U){(0,G.r9)(U)}return null})()}_findAndLoadRelatedPortalItem(S){var L=this;return(0,a.Z)(function*(){try{return(yield S.fetchRelatedItems({relationshipType:"Service2Service",direction:"reverse"},{signal:L.signal})).find(z=>"Feature Service"===z.type)||null}catch(z){return(0,G.r9)(z),null}})()}_loadFeatureLayerFromPortalItem(S){var L=this;return(0,a.Z)(function*(){yield S.load({signal:L.signal});const z=yield L._findMatchingAssociatedSublayerUrl(S.url);return new x.default({url:z,portalItem:S}).load({signal:L.signal})})()}_loadFromUrl(){var S=this;return(0,a.Z)(function*(){const L=yield S._findMatchingAssociatedSublayerUrl(`${S.urlParts.root}/FeatureServer`);return new x.default({url:L}).load({signal:S.signal})})()}_findMatchingAssociatedSublayerUrl(S){var L=this;return(0,a.Z)(function*(){const z=S.replace(/^(.*FeatureServer)(\/[\d]*\/?)?$/i,"$1"),R={query:{f:"json"},responseType:"json",authMode:"no-prompt",signal:L.signal},U=L.urlParts.layerId,b=L._fetchRootDocument(),Z=(0,A.default)(z,R),[V,M]=yield Promise.all([Z,b]),w=M&&M.layers,h=V.data&&V.data.layers;if(!Array.isArray(h))throw new Error("expected layers array");if(Array.isArray(w)){for(let m=0;m<Math.min(w.length,h.length);m++)if(w[m].id===U)return`${z}/${h[m].id}`}else if(U<h.length)return`${z}/${h[U].id}`;throw new Error("could not find matching associated sublayer")})()}_portalItemFromServiceItemId(){var S=this;return(0,a.Z)(function*(){const L=(yield S._fetchRootDocument()).serviceItemId;if(!L)return null;const z=new X.default({id:L,apiKey:S.apiKey}),R=yield S._fetchServiceOwningPortalUrl();(0,W.pC)(R)&&(z.portal=new J.Z({url:R}));try{return z.load({signal:S.signal})}catch(U){return(0,G.r9)(U),null}})()}}},28930:(ae,q,t)=>{t.d(q,{y:()=>H});var v,a=t(15861),T=t(17626),A=t(84792),W=t(14517),G=t(27306),x=t(26584),J=t(80542),X=t(63290),P=t(93961),$=t(77029),S=t(10699),L=t(32917),z=t(50618),R=t(21726),U=t(77712),b=t(85931),V=(t(8314),t(66656)),M=t(76898),w=t(58817);class h{constructor(){this.location={left:0,top:0,width:0,height:0},this._allAvailability="unknown",this.byteSize=40}getAvailability(C,B){if("unknown"!==this._allAvailability)return this._allAvailability;const O=(C-this.location.top)*this.location.width+(B-this.location.left),k=O>>3,re=this._tileAvailabilityBitSet;return k<0||k>re.length?"unknown":re[k]&1<<O%8?"available":"unavailable"}_updateFromData(C){let N=!0,k=!0;const re=Math.ceil(this.location.width*this.location.height/8),oe=new Uint8Array(re);let Y=0;for(let Q=0;Q<C.length;Q++){const se=Q%8;C[Q]?(k=!1,oe[Y]|=1<<se):N=!1,7===se&&++Y}k?this._allAvailability="unavailable":N?this._allAvailability="available":(this._allAvailability="unknown",this._tileAvailabilityBitSet=oe,this.byteSize+=oe.length)}static fromDefinition(C,B){const O=C.service.request||A.default,{row:N,col:k,width:re,height:oe}=C,Y={query:{f:"json"}};return B=B?pe(pe({},Y),B):Y,O(function _(D){let C;if("vector-tile"===D.service.type)C=`${D.service.url}/tilemap/${D.level}/${D.row}/${D.col}/${D.width}/${D.height}`;else{const O=D.service.tileServers;C=`${O&&O.length?O[D.row%O.length]:D.service.url}/tilemap/${D.level}/${D.row}/${D.col}/${D.width}/${D.height}`}const B=D.service.query;return B&&(C=`${C}?${B}`),C}(C),B).then(Q=>Q.data).catch(Q=>{if(Q&&Q.details&&422===Q.details.httpStatus)return{location:{top:N,left:k,width:re,height:oe},valid:!0,data:(0,b.a9)(re*oe,0)};throw Q}).then(Q=>{if(Q.location&&(Q.location.top!==N||Q.location.left!==k||Q.location.width!==re||Q.location.height!==oe))throw new x.Z("tilemap:location-mismatch","Tilemap response for different location than requested",{response:Q,definition:{top:N,left:k,width:re,height:oe}});return h.fromJSON(Q)})}static fromJSON(C){h._validateJSON(C);const B=new h;return B.location=Object.freeze((0,w.d9)(C.location)),B._updateFromData(C.data),Object.freeze(B)}static _validateJSON(C){if(!C||!C.location)throw new x.Z("tilemap:missing-location","Location missing from tilemap response");if(!1===C.valid)throw new x.Z("tilemap:invalid","Tilemap response was marked as invalid");if(!C.data)throw new x.Z("tilemap:missing-data","Data missing from tilemap response");if(!Array.isArray(C.data))throw new x.Z("tilemap:data-mismatch","Data must be an array of numbers");if(C.data.length!==C.location.width*C.location.height)throw new x.Z("tilemap:data-mismatch","Number of data items does not match width/height of tilemap")}}function m(D){return`${D.level}/${D.row}/${D.col}/${D.width}/${D.height}`}const j=X.Z.getLogger("esri.layers.support.TilemapCache");let H=v=class extends((0,J.p)(W.Z)){constructor(D){super(D),this._pendingTilemapRequests={},this._availableLevels={},this.levels=5,this.cacheByteSize=2*G.Y8.MEGABYTES,this.request=A.default,this._prefetchingEnabled=!0}initialize(){this._tilemapCache=new P.Z(this.cacheByteSize),this.own([(0,L.YP)(()=>{const{layer:D}=this;return[null==D?void 0:D.parsedUrl,null==D?void 0:D.tileServers,null==D?void 0:D.apiKey,null==D?void 0:D.customParameters]},()=>this._initializeTilemapDefinition()),(0,L.YP)(()=>{var D,C;return null==(C=null==(D=this.layer)?void 0:D.tileInfo)?void 0:C.lods},D=>this._initializeAvailableLevels(D),L.tX)]),this._initializeTilemapDefinition()}castLevels(D){return D<=2?(j.error("Minimum levels for Tilemap is 3, but got ",D),3):D}get size(){return 1<<this.levels}fetchTilemap(D,C,B,O){if(!this._availableLevels[D])return Promise.reject(new x.Z("tilemap-cache:level-unavailable",`Level ${D} is unavailable in the service`));const N=this._tmpTilemapDefinition,k=this._tilemapFromCache(D,C,B,N);if(k)return Promise.resolve(k);const re=O&&O.signal;return O=ye(pe({},O),{signal:null}),new Promise((oe,Y)=>{(0,S.fu)(re,()=>Y((0,S.zE)()));const Q=m(N);let se=this._pendingTilemapRequests[Q];if(!se){se=h.fromDefinition(N,O).then(ee=>(this._tilemapCache.put(Q,ee,ee.byteSize),ee));const ne=()=>delete this._pendingTilemapRequests[Q];this._pendingTilemapRequests[Q]=se,se.then(ne,ne)}se.then(oe,Y)})}getAvailability(D,C,B){if(!this._availableLevels[D])return"unavailable";const O=this._tilemapFromCache(D,C,B,this._tmpTilemapDefinition);return O?O.getAvailability(C,B):"unknown"}fetchAvailability(D,C,B,O){return this._availableLevels[D]?this.fetchTilemap(D,C,B,O).catch(N=>N).then(N=>{if(N instanceof h){const k=N.getAvailability(C,B);if("unavailable"===k)throw new x.Z("tile-map:tile-unavailable","Tile is not available",{level:D,row:C,col:B});return k}if((0,S.D_)(N))throw N;return"unknown"}):Promise.reject(new x.Z("tilemap-cache:level-unavailable",`Level ${D} is unavailable in the service`))}fetchAvailabilityUpsample(D,C,B,O,N){O.level=D,O.row=C,O.col=B;const k=this.layer.tileInfo;k.updateTileInfo(O);const re=this.fetchAvailability(D,C,B,N).catch(oe=>{if((0,S.D_)(oe))throw oe;if(k.upsampleTile(O))return this.fetchAvailabilityUpsample(O.level,O.row,O.col,O);throw oe});return this._fetchAvailabilityUpsamplePrefetch(O.id,D,C,B,N,re),re}_fetchAvailabilityUpsamplePrefetch(D,C,B,O,N,k){var re=this;return(0,a.Z)(function*(){if(!re._prefetchingEnabled)return;const oe=`prefetch-${D}`;if(re.handles.has(oe))return;const Y=new AbortController;k.then(()=>Y.abort(),()=>Y.abort());let Q=!1;if(re.handles.add({remove(){Q||(Q=!0,Y.abort())}},oe),yield(0,z.MU)(10,Y.signal).catch(()=>{}),Q||(Q=!0,re.handles.remove(oe)),(0,S.Hc)(Y))return;const ne={id:D,level:C,row:B,col:O},ee=ye(pe({},N),{signal:Y.signal}),E=re.layer.tileInfo;for(let c=0;v._prefetches.length<v._maxPrefetch&&E.upsampleTile(ne);++c){const F=re.fetchAvailability(ne.level,ne.row,ne.col,ee);v._prefetches.push(F);const te=()=>{v._prefetches.removeUnordered(F)};F.then(te,te)}})()}_initializeTilemapDefinition(){var O;if(!this.layer.parsedUrl)return;const{parsedUrl:D,apiKey:C,customParameters:B}=this.layer;this._tilemapCache.clear(),this._tmpTilemapDefinition={service:{url:D.path,query:(0,R.B7)(ye(pe(pe({},D.query),B),{token:null!=C?C:null==(O=D.query)?void 0:O.token})),tileServers:this.layer.tileServers,request:this.request,type:this.layer.type},width:this.size,height:this.size,level:0,row:0,col:0}}_tilemapFromCache(D,C,B,O){O.level=D,O.row=C-C%this.size,O.col=B-B%this.size;const N=m(O);return this._tilemapCache.get(N)}_initializeAvailableLevels(D){this._availableLevels={},D&&D.forEach(C=>this._availableLevels[C.level]=!0)}get test(){const D=this;return{get prefetchingEnabled(){return D._prefetchingEnabled},set prefetchingEnabled(C){D._prefetchingEnabled=C},hasTilemap:(C,B,O)=>!!D._tilemapFromCache(C,B,O,D._tmpTilemapDefinition)}}};H._maxPrefetch=4,H._prefetches=new $.Z({initialSize:v._maxPrefetch}),(0,T._)([(0,U.Cb)({constructOnly:!0,type:Number})],H.prototype,"levels",void 0),(0,T._)([(0,V.p)("levels")],H.prototype,"castLevels",null),(0,T._)([(0,U.Cb)({readOnly:!0,type:Number})],H.prototype,"size",null),(0,T._)([(0,U.Cb)({constructOnly:!0,type:Number})],H.prototype,"cacheByteSize",void 0),(0,T._)([(0,U.Cb)({constructOnly:!0})],H.prototype,"layer",void 0),(0,T._)([(0,U.Cb)({constructOnly:!0})],H.prototype,"request",void 0),H=v=(0,T._)([(0,M.j)("esri.layers.support.TilemapCache")],H)},91309:(ae,q,t)=>{t.d(q,{B:()=>X});var J,a=t(17626),T=t(86810),A=t(58817),W=t(77712),x=(t(90912),t(76898));let X=J=class extends T.wq{constructor(P){super(P)}clone(){return new J({customLayerParameters:(0,A.d9)(this.customLayerParameters),customParameters:(0,A.d9)(this.customParameters),layerIdentifier:this.layerIdentifier,tileMatrixSet:this.tileMatrixSet,url:this.url})}};(0,a._)([(0,W.Cb)({json:{type:Object,write:!0}})],X.prototype,"customLayerParameters",void 0),(0,a._)([(0,W.Cb)({json:{type:Object,write:!0}})],X.prototype,"customParameters",void 0),(0,a._)([(0,W.Cb)({type:String,json:{write:!0}})],X.prototype,"layerIdentifier",void 0),(0,a._)([(0,W.Cb)({type:String,json:{write:!0}})],X.prototype,"tileMatrixSet",void 0),(0,a._)([(0,W.Cb)({type:String,json:{write:!0}})],X.prototype,"url",void 0),X=J=(0,a._)([(0,x.j)("esri.layer.support.WMTSLayerInfo")],X)},24578:(ae,q,t)=>{t.r(q),t.d(q,{fetchFeatureService:()=>w,fromUrl:()=>X});var a=t(15861),T=t(84792),A=t(26584),W=t(62208),G=t(21726),x=t(38305),J=t(30164);function X(C){return P.apply(this,arguments)}function P(){return(P=(0,a.Z)(function*(C){var re;const B=null==(re=C.properties)?void 0:re.customParameters,O=yield L(C.url,B),N=ye(pe({},C.properties),{url:C.url});if(!O.sublayerIds)return null!=O.layerOrTableId&&(N.layerId=O.layerOrTableId,N.sourceJSON=O.sourceJSON),new O.Constructor(N);const k=new((yield t.e(5964).then(t.bind(t,25964))).default)({title:O.parsedUrl.title});return S(k,O,N),k})).apply(this,arguments)}function $(C,B){return C?C.find(O=>O.id===B):null}function S(C,B,O){function N(k,re){const oe=ye(pe({},O),{layerId:k,sublayerTitleMode:"service-name"});return(0,W.pC)(re)&&(oe.sourceJSON=re),new B.Constructor(oe)}B.sublayerIds.forEach(k=>{const re=N(k,$(B.sublayerInfos,k));C.add(re)}),B.tableIds.forEach(k=>{const re=N(k,$(B.tableInfos,k));C.tables.add(re)})}function L(C,B){return z.apply(this,arguments)}function z(){return(z=(0,a.Z)(function*(C,B){var ee,E;let O=(0,x.Qc)(C);if((0,W.Wi)(O)&&(O=yield R(C,B)),(0,W.Wi)(O))throw new A.Z("arcgis-layers:url-mismatch","The url '${url}' is not a valid arcgis resource",{url:C});const{serverType:N,sublayer:k}=O;let re;const oe={FeatureServer:"FeatureLayer",StreamServer:"StreamLayer",VectorTileServer:"VectorTileLayer"};switch(N){case"MapServer":re=null!=k?"FeatureLayer":v(C,B).then(c=>c?"TileLayer":"MapImageLayer");break;case"ImageServer":re=H(C,{customParameters:B}).then(c=>{const F=c.tileInfo&&c.tileInfo.format;return c.tileInfo?"LERC"!==(null==F?void 0:F.toUpperCase())||c.cacheType&&"elevation"!==c.cacheType.toLowerCase()?"ImageryTileLayer":"ElevationLayer":"ImageryLayer"});break;case"SceneServer":re=H(O.url.path,{customParameters:B}).then(c=>{var F;if(c){if("Voxel"===(null==c?void 0:c.layerType))return"VoxelLayer";if((null==c?void 0:c.layers)&&Array.isArray(c.layers)&&c.layers.length>0){const te={Point:"SceneLayer","3DObject":"SceneLayer",IntegratedMesh:"IntegratedMeshLayer",PointCloud:"PointCloudLayer",Building:"BuildingSceneLayer"},ie=null==(F=c.layers[0])?void 0:F.layerType;if(null!=te[ie])return te[ie]}}return"SceneLayer"});break;default:re=oe[N]}const Q="FeatureServer"===N,se={parsedUrl:O,Constructor:null,layerOrTableId:Q?k:null,sublayerIds:null,tableIds:null},ne=yield re;if({FeatureLayer:!0,SceneLayer:!0}[ne]&&null==k){const c=yield Z(C,N,B);Q&&(se.sublayerInfos=c.layerInfos,se.tableInfos=c.tableInfos),c.layerIds.length+c.tableIds.length!==1?(se.sublayerIds=c.layerIds,se.tableIds=c.tableIds):Q&&(se.layerOrTableId=null!=(ee=c.layerIds[0])?ee:c.tableIds[0],se.sourceJSON=null!=(E=c.layerInfos[0])?E:c.tableInfos[0])}return se.Constructor=yield m(ne),se})).apply(this,arguments)}function R(C,B){return U.apply(this,arguments)}function U(){return(U=(0,a.Z)(function*(C,B){var Y;const O=yield H(C,{customParameters:B});let N=null,k=null;const re=O.type;if("Feature Layer"===re||"Table"===re?(N="FeatureServer",k=O.id):"indexedVector"===re?N="VectorTileServer":O.hasOwnProperty("mapName")?N="MapServer":O.hasOwnProperty("bandCount")&&O.hasOwnProperty("pixelSizeX")?N="ImageServer":O.hasOwnProperty("maxRecordCount")&&O.hasOwnProperty("allowGeometryUpdates")?N="FeatureServer":O.hasOwnProperty("streamUrls")?N="StreamServer":b(O)?(N="SceneServer",k=O.id):O.hasOwnProperty("layers")&&b(null==(Y=O.layers)?void 0:Y[0])&&(N="SceneServer"),!N)return null;const oe=null!=k?(0,x.DR)(C):null;return{title:(0,W.pC)(oe)&&O.name||(0,G.vt)(C),serverType:N,sublayer:k,url:{path:(0,W.pC)(oe)?oe.serviceUrl:(0,G.mN)(C).path}}})).apply(this,arguments)}function b(C){return(null==C?void 0:C.hasOwnProperty("store"))&&C.hasOwnProperty("id")&&"number"==typeof C.id}function Z(C,B,O){return V.apply(this,arguments)}function V(){return(V=(0,a.Z)(function*(C,B,O){let N,k=!1;if("FeatureServer"===B){const Y=yield w(C,{customParameters:O});k=!!Y.layersJSON,N=Y.layersJSON||Y.serviceJSON}else N=yield H(C,{customParameters:O});const re=null==N?void 0:N.layers,oe=null==N?void 0:N.tables;return{layerIds:(null==re?void 0:re.map(Y=>Y.id).reverse())||[],tableIds:(null==oe?void 0:oe.map(Y=>Y.id).reverse())||[],layerInfos:k?re:[],tableInfos:k?oe:[]}})).apply(this,arguments)}function M(C){return!C.type||"Feature Layer"===C.type}function w(C,B){return h.apply(this,arguments)}function h(){return(h=(0,a.Z)(function*(C,B){var re,oe;let O=yield H(C,B);O=O||{},O.layers=(null==(re=O.layers)?void 0:re.filter(M))||[];const N={serviceJSON:O};if(O.currentVersion<10.5)return N;const k=yield H(C+"/layers",B);return N.layersJSON={layers:(null==(oe=null==k?void 0:k.layers)?void 0:oe.filter(M))||[],tables:(null==k?void 0:k.tables)||[]},N})).apply(this,arguments)}function m(C){return _.apply(this,arguments)}function _(){return(_=(0,a.Z)(function*(C){return(0,J.T[C])()})).apply(this,arguments)}function v(C,B){return j.apply(this,arguments)}function j(){return(j=(0,a.Z)(function*(C,B){return(yield H(C,{customParameters:B})).tileInfo})).apply(this,arguments)}function H(C,B){return D.apply(this,arguments)}function D(){return(D=(0,a.Z)(function*(C,B){return(yield(0,T.default)(C,{responseType:"json",query:ye(pe({f:"json"},null==B?void 0:B.customParameters),{token:null==B?void 0:B.apiKey})})).data})).apply(this,arguments)}},96504:(ae,q,t)=>{t.d(q,{Z:()=>P});var a=t(17626),T=t(86810),A=t(77712),J=(t(85931),t(8314),t(90912),t(76898));let X=class extends T.wq{get affectsPixelSize(){return!1}forwardTransform($){return $}inverseTransform($){return $}};(0,a._)([(0,A.Cb)()],X.prototype,"affectsPixelSize",null),(0,a._)([(0,A.Cb)({json:{write:!0}})],X.prototype,"spatialReference",void 0),X=(0,a._)([(0,J.j)("esri.layers.support.rasterTransforms.BaseRasterTransform")],X);const P=X},76671:(ae,q,t)=>{t.d(q,{Z:()=>$});var a=t(17626),T=t(77712),x=(t(85931),t(8314),t(90912),t(55342)),J=t(76898),X=t(96504);let P=class extends X.Z{constructor(){super(...arguments),this.type="gcs-shift",this.tolerance=1e-8}forwardTransform(S){return"point"===(S=S.clone()).type?(S.x>180+this.tolerance&&(S.x-=360),S):(S.xmin>=180-this.tolerance?(S.xmax-=360,S.xmin-=360):S.xmax>180+this.tolerance&&(S.xmin=-180,S.xmax=180),S)}inverseTransform(S){return"point"===(S=S.clone()).type?(S.x<-this.tolerance&&(S.x+=360),S):(S.xmin<-this.tolerance&&(S.xmin+=360,S.xmax+=360),S)}};(0,a._)([(0,x.J)({GCSShiftXform:"gcs-shift"})],P.prototype,"type",void 0),(0,a._)([(0,T.Cb)()],P.prototype,"tolerance",void 0),P=(0,a._)([(0,J.j)("esri.layers.support.rasterTransforms.GCSShiftTransform")],P);const $=P},85374:(ae,q,t)=>{t.d(q,{Z:()=>V});var a=t(17626),A=(t(29132),t(77712)),J=(t(85931),t(8314),t(90912),t(55342)),X=t(68653),P=t(76898),$=t(99433),S=t(96504),L=t(49672),z=t(2004);function R(M,w,h){const{x:m,y:_}=w;if(h<2)return{x:M[0]+m*M[2]+_*M[4],y:M[1]+m*M[3]+_*M[5]};if(2===h){const N=m*m,k=_*_,re=m*_;return{x:M[0]+m*M[2]+_*M[4]+N*M[6]+re*M[8]+k*M[10],y:M[1]+m*M[3]+_*M[5]+N*M[7]+re*M[9]+k*M[11]}}const v=m*m,j=_*_,H=m*_,D=v*m,C=v*_,B=m*j,O=_*j;return{x:M[0]+m*M[2]+_*M[4]+v*M[6]+H*M[8]+j*M[10]+D*M[12]+C*M[14]+B*M[16]+O*M[18],y:M[1]+m*M[3]+_*M[5]+v*M[7]+H*M[9]+j*M[11]+D*M[13]+C*M[15]+B*M[17]+O*M[19]}}function U(M,w,h){const{xmin:m,ymin:_,xmax:v,ymax:j,spatialReference:H}=w;let D=[];if(h<2)D.push({x:m,y:j}),D.push({x:v,y:j}),D.push({x:m,y:_}),D.push({x:v,y:_});else{let O=10;for(let N=0;N<O;N++)D.push({x:m,y:_+(j-_)*N/(O-1)}),D.push({x:v,y:_+(j-_)*N/(O-1)});O=8;for(let N=1;N<=O;N++)D.push({x:m+(v-m)*N/O,y:_}),D.push({x:m+(v-m)*N/O,y:j})}D=D.map(O=>R(M,O,h));const C=D.map(O=>O.x),B=D.map(O=>O.y);return new z.Z({xmin:Math.min.apply(null,C),xmax:Math.max.apply(null,C),ymin:Math.min.apply(null,B),ymax:Math.max.apply(null,B),spatialReference:H})}let Z=class extends S.Z{constructor(){super(...arguments),this.polynomialOrder=1,this.type="polynomial"}readForwardCoefficients(M,w){const{coeffX:h,coeffY:m}=w;if(null==h||!h.length||null==m||!m.length||h.length!==m.length)return null;const _=[];for(let v=0;v<h.length;v++)_.push(h[v]),_.push(m[v]);return _}writeForwardCoefficients(M,w,h){const m=[],_=[];for(let v=0;v<(null==M?void 0:M.length);v++)v%2==0?m.push(M[v]):_.push(M[v]);w.coeffX=m,w.coeffY=_}get inverseCoefficients(){let M=this._get("inverseCoefficients");const w=this._get("forwardCoefficients");return!M&&w&&this.polynomialOrder<2&&(M=function b(M){const[w,h,m,_,v,j]=M,H=m*j-v*_,D=v*_-m*j;return[(v*h-w*j)/H,(m*h-w*_)/D,j/H,_/D,-v/H,-m/D]}(w)),M}set inverseCoefficients(M){this._set("inverseCoefficients",M)}readInverseCoefficients(M,w){const{inverseCoeffX:h,inverseCoeffY:m}=w;if(null==h||!h.length||null==m||!m.length||h.length!==m.length)return null;const _=[];for(let v=0;v<h.length;v++)_.push(h[v]),_.push(m[v]);return _}writeInverseCoefficients(M,w,h){const m=[],_=[];for(let v=0;v<(null==M?void 0:M.length);v++)v%2==0?m.push(M[v]):_.push(M[v]);w.inverseCoeffX=m,w.inverseCoeffY=_}get affectsPixelSize(){return this.polynomialOrder>0}forwardTransform(M){if("point"===M.type){const w=R(this.forwardCoefficients,M,this.polynomialOrder);return new L.Z({x:w.x,y:w.y,spatialReference:M.spatialReference})}return U(this.forwardCoefficients,M,this.polynomialOrder)}inverseTransform(M){if("point"===M.type){const w=R(this.inverseCoefficients,M,this.polynomialOrder);return new L.Z({x:w.x,y:w.y,spatialReference:M.spatialReference})}return U(this.inverseCoefficients,M,this.polynomialOrder)}};(0,a._)([(0,A.Cb)({json:{write:!0}})],Z.prototype,"polynomialOrder",void 0),(0,a._)([(0,A.Cb)()],Z.prototype,"forwardCoefficients",void 0),(0,a._)([(0,X.r)("forwardCoefficients",["coeffX","coeffY"])],Z.prototype,"readForwardCoefficients",null),(0,a._)([(0,$.c)("forwardCoefficients")],Z.prototype,"writeForwardCoefficients",null),(0,a._)([(0,A.Cb)({json:{write:!0}})],Z.prototype,"inverseCoefficients",null),(0,a._)([(0,X.r)("inverseCoefficients",["inverseCoeffX","inverseCoeffY"])],Z.prototype,"readInverseCoefficients",null),(0,a._)([(0,$.c)("inverseCoefficients")],Z.prototype,"writeInverseCoefficients",null),(0,a._)([(0,A.Cb)()],Z.prototype,"affectsPixelSize",null),(0,a._)([(0,J.J)({PolynomialXform:"polynomial"})],Z.prototype,"type",void 0),Z=(0,a._)([(0,P.j)("esri.layers.support.rasterTransforms.PolynomialTransform")],Z);const V=Z},46572:(ae,q,t)=>{t.d(q,{j:()=>b,c:()=>Z});var a=t(76671),T=t(17626),X=(t(63290),t(90912),t(85931),t(8314),t(82255),t(55342)),P=t(76898),$=t(96504);let S=class extends $.Z{constructor(){super(...arguments),this.type="identity"}};(0,T._)([(0,X.J)({IdentityXform:"identity"})],S.prototype,"type",void 0),S=(0,T._)([(0,P.j)("esri.layers.support.rasterTransforms.IdentityTransform")],S);const L=S;var z=t(85374);const R={GCSShiftXform:a.Z,IdentityXform:L,PolynomialXform:z.Z},U=Object.keys(R);function b(V){return!V||U.includes(null==V?void 0:V.type)}function Z(V){if(!(null==V?void 0:V.type))return null;const w=R[null==V?void 0:V.type];if(w){const h=new w;return h.read(V),h}return null}},51026:(ae,q,t)=>{t.d(q,{d:()=>A,h:()=>T});var a=t(2584);const T={type:a.Z,json:{origins:{service:{read:{source:["tileInfo","minScale","maxScale","minLOD","maxLOD"],reader:A}}}}};function A(W,G,x,J){if(!W)return null;const{minScale:X,maxScale:P,minLOD:$,maxLOD:S}=G;if(null!=$&&null!=S)return a.Z.fromJSON(J&&J.ignoreMinMaxLOD?W:ye(pe({},W),{lods:W.lods.filter(({level:L})=>null!=L&&L>=$&&L<=S)}));if(0!==X&&0!==P){const L=U=>Math.round(1e4*U)/1e4,z=X?L(X):1/0,R=P?L(P):-1/0;return a.Z.fromJSON(ye(pe({},W),{lods:W.lods.filter(U=>{const b=L(U.scale);return b<=z&&b>=R})}))}return a.Z.fromJSON(W)}},50998:(ae,q,t)=>{t.r(q),t.d(q,{fetchSymbolFromStyle:()=>z,resolveWebStyleSymbol:()=>L});var a=t(20383),T=t(83100),A=t(26584),W=t(62208),G=t(21726),x=t(84687),J=t(29840),X=t(9461),P=t(77345),$=t(71937),S=t(96296);function L(U,b,Z,V){return U.name?U.styleName&&"Esri2DPointSymbolsStyle"===U.styleName?function R(U,b,Z){const V=$.wm.replace(/\{SymbolName\}/gi,U.name),M=(0,W.pC)(b.portal)?b.portal:x.Z.getDefault();return(0,$.EJ)(V,Z).then(w=>{const h=(0,$.KV)(w.data);return(0,X.im)(h,{portal:M,url:(0,G.mN)((0,G.Yd)(V)),origin:"portal-item"})})}(U,b,V):(0,$.n2)(U,b,V).then(M=>z(M,U.name,b,Z,V)):Promise.reject(new A.Z("symbolstyleutils:style-symbol-reference-name-missing","Missing name in style symbol reference"))}function z(U,b,Z,V,M){const w=U.data,h=Z&&(0,W.pC)(Z.portal)?Z.portal:x.Z.getDefault(),m={portal:h,url:(0,G.mN)(U.baseUrl),origin:"portal-item"},_=w.items.find(C=>C.name===b);if(!_)return Promise.reject(new A.Z("symbolstyleutils:symbol-name-not-found",`The symbol name '${b}' could not be found`,{symbolName:b}));let v=(0,J.f)((0,$.v9)(_,V),m),j=_.thumbnail&&_.thumbnail.href;const H=_.thumbnail&&_.thumbnail.imageData;(0,T.XO)()&&(v=(0,T.pJ)(v),j=(0,T.pJ)(j));const D={portal:h,url:(0,G.mN)((0,G.Yd)(v)),origin:"portal-item"};return(0,$.EJ)(v,M).then(C=>{const B="cimRef"===V?(0,$.KV)(C.data):C.data,O=(0,X.im)(B,D);if(O&&(0,a.dU)(O)){if(j){const N=(0,J.f)(j,m);O.thumbnail=new S.p({url:N})}else H&&(O.thumbnail=new S.p({url:`data:image/png;base64,${H}`}));U.styleUrl?O.styleOrigin=new P.Z({portal:Z.portal,styleUrl:U.styleUrl,name:b}):U.styleName&&(O.styleOrigin=new P.Z({portal:Z.portal,styleName:U.styleName,name:b}))}return O})}},64288:(ae,q,t)=>{t.d(q,{cM:()=>Xe,ws:()=>de,xV:()=>ve,UK:()=>Ge,$_:()=>re});var a=t(26584),T=t(63290),W=(t(21286),t(7547)),x=(t(81295),t(39406)),J=t(27899);class X{constructor(){this.color=[0,0,0,0],this.haloColor=[0,0,0,0],this.haloSize=0,this.size=12,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}acquire(le,ce,he,ge,Ee,Ae,He,De,be){this.color=le,this.haloColor=ce,this.haloSize=he,this.size=ge,this.angle=Ee,this.offsetX=Ae,this.offsetY=He,this.hAnchor=De,this.vAnchor=be}release(){this.color[0]=this.color[1]=this.color[2]=this.color[3]=0,this.haloColor[0]=this.haloColor[1]=this.haloColor[2]=this.haloColor[3]=0,this.haloSize=0,this.size=0,this.angle=0,this.offsetX=0,this.offsetY=0,this.hAnchor=0,this.vAnchor=0}}X.pool=new J.Z(X);var P=t(67969),S=(t(55086),t(40852));const L=T.Z.getLogger("esri.views.2d.engine.webgl.Utils"),z="geometry",Z=[{name:z,strideInBytes:12}],V=[{name:z,strideInBytes:36}],M=[{name:z,strideInBytes:24}],w=[{name:z,strideInBytes:12}],h=[{name:z,strideInBytes:40}],m=[{name:z,strideInBytes:36}],_=[{name:z,strideInBytes:36}];function v(K){const le={};for(const ce of K)le[ce.name]=ce.strideInBytes;return le}const j=v([{name:z,strideInBytes:36}]),H=v(Z),D=v(V),C=v(M),B=v(w),O=v(h),N=v(m),k=v(_);function re(K,le){switch(K){case x.LW.MARKER:return le===x.mD.HEATMAP?H:j;case x.LW.FILL:switch(le){case x.mD.DOT_DENSITY:return B;case x.mD.SIMPLE:case x.mD.OUTLINE_FILL_SIMPLE:return C;default:return D}case x.LW.LINE:return O;case x.LW.TEXT:return N;case x.LW.LABEL:return k}}function de(K){switch(K){case"butt":return W.RL.BUTT;case"round":return W.RL.ROUND;case"square":return W.RL.SQUARE;default:return L.error(new a.Z("mapview-invalid-type",`Cap type ${K} is not a valid option. Defaulting to round`)),W.RL.ROUND}}function ve(K){switch(K){case"miter":return W.AH.MITER;case"bevel":return W.AH.BEVEL;case"round":return W.AH.ROUND;default:return L.error(new a.Z("mapview-invalid-type",`Join type ${K} is not a valid option. Defaulting to round`)),W.AH.ROUND}}function ue(K){switch(K){case P.g.BYTE:case P.g.UNSIGNED_BYTE:return 1;case P.g.SHORT:case P.g.UNSIGNED_SHORT:return 2;case P.g.FLOAT:case P.g.INT:case P.g.UNSIGNED_INT:return 4}}function Ge(K){switch(K){case P.Br.UNSIGNED_BYTE:return Uint8Array;case P.Br.UNSIGNED_SHORT_4_4_4_4:return Uint16Array;case P.Br.FLOAT:return Float32Array;default:return void L.error(new a.Z("webgl-utils",`Unable to handle type ${K}`))}}const Le=K=>{const le=new Map;for(const ce in K)for(const he of K[ce])le.set(he.name,he.location);return le},Re=K=>{const le={};for(const ce in K){const he=K[ce];le[ce]=he.length?he[0].stride:0}return le},We=new Map,Xe=(K,le)=>{if(!We.has(K)){const ce=function $e(K){const le={};for(const ce in K){let ge=0;le[ce]=K[ce].map(Ee=>{const Ae=new S.G(Ee.name,Ee.count,Ee.type,ge,0,Ee.normalized||!1);return ge+=Ee.count*ue(Ee.type),Ae}),le[ce].forEach(Ee=>Ee.stride=ge)}return le}(le),he={strides:Re(ce),bufferLayouts:ce,attributes:Le(le)};We.set(K,he)}return We.get(K)}},81295:(ae,q,t)=>{t.d(q,{Vs:()=>S,aH:()=>$,t2:()=>P});var a=t(62208),T=t(5254);function P(L){if(!L)return 0;const{r:z,g:R,b:U,a:b}=L;return(0,T.Jz)(z*b,R*b,U*b,255*b)}function $(L){if(!L)return 0;const[z,R,U,b]=L;return(0,T.Jz)(z*(b/255),R*(b/255),U*(b/255),b)}function S(L,z,R=0){if((0,a.Wi)(z))return L[R+0]=0,L[R+1]=0,L[R+2]=0,void(L[R+3]=0);const{r:U,g:b,b:Z,a:V}=z;L[R+0]=U*V/255,L[R+1]=b*V/255,L[R+2]=Z*V/255,L[R+3]=V}},39406:(ae,q,t)=>{var a,T,A,W,G,x,J,X,P;t.d(q,{LW:()=>a,X:()=>G,jx:()=>A,mD:()=>X,mf:()=>x}),(P=a||(a={}))[P.FILL=0]="FILL",P[P.LINE=1]="LINE",P[P.MARKER=2]="MARKER",P[P.TEXT=3]="TEXT",P[P.LABEL=4]="LABEL",function(P){P[P.SUCCEEDED=0]="SUCCEEDED",P[P.FAILED_OUT_OF_MEMORY=1]="FAILED_OUT_OF_MEMORY"}(T||(T={})),function(P){P[P.NONE=0]="NONE",P[P.MAP=1]="MAP",P[P.LABEL=2]="LABEL",P[P.LABEL_ALPHA=4]="LABEL_ALPHA",P[P.HITTEST=8]="HITTEST",P[P.HIGHLIGHT=16]="HIGHLIGHT",P[P.CLIP=32]="CLIP",P[P.DEBUG=64]="DEBUG",P[P.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"}(A||(A={})),function(P){P[P.SIZE=0]="SIZE",P[P.COLOR=1]="COLOR",P[P.OPACITY=2]="OPACITY",P[P.ROTATION=3]="ROTATION"}(W||(W={})),function(P){P[P.NONE=0]="NONE",P[P.OPACITY=1]="OPACITY",P[P.COLOR=2]="COLOR",P[P.ROTATION=4]="ROTATION",P[P.SIZE_MINMAX_VALUE=8]="SIZE_MINMAX_VALUE",P[P.SIZE_SCALE_STOPS=16]="SIZE_SCALE_STOPS",P[P.SIZE_FIELD_STOPS=32]="SIZE_FIELD_STOPS",P[P.SIZE_UNIT_VALUE=64]="SIZE_UNIT_VALUE"}(G||(G={})),function(P){P[P.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE",P[P.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE",P[P.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE",P[P.UNIT_TARGETS_OUTLINE=1024]="UNIT_TARGETS_OUTLINE"}(x||(x={})),function(P){P[P.SPRITE=0]="SPRITE",P[P.GLYPH=1]="GLYPH"}(J||(J={})),function(P){P[P.DEFAULT=0]="DEFAULT",P[P.SIMPLE=1]="SIMPLE",P[P.DOT_DENSITY=2]="DOT_DENSITY",P[P.OUTLINE_FILL=3]="OUTLINE_FILL",P[P.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE",P[P.HEATMAP=5]="HEATMAP",P[P.PIE_CHART=6]="PIE_CHART"}(X||(X={}))},18716:(ae,q,t)=>{t.d(q,{CA:()=>H,Gq:()=>ne,Xp:()=>j,a:()=>Q,dk:()=>oe,hF:()=>C,jj:()=>D,jy:()=>v,m2:()=>B,mE:()=>Y,qr:()=>se});var a=t(26584),T=t(40028),A=t(39406);const m=Object.keys(A.mD).filter(ee=>"number"==typeof A.mD[ee]).reduce((ee,E)=>ye(pe({},ee),{[E]:A.mD[E]}),{});function v(ee){return ee===A.mD.OUTLINE_FILL||ee===A.mD.OUTLINE_FILL_SIMPLE}function j(ee){return function _(ee){return ee===A.mD.SIMPLE||ee===A.mD.OUTLINE_FILL_SIMPLE}(ee.symbologyType)}function H(ee){return v(ee.symbologyType)}function D(ee,E){switch(ee){case A.LW.FILL:return oe.from(E);case A.LW.LINE:return Q.from(E);case A.LW.MARKER:return Y.from(E);case A.LW.TEXT:return se.from(E);case A.LW.LABEL:return ne.from(E);default:throw new Error(`Unable to createMaterialKey for unknown geometryType ${ee}`)}}function C(ee){switch(B.load(ee).geometryType){case A.LW.MARKER:return new Y(ee);case A.LW.FILL:return new oe(ee);case A.LW.LINE:return new Q(ee);case A.LW.TEXT:return new se(ee);case A.LW.LABEL:return new ne(ee)}}class B{constructor(E){this._data=0,this._data=E}static load(E){const c=this.shared;return c.data=E,c}set data(E){this._data=E}get data(){return this._data}get geometryType(){return this.bits(8,11)}set geometryType(E){this.setBits(E,8,11)}get mapAligned(){return!!this.bit(20)}set mapAligned(E){this.setBit(20,E)}get sdf(){return!!this.bit(11)}set sdf(E){this.setBit(11,E)}get pattern(){return!!this.bit(12)}set pattern(E){this.setBit(12,E)}get textureBinding(){return this.bits(0,8)}set textureBinding(E){this.setBits(E,0,8)}get symbologyType(){return this.bits(21,26)}set symbologyType(E){this.setBits(E,21,26)}get geometryTypeString(){switch(this.geometryType){case A.LW.FILL:return"fill";case A.LW.MARKER:return"marker";case A.LW.LINE:return"line";case A.LW.TEXT:return"text";case A.LW.LABEL:return"label";default:throw new a.Z(`Unable to handle unknown geometryType: ${this.geometryType}`)}}setBit(E,c){const F=1<<E;c?this._data|=F:this._data&=~F}bit(E){return(this._data&1<<E)>>E}setBits(E,c,F){for(let te=c,ie=0;te<F;te++,ie++)this.setBit(te,0!=(E&1<<ie))}bits(E,c){let F=0;for(let te=E,ie=0;te<c;te++,ie++)F|=this.bit(te)<<ie;return F}hasVV(){return!1}setVV(E,c){}getVariation(){return{mapAligned:this.mapAligned,pattern:this.pattern,sdf:this.sdf,symbologyType:{value:A.mD[this.symbologyType],options:m,namespace:"SYMBOLOGY_TYPE"}}}getVariationHash(){return this._data&~(7&this.textureBinding)}}B.shared=new B(0);const O=ee=>class extends ee{get vvSizeMinMaxValue(){return 0!==this.bit(16)}set vvSizeMinMaxValue(E){this.setBit(16,E)}get vvSizeScaleStops(){return 0!==this.bit(17)}set vvSizeScaleStops(E){this.setBit(17,E)}get vvSizeFieldStops(){return 0!==this.bit(18)}set vvSizeFieldStops(E){this.setBit(18,E)}get vvSizeUnitValue(){return 0!==this.bit(19)}set vvSizeUnitValue(E){this.setBit(19,E)}hasVV(){return super.hasVV()||this.vvSizeMinMaxValue||this.vvSizeScaleStops||this.vvSizeFieldStops||this.vvSizeUnitValue}setVV(E,c){super.setVV(E,c);const F=function W(ee,E,c){const F=A.X.SIZE_FIELD_STOPS|A.X.SIZE_MINMAX_VALUE|A.X.SIZE_SCALE_STOPS|A.X.SIZE_UNIT_VALUE,te=(E&(A.mf.FIELD_TARGETS_OUTLINE|A.mf.MINMAX_TARGETS_OUTLINE|A.mf.SCALE_TARGETS_OUTLINE|A.mf.UNIT_TARGETS_OUTLINE))>>>4;return ee===A.LW.LINE&&c.isOutline||ee===A.LW.FILL&&v(c.symbologyType)?F&te:F&~te}(this.geometryType,E,c)&E;this.vvSizeMinMaxValue=!!(F&A.X.SIZE_MINMAX_VALUE),this.vvSizeFieldStops=!!(F&A.X.SIZE_FIELD_STOPS),this.vvSizeUnitValue=!!(F&A.X.SIZE_UNIT_VALUE),this.vvSizeScaleStops=!!(F&A.X.SIZE_SCALE_STOPS)}},N=ee=>class extends ee{get vvRotation(){return 0!==this.bit(15)}set vvRotation(E){this.setBit(15,E)}hasVV(){return super.hasVV()||this.vvRotation}setVV(E,c){super.setVV(E,c),this.vvRotation=!c.isOutline&&!!(E&A.X.ROTATION)}},k=ee=>class extends ee{get vvColor(){return 0!==this.bit(13)}set vvColor(E){this.setBit(13,E)}hasVV(){return super.hasVV()||this.vvColor}setVV(E,c){super.setVV(E,c),this.vvColor=!c.isOutline&&!!(E&A.X.COLOR)}},re=ee=>class extends ee{get vvOpacity(){return 0!==this.bit(14)}set vvOpacity(E){this.setBit(14,E)}hasVV(){return super.hasVV()||this.vvOpacity}setVV(E,c){super.setVV(E,c),this.vvOpacity=!c.isOutline&&!!(E&A.X.OPACITY)}};class oe extends(k(re(O(B)))){static load(E){const c=this.shared;return c.data=E,c}static from(E){const{symbologyType:c,vvFlags:F}=E,te=this.load(0);return te.geometryType=A.LW.FILL,te.symbologyType=c,c!==A.mD.DOT_DENSITY&&te.setVV(F,E),te.data}getVariation(){return ye(pe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}oe.shared=new oe(0);class Y extends(k(re(N(O(B))))){static load(E){const c=this.shared;return c.data=E,c}static from(E){const{symbologyType:c,vvFlags:F}=E,te=this.load(0);return te.geometryType=A.LW.MARKER,te.symbologyType=c,c!==A.mD.HEATMAP&&te.setVV(F,E),te.data}getVariation(){return ye(pe({},super.getVariation()),{vvColor:this.vvColor,vvRotation:this.vvRotation,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}Y.shared=new Y(0);class Q extends(k(re(O(B)))){static load(E){const c=this.shared;return c.data=E,c}static from(E){const c=this.load(0);return c.geometryType=A.LW.LINE,c.symbologyType=E.symbologyType,c.setVV(E.vvFlags,E),c.data}getVariation(){return ye(pe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}Q.shared=new Q(0);class se extends(k(re(N(O(B))))){static load(E){const c=this.shared;return c.data=E,c}static from(E){const c=this.load(0);return c.geometryType=A.LW.TEXT,c.symbologyType=E.symbologyType,c.setVV(E.vvFlags,E),c.data}getVariation(){return ye(pe({},super.getVariation()),{vvColor:this.vvColor,vvOpacity:this.vvOpacity,vvRotation:this.vvRotation,vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}se.shared=new se(0);class ne extends(O(B)){static load(E){const c=this.shared;return c.data=E,c}static from(E){const c=this.load(0);return c.geometryType=A.LW.LABEL,c.symbologyType=E.symbologyType,c.setVV(E.vvFlags,E),c.mapAligned=(0,T.NS)(E.placement),c.data}getVariation(){return ye(pe({},super.getVariation()),{vvSizeFieldStops:this.vvSizeFieldStops,vvSizeMinMaxValue:this.vvSizeMinMaxValue,vvSizeScaleStops:this.vvSizeScaleStops,vvSizeUnitValue:this.vvSizeUnitValue})}}ne.shared=new ne(0)},7959:(ae,q,t)=>{t.d(q,{r:()=>V}),t(29132);var T=t(88879),W=(t(20383),t(54024)),G=t(23841),x=t(67831),J=t(99770),X=t(28093),P=t(7547),$=t(85095),S=t(36460),L=t(13459),z=t(57213),R=t(52068),U=t(94398),b=t(49672),Z=t(55214);class V extends L.a{constructor(O){super(),this.graphicsLayer=O}visualizeIntersectionPoint(O,N){return this._visualizeSnappingIndicator(new b.Z({x:O.intersectionPoint[0],y:O.intersectionPoint[1],spatialReference:N.coordinateHelper.spatialReference}),h)}visualizePoint(O,N){return this._visualizeSnappingIndicator(new b.Z({x:O.point[0],y:O.point[1],spatialReference:N.coordinateHelper.spatialReference}),m)}visualizeLine(O,N){return this._visualizeSnappingIndicator(new Z.Z({paths:[[O.lineStart,O.lineEnd]],spatialReference:N.coordinateHelper.spatialReference}),_)}visualizeParallelSign(O,N){return this._visualizeSnappingIndicator(new Z.Z({paths:[[O.lineStart,O.lineEnd]],spatialReference:N.coordinateHelper.spatialReference}),v)}visualizeRightAngleQuad(O,N){return this._visualizeSnappingIndicator(new Z.Z({paths:[[O.previousVertex,O.centerVertex,O.nextVertex]],spatialReference:N.coordinateHelper.spatialReference}),C(O))}_visualizeSnappingIndicator(O,N){const k=new T.Z({geometry:O,symbol:N});return this.graphicsLayer.add(k),(0,W.kB)(()=>{this.graphicsLayer.remove(k)})}}const M=$.O.main.toArray(),w=[...$.O.main.toRgb(),100],h=new z.Z({outline:new R.Z({width:1.5,color:M}),size:15,color:[0,0,0,0]}),m=new z.Z({outline:{width:.5,color:[0,0,0,1]},size:10,color:M}),_=new U.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:P.kP.Butt,joinStyle:P.r4.Round,miterLimit:10,width:(0,G.Wz)(S.c.lineHintWidthTarget),color:M}]}}}),v=new U.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:-1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,1.5],[7,1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:M}]}}],scaleSymbolsProportionally:!0,respectFrame:!0},{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:0,y:1,z:0},anchorPointUnits:"Relative",size:5,markerPlacement:{type:"CIMMarkerPlacementOnLine",placePerPart:!0,angleToLine:!0,relativeTo:"LineMiddle"},frame:{xmin:-5,ymin:-1.5,xmax:5,ymax:1.5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{rings:[[[7,0],[-7,0],[-7,-1.5],[7,-1.5]]]},symbol:{type:"CIMPolygonSymbol",symbolLayers:[{type:"CIMSolidFill",enable:!0,color:M}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),j=B=>new U.Z({data:{type:"CIMSymbolReference",symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMVectorMarker",enable:!0,anchorPoint:{x:.5,y:.5,z:0},anchorPointUnits:"Relative",size:(0,G.Wz)(S.c.rightAngleHintSize),rotation:B,markerPlacement:{type:"CIMMarkerPlacementOnVertices",placePerPart:!0,angleToLine:!0,placeOnEndPoints:!1},frame:{xmin:-5,ymin:-5,xmax:5,ymax:5},markerGraphics:[{type:"CIMMarkerGraphic",geometry:{paths:[[[5,-5],[-5,-5],[-5,5],[5,5],[5,-5]]]},symbol:{type:"CIMLineSymbol",symbolLayers:[{type:"CIMSolidStroke",enable:!0,capStyle:"Butt",joinStyle:"Round",miterLimit:10,width:(0,G.Wz)(S.c.rightAngleHintOutlineSize),color:M},{type:"CIMSolidFill",enable:!0,color:w}]}}],scaleSymbolsProportionally:!0,respectFrame:!0}]}}}),H=j(45),D=j(225),C=(()=>{const B=(0,J.a)(),O=(0,J.a)(),N=(0,X.c)();return k=>((0,x.g)(B,k.centerVertex,k.previousVertex),(0,x.g)(O,k.nextVertex,k.previousVertex),(0,x.m)(N,B,O),N[2]<0?H:D)})()},13112:(ae,q,t)=>{t.d(q,{Z:()=>P});var a=t(17626),T=t(80542),A=t(77712),J=(t(85931),t(8314),t(90912),t(76898));let X=class extends T.r{initialize(){}destroy(){}get supportsTileUpdates(){return!1}get spatialReference(){const $=this.get("tileStore.tileScheme.spatialReference");return $&&$.toJSON()||null}};(0,a._)([(0,A.Cb)({readOnly:!0})],X.prototype,"supportsTileUpdates",null),(0,a._)([(0,A.Cb)({constructOnly:!0})],X.prototype,"remoteClient",void 0),(0,a._)([(0,A.Cb)({constructOnly:!0})],X.prototype,"service",void 0),(0,a._)([(0,A.Cb)()],X.prototype,"spatialReference",null),(0,a._)([(0,A.Cb)({constructOnly:!0})],X.prototype,"tileInfo",void 0),(0,a._)([(0,A.Cb)({constructOnly:!0})],X.prototype,"tileStore",void 0),X=(0,a._)([(0,J.j)("esri.views.2d.layers.features.processors.BaseProcessor")],X);const P=X},55376:(ae,q,t)=>{function A(W,G,x,J){const X=W.clone(),P=1<<X.level,$=X.col+G,S=X.row+x;return J&&$<0?(X.col=$+P,X.world-=1):$>=P?(X.col=$-P,X.world+=1):X.col=$,X.row=S,X}t.d(q,{M:()=>A}),t(81340)},95277:(ae,q,t)=>{t.d(q,{c:()=>A,t:()=>W});var a=t(62208),T=t(60507);function A(G,x=(0,T.RL)(G)){return"on-the-ground"!==x.mode&&!((0,a.Wi)(G.geometry)||!G.geometry.hasZ)}function W(G,x){let J=null;const X=G.events.on("grab-changed",P=>{(0,a.pC)(J)&&(J.remove(),J=null),"start"===P.action&&(J=G.disableDisplay()),x&&x(P)});return{remove(){(0,a.pC)(J)&&J.remove(),X.remove()}}}},50916:(ae,q,t)=>{t.d(q,{r:()=>L});var a=t(17626),T=t(26584),A=t(62208),W=t(32917),G=t(77712),P=(t(85931),t(8314),t(90912),t(76898)),$=t(41632),S=t(61779);const L=z=>{let R=class extends z{get imageFormatIsOpaque(){return!1}get fullExtent(){return this.layer.fullExtent}get isOpaque(){return this.fullOpacity>=1&&this.imageFormatIsOpaque}get dataLevelRange(){const U=this.tileInfo.lods;return this.levelRangeFromScaleRange(U[0].scale,U[U.length-1].scale)}get displayLevelRange(){const U=this.tileInfo.lods,V=this.levelRangeFromScaleRange(this.layer.minScale||U[0].scale,this.layer.maxScale||U[U.length-1].scale);return this.layer.maxScale&&V.maxLevel++,V}getTileUrl(U,b,Z){return this.layer.getTileUrl(U,b,Z)}_addTilingSchemeMatchPromise(){if((0,A.Wi)(this.fullExtent))return this.addResolvingPromise(Promise.reject(new T.Z("tilingscheme:extent-not-defined","This layer doesn't define a fullExtent.")));const U=this._getTileInfoSupportError(this.tileInfo,this.fullExtent);if((0,A.pC)(U))return this.addResolvingPromise(Promise.reject(U));const b=(0,W.N1)(()=>{var Z,V;return null==(V=null==(Z=this.view)?void 0:Z.basemapTerrain)?void 0:V.tilingSchemeLocked}).then(()=>{const V=this._getTileInfoCompatibilityError(this.tileInfo,this.view.basemapTerrain.tilingScheme);if(V)throw V});this.addResolvingPromise(b)}_getTileInfoSupportError(U,b){const Z=(0,S.er)(U,b,this.view.spatialReference,this.view.state.viewingMode);if(Z){const V={layer:this.layer,error:Z};let M;switch(Z.name){case"tilingscheme:spatial-reference-mismatch":case"tilingscheme:global-unsupported-spatial-reference":case"tilingscheme:local-unsupported-spatial-reference":M=new T.Z("layerview:spatial-reference-incompatible","The spatial reference of this layer does not meet the requirements of the view",V);break;default:M=new T.Z("layerview:tiling-scheme-unsupported","The tiling scheme of this layer is not supported by SceneView",V)}return M}return null}_getTileInfoCompatibilityError(U,b){return b.compatibleWith(U)?null:new T.Z("layerview:tiling-scheme-incompatible","The tiling scheme of this layer is incompatible with the tiling scheme of the surface")}levelRangeFromScaleRange(U,b){const Z={minLevel:0,maxLevel:1/0},V=this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.tilingScheme;if(!V)return Z;const M=V.levels[0],w=h=>{const m=Math.log(M.scale/h)/Math.LN2;return.5-Math.abs(.5-m%1)<1e-9?Math.round(m):Math.ceil(m)};return null!=U&&U>0&&(Z.minLevel=Math.max(0,w(U))),null!=b&&b>0&&(Z.maxLevel=Math.max(0,w(b))),Z}isUpdating(){return!!(this.view&&this.view.basemapTerrain&&this.view.basemapTerrain.updating)}};return(0,a._)([(0,G.Cb)({readOnly:!0})],R.prototype,"imageFormatIsOpaque",null),(0,a._)([(0,G.Cb)({readOnly:!0})],R.prototype,"updating",void 0),(0,a._)([(0,G.Cb)($.q)],R.prototype,"updatingProgress",void 0),(0,a._)([(0,G.Cb)($.V)],R.prototype,"updatingProgressValue",void 0),(0,a._)([(0,G.Cb)()],R.prototype,"fullExtent",null),(0,a._)([(0,G.Cb)({readOnly:!0})],R.prototype,"isOpaque",null),(0,a._)([(0,G.Cb)({readOnly:!0})],R.prototype,"dataLevelRange",null),(0,a._)([(0,G.Cb)({readOnly:!0})],R.prototype,"displayLevelRange",null),(0,a._)([(0,G.Cb)()],R.prototype,"layer",void 0),(0,a._)([(0,G.Cb)()],R.prototype,"tileInfo",void 0),R=(0,a._)([(0,P.j)("esri.views.3d.layers.TiledLayerView3D")],R),R}},3493:(ae,q,t)=>{t.d(q,{Z:()=>J,s:()=>x});var a=t(58817),T=t(62208),A=t(97445);const W={setAttribute(){},rollback(){},commit(){}};var G,R;function x(R,U){const b=U.attributes[R.objectIdField],Z=R.sessions.get(b);if(Z)return Z;const V=(0,a.d9)(U.attributes),M=new Set;if(null==b)return W;const w=R.attributeOverrides.createInteractiveEditSession(b),h=new Map;let _=G.EDITING;const v={setAttribute(j,H){if(_!==G.EDITING)return;const D=R.fieldsIndex.get(j);if((0,T.Wi)(D))return;const C=R.attributeStorageInfo.findIndex(N=>N.name===D.name);if(C<0)return;w.set(C,H);const B=R.attributeStorageInfo[C];let O=!1;M.add(j),R.forEachNode((N,k)=>{const re=((j,H)=>{const D=h.get(j);if(null==D){const C=H.indexOf(b);return h.set(j,C),C}return D})(N,k);if(-1===re)return;const oe=R.getAttributeData(N.index);if(oe){const Y=oe[B.name];Y&&(Y[re]=H,R.setAttributeData(N.index,oe,U),O=!0)}}),O&&R.clearMemCache()},rollback(){if(_===G.EDITING){for(const j of M)this.setAttribute(j,V[j]);w.rollback(),_=G.ROLLED_BACK,R.sessions.delete(b)}},commit(){_===G.EDITING&&(w.commit(),_=G.COMMITTED,R.sessions.delete(b))}};return R.sessions.set(b,v),v}function J(R,U){const b=function X(R,U){const b=U.edits.updateFeatures;if(!b||0===b.length)return new z;const Z=function S(R){const U=new Set;if(!R.updatedFeatures)return U;for(const b of R.updatedFeatures)null!=b.objectId&&null==b.error&&U.add(b.objectId);return U}(U),V=new z,M=new Map;for(let _=0;_<R.attributeStorageInfo.length;_++)M.set(R.attributeStorageInfo[_].name,_);const w=R.fieldsIndex,h=R.objectIdField,m=b.filter(_=>{const v=(0,A.g)(w,_.attributes,h);return Z.has(v)});return R.forEachNode((_,v)=>{const j=new Set(v);for(const H of m){const D=(0,A.g)(w,H.attributes,h);if(!j.has(D))continue;const C=v.indexOf(D);for(const B in H.attributes){const O=R.fieldsIndex.normalizeFieldName(B);P(V,_.index,O).push({featureIndex:C,featureId:D,value:H.attributes[B]})}}}),V}(R,U);if(0===b.size)return;const Z=new Map;for(let M=0;M<R.attributeStorageInfo.length;M++)Z.set(R.attributeStorageInfo[M].name,M);let V=!1;b.forEach((M,w)=>{const h=R.getAttributeData(w);let m=!1;M.forEach((_,v)=>{const j=(0,T.pC)(h)?h[v]:null,H=Z.get(v);for(const{featureIndex:D,value:C,featureId:B}of _)j&&(j[D]=C,m=!0,V=!0),R.attributeOverrides.updateValue(B,H,C)}),m&&R.setAttributeData(w,h,null)}),V&&R.clearMemCache()}function P(R,U,b){const Z=function $(R,U){const b=R.get(U);if(b)return b;const Z=new L;return R.set(U,Z),Z}(R,U),V=Z.get(b);if(V)return V;const M=new Array;return Z.set(b,M),M}(R=G||(G={}))[R.EDITING=0]="EDITING",R[R.ROLLED_BACK=1]="ROLLED_BACK",R[R.COMMITTED=2]="COMMITTED";const L=Map,z=Map},40465:(ae,q,t)=>{t.d(q,{i:()=>z});var a=t(15861),T=t(17626),A=t(26584),W=t(62208),$=(t(63290),t(90912),t(85931),t(8314),t(82255),t(76898)),S=t(36630),L=t(10023);const z=R=>{let U=class extends R{_validateFetchPopupFeatures(b){const{layer:Z}=this,{popupEnabled:V}=Z;return V?(0,L.V)(Z,b)?void 0:new A.Z("scenelayerview3d:fetchPopupFeatures","Layer does not define a popup template",{layer:Z}):new A.Z("scenelayerview3d:fetchPopupFeatures","Popups are disabled",{layer:Z})}prepareFetchPopupFeatures(b){return(0,a.Z)(function*(){})()}fetchPopupFeatures(b,Z){var V=this;return(0,a.Z)(function*(){const M=V._validateFetchPopupFeatures(Z);if(M)throw M;const w=(0,W.pC)(Z)?Z.clientGraphics:null;if(!w||0===w.length)return[];const h="scene"===V.layer.type&&(0,W.pC)(V.layer.associatedLayer)?V.layer.associatedLayer:V.layer,m=(0,S.Lk)(V.layer.fieldsIndex,yield(0,L.e)(h,(0,L.V)(V.layer,Z)));yield V.prepareFetchPopupFeatures(m);const _=new Set,v=[],j=[];for(const H of w)(0,S.Gm)(m,H,_)?j.push(H):v.push(H);return 0===j.length?v:V.whenGraphicAttributes(j,[..._]).catch(()=>j).then(H=>v.concat(H))})()}};return U=(0,T._)([(0,$.j)("esri.views.3d.layers.support.PopupSceneLayerView")],U),U}},57610:(ae,q,t)=>{t.d(q,{K:()=>w});var a=t(15861),T=t(17626),A=t(14517),W=t(63290),G=t(36082),x=t(77712),J=t(76898),X=t(819);const P=_=>{let v=class extends _{constructor(){super(...arguments),this._numUpdating=0,this.asyncUpdateState=new Map}get updating(){return this._numUpdating>0}autoUpdateAsync(j,H){return function S(_,v){const H=()=>{if(!C||B)return v();C.clear(),B=!0;const O=(0,G.LJ)(C,v);return B=!1,O};let C=new X.M(()=>{C&&!B&&_(H)}),B=!1;return _(H),{remove:()=>{C&&(C.destroy(),C=null)}}}(D=>this._updateAsync(j,D),H)}_updateAsync(j,H){var D=this;return(0,a.Z)(function*(){if(!D._startAsyncUpdate(j)){try{const C=yield H();D._set(j,C)}catch(C){W.Z.getLogger(D.declaredClass).warn(`Async update of "${String(j)}" failed. Async update functions should not throw exceptions.`)}D._endAsyncUpdate(j)&&D._updateAsync(j,H)}})()}_startAsyncUpdate(j){var D;const H=null!=(D=this.asyncUpdateState.get(j))?D:$.None;return H&$.Updating?(this.asyncUpdateState.set(j,H|$.Invalidated),!0):(++this._numUpdating,this.asyncUpdateState.set(j,H|$.Updating),!1)}_endAsyncUpdate(j){var D;--this._numUpdating;const H=(null!=(D=this.asyncUpdateState.get(j))?D:$.None)&~$.Updating;return H&$.Invalidated?(this.asyncUpdateState.set(j,H&~$.Invalidated),!0):(this.asyncUpdateState.set(j,H),!1)}};return(0,T._)([(0,x.Cb)({readOnly:!0})],v.prototype,"updating",null),(0,T._)([(0,x.Cb)()],v.prototype,"_numUpdating",void 0),v=(0,T._)([(0,J.j)("esri.core.AsyncUpdate")],v),v};var $,_;(_=$||($={}))[_.None=0]="None",_[_.Updating=1]="Updating",_[_.Invalidated=2]="Invalidated";let L=class extends(P(A.Z)){};L=(0,T._)([(0,J.j)("esri.core.AsyncUpdate")],L);var z=t(80542),R=t(62208),V=(t(85931),t(8314),t(90912),t(36630));const M=W.Z.getLogger("esri.views.3d.layers.support.SceneLayerViewRequiredFields");let w=class extends(P(z.r)){constructor(_){super(_)}get requiredFields(){const{layerView:{layer:{fieldsIndex:_},definitionExpressionFields:v},rendererFields:j,labelingFields:H,viewFilterFields:D}=this;return(0,V.Q0)(_,[...(0,R.Pt)(v,[]),...(0,R.Pt)(j,[]),...(0,R.Pt)(H,[]),...(0,R.Pt)(D,[])])}initialize(){this.layer=this.layerView.layer,this.handles.add([this.autoUpdateAsync("rendererFields",()=>{const{fieldsIndex:v,renderer:j}=this.layer;return j?h(H=>j.collectRequiredFields(H,v)):null}),this.autoUpdateAsync("labelingFields",()=>{const{layer:v}=this;return v.labelsVisible?h(j=>(0,V.Mu)(j,v)):null}),this.autoUpdateAsync("viewFilterFields",()=>{const{layer:v,filter:j}=this.layerView;return h(H=>(0,V.Ll)(H,v,j))})])}};function h(_){return m.apply(this,arguments)}function m(){return m=(0,a.Z)(function*(_){const v=new Set;try{return yield _(v),Array.from(v).sort()}catch(j){return M.error(j),null}}),m.apply(this,arguments)}(0,T._)([(0,x.Cb)()],w.prototype,"layerView",void 0),(0,T._)([(0,x.Cb)()],w.prototype,"layer",void 0),(0,T._)([(0,x.Cb)()],w.prototype,"requiredFields",null),(0,T._)([(0,x.Cb)()],w.prototype,"rendererFields",void 0),(0,T._)([(0,x.Cb)()],w.prototype,"labelingFields",void 0),(0,T._)([(0,x.Cb)()],w.prototype,"viewFilterFields",void 0),w=(0,T._)([(0,J.j)("esri.views.3d.layers.support.SceneLayerViewRequiredFields")],w)},67966:(ae,q,t)=>{t.d(q,{v:()=>T});var a=t(36630);function T(){return{requiredFields:{type:[String],readOnly:!0},availableFields:{type:[String],readOnly:!0,get:function(){const{layer:A,layer:{fieldsIndex:W},requiredFields:G}=this;return(0,a.Q0)(W,A.outFields?[...(0,a.Lk)(W,A.outFields),...G]:G)}}}}},95925:(ae,q,t)=>{t.d(q,{Lp:()=>x,P9:()=>G,Yq:()=>P});var a=t(15861),T=t(62208),A=t(10699),W=t(32917);function G($,S,L){const z=X($,S);$.view.activeTool=z;let R=(0,A.fu)(L,()=>J($,S));return(0,A.vr)(function(){var U=(0,a.Z)(function*(b){yield(0,W.N1)(()=>!z.active,b),R=(0,T.hw)(R),J($,S)});return function(b){return U.apply(this,arguments)}}(),L)}function x($,S){return(0,W.YP)(()=>$.interactive,()=>J($,S),W.tX)}function J($,S){$.interactive?X($,S):P($)}function X($,S){P($);const{view:L,analysis:z}=$,R=new S({view:L,analysis:z,analysisViewData:$});return $.tool=R,L.tools.add(R),R}function P($){const{view:S,tool:L}=$;(0,T.Wi)(L)||(S.tools.remove(L),$.tool=null)}},85095:(ae,q,t)=>{t.d(q,{O:()=>T,X:()=>$});var a=t(91558);const T={main:new a.Z([255,127,0]),selected:new a.Z([255,255,255]),outline:new a.Z([0,0,0,.5]),selectedOutline:new a.Z([255,255,255]),hoverOutline:new a.Z([255,255,255]),secondary:new a.Z([255,255,255]),secondaryOutline:new a.Z([100,100,100]),transparent:new a.Z([0,0,0,0])};function A(S,L){if(L)for(const z in L)S[z]=L[z]}class W{constructor(L){this.size=8,this.hoverSize=10,this.color=T.main,this.hoverColor=T.main,this.outlineColor=T.outline,this.hoverOutlineColor=T.hoverOutline,A(this,L)}}class G{constructor(L){this.color=T.secondary,this.hoverColor=T.main,A(this,L)}}class x{constructor(L){this.color=T.transparent,this.hoverColor=T.transparent,this.outlineColor=T.main,this.hoverOutlineColor=T.main,this.stagedColor=T.transparent,this.stagedOutlineColor=T.secondary,A(this,L)}}class J{constructor(L){this.vertex=new W,this.midpoint=new W({color:T.secondary,outlineColor:T.secondaryOutline,size:6}),this.selected=new W({color:T.selected,hoverColor:T.selected,hoverOutlineColor:T.hoverOutline}),A(this,L)}}class X{constructor(L){this.center=new W({color:T.secondaryOutline}),this.fill=new x,this.line=new G,this.vertex=new W({color:T.selected,outlineColor:T.main,hoverColor:T.selected,hoverOutlineColor:T.secondaryOutline}),A(this,L)}}const $=new class P{constructor(L){this.reshapeGraphics=new J,this.transformGraphics=new X,A(this,L)}}},22712:(ae,q,t)=>{t.d(q,{f:()=>P});var a=t(17626),T=t(32917),A=t(77712),J=(t(85931),t(8314),t(90912),t(76898)),X=t(22944);let P=class extends X.m{constructor($){super($)}initialize(){this.own((0,T.YP)(()=>this.analysisViewData.visible,$=>this.visible=$,T.tX))}deactivate(){this.onDeactivate(),this.created||this.analysis.clear()}resetCreated(){this._set("created",!1)}};(0,a._)([(0,A.Cb)({constructOnly:!0})],P.prototype,"analysis",void 0),(0,a._)([(0,A.Cb)()],P.prototype,"analysisViewData",void 0),P=(0,a._)([(0,J.j)("esri.views.interactive.AnalysisToolBase")],P)},70211:(ae,q,t)=>{t.d(q,{x:()=>W});var a=t(33351),T=t(97979),A=t(19038);class W extends T.a{constructor(x){super(ye(pe({},x),{constraint:new a.Hk(x.coordinateHelper,x.targetPoint)}))}get hints(){return[new A.n(this.targetPoint,this.elevationInfo)]}}},9218:(ae,q,t)=>{t.d(q,{X:()=>A});var a=t(75897),T=t(70211);function A(W,G,x){switch(W.type){case"edge":return new a.L({coordinateHelper:G,edgeStart:G.pointToVector(W.start),edgeEnd:G.pointToVector(W.end),targetPoint:G.pointToVector(W.target),objectId:W.objectId,elevationInfo:x});case"vertex":return new T.x({coordinateHelper:G,targetPoint:G.pointToVector(W.target),objectId:W.objectId,elevationInfo:x})}}},78465:(ae,q,t)=>{t.d(q,{Z:()=>Z});var a=t(15861),T=t(17626),A=t(63290),W=t(62208),G=t(32917),x=t(77712),R=(t(85931),t(8314),t(90912),t(44648),t(36082),t(383),t(23025),t(55915)),U=t(45611);const b=A.Z.getLogger("esri.views.layers.SceneLayerView");class Z extends U.Z{constructor(){super(...arguments),this.layer=null,this.filter=null,this._geometryEngine=null,this._projectionEngineLoaded=!1}get availableFields(){return[]}get maximumNumberOfFeatures(){return 0}set maximumNumberOfFeatures(M){throw new Error("Not implemented")}get maximumNumberOfFeaturesExceeded(){return!1}get layerFilter(){const M=this.layer.filter;if((0,W.Wi)(M)||M.geometries.length<1)return null;const w=this._geometryEngine;if((0,W.Wi)(w)||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)return null;try{let h=w.simplify(M.geometries.getItemAt(0));const m=h.spatialReference;for(let _=1;_<M.geometries.length;_++){let v=w.simplify(M.geometries.getItemAt(_));v.spatialReference.equals(m)||(v=(0,R.iV)(v,m)),h=w.union(h,v)}return{spatialRelationship:M.spatialRelationship,geometry:h}}catch(h){return b.warnOncePerTick("Failed to merge scene filter geometries. Layer mask will be ignored."),null}}get _filterNeedsProjectionEngine(){const M=this.layer.filter;if((0,W.Wi)(M)||M.geometries.length<=1)return!1;const w=M.geometries.getItemAt(0).spatialReference;return M.geometries.some(({spatialReference:h})=>!h.equals(w)&&!(0,R.Up)(h,w))}get layerFilterUpdating(){return(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length&&(!this._geometryEngine||!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine)}initialize(){var M=this;(0,G.N1)(()=>!this._geometryEngine&&(0,W.pC)(this.layer.filter)&&this.layer.filter.geometries.length).then((0,a.Z)(function*(){return M._geometryEngine=yield Promise.all([t.e(4918),t.e(4766)]).then(t.bind(t,44766))})),this._projectionEngineLoaded=(0,R.kR)(),(0,G.N1)(()=>!this._projectionEngineLoaded&&this._filterNeedsProjectionEngine).then((0,a.Z)(function*(){yield(0,R.zD)(),M._projectionEngineLoaded=!0}))}highlight(M){throw new Error("Not implemented")}queryFeatures(M,w){throw new Error("Not implemented")}queryObjectIds(M,w){throw new Error("Not implemented")}queryFeatureCount(M,w){throw new Error("Not implemented")}createQuery(){throw new Error("Not implemented")}queryExtent(M,w){throw new Error("Not implemented")}}(0,T._)([(0,x.Cb)()],Z.prototype,"layer",void 0),(0,T._)([(0,x.Cb)()],Z.prototype,"availableFields",null),(0,T._)([(0,x.Cb)()],Z.prototype,"maximumNumberOfFeatures",null),(0,T._)([(0,x.Cb)({readOnly:!0})],Z.prototype,"maximumNumberOfFeaturesExceeded",null),(0,T._)([(0,x.Cb)()],Z.prototype,"filter",void 0),(0,T._)([(0,x.Cb)({readOnly:!0})],Z.prototype,"layerFilter",null),(0,T._)([(0,x.Cb)()],Z.prototype,"_geometryEngine",void 0),(0,T._)([(0,x.Cb)()],Z.prototype,"_projectionEngineLoaded",void 0),(0,T._)([(0,x.Cb)()],Z.prototype,"_filterNeedsProjectionEngine",null),(0,T._)([(0,x.Cb)()],Z.prototype,"layerFilterUpdating",null)},73187:(ae,q,t)=>{t.d(q,{q:()=>Z});var a=t(17626),T=t(91558),A=t(88879),W=t(14517),G=t(21286),x=t(62208),J=t(77712),S=(t(85931),t(8314),t(90912),t(76898)),L=t(69852),z=t(88493),R=t(35540),U=t(21716);const b=[[0,179,255],[117,62,128],[0,104,255],[215,189,166],[32,0,193],[98,162,206],[102,112,129],[52,125,0],[142,118,246],[138,83,0],[92,122,255],[122,55,83],[0,142,255],[81,40,179],[0,200,244],[13,24,127],[0,170,147],[19,58,241],[22,44,35]];let Z=class extends W.Z{constructor(V){super(V),this.updating=!1,this.enablePolygons=!0,this.enableLabels=!0,this._polygons=new Map,this._labels=new Map,this._enabled=!0}initialize(){this._symbols=b.map(V=>new z.Z({color:[V[0],V[1],V[2],.6],outline:{color:"black",width:1}})),this.update()}destroy(){this._enabled=!1,this.clear()}get enabled(){return this._enabled}set enabled(V){this._enabled!==V&&(this._enabled=V,this.update())}update(){if(!this._enabled)return void this.clear();const M=this.getTiles(),w=new Array,h=new Set(this._labels.keys());M.forEach((_,v)=>{const j=_.lij.toString();h.delete(j);const H=_.lij[0],D=_.geometry;if(this.enablePolygons&&!this._polygons.has(j)){const C=new A.Z({geometry:D,symbol:this._symbols[H%this._symbols.length]});this._polygons.set(j,C),w.push(C)}if(this.enableLabels){const C=(_=>{if((0,x.pC)(_.label))return _.label;let v=_.lij.toString();return(0,x.pC)(_.loadPriority)&&(v+=` (${_.loadPriority})`),v})(_),B=v/(M.length-1),O=(0,G.t7)(0,200,B),N=(0,G.t7)(20,6,B)/.75,k=(0,x.pC)(_.loadPriority)&&_.loadPriority>=M.length,re=new T.Z([O,k?0:O,k?0:O]),oe="3d"===this.view.type?()=>new L.Z({verticalOffset:{screenLength:40/.75},callout:{type:"line",color:"white",border:{color:"black"}},symbolLayers:[new U.Z({text:C,halo:{color:"white",size:1/.75},material:{color:re},size:N})]}):()=>new R.Z({text:C,haloColor:"white",haloSize:1/.75,color:re,size:N});if(this._labels.has(j)){const Y=this._labels.get(j),Q=oe();((0,x.Wi)(Y.symbol)||JSON.stringify(Q)!==JSON.stringify(Y.symbol))&&(Y.symbol=Q)}else{const Y=new A.Z({geometry:D.extent.center,symbol:oe()});this._labels.set(j,Y),w.push(Y)}}});const m=new Array;h.forEach(_=>{this._polygons.has(_)&&(m.push(this._polygons.get(_)),this._polygons.delete(_)),this._labels.has(_)&&(m.push(this._labels.get(_)),this._labels.delete(_))}),this.view.graphics.removeMany(m),this.view.graphics.addMany(w)}clear(){this.view.graphics.removeMany(Array.from(this._polygons.values())),this.view.graphics.removeMany(Array.from(this._labels.values())),this._polygons.clear(),this._labels.clear()}};(0,a._)([(0,J.Cb)({constructOnly:!0})],Z.prototype,"view",void 0),(0,a._)([(0,J.Cb)({readOnly:!0})],Z.prototype,"updating",void 0),(0,a._)([(0,J.Cb)()],Z.prototype,"enabled",null),Z=(0,a._)([(0,S.j)("esri.views.support.TileTreeDebugger")],Z)}}]);
"use strict";(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[6373],{19702:(T,p,e)=>{e.d(p,{A:()=>c});var a=e(15861),E=e(17626),M=e(54024),y=e(10699),h=e(32917),P=e(77712),u=(e(85931),e(8314),e(90912),e(76898)),O=e(36947);const c=D=>{let s=class extends D{constructor(){super(...arguments),this.slicePlaneEnabled=!1,this.supportsHeightUnitConversion=!1}postscript(i){super.postscript(i),(0,O.qC)(this.layer)&&this.addResolvingPromise(this._validateHeightModelInfo())}_validateHeightModelInfo(){var i=this;return(0,a.Z)(function*(){const t=new AbortController,d=t.signal;i.handles.add((0,M.kB)(()=>t.abort())),yield(0,h.N1)(()=>{var g;return null==(g=i.view.defaultsFromMap)?void 0:g.heightModelInfoReady},d),(0,y.k_)(d);const n=(0,O.Wt)(i.layer,i.view.heightModelInfo,i.supportsHeightUnitConversion);if(n)throw n})()}canResume(){const i=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return super.canResume()&&(!i||!i.minScale||!i.maxScale||i.minScale>=i.maxScale)}getSuspendInfo(){const i=super.getSuspendInfo(),t=this.layer&&"effectiveScaleRange"in this.layer?this.layer.effectiveScaleRange:null;return t&&t.minScale&&t.maxScale&&t.minScale<t.maxScale&&(i.outsideScaleRange=!0),i}};return(0,E._)([(0,P.Cb)()],s.prototype,"view",void 0),(0,E._)([(0,P.Cb)()],s.prototype,"slicePlaneEnabled",void 0),s=(0,E._)([(0,u.j)("esri.views.3d.layers.LayerView3D")],s),s}},6373:(T,p,e)=>{e.r(p),e.d(p,{default:()=>g});var a=e(15861),E=e(17626),M=e(46160),y=e(63290),h=e(62208),P=e(32917),v=e(77712),O=(e(85931),e(8314),e(90912),e(76898)),c=e(72469),D=e(19702),s=e(50916),i=e(45611),t=e(94421);const d=y.Z.getLogger("esri.views.3d.layers.WMTSLayerView3d");let n=class extends((0,t.Z)((0,s.r)((0,D.A)(i.Z)))){constructor(){super(...arguments),this.type="wmts-3d"}get hasMixedImageFormats(){return!0}_getCompatibleTileInfoMatrixSet(r,_=!1){const o=(0,c.mt)(this.layer);if((0,h.pC)(o)){if(M.Z.isCollection(o))return o.find(f=>{const C=r(f);return(0,h.pC)(C)&&(_?d.error("The selected tile matrix set is not compatible with the view",C):this.addResolvingPromise(Promise.reject(C))),null==C});const m=r(o);return(0,h.pC)(m)&&(_?d.error("The selected tile matrix set is not compatible with the view",m):this.addResolvingPromise(Promise.reject(m))),o}return null}initialize(){this._getCompatibleTileInfoMatrixSet(_=>this._getTileInfoSupportError(_.tileInfo,_.fullExtent));const r=(0,P.N1)(()=>{var _,o;return null==(o=null==(_=this.view)?void 0:_.basemapTerrain)?void 0:o.tilingSchemeLocked}).then(()=>{const _=this._getCompatibleTileInfoMatrixSet(o=>this._getTileInfoSupportError(o.tileInfo,o.fullExtent)||this._getTileInfoCompatibilityError(o.tileInfo,this.view.basemapTerrain.tilingScheme));(0,h.Wi)(_)||(this.layer.activeLayer.tileMatrixSetId!==_.id&&(this.layer.activeLayer.tileMatrixSetId=_.id),this.tileInfo=_.tileInfo,this.layer.fullExtent=_.fullExtent)});this.addResolvingPromise(r),this.when(()=>this._initialized())}refresh(){this.emit("data-changed")}canResume(){if(!super.canResume())return!1;const r=this.layer.activeLayer.tileMatrixSet;return r&&!this._getTileInfoError(r.tileInfo,r.fullExtent)}doRefresh(){var r=this;return(0,a.Z)(function*(){r.suspended||r.emit("data-changed")})()}_initialized(){this.updatingHandles.add(()=>{var r,_;return null==(_=null==(r=this.layer)?void 0:r.activeLayer)?void 0:_.styleId},()=>this.refresh()),this.updatingHandles.add(()=>{var r;return null==(r=this.layer)?void 0:r.activeLayer},r=>{const _=this._getCompatibleTileInfoMatrixSet(o=>this._getTileInfoSupportError(o.tileInfo,o.fullExtent)||this._getTileInfoCompatibilityError(o.tileInfo,this.view.basemapTerrain.tilingScheme),!0);(0,h.pC)(_)&&r.tileMatrixSetId!==_.id&&(this.layer.activeLayer.tileMatrixSetId=_.id),this.notifyChange("suspended"),this.canResume()&&this.refresh()})}_getTileInfoError(r,_){return this._getTileInfoSupportError(r,_)||this._getTileInfoCompatibilityError(r,this.view.basemapTerrain.tilingScheme)}};(0,E._)([(0,v.Cb)({readOnly:!0})],n.prototype,"hasMixedImageFormats",null),(0,E._)([(0,v.Cb)()],n.prototype,"layer",void 0),(0,E._)([(0,v.Cb)()],n.prototype,"suspended",void 0),n=(0,E._)([(0,O.j)("esri.views.3d.layers.WMTSLayerView3D")],n);const g=n},45611:(T,p,e)=>{e.d(p,{Z:()=>i});var a=e(17626),E=e(14517),M=e(61885),y=e(80542),h=e(61996),P=e(63290),v=e(62208),I=e(60330),l=e(77712),D=(e(85931),e(8314),e(90912),e(76898));let s=class extends((0,y.p)((0,h.IG)((0,I.v)(M.Z.EventedMixin(E.Z))))){constructor(t){super(t),this.layer=null,this.parent=null}initialize(){this.when().catch(t=>{if("layerview:create-error"!==t.name){const d=this.layer&&this.layer.id||"no id",n=this.layer&&this.layer.title||"no title";P.Z.getLogger(this.declaredClass).error("#resolve()",`Failed to resolve layer view (layer title: '${n}', id: '${d}')`,t)}})}get fullOpacity(){return(0,v.Pt)(this.get("layer.opacity"),1)*(0,v.Pt)(this.get("parent.fullOpacity"),1)}get suspended(){return!this.canResume()}get suspendInfo(){return this.getSuspendInfo()}get legendEnabled(){var t;return!this.suspended&&!0===(null==(t=this.layer)?void 0:t.legendEnabled)}get updating(){var t;return!!(null!=(t=this.updatingHandles)&&t.updating||this.isUpdating())}get updatingProgress(){return this.updating?0:1}get visible(){var t;return!0===(null==(t=this.layer)?void 0:t.visible)}set visible(t){void 0!==t?this._override("visible",t):this._clearOverride("visible")}canResume(){var t,d,n;return this.visible&&(null==(t=this.layer)?void 0:t.loaded)&&!(null!=(d=this.parent)&&d.suspended)&&(null==(n=this.view)?void 0:n.ready)||!1}getSuspendInfo(){const t=this.parent&&this.parent.suspended?this.parent.suspendInfo:{};return this.view&&this.view.ready||(t.viewNotReady=!0),this.layer&&this.layer.loaded||(t.layerNotLoaded=!0),this.visible||(t.layerInvisible=!0),t}isUpdating(){return!1}};(0,a._)([(0,l.Cb)()],s.prototype,"fullOpacity",null),(0,a._)([(0,l.Cb)()],s.prototype,"layer",void 0),(0,a._)([(0,l.Cb)()],s.prototype,"parent",void 0),(0,a._)([(0,l.Cb)({readOnly:!0})],s.prototype,"suspended",null),(0,a._)([(0,l.Cb)({readOnly:!0})],s.prototype,"suspendInfo",null),(0,a._)([(0,l.Cb)({readOnly:!0})],s.prototype,"legendEnabled",null),(0,a._)([(0,l.Cb)({type:Boolean,readOnly:!0})],s.prototype,"updating",null),(0,a._)([(0,l.Cb)({readOnly:!0})],s.prototype,"updatingProgress",null),(0,a._)([(0,l.Cb)()],s.prototype,"visible",null),(0,a._)([(0,l.Cb)()],s.prototype,"view",void 0),s=(0,a._)([(0,D.j)("esri.views.layers.LayerView")],s);const i=s},94421:(T,p,e)=>{e.d(p,{Z:()=>u});var a=e(17626),E=e(63290),M=e(10699),y=e(32917),h=e(77712),l=(e(85931),e(8314),e(90912),e(76898));const u=O=>{let c=class extends O{initialize(){this.handles.add((0,y.on)(()=>this.layer,"refresh",D=>{this.doRefresh(D.dataChanged).catch(s=>{(0,M.D_)(s)||E.Z.getLogger(this.declaredClass).error(s)})}),"RefreshableLayerView")}};return(0,a._)([(0,h.Cb)()],c.prototype,"layer",void 0),c=(0,a._)([(0,l.j)("esri.layers.mixins.RefreshableLayerView")],c),c}}}]);
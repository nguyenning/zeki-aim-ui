"use strict";var ce=Object.defineProperty,fe=Object.defineProperties,me=Object.getOwnPropertyDescriptors,Zt=Object.getOwnPropertySymbols,ue=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable,Kt=(rt,W,P)=>W in rt?ce(rt,W,{enumerable:!0,configurable:!0,writable:!0,value:P}):rt[W]=P,Jt=(rt,W)=>{for(var P in W||(W={}))ue.call(W,P)&&Kt(rt,P,W[P]);if(Zt)for(var P of Zt(W))pe.call(W,P)&&Kt(rt,P,W[P]);return rt},Ut=(rt,W)=>fe(rt,me(W));(self.webpackChunkexample_app=self.webpackChunkexample_app||[]).push([[3141],{47139:(rt,W,P)=>{P.d(W,{Fp:()=>dt,RL:()=>lt,UV:()=>q,bk:()=>x});var pt=P(36161),At=P(91179),ht=P(31375);function dt(u){var d;if(!u)return null;switch(u.type){case"CIMPointSymbol":{const C=u.symbolLayers;return C&&1===C.length?dt(C[0]):null}case"CIMVectorMarker":{const C=u.markerGraphics;if(!C||1!==C.length)return null;const N=C[0];if(!N)return null;const A=N.geometry;if(!A)return null;const b=N.symbol;return!b||"CIMPolygonSymbol"!==b.type&&"CIMLineSymbol"!==b.type||(null==(d=b.symbolLayers)?void 0:d.some(k=>!!k.effects))?null:{geom:A,asFill:"CIMPolygonSymbol"===b.type}}case"sdf":return{geom:u.geom,asFill:u.asFill}}return null}function K(u){let d=1/0,C=-1/0,N=1/0,A=-1/0;for(const b of u)for(const k of b)k[0]<d&&(d=k[0]),k[0]>C&&(C=k[0]),k[1]<N&&(N=k[1]),k[1]>A&&(A=k[1]);return[d,N,C,A]}function x(u){return u?u.rings?K(u.rings):u.paths?K(u.paths):(0,At.YX)(u)?[u.xmin,u.ymin,u.xmax,u.ymax]:null:null}function q(u,d,C,N,A){const[b,k,E,Y]=u;if(E<b||Y<k)return[0,0,0];const $=E-b,w=Y-k,T=Math.floor(31.5),z=(128-2*(T+1))/Math.max($,w),Z=Math.round($*z)+2*T,at=Math.round(w*z)+2*T;let st=1;d&&(st=at/z/(d.ymax-d.ymin));let F=0,D=0;return N&&(A?d&&C&&d.ymax-d.ymin>0&&(F=N.x/(C*((d.xmax-d.xmin)/(d.ymax-d.ymin))),D=N.y/C):(F=N.x,D=N.y)),F=.5*(d.xmax+d.xmin)+F*(d.xmax-d.xmin),D=.5*(d.ymax+d.ymin)+D*(d.ymax-d.ymin),F-=b,D-=k,F*=z,D*=z,F+=T,D+=T,[st,F/Z-.5,-(D/at-.5)]}function lt(u){const d=function It(u){return u?u.rings?u.rings:u.paths?u.paths:void 0!==u.xmin&&void 0!==u.ymin&&void 0!==u.xmax&&void 0!==u.ymax?[[[u.xmin,u.ymin],[u.xmin,u.ymax],[u.xmax,u.ymax],[u.xmax,u.ymin],[u.xmin,u.ymin]]]:null:null}(u.geom),C=function R(u){let d=1/0,C=-1/0,N=1/0,A=-1/0;for(const b of u)for(const k of b)k[0]<d&&(d=k[0]),k[0]>C&&(C=k[0]),k[1]<N&&(N=k[1]),k[1]>A&&(A=k[1]);return new ht.Z(d,N,C-d,A-N)}(d),b=Math.floor(31.5),k=(128-2*(b+1))/Math.max(C.width,C.height),E=Math.round(C.width*k)+2*b,Y=Math.round(C.height*k)+2*b,$=[];for(const H of d)if(H&&H.length>1){const X=[];for(const T of H){let[z,Z]=T;z-=C.x,Z-=C.y,z*=k,Z*=k,z+=b-.5,Z+=b-.5,X.push(u.asFill?[z,Z]:[Math.round(z),Math.round(Z)])}if(u.asFill){const T=X.length-1;X[0][0]===X[T][0]&&X[0][1]===X[T][1]||X.push(X[0])}$.push(X)}const w=function h(u,d,C,N){const A=d*C,b=new Array(A),k=N*N+1;for(let E=0;E<A;++E)b[E]=k;for(const E of u){const Y=E.length;for(let $=1;$<Y;++$){const w=E[$-1],H=E[$];let X,T,z,Z;w[0]<H[0]?(X=w[0],T=H[0]):(X=H[0],T=w[0]),w[1]<H[1]?(z=w[1],Z=H[1]):(z=H[1],Z=w[1]);let at=Math.floor(X)-N,st=Math.floor(T)+N,F=Math.floor(z)-N,D=Math.floor(Z)+N;at<0&&(at=0),st>d&&(st=d),F<0&&(F=0),D>C&&(D=C);const U=H[0]-w[0],Lt=H[1]-w[1],Et=U*U+Lt*Lt;for(let yt=at;yt<st;yt++)for(let gt=F;gt<D;gt++){let Nt,vt,St=(yt-w[0])*U+(gt-w[1])*Lt;St<0?(Nt=w[0],vt=w[1]):St>Et?(Nt=H[0],vt=H[1]):(St/=Et,Nt=w[0]+St*U,vt=w[1]+St*Lt);const zt=(yt-Nt)*(yt-Nt)+(gt-vt)*(gt-vt),$t=(C-gt-1)*d+yt;zt<b[$t]&&(b[$t]=zt)}}}for(let E=0;E<A;++E)b[E]=Math.sqrt(b[E]);return b}($,E,Y,b);return u.asFill&&function V(u,d,C,N,A){for(const b of u){const k=b.length;for(let E=1;E<k;++E){const Y=b[E-1],$=b[E];let w,H,X,T;Y[0]<$[0]?(w=Y[0],H=$[0]):(w=$[0],H=Y[0]),Y[1]<$[1]?(X=Y[1],T=$[1]):(X=$[1],T=Y[1]);let z=Math.floor(w),Z=Math.floor(H)+1,at=Math.floor(X),st=Math.floor(T)+1;z<N&&(z=N),Z>d-N&&(Z=d-N),at<N&&(at=N),st>C-N&&(st=C-N);for(let F=at;F<st;++F){if(Y[1]>F==$[1]>F)continue;const D=(C-F-1)*d;for(let U=z;U<Z;++U)U<($[0]-Y[0])*(F-Y[1])/($[1]-Y[1])+Y[0]&&(A[D+U]=-A[D+U]);for(let U=N;U<z;++U)A[D+U]=-A[D+U]}}}}($,E,Y,b,w),[et(w,b),E,Y]}function et(u,d){const C=2*d,N=u.length,A=new Uint8Array(4*N);for(let b=0;b<N;++b)(0,pt.I)(.5-u[b]/C,A,4*b);return A}},53141:(rt,W,P)=>{P.d(W,{S:()=>re,c:()=>Lt});var pt=P(15861),At=P(91558),ht=P(58817),dt=P(63290),ct=P(62208),It=P(23841),R=P(77275),K=P(46679),x=P(44654),q=P(7547),lt=P(47139),h=P(80991),V=P(73608),et=P(39236),u=P(39351);const w=53290320,H=10,X=dt.Z.getLogger("esri.symbols.cim.cimAnalyzer");function T(t){switch(t){case"Butt":return q.RL.BUTT;case"Square":return q.RL.SQUARE;default:return q.RL.ROUND}}function z(t){switch(t){case"Bevel":return q.AH.BEVEL;case"Miter":return q.AH.MITER;default:return q.AH.ROUND}}function Z(t){switch(t){case"Left":default:return"left";case"Right":return"right";case"Center":return"center";case"Justify":return X.warnOnce("Horizontal alignment 'justify' is not implemented. Falling back to 'center'."),"center"}}function at(t){switch(t){case"Top":default:return"top";case"Center":return"middle";case"Baseline":return"baseline";case"Bottom":return"bottom"}}function D(t,i,o,l){let e;t[i]?e=t[i]:(e={},t[i]=e),e[o]=l}function U(t){const i=t.markerPlacement;return i&&i.angleToLine?q.v2.MAP:q.v2.SCREEN}function Lt(t,i,o,l,e){return Et.apply(this,arguments)}function Et(){return(Et=(0,pt.Z)(function*(t,i,o,l,e){const a=null!=l?l:[];if(!t)return a;let s,n;const r={};if("CIMSymbolReference"!==t.type)return X.error("Expect cim type to be 'CIMSymbolReference'"),a;if(s=t.symbol,n=t.primitiveOverrides,n){const f=[];for(const g of n){const m=g.valueExpressionInfo;if(m&&i){const O=(0,K.Yi)(m.expression,i.spatialReference,i.fields).then(S=>{S&&D(r,g.primitiveName,g.propertyName,S)});f.push(O)}else null!=g.value&&D(r,g.primitiveName,g.propertyName,g.value)}f.length>0&&(yield Promise.all(f))}const c=[];switch(jt(s,o,c),c.length>0&&(yield Promise.all(c)),s.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":yt(s,n,r,i,a,o,e)}return a})).apply(this,arguments)}function yt(t,i,o,l,e,a,s){if(!t)return;const n=t.symbolLayers;if(!n)return;const r=t.effects;let c;const f=x.B$.getSize(t);"CIMPointSymbol"===t.type&&"Map"===t.angleAlignment&&(c=q.v2.MAP);let g=n.length;for(;g--;){const m=n[g];if(!m||!1===m.enable)continue;let p;r&&r.length&&(p=[...r]);const O=m.effects;O&&O.length&&(r?p.push(...O):p=[...O]);const S=[];let v;x.E0.findEffectOverrides(p,i,S),v=S.length>0?ie(p,S,o,l):p;const M=[];switch(x.E0.findApplicableOverrides(m,i,M),m.type){case"CIMSolidFill":gt(m,v,o,M,l,e);break;case"CIMPictureFill":Nt(m,v,o,M,l,a,e);break;case"CIMHatchFill":vt(m,v,o,M,l,e);break;case"CIMGradientFill":St(m,v,o,M,l,e);break;case"CIMSolidStroke":zt(m,v,o,M,l,e,"CIMPolygonSymbol"===t.type,f);break;case"CIMPictureStroke":$t(m,v,o,M,l,e,"CIMPolygonSymbol"===t.type,f);break;case"CIMGradientStroke":Vt(m,v,o,M,l,e,"CIMPolygonSymbol"===t.type,f);break;case"CIMCharacterMarker":if(Yt(m,v,o,M,l,e))break;break;case"CIMPictureMarker":if(Yt(m,v,o,M,l,e))break;"CIMLineSymbol"===t.type&&(c=U(m)),Qt(m,v,o,M,l,a,e,c,f);break;case"CIMVectorMarker":if(Yt(m,v,o,M,l,e))break;"CIMLineSymbol"===t.type&&(c=U(m)),_t(m,v,o,M,l,e,a,c,f,s);break;default:X.error("Cannot analyze CIM layer",m.type)}}}function gt(t,i,o,l,e,a){const s=t.primitiveName,n=(0,h.NO)(t.color),[r,c]=ut(l,s,i,null,null),f=(0,R.hP)(JSON.stringify(t)+c).toString();a.push({type:"fill",templateHash:f,materialHash:r?()=>f:f,cim:t,materialOverrides:null,colorLocked:t.colorLocked,color:y(s,o,"Color",e,n,mt),height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,effects:i,applyRandomOffset:!1,sampleAlphaOnly:!0})}function Nt(t,i,o,l,e,a,s){const n=t.primitiveName,r=t.tintColor?(0,h.NO)(t.tintColor):{r:255,g:255,b:255,a:1},[c,f]=ut(l,n,i,null,null),g=(0,R.hP)(JSON.stringify(t)+f).toString(),m=(0,R.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString();let p=(0,h.NA)(t.scaleX);if("width"in t){const O=t.width;let S=1;const v=a.getResource(t.url);(0,ct.pC)(v)&&(S=v.width/v.height),p/=S*(t.height/O)}s.push({type:"fill",templateHash:g,materialHash:c?()=>m:m,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,color:y(n,o,"TintColor",e,r,mt),height:y(n,o,"Height",e,t.height),scaleX:y(n,o,"ScaleX",e,p),angle:y(n,o,"Rotation",e,(0,h.NA)(t.rotation)),offsetX:y(n,o,"OffsetX",e,(0,h.NA)(t.offsetX)),offsetY:y(n,o,"OffsetY",e,(0,h.NA)(t.offsetY)),url:t.url,applyRandomOffset:!1,sampleAlphaOnly:!1})}function vt(t,i,o,l,e,a){var O;const s=["Rotation","OffsetX","OffsetY"],n=l.filter(S=>S.primitiveName!==t.primitiveName&&!s.includes(S.propertyName)),r=t.primitiveName,[c,f]=ut(l,r,i,null,null),g=(0,R.hP)(JSON.stringify(t)+f).toString(),m=(0,R.hP)(`${t.separation}${JSON.stringify(t.lineSymbol)}`).toString();let p={r:255,g:255,b:255,a:1};if(t.lineSymbol){const S=null==(O=t.lineSymbol)?void 0:O.symbolLayers.find(v=>"CIMSolidStroke"===v.type);S&&(p=(0,h.NO)(S.color))}a.push({type:"fill",templateHash:g,materialHash:c?Rt(m,o,n,e):m,cim:t,materialOverrides:n,colorLocked:t.colorLocked,effects:i,color:p,height:y(r,o,"Separation",e,t.separation),scaleX:1,angle:y(r,o,"Rotation",e,(0,h.NA)(t.rotation)),offsetX:y(r,o,"OffsetX",e,(0,h.NA)(t.offsetX)),offsetY:y(r,o,"OffsetY",e,(0,h.NA)(t.offsetY)),applyRandomOffset:!1,sampleAlphaOnly:!0})}function St(t,i,o,l,e,a){const s=t.primitiveName,[n,r]=ut(l,s,i,null,null),c=(0,R.hP)(JSON.stringify(t)+r).toString();a.push({type:"fill",templateHash:c,materialHash:n?Rt(c,o,l,e):c,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,color:{r:128,g:128,b:128,a:1},height:0,angle:0,offsetX:0,offsetY:0,scaleX:1,applyRandomOffset:!1,sampleAlphaOnly:!1})}function zt(t,i,o,l,e,a,s,n){const r=t.primitiveName,c=(0,h.NO)(t.color),f=void 0!==t.width?t.width:4,g=T(t.capStyle),m=z(t.joinStyle),p=t.miterLimit,[O,S]=ut(l,r,i,null,null),v=(0,R.hP)(JSON.stringify(t)+S).toString();let M,B;if(i&&i instanceof Array&&i.length>0){const L=i[i.length-1];if("CIMGeometricEffectDashes"===L.type&&"NoConstraint"===L.lineDashEnding&&null===L.offsetAlongLine){const I=(i=[...i]).pop();M=I.dashTemplate,B=I.scaleDash}}a.push({type:"line",templateHash:v,materialHash:O?()=>v:v,cim:t,materialOverrides:null,isOutline:s,colorLocked:t.colorLocked,effects:i,color:y(r,o,"Color",e,c,mt),width:y(r,o,"Width",e,f),cap:y(r,o,"CapStyle",e,g),join:y(r,o,"JoinStyle",e,m),miterLimit:y(r,o,"MiterLimit",e,p),referenceWidth:n,zOrder:Tt(t.name),dashTemplate:M,scaleDash:B,sampleAlphaOnly:!0})}function $t(t,i,o,l,e,a,s,n){const r=(0,R.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}`).toString(),c=t.primitiveName,f=(0,h.NO)(t.tintColor),g=void 0!==t.width?t.width:4,m=T(t.capStyle),p=z(t.joinStyle),O=t.miterLimit,[S,v]=ut(l,c,i,null,null),M=(0,R.hP)(JSON.stringify(t)+v).toString();a.push({type:"line",templateHash:M,materialHash:S?()=>r:r,cim:t,materialOverrides:null,isOutline:s,colorLocked:t.colorLocked,effects:i,color:y(c,o,"TintColor",e,f,mt),width:y(c,o,"Width",e,g),cap:y(c,o,"CapStyle",e,m),join:y(c,o,"JoinStyle",e,p),miterLimit:y(c,o,"MiterLimit",e,O),referenceWidth:n,zOrder:Tt(t.name),dashTemplate:null,scaleDash:!1,url:t.url,sampleAlphaOnly:!1})}function Vt(t,i,o,l,e,a,s,n){const r=t.primitiveName,c=void 0!==t.width?t.width:4,f=T(t.capStyle),g=z(t.joinStyle),m=t.miterLimit,[p,O]=ut(l,r,i,null,null),S=(0,R.hP)(JSON.stringify(t)+O).toString();a.push({type:"line",templateHash:S,materialHash:p?Rt(S,o,l,e):S,cim:t,materialOverrides:null,isOutline:s,colorLocked:t.colorLocked,effects:i,color:{r:128,g:128,b:128,a:1},width:y(r,o,"Width",e,c),cap:y(r,o,"CapStyle",e,f),join:y(r,o,"JoinStyle",e,g),miterLimit:y(r,o,"MiterLimit",e,m),referenceWidth:n,zOrder:Tt(t.name),dashTemplate:null,scaleDash:!1,sampleAlphaOnly:!1})}function Yt(t,i,o,l,e,a){const s=t.markerPlacement;if(!s||"CIMMarkerPlacementInsidePolygon"!==s.type)return!1;const n=s,r=Math.abs(n.stepX),c=Math.abs(n.stepY);if(0===r||0===c)return!0;const f=["Rotation","OffsetX","OffsetY"],g=l.filter(I=>I.primitiveName!==t.primitiveName&&!f.includes(I.propertyName)),m="url"in t?t.url:null,[p,O]=ut(l,n.primitiveName,i,null,null),S=(0,R.hP)(JSON.stringify(t)+O).toString();let v,M,B=null;if("Random"===s.gridType){const I=(0,It.Wz)(u.C1),j=Math.max(Math.floor(I/r),1),ot=Math.max(Math.floor(I/c),1);v=c*ot,B=it=>it?it*ot:0,M=j*r/v}else s.shiftOddRows?(v=2*c,B=I=>I?2*I:0,M=r/c*.5):(v=c,B=null,M=r/c);let L={r:255,g:255,b:255,a:1};return"tintColor"in t&&(L=(0,h.NO)(t.tintColor)),a.push({type:"fill",templateHash:S,materialHash:p?Rt(S,o,g,e):S,cim:t,materialOverrides:g,colorLocked:t.colorLocked,effects:i,color:y(n.primitiveName,o,"TintColor",e,L,mt),height:y(n.primitiveName,o,"StepY",e,v,B),scaleX:M,angle:y(n.primitiveName,o,"GridAngle",e,n.gridAngle),offsetX:y(n.primitiveName,o,"OffsetX",e,(0,h.NA)(n.offsetX)),offsetY:y(n.primitiveName,o,"OffsetY",e,(0,h.NA)(n.offsetY)),url:m,applyRandomOffset:"Random"===s.gridType,sampleAlphaOnly:!m}),!0}function Qt(t,i,o,l,e,a,s,n,r){var nt;const c=t.primitiveName,f=(0,h.NA)(t.size);let g=(0,h.NA)(t.scaleX);const m=(0,h.NA)(t.rotation),p=(0,h.NA)(t.offsetX),O=(0,h.NA)(t.offsetY),S=t.tintColor?(0,h.NO)(t.tintColor):{r:255,g:255,b:255,a:1},v=(0,R.hP)(`${t.url}${JSON.stringify(t.colorSubstitutions)}${JSON.stringify(t.animatedSymbolProperties)}`).toString(),M=Wt(t.markerPlacement,l,o,e),B=function ne(t,i,o,l){const e=[];if(x.E0.findApplicableOverrides(t,i,e),0===e.length)return t;for(const a of e)if(a.valueExpressionInfo){const s=o[a.primitiveName]&&o[a.primitiveName][a.propertyName];s instanceof K.mz&&(a.fn=(n,r,c)=>(0,et.Z)(s,n,{$view:c},l.geometryType,r))}return(a,s,n)=>{for(const f of e)f.fn&&(f.value=f.fn(a,s,n));const r=(0,ht.d9)(t),c=t.primitiveName;for(const f of e)if(f.primitiveName===c){const g=Ft(f.propertyName);null!=f.value&&f.value!==r[g]&&(r[g]=f.value)}return r}}(t.animatedSymbolProperties,l,o,e),[L,I]=ut(l,c,i,M,B),j=(0,R.hP)(JSON.stringify(t)+I).toString(),ot=null!=(nt=t.anchorPoint)?nt:{x:0,y:0};if("width"in t){const J=t.width;let Q=1;const _=a.getResource(t.url);(0,ct.pC)(_)&&(Q=_.width/_.height),g/=Q*(f/J)}function it(J,Q){return(0,h.hf)(B,J,Q)}s.push({type:"marker",templateHash:j,materialHash:t.animatedSymbolProperties&&!0===t.animatedSymbolProperties.randomizeStartTime?(J,Q,_,Ct)=>{const Ot=function $(t){return Math.floor(function Y(t,i){let o;if("string"==typeof t)o=(0,R.hP)(t+`-seed(${i})`);else{let l=12;o=t^i;do{o=107*(o>>8^o)+l|0}while(0!=--l)}return(1+o/(1<<31))/2}(t,w)*H)}(Ct),bt=it(J,Q);return v+`-MATERIALGROUP(${Ot})-ASP(${JSON.stringify(bt)})`}:L?(J,Q)=>{const _=it(J,Q);return v+`-ASP(${JSON.stringify(_)})`}:v,cim:t,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:!1,alignment:n,size:y(c,o,"Size",e,f),scaleX:y(c,o,"ScaleX",e,g),rotation:y(c,o,"Rotation",e,m),offsetX:y(c,o,"OffsetX",e,p),offsetY:y(c,o,"OffsetY",e,O),color:y(c,o,"TintColor",e,S,mt),anchorPoint:{x:ot.x,y:-ot.y},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,frameHeight:0,rotateClockwise:t.rotateClockwise,referenceSize:r,sizeRatio:1,markerPlacement:M,url:t.url,animatedSymbolProperties:B})}function _t(t,i,o,l,e,a,s,n,r,c){const f=t.markerGraphics;if(!f)return;let g=0;if(t.scaleSymbolsProportionally){const p=t.frame;p&&(g=p.ymax-p.ymin)}const m=Wt(t.markerPlacement,l,o,e);for(const p of f)if(p){const O=p.symbol;if(!O)continue;switch(O.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":te(t,i,m,null,p,l,o,e,a,s,n,r,g,c);break;case"CIMTextSymbol":qt(t,i,m,p,o,l,e,a,n,r,g)}}}function qt(t,i,o,l,e,a,s,n,r,c,f){x.E0.findApplicableOverrides(l,a,[]);const m=l.geometry;if(!("x"in m)||!("y"in m))return;const p=l.symbol,O=function F(t){return t.underline?"underline":t.strikethrough?"line-through":"none"}(p),S=function st(t){let i="",o="";if(t){const l=t.toLowerCase();l.includes("italic")?i="italic":l.includes("oblique")&&(i="oblique"),l.includes("bold")?o="bold":l.includes("light")&&(o="lighter")}return{style:i,weight:o}}(p.fontStyleName),v=function N(t){const i=t.toLowerCase().split(" ").join("-");switch(i){case"serif":return"noto-serif";case"sans-serif":return"arial-unicode-ms";case"monospace":return"ubuntu-mono";case"fantasy":return"cabin-sketch";case"cursive":return"redressed";default:return i}}(p.fontFamilyName);p.font=Jt({family:v,decoration:O},S);const M=t.frame,B=m.x-.5*(M.xmin+M.xmax),L=m.y-.5*(M.ymin+M.ymax),I=t.size/f,j=t.primitiveName,ot=(0,h.NA)(p.height)*I,it=(0,h.NA)(p.angle),ft=(0,h.NA)(t.offsetX)+((0,h.NA)(p.offsetX)+B)*I,nt=(0,h.NA)(t.offsetY)+((0,h.NA)(p.offsetY)+L)*I,J=(0,h.NO)(x.B$.getFillColor(p));let Q=(0,h.NO)(x.B$.getStrokeColor(p)),_=x.B$.getStrokeWidth(p);_||(Q=(0,h.NO)(x.B$.getFillColor(p.haloSymbol)),_=p.haloSize*I);const[Ct,Ot]=ut(a,j,i,o,null),bt=JSON.stringify(t.effects)+Number(t.colorLocked)+JSON.stringify(t.anchorPoint)+t.anchorPointUnits+JSON.stringify(t.markerPlacement),Pt=(0,R.hP)(JSON.stringify(l)+bt+Ot).toString();let G=y(l.primitiveName,e,"TextString",s,l.textString,h.X3,p.textCase);if(null==G)return;const{fontStyleName:wt}=p,Mt=v+(wt?"-"+wt.toLowerCase():"-regular"),kt=Mt;"string"==typeof G&&G.includes("[")&&p.fieldMap&&(G=(0,h.Qs)(p.fieldMap,G,p.textCase)),n.push({type:"text",templateHash:Pt,materialHash:Ct||"function"==typeof G||G.match(/\[(.*?)\]/)?(tt,Ht,Dt)=>kt+"-"+(0,h.hf)(G,tt,Ht,Dt):kt+"-"+(0,R.hP)(G),cim:p,materialOverrides:null,colorLocked:t.colorLocked,effects:i,alignment:r,anchorPoint:{x:t.anchorPoint?t.anchorPoint.x:0,y:t.anchorPoint?t.anchorPoint.y:0},isAbsoluteAnchorPoint:"Relative"!==t.anchorPointUnits,fontName:Mt,decoration:O,weight:y(j,e,"Weight",s,S.weight),style:y(j,e,"Size",s,S.style),size:y(j,e,"Size",s,ot),angle:y(j,e,"Rotation",s,it),offsetX:y(j,e,"OffsetX",s,ft),offsetY:y(j,e,"OffsetY",s,nt),horizontalAlignment:Z(p.horizontalAlignment),verticalAlignment:at(p.verticalAlignment),text:G,color:J,outlineColor:Q,outlineSize:_,referenceSize:c,sizeRatio:1,markerPlacement:o})}function te(t,i,o,l,e,a,s,n,r,c,f,g,m,p){var B;const O=e.symbol,S=O.symbolLayers;if(!S)return;if(p)return void Bt(t,i,o,l,e,s,a,n,r,c,f,g,m);let v=S.length;if(le(S))return void function ee(t,i,o,l,e,a,s,n,r,c,f,g,m){const p=e.geometry,O=a[0],S=a[1],v=(0,lt.bk)(p);if(!v)return;const[M,B,L]=(0,lt.UV)(v,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),I={type:"sdf",geom:p,asFill:!0},j=t.primitiveName,ot=(0,h.NA)(t.size),it=(0,h.NA)(t.rotation),ft=(0,h.NA)(t.offsetX),nt=(0,h.NA)(t.offsetY),J=S.path,Q=S.primitiveName,_=O.primitiveName,Ct=(0,h.NO)(x.B$.getFillColor(S)),Ot=(0,h.NO)(x.B$.getStrokeColor(O)),bt=x.B$.getStrokeWidth(O);let Pt=!1,G="";for(const tt of s)tt.primitiveName!==Q&&tt.primitiveName!==_&&tt.primitiveName!==j||(void 0!==tt.value?G+=`-${tt.primitiveName}-${tt.propertyName}-${JSON.stringify(tt.value)}`:tt.valueExpressionInfo&&(Pt=!0));const wt=JSON.stringify(Ut(Jt({},t),{markerGraphics:null})),Mt=(0,R.hP)(JSON.stringify(I)+J).toString(),kt={type:"marker",templateHash:(0,R.hP)(JSON.stringify(e)+JSON.stringify(S)+JSON.stringify(O)+wt+G).toString(),materialHash:Pt?()=>Mt:Mt,cim:I,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:f,anchorPoint:{x:B,y:L},isAbsoluteAnchorPoint:!1,size:y(t.primitiveName,n,"Size",r,ot),rotation:y(t.primitiveName,n,"Rotation",r,it),offsetX:y(t.primitiveName,n,"OffsetX",r,ft),offsetY:y(t.primitiveName,n,"OffsetY",r,nt),scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:g,sizeRatio:M,color:y(Q,n,"Color",r,Ct,mt),outlineColor:y(_,n,"Color",r,Ot,mt),outlineWidth:y(_,n,"Width",r,bt),markerPlacement:o,path:J,animatedSymbolProperties:l};c.push(kt)}(t,i,o,l,e,S,a,s,n,r,f,g,m);const M=V.j.applyEffects(O.effects,e.geometry,c.geometryEngine);if(M)for(;v--;){const L=S[v];if(L&&!1!==L.enable)switch(L.type){case"CIMSolidFill":case"CIMSolidStroke":{const I=V.j.applyEffects(L.effects,M,c.geometryEngine),j=(0,lt.bk)(I);if(!j)continue;const[ot,it,ft]=(0,lt.UV)(j,t.frame,t.size,t.anchorPoint,"Relative"!==t.anchorPointUnits),nt="CIMSolidFill"===L.type,J={type:"sdf",geom:I,asFill:nt},Q=t.primitiveName,_=null!=(B=(0,h.NA)(t.size))?B:10,Ct=(0,h.NA)(t.rotation),Ot=(0,h.NA)(t.offsetX),bt=(0,h.NA)(t.offsetY),Pt=L.path,G=L.primitiveName,wt=(0,h.NO)(nt?x.B$.getFillColor(L):x.B$.getStrokeColor(L)),Mt=nt?{r:0,g:0,b:0,a:0}:(0,h.NO)(x.B$.getStrokeColor(L)),kt=x.B$.getStrokeWidth(L);if(!nt&&!kt)break;let tt=!1,Ht="";for(const xt of a)xt.primitiveName!==G&&xt.primitiveName!==Q||(void 0!==xt.value?Ht+=`-${xt.primitiveName}-${xt.propertyName}-${JSON.stringify(xt.value)}`:xt.valueExpressionInfo&&(tt=!0));(0,ct.pC)(i)&&"function"==typeof i&&(tt=!0);const Dt=JSON.stringify(Ut(Jt({},t),{markerGraphics:null})),Gt=(0,R.hP)(JSON.stringify(J)+Pt).toString(),se={type:"marker",templateHash:(0,R.hP)(JSON.stringify(e)+JSON.stringify(L)+Dt+Ht).toString(),materialHash:tt?()=>Gt:Gt,cim:J,materialOverrides:null,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:f,anchorPoint:{x:it,y:ft},isAbsoluteAnchorPoint:!1,size:y(t.primitiveName,s,"Size",n,_),rotation:y(t.primitiveName,s,"Rotation",n,Ct),offsetX:y(t.primitiveName,s,"OffsetX",n,Ot),offsetY:y(t.primitiveName,s,"OffsetY",n,bt),scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:g,sizeRatio:ot,color:y(G,s,"Color",n,wt,mt),outlineColor:y(G,s,"Color",n,Mt,mt),outlineWidth:y(G,s,"Width",n,kt),markerPlacement:o,animatedSymbolProperties:l,path:Pt};r.push(se);break}default:Bt(t,i,o,l,e,s,a,n,r,c,f,g,m)}}}function Bt(t,i,o,l,e,a,s,n,r,c,f,g,m){const p=function oe(t,i){return{type:t.type,enable:!0,name:t.name,colorLocked:t.colorLocked,primitiveName:t.primitiveName,anchorPoint:t.anchorPoint,anchorPointUnits:t.anchorPointUnits,offsetX:0,offsetY:0,rotateClockwise:t.rotateClockwise,rotation:0,size:t.size,billboardMode3D:t.billboardMode3D,depth3D:t.depth3D,frame:t.frame,markerGraphics:[i],scaleSymbolsProportionally:t.scaleSymbolsProportionally,respectFrame:t.respectFrame,clippingPath:t.clippingPath}}(t,e);let O=[];const S=["Rotation","OffsetX","OffsetY"];O=s.filter(J=>J.primitiveName!==t.primitiveName||!S.includes(J.propertyName));let v="";for(const J of s)void 0!==J.value&&(v+=`-${J.primitiveName}-${J.propertyName}-${JSON.stringify(J.value)}`);const[M,B,L]=x.B$.getTextureAnchor(p,c),I=t.primitiveName,j=(0,h.NA)(t.rotation),ot=(0,h.NA)(t.offsetX),it=(0,h.NA)(t.offsetY),ft=(0,R.hP)(JSON.stringify(p)+v).toString(),nt={type:"marker",templateHash:ft,materialHash:O.length>0||(0,ct.pC)(i)&&"function"==typeof i?Rt(ft,a,O,n):ft,cim:p,materialOverrides:O,colorLocked:t.colorLocked,effects:i,scaleSymbolsProportionally:t.scaleSymbolsProportionally,alignment:f,anchorPoint:{x:M,y:B},isAbsoluteAnchorPoint:!1,size:t.size,rotation:y(I,a,"Rotation",n,j),offsetX:y(I,a,"OffsetX",n,ot),offsetY:y(I,a,"OffsetY",n,it),color:{r:255,g:255,b:255,a:1},outlineColor:{r:0,g:0,b:0,a:0},outlineWidth:0,scaleX:1,frameHeight:m,rotateClockwise:t.rotateClockwise,referenceSize:g,sizeRatio:L/(0,It.F2)(t.size),markerPlacement:o,animatedSymbolProperties:l};r.push(nt)}function Tt(t){if(t&&0===t.indexOf("Level_")){const i=parseInt(t.substr(6),10);if(!isNaN(i))return i}return 0}function mt(t){if(!t||0===t.length)return null;const i=new At.Z(t).toRgba();return{r:i[0],g:i[1],b:i[2],a:i[3]}}function y(t,i,o,l,e,a,s){const n=i[t];if(n){const r=n[o];if("string"==typeof r||"number"==typeof r||r instanceof Array)return a?a.call(null,r,s):r;if(null!=r&&r instanceof K.mz)return(c,f,g)=>{let m=(0,et.Z)(r,c,{$view:g},l.geometryType,f);return null!==m&&a&&(m=a.call(null,m,s)),null!==m?m:e}}return e}function Ft(t){return t&&t.charAt(0).toLowerCase()+t.substr(1)}function ie(t,i,o,l){for(const e of i)if(e.valueExpressionInfo){const a=o[e.primitiveName]&&o[e.primitiveName][e.propertyName];a instanceof K.mz&&(e.fn=(s,n,r)=>(0,et.Z)(a,s,{$view:r},l.geometryType,n))}return(e,a,s)=>{for(const r of i)r.fn&&(r.value=r.fn(e,a,s));const n=[];for(let r of t){const c=null==r?void 0:r.primitiveName;if(c){let f=!1;for(const g of i)if(g.primitiveName===c){const m=Ft(g.propertyName);null!=g.value&&g.value!==r[m]&&(f||(r=(0,ht.d9)(r),f=!0),r[m]=g.value)}}n.push(r)}return n}}function Wt(t,i,o,l){const e=[];if(x.E0.findApplicableOverrides(t,i,e),0===e.length)return t;for(const a of e)if(a.valueExpressionInfo){const s=o[a.primitiveName]&&o[a.primitiveName][a.propertyName];s instanceof K.mz&&(a.fn=(n,r,c)=>(0,et.Z)(s,n,{$view:c},l.geometryType,r))}return(a,s,n)=>{for(const f of e)f.fn&&(f.value=f.fn(a,s,n));const r=(0,ht.d9)(t),c=t.primitiveName;for(const f of e)if(f.primitiveName===c){const g=Ft(f.propertyName);null!=f.value&&f.value!==r[g]&&(r[g]=f.value)}return r}}function Rt(t,i,o,l){for(const e of o)if(e.valueExpressionInfo){const a=i[e.primitiveName]&&i[e.primitiveName][e.propertyName];a instanceof K.mz&&(e.fn=(s,n,r)=>(0,et.Z)(a,s,{$view:r},l.geometryType,n))}return(e,a,s)=>{for(const n of o)n.fn&&(n.value=n.fn(e,a,s));return(0,R.hP)(t+x.E0.buildOverrideKey(o)).toString()}}function re(t,i){if(!i||0===i.length)return t;const o=JSON.parse(JSON.stringify(t));return x.E0.applyOverrides(o,i),o}function ut(t,i,o,l,e){let a=!1,s="";for(const n of t)n.primitiveName===i&&(void 0!==n.value?s+=`-${n.primitiveName}-${n.propertyName}-${JSON.stringify(n.value)}`:n.valueExpressionInfo&&(a=!0));return(0,ct.pC)(o)&&"function"==typeof o&&(a=!0),(0,ct.pC)(l)&&"function"==typeof l&&(a=!0),(0,ct.pC)(e)&&"function"==typeof e&&(a=!0),[a,s]}function jt(t,i,o){if(t&&i)switch(t.type){case"CIMPointSymbol":case"CIMLineSymbol":case"CIMPolygonSymbol":{const l=t.symbolLayers;if(!l)return;for(const e of l)switch(ae(e,i,o),e.type){case"CIMPictureFill":case"CIMHatchFill":case"CIMGradientFill":case"CIMPictureStroke":case"CIMGradientStroke":case"CIMCharacterMarker":case"CIMPictureMarker":"url"in e&&e.url&&o.push(i.fetchResource(e.url,null));break;case"CIMVectorMarker":{const a=e.markerGraphics;if(!a)continue;for(const s of a)if(s){const n=s.symbol;n&&jt(n,i,o)}}}}}}const le=t=>t&&2===t.length&&t[0].enable&&t[1].enable&&"CIMSolidStroke"===t[0].type&&"CIMSolidFill"===t[1].type&&!t[0].effects&&!t[1].effects;let Xt;function ae(t,i,o){if(t.effects&&!(0,ct.pC)(i.geometryEngine)){if(Xt)return void o.push(Xt);(0,h.Cc)(t.effects)&&(Xt=(0,h.RI)(),o.push(Xt),Xt.then(l=>i.geometryEngine=l))}}},73608:(rt,W,P)=>{P.d(W,{j:()=>It});var pt=P(91179),At=P(72283),ht=P(29214),dt=P(11004);class It{static executeEffects(K,x,q){const lt=(0,At.GP)(x);let V=new ht.M(lt);for(const et of K){const u=(0,dt.h)(et);u&&(V=u.execute(V,et,1.3333333333333333,q))}return V}static next(K){const x=K.next();return(0,At.wp)(x),x}static applyEffects(K,x,q){if(!K)return x;let lt=new ht.M(x);for(const et of K){const u=(0,dt.h)(et);u&&(lt=u.execute(lt,et,1,q))}let h,V=null;for(;h=lt.next();)V?(0,pt.l9)(V)?(0,pt.l9)(h)&&V.paths.push(...h.paths):(0,pt.oU)(V)&&(0,pt.oU)(h)&&V.rings.push(...h.rings):V=h;return V}}}}]);